Ext.define("Ext.ux.SlidingPager",{requires:["Ext.slider.Single","Ext.slider.Tip"],constructor:function(a){a&&Ext.apply(this,a)},init:function(a){var b,c=a.items.indexOf(a.child("#inputItem"));Ext.each(a.items.getRange(c-2,c+2),function(a){a.hide()}),b=Ext.create("Ext.slider.Single",{width:114,minValue:1,maxValue:1,hideLabel:!0,tipText:function(a){return Ext.String.format("Page <b>{0}</b> of <b>{1}</b>",a.value,a.slider.maxValue)},listeners:{changecomplete:function(b,c){a.store.loadPage(c)}}}),a.insert(c+1,b),a.on({change:function(a,c){b.setMaxValue(c?c.pageCount:1),b.setValue(c?c.currentPage:1)}})}}),Ext.define("Ext.ux.PreviewPlugin",{extend:"Ext.AbstractPlugin",alias:"plugin.preview",requires:["Ext.grid.feature.RowBody","Ext.grid.feature.RowWrap"],hideBodyCls:"x-grid-row-body-hidden",bodyField:"",previewExpanded:!0,setCmp:function(a){this.callParent(arguments);var b=this.bodyField,c=this.hideBodyCls,d=[{ftype:"rowbody",getAdditionalData:function(d){var e=Ext.grid.feature.RowBody.prototype.getAdditionalData,f={rowBody:d[b],rowBodyCls:a.previewExpanded?"":c};return e&&Ext.apply(f,e.apply(this,arguments)),f}},{ftype:"rowwrap"}];a.previewExpanded=this.previewExpanded,a.features||(a.features=[]),a.features=d.concat(a.features)},toggleExpanded:function(a){var b=this.getCmp();this.previewExpanded=b.previewExpanded=a,b.refresh()}}),Ext.define("Ext.ux.form.SearchField",{extend:"Ext.form.field.Trigger",alias:"widget.searchfield",trigger1Cls:Ext.baseCSSPrefix+"form-clear-trigger",trigger2Cls:Ext.baseCSSPrefix+"form-search-trigger",hasSearch:!1,paramName:"query",initComponent:function(){var a=this;a.callParent(arguments),a.on("specialkey",function(b,c){c.getKey()==c.ENTER&&a.onTrigger2Click()}),a.store.remoteFilter=!0,a.store.proxy.hasOwnProperty("filterParam")||(a.store.proxy.filterParam=a.paramName),a.store.proxy.encodeFilters=function(a){return a[0].value}},afterRender:function(){this.callParent(),this.triggerCell.item(0).setDisplayed(!1)},onTrigger1Click:function(){var a=this;a.hasSearch&&(a.setValue(""),a.store.clearFilter(),a.hasSearch=!1,a.triggerCell.item(0).setDisplayed(!1),a.updateLayout())},onTrigger2Click:function(){var a=this,b=a.getValue();b.length>0&&(a.store.filter({id:a.paramName,property:a.paramName,value:b}),a.hasSearch=!0,a.triggerCell.item(0).setDisplayed(!0),a.updateLayout())}}),Ext.define("App.ux.RatingField",{extend:"Ext.form.field.Number",alias:"widget.ratingField",componentCls:"x-form-rating",ratingClassReset:"ux-rating-reset",starCls:"ux-rating-star",margin:"4 10",numberOfStars:5,minValue:0,maxValue:5,split:1,canReset:!0,resetPosition:"right",emptyText:"",keyNavEnabled:!0,initComponent:function(){var a=this;Ext.applyIf(a,{maxValue:5,minValue:0,split:1,numberOfStars:5,titles:{}});{var b,c,d,e,f,g=[],h=a.split,i=16/h,j=a.numberOfStars,k=j*h-1,l=a.minValue;a.maxValue}for(c in a.titles)g.push({val:1*c,title:a.titles[c]});for(b=!!g.length,Ext.Array.sort(g,function(a,b){return a.val>b.val}),a.stars=[],a.values=[],a.titles=[],a.starWidth=i,a.value||(a.value=l),f=0;k>=f;f++)d=f+1,b?(g.length&&g[1].val<=d&&(g=g.slice(1)),e=g[0].title):e=d,a.stars.push({key:d,title:e,margin:f%h*i}),a.values.push(d),a.titles.push(e);a.msgTarget="side",a.starClsOn=a.starCls+"-on",a.starClsHover=a.starCls+"-hover",a.starClsFocus=a.starCls+"-focus",a.callParent()},setValue:function(val){var me=this;me.callParent(arguments),me.afterSetValue(eval(val))},afterSetValue:function(a){var b=this;if(b.rendered){var c=b.getValueIndex(a);-1===c?(b.canReset&&b.resetEl.setOpacity(.5),b.fillNone(),b.selected=-1):c!==b.selected&&(b.canReset&&b.resetEl.setOpacity(.99),b.selected=c,b.fillTo(c,!1))}},getValueIndex:function(a){var b=this;if(a==b.emptyText||!Ext.isDefined(a)||a>b.maxValue||a<b.minValue)return-1;var c=b.values.indexOf(a);return c>-1?c:Ext.each(b.values,function(b){return b>=a?!1:void 0})},addFocusListener:function(){var a=this;a.focusListenerAdded||(a.focusEl.on({focus:a.onFocus,blur:a.onBlur,scope:a}),a.focusListenerAdded=!0)},onFocus:function(){var a=this;a.isReactive()&&a.bodyEl.addCls(a.starClsFocus)},onBlur:function(){var a=this;a.bodyEl.removeCls(a.starClsFocus)},afterRender:function(){var a=this,b="right"==a.resetPosition,c='<div class="reset-el '+a.ratingClassReset+'" title="reset" style="margin-'+(b?"left":"right")+':5px;"></div>';a.callParent();var d=new Ext.XTemplate('<div class="ux-rating-container ux-rating-clearfix" tabIndex="'+a.tabIndex+'">',b?"":c,'<tpl for=".">','<div key="{key}" class="',a.starCls,'" style="width: ',a.starWidth,'px;">','<a title="{title}" style="margin-left: -{margin}px;">{key}</a>',"</div>","</tpl>",'<input type="hidden" name="',a.getName(),'" class="input-el" tabIndex="'+a.tabIndex+'"></hidden>',b?c:"",'<a class="focus-el" tabIndex="0"></a>',"</div>",{compiled:!0});a.stars=d.overwrite(a.bodyEl,a.stars,!0).query("."+a.starCls),a.focusEl=Ext.get(Ext.query("a.focus-el",a.bodyEl.dom[0])),a.inputEl=Ext.get(Ext.query("input.input-el",a.bodyEl.dom)[0]),a.resetEl=Ext.get(Ext.query("div.reset-el",a.bodyEl.dom)[0])},initEvents:function(){var a=this;a.callParent(arguments),a.bodyEl.on({click:a.onStarClick,mouseover:a.onStarOver,mouseout:a.onStarOut,scope:a,delegate:"div.ux-rating-star"}),a.canReset&&(a.resetEl.visibilityMode=Ext.Element.DISPLAY,a.resetEl.hover(function(){a.isReactive()&&a.getValue()>0&&Ext.fly(this).addCls("ux-rating-reset-hover")},function(){a.isReactive()&&Ext.fly(this).removeCls("ux-rating-reset-hover")}),a.resetEl.on("click",a.reset,a)),a.keyNavEnabled&&(a.spinnerKeyNav=new Ext.util.KeyNav(a.focusEl,{scope:a,up:a.spinUp,down:a.spinDown,right:a.spinUp,left:a.spinDown,space:a.reset,del:a.reset})),a.setValue(a.value)},reset:function(){this.isReactive()&&this.getValue()>0&&(this.setValue(0),this.fireEvent("click",this,0))},isReactive:function(){return!this.readOnly&&!this.disabled},onStarClick:function(a,b){var c,d=this;d.isReactive()&&(c=d.values[d.stars.indexOf(b)],d.setValue(c),d.fireEvent("click",d,c))},onStarOver:function(a,b){this.isReactive()&&this.fillTo(this.stars.indexOf(b),!0)},onStarOut:function(){this.isReactive()&&this.fillTo(this.selected)},fillTo:function(a,b){var c=this;if(-1!=a){var d=b?c.starClsHover:c.starClsOn,e=b?c.starClsOn:c.starClsHover;Ext.each(c.stars.slice(0,a+1),function(){Ext.fly(this).removeCls(e).addCls(d)}),Ext.each(c.stars.slice(a+1),function(){Ext.fly(this).removeCls([e,d])})}else c.fillNone()},fillNone:function(){this.bodyEl.select(".ux-rating-star").removeCls(["ux-rating-star-hover","ux-rating-star-on"])}}),Ext.define("App.ux.grid.GridToHtml",{requires:"Ext.XTemplate",statics:{getHtml:function(a){var b=[];Ext.each(a.columns,function(a){a.items.length>0?b=b.concat(a.items.items):b.push(a)});var c=[];a.store.data.each(function(d,e){var f={};for(var g in d.data){var h=d.data[g];Ext.each(b,function(b,c){if(b&&b.dataIndex==g){var i={item:"",tdAttr:"",style:""};h=b.renderer?b.renderer.call(a,h,i,d,e,c,a.store,a.view):h;var j=Ext.String.createVarName(b.dataIndex);f[j]=h}else if(b&&"rownumberer"===b.xtype){var j=Ext.String.createVarName(b.id);f[j]=e+1}else if(b&&"templatecolumn"===b.xtype){h=b.tpl?b.tpl.apply(d.data):h;var j=Ext.String.createVarName(b.id);f[j]=h}},this)}c.push(f)});var d=[];Ext.each(b,function(a){!a||Ext.isEmpty(a.dataIndex)||a.hidden?a&&"rownumberer"===a.xtype?(a.text="Row",d.push(a)):a&&"templatecolumn"===a.xtype&&d.push(a):d.push(a)}),b=d,null===this.stylesheetPath&&(this.stylesheetPath=globals.url+"/resources/css/print.css");var e=Ext.create("Ext.XTemplate",this.headerTpl).apply(b),f=Ext.create("Ext.XTemplate",this.bodyTpl).apply(b),g="",h=[];Ext.each(a.plugins,function(a){"rowexpander"==a.ptype&&(g+=a.rowBodyTpl.join(""))}),""!=g&&(h=['<tr style="{[xindex % 2 === 0 ? "even" : "odd"]}">   <td style="{[xindex % 2 === 0 ? "background-color: #ffffff;" : "background-color: #f9f9f9;"]}" colspan="'+b.length+'">',g,"</td></tr>"]),a.title="undefined"==typeof a.title?"":" :: "+a.title;var i=['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">','<html class="'+Ext.baseCSSPrefix+'ux-grid-printer">',"   <head>",'       <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />',"       <title>GaiaEHR :: Print"+a.title+"</title>","   </head>",'   <body class="'+Ext.baseCSSPrefix+'ux-grid-printer-body">',"       <h1>"+this.mainTitle+"</h1>","       <table>","           <tr>",e,"</tr>",'           <tpl for=".">','               <tr style="{[xindex % 2 === 0 ? "background-color: #ffffff;" : "background-color: #f9f9f9;"]}">',f,"</tr>",h.join(""),"           </tpl>","       </table>","   </body>","</html>"];return Ext.create("Ext.XTemplate",i).apply(c)},stylesheetPath:null,mainTitle:"",headerTpl:['<tpl for=".">','   <th style="background-color: #CCCCCC; padding: 5px; border-bottom-width: 1px; border-bottom-color: black">{text}</th>',"</tpl>"],bodyTpl:['<tpl for=".">','<tpl if="values.dataIndex">',"   <td>{{[Ext.String.createVarName(values.dataIndex)]}}</td>","   <tpl else>","       <td>{{[Ext.String.createVarName(values.id)]}}</td>","   </tpl>","</tpl>"]}}),Ext.define("App.ux.ActivityMonitor",{singleton:!0,controller:null,ui:null,runner:null,task:null,lastActive:null,ready:!1,verbose:!1,interval:6e4,maxInactive:12e4,init:function(a){a||(a={}),Ext.apply(this,a,{runner:new Ext.util.TaskRunner,ui:Ext.getBody(),task:{run:this.monitorUI,interval:a.interval||this.interval,scope:this}}),this.ready=!0},isReady:function(){return this.ready},isActive:Ext.emptyFn,isInactive:Ext.emptyFn,start:function(){return this.isReady()?(this.ui.on("mousemove",this.captureActivity,this),this.ui.on("keydown",this.captureActivity,this),this.lastActive=new Date,this.log("ActivityMonitor has been started."),this.runner.start(this.task),!0):(this.log("Please run ActivityMonitor.init()"),!1)},stop:function(){return this.isReady()?(this.runner.stop(this.task),this.lastActive=null,this.ui.un("mousemove",this.captureActivity),this.ui.un("keydown",this.captureActivity),this.log("ActivityMonitor has been stopped."),!0):(this.log("Please run ActivityMonitor.init()"),!1)},captureActivity:function(){this.controller.logoutWarinigWindow&&this.controller.cancelAutoLogout(),this.lastActive=new Date},monitorUI:function(){var a=new Date,b=a-this.lastActive;b>=this.maxInactive?(this.log("MAXIMUM INACTIVE TIME HAS BEEN REACHED"),this.stop(),this.isInactive()):(this.log("CURRENTLY INACTIVE FOR "+Math.floor(b/1e3)+" SECONDS)"),this.isActive())},log:function(a){this.verbose&&window.console.log(a)}}),Ext.define("App.ux.grid.Printer",{requires:"Ext.XTemplate",statics:{print:function(a){var b=[];Ext.each(a.columns,function(a){a.items.length>0?b=b.concat(a.items.items):b.push(a)});var c=[];a.store.data.each(function(d,e){var f={};for(var g in d.data){var h=d.data[g];Ext.each(b,function(b,c){if(b&&b.dataIndex==g){var i={item:"",tdAttr:"",style:""};h=b.renderer?b.renderer.call(a,h,i,d,e,c,a.store,a.view):h;var j=Ext.String.createVarName(b.dataIndex);f[j]=h}else if(b&&"rownumberer"===b.xtype){var j=Ext.String.createVarName(b.id);f[j]=e+1}else if(b&&"templatecolumn"===b.xtype){h=b.tpl?b.tpl.apply(d.data):h;var j=Ext.String.createVarName(b.id);f[j]=h}},this)}c.push(f)});var d=[];Ext.each(b,function(a){!a||Ext.isEmpty(a.dataIndex)||a.hidden?a&&"rownumberer"===a.xtype?(a.text="Row",d.push(a)):a&&"templatecolumn"===a.xtype&&d.push(a):d.push(a)}),b=d,null===this.stylesheetPath&&(this.stylesheetPath=globals.url+"/resources/css/print.css");var e=Ext.create("Ext.XTemplate",this.headerTpl).apply(b),f=Ext.create("Ext.XTemplate",this.bodyTpl).apply(b),g="",h=[];Ext.each(a.plugins,function(a){"rowexpander"==a.ptype&&(g+=a.rowBodyTpl.join(""))}),""!=g&&(h=['<tr class="{[xindex % 2 === 0 ? "even" : "odd"]}"><td colspan="'+b.length+'">',g,"</td></tr>"]),a.title="undefined"==typeof a.title?"":" :: "+a.title;var i=['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">','<html class="'+Ext.baseCSSPrefix+'ux-grid-printer">',"   <head>",'       <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />','       <link href="'+this.stylesheetPath+'" rel="stylesheet" type="text/css" />',"       <title>GaiaEHR :: Print"+a.title+"</title>","   </head>",'   <body class="'+Ext.baseCSSPrefix+'ux-grid-printer-body">','       <div class="'+Ext.baseCSSPrefix+"ux-grid-printer-noprint "+Ext.baseCSSPrefix+'ux-grid-printer-links">','           <a class="'+Ext.baseCSSPrefix+'ux-grid-printer-linkprint" href="javascript:void(0);" onclick="window.print();">'+this.printLinkText+"</a>",'           <a class="'+Ext.baseCSSPrefix+'ux-grid-printer-linkclose" href="javascript:void(0);" onclick="window.close();">'+this.closeLinkText+"</a>","       </div>","       <h1>"+this.mainTitle+"</h1>","       <table>","           <tr>",e,"</tr>",'           <tpl for=".">','               <tr class="{[xindex % 2 === 0 ? "even" : "odd"]}">',f,"</tr>",h.join(""),"           </tpl>","       </table>","   </body>","</html>"],j=Ext.create("Ext.XTemplate",i).apply(c),k=window.open("GaiaEHR :: Print","printgrid");k.document.open(),k.document.write(j),k.document.close(),this.printAutomatically&&k.print(),this.closeAutomaticallyAfterPrint&&(Ext.isIE?window.close():k.close())},stylesheetPath:null,printAutomatically:!1,closeAutomaticallyAfterPrint:!1,mainTitle:"",printLinkText:"Print",closeLinkText:"Close",headerTpl:['<tpl for=".">',"   <th>{text}</th>","</tpl>"],bodyTpl:['<tpl for=".">','<tpl if="values.dataIndex">',"   <td>{{[Ext.String.createVarName(values.dataIndex)]}}</td>","   <tpl else>","       <td>{{[Ext.String.createVarName(values.id)]}}</td>","   </tpl>","</tpl>"]}}),Ext.define("App.ux.LiveImmunizationSearch",{extend:"Ext.form.ComboBox",alias:"widget.immunizationlivesearch",hideLabel:!0,displayField:"name",valueField:"cvx_code",initComponent:function(){var a=this;Ext.define("liveImmunizationSearchModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"cvx_code",type:"string"},{name:"name",type:"string"},{name:"description",type:"string"},{name:"note",type:"string"},{name:"update_date",type:"date",dateFormat:"Y-m-d H:i:s"}],proxy:{type:"direct",api:{read:Immunizations.getImmunizationLiveSearch},reader:{totalProperty:"totals",root:"rows"}}}),a.store=Ext.create("Ext.data.Store",{model:"liveImmunizationSearchModel",pageSize:10,autoLoad:!1}),Ext.apply(this,{store:a.store,emptyText:_("search_for_a_immunizations")+"...",typeAhead:!0,minChars:1,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item">CVX - {cvx_code}: <span style="font-weight: normal">{name}</span></div>'}},pageSize:10}),a.callParent()}}),Ext.define("App.ux.AbstractPanel",{calculatePercent:function(a,b){return 100*(a/b)},setReadOnly:function(a){for(var b=this.query("form"),c=0;c<b.length;c++){var d,e=b[c];if(e.readOnly!=a){e.readOnly=a,d=e.getForm().getFields().items;for(var f=0;f<d.length;f++)d[f].setReadOnly(a)}}return a},setButtonsDisabled:function(a,b){for(var c=b||app.patient.readOnly,d=0;d<a.length;d++){var e=a[d];e.disabled!=c&&(e.disabled=c,e.setDisabled(c))}},goBack:function(){app.nav.goBack()},checkIfCurrPatient:function(){return app.getCurrPatient()},patientInfoAlert:function(){var a=app.getCurrPatient();Ext.Msg.alert(_("status"),_("patient")+": "+a.name+" ("+a.pid+")")},currPatientError:function(){Ext.Msg.show({title:"Oops! "+_("no_patient_selected"),msg:_("select_patient_patient_live_search"),scope:this,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR,fn:function(){this.goBack()}})},getFormItems:function(formPanel,formToRender,callback){formPanel&&formPanel.removeAll(),FormLayoutEngine.getFields({formToRender:formToRender},function(provider,response){var items=eval(response.result),form=formPanel?formPanel.add(items):!1;return"function"==typeof callback&&callback(formPanel,items,!0),form})},boolRenderer:function(a){return"1"==a||1==a||"true"==a?'<div style="margin-left:auto; margin-right:auto; width:16"><img src="resources/images/icons/yes.gif" /></div>':"0"==a||0==a||"false"==a?'<div style="margin-left:auto; margin-right:auto; width:16"><img src="resources/images/icons/no.gif" /></div>':a},alertRenderer:function(a){return"1"==a||1==a||"true"==a?'<img style="padding-left: 13px" src="resources/images/icons/no.gif" />':"0"==a||0==a||"false"==a?'<img style="padding-left: 13px" src="resources/images/icons/yes.gif" />':a},warnRenderer:function(a,b,c){say(c);var d=c.data.warningMsg?c.data.warningMsg:"";return"1"==a||1==a||"true"==a?'<img src="resources/images/icons/icoImportant.png" '+d+" />":a},onExpandRemoveMask:function(a){a.picker.loadMask.destroy()},strToLowerUnderscores:function(a){return a.toLowerCase().replace(/ /gi,"_")},getCurrPatient:function(){return app.getCurrPatient()},getApp:function(){return app.getApp()},msg:function(a,b){app.msg(a,b)},alert:function(a,b){app.alert(a,b)},passwordVerificationWin:function(a){var b=Ext.Msg.prompt(_("password_verification"),_("please_enter_your_password")+":",function(b,c){a(b,c)}),c=b.textField.getInputId();return document.getElementById(c).type="password",b},getPageHeader:function(){return this.getComponent("RenderPanel-header")},getPageBodyContainer:function(){return this.getComponent("RenderPanel-body-container")},getPageBody:function(){return this.getPageBodyContainer().down("panel")}}),Ext.define("App.ux.LiveCPTSearch",{extend:"Ext.form.field.ComboBox",alias:"widget.livecptsearch",hideLabel:!0,triggerTip:_("click_to_clear_selection"),spObj:"",spForm:"",spExtraParam:"",displayField:"code_text",valueField:"code",qtip:_("clearable_combo_box"),trigger1Class:"x-form-select-trigger",trigger2Class:"x-form-clear-trigger",initComponent:function(){var a=this;Ext.define("liveCPTSearchModel",{extend:"Ext.data.Model",fields:[{name:"id"},{name:"eid"},{name:"code",type:"strig"},{name:"code_text",type:"string"},{name:"code_text_medium",type:"string"},{name:"code_type",type:"string",defaultValue:"CPT"},{name:"place_of_service",type:"string"},{name:"emergency",type:"string"},{name:"charge",type:"string"},{name:"days_of_units",type:"string"},{name:"essdt_plan",type:"string"},{name:"modifiers",type:"string"}],proxy:{type:"direct",api:{read:"Services.liveCodeSearch"},reader:{totalProperty:"totals",root:"rows"},extraParams:{code_type:"cpt"}}}),a.store=Ext.create("Ext.data.Store",{model:"liveCPTSearchModel",pageSize:25,autoLoad:!1}),Ext.apply(this,{store:a.store,emptyText:_("search")+"...",typeAhead:!1,hideTrigger:!0,minChars:1,anchor:"100%",listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item">{code}: {code_text}</div>'}},pageSize:25}),a.callParent()},onRender:function(){this.callParent(arguments);var a=this.getId();this.triggerConfig={tag:"div",cls:"x-form-twin-triggers",style:"display:block;",cn:[{tag:"img",style:Ext.isIE?"margin-left:0;height:21px":"",src:Ext.BLANK_IMAGE_URL,id:"trigger2"+a,name:"trigger2"+a,cls:"x-form-trigger "+this.trigger2Class}]},this.triggerEl.replaceWith(this.triggerConfig),this.triggerEl.on("mouseup",function(b){b.target.name=="trigger2"+a&&(this.reset(),this.oldValue=null,""!==this.spObj&&""!==this.spExtraParam&&(Ext.getCmp(this.spObj).store.setExtraParam(this.spExtraParam,""),Ext.getCmp(this.spObj).store.load()),""!==this.spForm&&Ext.getCmp(this.spForm).getForm().reset())},this);var b=Ext.get("trigger2"+a);b.addClsOnOver("x-form-trigger-over")}}),Ext.define("App.ux.LiveICDXSearch",{extend:"Ext.form.ComboBox",alias:"widget.liveicdxsearch",hideLabel:!0,triggerTip:_("click_to_clear_selection"),spObj:"",spForm:"",spExtraParam:"",qtip:_("clearable_combo_box"),trigger1Class:"x-form-select-trigger",trigger2Class:"x-form-clear-trigger",displayField:"code_text",valueField:"code",initComponent:function(){var a=this;Ext.define("liveICDXSearchModel"+this.id,{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"code",type:"string"},{name:"xcode",type:"string"},{name:"code_text",type:"string"},{name:"code_type",type:"string"}],proxy:{type:"direct",api:{read:"DiagnosisCodes.ICDCodeSearch"},reader:{totalProperty:"totals",root:"rows"}}}),a.store=Ext.create("Ext.data.Store",{model:"liveICDXSearchModel"+this.id,pageSize:1e3,autoLoad:!1}),Ext.apply(this,{store:a.store,emptyText:_("search")+"...",typeAhead:!1,minChars:1,anchor:"100%",listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item">{code_type} <span style="font-weight: bold;">{code}</span>: {code_text}</div>'}}}),a.callParent()},onRender:function(){this.callParent(arguments);var a=this.getId();this.triggerConfig={tag:"div",cls:"x-form-twin-triggers",style:"display:block;",cn:[{tag:"img",style:Ext.isIE?"margin-left:0;height:21px":"",src:Ext.BLANK_IMAGE_URL,id:"trigger2"+a,name:"trigger2"+a,cls:"x-form-trigger "+this.trigger2Class}]},this.triggerEl.replaceWith(this.triggerConfig),this.triggerEl.on("mouseup",function(b){b.target.name=="trigger2"+a&&(this.reset(),this.oldValue=null,""!==this.spObj&&""!==this.spExtraParam&&(Ext.getCmp(this.spObj).store.setExtraParam(this.spExtraParam,""),Ext.getCmp(this.spObj).store.load()),""!==this.spForm&&Ext.getCmp(this.spForm).getForm().reset())},this);var b=Ext.get("trigger2"+a);b.addClsOnOver("x-form-trigger-over")}}),Ext.define("App.ux.LiveMedicationSearch",{extend:"Ext.form.ComboBox",alias:"widget.medicationlivetsearch",initComponent:function(){var a=this;Ext.define("liveMedicationsSearchModel",{extend:"Ext.data.Model",fields:[{name:"id"},{name:"PROPRIETARYNAME"},{name:"PRODUCTNDC"},{name:"NONPROPRIETARYNAME"},{name:"ACTIVE_NUMERATOR_STRENGTH"},{name:"ACTIVE_INGRED_UNIT"}],proxy:{type:"direct",api:{read:"Rxnorm.getRXNORMLiveSearch"},reader:{totalProperty:"totals",root:"rows"}}}),a.store=Ext.create("Ext.data.Store",{model:"liveMedicationsSearchModel",pageSize:10,autoLoad:!1}),Ext.apply(this,{store:a.store,displayField:"PROPRIETARYNAME",valueField:"id",emptyText:_("search_for_a_medication")+"...",typeAhead:!1,hideTrigger:!0,minChars:1,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item"><h3>{PROPRIETARYNAME}<span style="font-weight: normal"> ({NONPROPRIETARYNAME}) </span></h3>{ACTIVE_NUMERATOR_STRENGTH} | {ACTIVE_INGRED_UNIT}</div>'}},pageSize:10}),a.callParent()}}),Ext.define("App.ux.LiveLabsSearch",{extend:"Ext.form.ComboBox",alias:"widget.labslivetsearch",hideLabel:!0,initComponent:function(){var a=this;Ext.define("liveLoincSearchModel",{extend:"Ext.data.Model",fields:[{name:"id"},{name:"loinc_name"},{name:"loinc_number"}],proxy:{type:"direct",api:{read:"Laboratories.getLabLoincLiveSearch"},reader:{totalProperty:"totals",root:"rows"}}}),a.store=Ext.create("Ext.data.Store",{model:"liveLoincSearchModel",pageSize:10,autoLoad:!1}),Ext.apply(this,{store:a.store,displayField:"loinc_name",valueField:"loinc_name",emptyText:_("search")+"...",typeAhead:!1,hideTrigger:!0,minChars:1,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item"><h3>{loinc_name} ({loinc_number})</h3></div>'}},pageSize:10}),a.callParent()}}),Ext.define("App.ux.LiveCDTSearch",{extend:"Ext.form.ComboBox",alias:"widget.cdtlivetsearch",hideLabel:!0,initComponent:function(){var a=this;Ext.define("liveCDTSearchModel",{extend:"Ext.data.Model",fields:[{name:"id"},{name:"code"},{name:"text"}],proxy:{type:"direct",api:{read:"Medical.getCDTLiveSearch"},reader:{totalProperty:"totals",root:"rows"}}}),a.store=Ext.create("Ext.data.Store",{model:"liveCDTSearchModel",pageSize:10,autoLoad:!1}),Ext.apply(this,{store:a.store,displayField:"text",valueField:"code",emptyText:_("search_for_a_CDT")+"...",typeAhead:!1,hideTrigger:!0,minChars:1,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item"><h3>{code}<span style="font-weight: normal"> ({text}) </span></h3></div>'}},pageSize:10}),a.callParent()}}),Ext.define("App.ux.LiveRXNORMAllergySearch",{extend:"Ext.form.ComboBox",alias:"widget.rxnormallergylivetsearch",hideLabel:!0,displayField:"STR",valueField:"STR",initComponent:function(){var a=this;Ext.define("liveRXNORMAllergySearchModel",{extend:"Ext.data.Model",fields:[{name:"RXCUI",type:"auto"},{name:"CODE",type:"auto"},{name:"STR",type:"auto"},{name:"DST",type:"auto"},{name:"DRT",type:"auto"},{name:"DDF",type:"auto"},{name:"DDFA",type:"auto"},{name:"RXN_QUANTITY",type:"auto"},{name:"SAB",type:"auto"},{name:"RXAUI",type:"auto"},{name:"CodeType",defaultValue:"RXNORM"}],proxy:{type:"direct",api:{read:"Rxnorm.getRXNORMAllergyLiveSearch"},reader:{totalProperty:"totals",root:"rows"}}}),a.store=Ext.create("Ext.data.Store",{model:"liveRXNORMAllergySearchModel",pageSize:25,autoLoad:!1}),Ext.apply(this,{store:a.store,emptyText:_("search")+"...",typeAhead:!1,hideTrigger:!0,minChars:3,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item"><h3>{STR}<span style="font-weight: normal"> ({RXCUI}) </span></h3></div>'}},pageSize:25}),a.callParent()}}),Ext.define("App.ux.LiveRXNORMSearch",{extend:"Ext.form.ComboBox",alias:"widget.rxnormlivetsearch",hideLabel:!0,displayField:"STR",valueField:"RXCUI",initComponent:function(){var a=this;Ext.define("liveRXNORMSearchModel",{extend:"Ext.data.Model",fields:[{name:"RXCUI",type:"auto"},{name:"CODE",type:"auto"},{name:"NDC",type:"auto"},{name:"STR",type:"auto"},{name:"DST",type:"auto"},{name:"DRT",type:"auto"},{name:"DDF",type:"auto"},{name:"DDFA",type:"auto"},{name:"RXN_QUANTITY",type:"auto"},{name:"SAB",type:"auto"},{name:"RXAUI",type:"auto"},{name:"CodeType",defaultValue:"RXNORM"}],proxy:{type:"direct",api:{read:"Rxnorm.getRXNORMLiveSearch"},reader:{totalProperty:"totals",root:"rows"}}}),a.store=Ext.create("Ext.data.Store",{model:"liveRXNORMSearchModel",pageSize:25,autoLoad:!1}),Ext.apply(this,{store:a.store,emptyText:_("search")+"...",typeAhead:!1,hideTrigger:!0,minChars:3,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item"><h3>{STR}<span style="font-weight: normal"> ({RXCUI}) </span></h3></div>'}},pageSize:25}),a.callParent()}}),Ext.define("App.ux.LivePatientSearch",{extend:"Ext.form.ComboBox",alias:"widget.patienlivetsearch",hideLabel:!0,displayField:"fullname",valueField:"pid",emptyText:_("search_for_a_patient")+"...",maxLength:40,typeAhead:!1,hideTrigger:!0,minChars:1,queryDelay:200,initComponent:function(){var a=this;Ext.define("patientLiveSearchModel",{extend:"Ext.data.Model",fields:[{name:"pid",type:"int"},{name:"pubpid",type:"int"},{name:"fname",type:"string"},{name:"mname",type:"string"},{name:"lname",type:"string"},{name:"fullname",type:"string",convert:function(a,b){return b.data.fname+" "+b.data.mname+" "+b.data.lname}},{name:"DOB",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"sex",type:"string"},{name:"SS",type:"string"}],proxy:{type:"direct",api:{read:"Patient.patientLiveSearch"},reader:{totalProperty:"totals",root:"rows"}}}),a.store=Ext.create("Ext.data.Store",{model:"patientLiveSearchModel",pageSize:10,autoLoad:!1}),Ext.apply(a,{store:a.store,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item"><h3><span>{fullname}</span> ({pid})</h3><span style="font-weight: bold">DOB:</span> {[Ext.Date.format(values.DOB, g("date_time_display_format"))]} <span style="font-weight: bold">SS:</span> {SS}</div>'}},pageSize:10}),a.callParent()}}),Ext.define("App.ux.LiveSigsSearch",{extend:"Ext.form.field.ComboBox",alias:"widget.livesigssearch",initComponent:function(){var a=this;Ext.define("liveSigsSearchModel",{extend:"Ext.data.Model",fields:[{name:"option_value",type:"string"},{name:"option_name",type:"string"}],proxy:{type:"direct",api:{read:"Prescriptions.getSigCodesByQuery"}}}),a.store=Ext.create("Ext.data.Store",{model:"liveSigsSearchModel",pageSize:25,autoLoad:!1}),Ext.apply(a,{store:a.store,displayField:"option_value",valueField:"option_value",emptyText:_("search")+"...",typeAhead:!1,hideTrigger:!0,minChars:1,anchor:"100%",listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item">{option_value} ({option_name})</div>'}},listeners:{scope:a,beforeselect:a.onBeforeSigSelect,select:a.onBeSigSelect}}),a.callParent(arguments)},onBeforeSigSelect:function(a,b){say(a),say(b)},onBeSigSelect:function(a,b){say(a),say(b)}}),Ext.define("App.ux.LiveSurgeriesSearch",{extend:"Ext.form.ComboBox",alias:"widget.surgerieslivetsearch",hideLabel:!0,initComponent:function(){var a=this;Ext.define("liveSurgeriesSearchModel",{extend:"Ext.data.Model",fields:[{name:"id"},{name:"type"},{name:"type_num"},{name:"surgery"}],proxy:{type:"direct",api:{read:Medical.getSurgeriesLiveSearch},reader:{totalProperty:"totals",root:"rows"}}}),a.store=Ext.create("Ext.data.Store",{model:"liveSurgeriesSearchModel",pageSize:10,autoLoad:!1}),Ext.apply(this,{store:a.store,displayField:"surgery",valueField:"id",emptyText:_("search_for_a_surgery")+"...",typeAhead:!1,hideTrigger:!0,minChars:1,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item"><h3>{surgery}<span style="font-weight: normal"> ({type}) </span></h3></div>'}},pageSize:10}),a.callParent()}}),Ext.define("App.ux.NodeDisabled",{alias:"plugin.nodedisabled",extend:"Ext.AbstractPlugin",disabledCls:"tree-node-disabled",preventSelection:!0,preventChecking:!0,init:function(a){var b,c,d=this,e=a.getView();d.callParent(arguments),b=e.getRowClass,b?(c=e.scope||d,Ext.apply(e,{getRowClass:function(){var a,e;return a=b.apply(c,arguments)||"",e=d.getRowClass.apply(d,arguments)||"",a&&e?a+" "+e:a+e}})):Ext.apply(e,{getRowClass:Ext.Function.bind(d.getRowClass,d)}),d.preventSelection&&a.getSelectionModel().on("beforeselect",d.onBeforeNodeSelect,d),d.preventChecking&&a.on("checkchange",d.checkchange,d)},getCmp:function(){return this.callParent(arguments)},getRowClass:function(a){return a.get("disabled")?this.disabledCls:""},onBeforeNodeSelect:function(a,b){return b.get("disabled")?!1:void 0},checkchange:function(a,b){a.get("disabled")&&a.set("checked",!b)}}),Ext.define("App.ux.PhotoIdWindow",{extend:"Ext.window.Window",alias:"widget.photoidwindow",height:320,width:320,layout:"fit",renderTo:document.body,initComponent:function(){var a=this;window.webcam.set_api_url("dataProvider/WebCamImgHandler.php"),window.webcam.set_swf_url("lib/jpegcam/htdocs/webcam.swf"),window.webcam.set_quality(100),window.webcam.set_shutter_sound(!0,"lib/jpegcam/htdocs/shutter.mp3"),window.webcam.set_hook("onComplete","onWebCamComplete"),Ext.apply(a,{html:window.webcam.get_html(320,320),buttons:[{text:_("capture"),iconCls:"save",handler:a.captureToCanvas},{text:_("cancel"),scope:a,handler:function(){this.close()}}]}),a.callParent(arguments)},captureToCanvas:function(){window.webcam.snap()}}),function(){var a=Ext.core.Element,b=Ext.core.DomHelper,c=Array.prototype.slice;Ext.define("App.ux.ManagedIframe",{extend:"Ext.Component",alias:"widget.miframe",hideMode:Ext.isIE?"display":"nosize",autoScroll:!0,frameStyle:null,frameConfig:void 0,frameCls:"ux-miframe",shimCls:"ux-miframe-shim",shimUrl:Ext.BLANK_IMAGE_URL,eventsFollowFrameLinks:!0,src:null,autoMask:!1,maskMessage:"Loading...",resetUrl:void 0,ariaRole:"presentation",unsupportedText:"Frames are disabled",initComponent:function(){var b=this;b.frameStyle=Ext.isString(b.frameStyle)?a.parseStyles(b.frameStyle):b.frameStyle||{},b.frameName=b.frameName||b.getId(),b.autoEl=b.autoEl||{cn:[Ext.applyIf(b.frameConfig||{},{tag:"iframe",cls:b.frameCls,style:Ext.apply({height:"100%",width:"100%"},b.frameStyle),frameBorder:"no",role:b.ariaRole,name:b.frameName}),{tag:"noframes",html:b.unsupportedText},{tag:"img",cls:b.shimCls,galleryimg:"no",style:"position:absolute;top:0;left:0;display:none;z-index:20;height:100%;width:100%;",src:b.shimUrl}]},this.callParent()},renderSelectors:{frameElement:"iframe.ux-miframe",frameShim:"img.ux-miframe-shim"},afterRender:function(){var b,c=this;c.callParent(),c.frameShim&&(c.frameShim.autoBoxAdjust=!1,c.frameShim.setVisibilityMode(a.DISPLAY)),(b=c.frameElement)&&(b=c.frameElement=new App.ux.ManagedIframe.Element(b.dom),b.eventsFollowFrameLinks=!1,b.on({dataavailable:c.onFrameDataAvailable,scope:c}),this.autoLoad?(b.isReset=Ext.isIE,b.eventsFollowFrameLinks=!!c.eventsFollowFrameLinks):Ext.Function.defer(b.reset,100,b,[c.resetUrl,function(){var a=this;
b.eventsFollowFrameLinks=!!a.eventsFollowFrameLinks,a.src||a.defaultSrc?a.setSrc():(a.data||a.html)&&a.update(a.data||a.html)},c]))},getContentTarget:function(){return this.frameElement},getActionEl:function(){return this.frameElement||this.el},onFrameDataAvailable:function(){this.autoMask&&this.setLoading(!1)},setSrc:function(a,b,c){var d=this;return a=a||d.src||d.defaultSrc,a&&d.rendered&&d.frameElement&&(d.autoMask&&d.isVisible(!0)&&d.setLoading(d.maskMessage||"",!0),d.frameElement.setSrc(a,!1,b,c)),d.src=a,d},setLoading:function(a){var b=this;a!==!1?b.el.mask(b.maskMessage||""):b.el.unmask()},initContent:function(){{var a=this;a.data||a.html}a.contentEl&&Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("App.ux.ManagedIframe: 'contentEl' is not supported by this class."),a.tpl&&a.setTpl(a.tpl),delete a.contentEl},setTpl:function(a){return this.tpl=a&&!a.isTemplate?Ext.create("Ext.XTemplate",a):a,this},update:function(a,b,c,d){var e=this,f=a;if((e.tpl&&Ext.isArray(f)||Ext.isObject(f))&&(e.data=f,f=e.tpl.apply(f||{})),e.rendered){e.autoMask&&e.isVisible(!0)&&e.setLoading(e.maskMessage||"");var g=e.getContentTarget();Ext.defer(function(){g.update(f,b,c,d)},e.autoMask?100:10,e,[])}return e},setAutoScroll:function(a){var b,c=this;return Ext.isDefined(a)&&(a=!!a,c.rendered&&(b=c.getContentTarget())&&b.setStyle("overflow",a?"auto":"hidden"),c.autoScroll=a),c},toggleShim:function(a){var b=this;return b.frameShim&&b.frameShim[a?"show":"hide"](),b.frameShim},onDestroy:function(){var a,b=this;(a=b.frameElement)&&a.remove(),b.deleteMembers("frameElement","frameShim"),b.callParent()}});var d=App.ux.ManagedIframe,e=Ext.cache,f=window.document,g=function(){var a;a=window.addEventListener?function(a,b,c,d){a.addEventListener(b,c,!!d)}:window.attachEvent?function(a,b,c){a.attachEvent("on"+b,c)}:function(){};return a}(),h=function(){var a;a=window.removeEventListener?function(a,b,c,d){a.removeEventListener(b,c,d)}:window.detachEvent?function(a,b,c){a.detachEvent("on"+b,c)}:function(){};return a}();Ext.define("App.ux.ManagedIframe.Element",{extend:"Ext.core.Element",alias:"widget.miframeelement",visibilityMode:a.ASCLASS,eventsFollowFrameLinks:!0,focusOnLoad:Ext.isIE,constructor:function(b){var c,d="string"==typeof b?f.getElementById(b):(b||{}).dom||b;return d?(c=d.id,this.dom=d,this.id=c||Ext.id(d),this.dom.name=this.dom.name||this.id,window.frames[this.dom.name]=this.dom,this.dom.manager=this,this._flyweights={},e[this.id]&&e[this.id].el?e[this.id].el=this:a.addToCache(this),Ext.isGecko||Ext.isWebkit||this.on(Ext.isOpera?"DOMFrameContentLoaded":"readystatechange",this.loadHandler,this,Ext.isOpera?{buffer:this.operaLoadBuffer||2e3}:null),void this.on({dataavailable:function(a){a&&Ext.apply(a,{frameAction:this._frameAction,frameResetting:this.isReset})},load:this.loadHandler,scope:this})):null},getFrameDocument:function(){var a=this.getWindow(),b=null;try{b=a.contentDocument||this.dom.contentDocument||window.frames[this.dom.name].document||a.document}catch(c){b=!1}return b||!1},getDoc:function(){return this.fly(this.getFrameDocument())},getBody:function(){var a;return(a=this.getFrameDocument())?this.get(a.body):null},get:function(a){return this.fly(a)},fly:function(a,b){var c,e=this,f=null,g=e.getFrameDocument();return g&&a?(b=b||"_global",a=Ext.getDom(a,!1,g),a&&(c=Ext.EventManager.getId(a),(e._flyweights[c]=e._flyweights[c]||new d.Element.Flyweight).dom=a,f=e._flyweights[c]),f):f},select:function(b){var c;return(c=this.getFrameDocument())?a.select(b,!1,c):c=null},query:function(a){var b;return(b=this.getFrameDocument())?Ext.DomQuery.select(a,b):b=null},getDocumentURI:function(){var a,b;try{a=this.src&&(b=this.getFrameDocument())?b.location.href:null}catch(c){}return a||(Ext.isFunction(this.src)?this.src():this.src)},getWindowURI:function(){var a,b,c=this;try{a=(b=c.getWindow())?b.location.href:null}catch(d){}return a||(Ext.isFunction(c.src)?c.src():c.src)},getWindow:function(){var a=this.dom,b=null;try{b=a.contentWindow||window.frames[a.name]||null}catch(c){}return b},scrollChildIntoView:function(a,b,c){var d,e=this,f=e.getFrameDocument();return f&&(b=(b?Ext.getDom(b,!0,f):null)||(!Ext.isWebKit&&Ext.isDocumentStrict(f)?f.documentElement:f.body),(d=e.fly(a))&&d.scrollIntoView(b,c)),e},loadHandler:function(a,b,c){a=a||{};var d=this,e="readystatechange"==a.type?(d.dom||{}).readyState:a.type;if(d.eventsFollowFrameLinks||d._frameAction||d.isReset){switch(d.isReset&&a.stopEvent&&a.stopEvent(),e){case"domready":case"DOMFrameContentLoaded":d._onDocReady(e,a),d.fireDOMEvent("domready",null,{message:a.message});break;case"interactive":d.domReady=d.loaded=!1,d.isReset||d.assertOnReady();break;case"complete":d.loaded=!0,d.fireDOMEvent("complete",null,{message:a.message});break;case"load":d.loaded=!0,Ext.apply(a,{frameAction:d._frameAction,frameResetting:d.isReset}),d._onDocLoaded(e,a),d.dispatchCallbacks(a,b,c);break;case"error":d.fireDOMEvent("error",null,{message:a.message}),d._frameAction=!1}d.frameState=e}},_onDocReady:function(){var a=this;a.domReady=!0;try{!a.isReset&&a.focusOnLoad&&a.focus()}catch(b){}a.fireDOMEvent("datasetchanged"),a.isReset||a.domReadyFired||!a._renderHooks()||a.isReset||(a.domReadyFired=!0,a.fireDOMEvent("dataavailable"))},_onDocLoaded:function(){var a=this;!a.isReset&&(!a._frameAction||a.eventsFollowFrameLinks)&&!a.domReady&&a._onDocReady(),a._frameAction=a.domReadyFired=a.isReset=a.domReady=!1,a._targetURI=null},createEvent:document.createEvent?function(a,b,c,d){d=d||{bubbles:!0,cancelable:!1},b=b||"Event";var e=document.createEvent(b);return e.initEvent(a,!!Ext.value(d.bubbles,!0),!!Ext.value(d.cancelable,!1)),e}:function(a,b,c,d){d=d||{type:"on"+a,bubbles:!0,cancelable:!1};var e=document.createEventObject(c);return Ext.apply(e,d)},dispatchEvent:document.createEvent?function(a){return this.dom?!this.dom.dispatchEvent(a):null}:function(a,b){return this.dom?this.dom.fireEvent("on"+b,a):null},fireDOMEvent:function(a,b,c){return this.dispatchEvent(this.createEvent(a,null,b,c),a,c)},_renderHooks:function(){var a=this;a._windowContext=null,Ext.destroy(a.CSS),delete a.CSS,a._hooked=!1;try{if(a.writeScript('(function(){(window.hostMIF = parent.document.getElementById("'+a.id+'").manager)._windowContext='+(Ext.isIE?"window":'{eval:function(s){return new Function("return ("+s+")")();}}')+";})()")){var b,c=g,e=a._frameProxy||(a._frameProxy=Ext.bind(d.Element.eventProxy,a)),f=a.getFrameDocument();f&&(b=a.getWindow())&&(c(Ext.isIE?f.body||f.documentElement:b,"focus",e),c(Ext.isIE?f.body||f.documentElement:b,"blur",e),c(b,"resize",e),c(b,"beforeunload",e))}}catch(h){}return a._hooked=a.domWritable()},domWritable:function(){return!!this._windowContext&&!!this.getFrameDocument()},_unHook:function(){var a=this;if(a._hooked){try{a._windowContext&&(a._windowContext.hostMIF=null)}catch(b){}a._windowContext=null;var c,d=h,e=a._frameProxy,f=a.getFrameDocument();e&&f&&(c=a.getWindow())&&(d(Ext.isIE?f.body||f.documentElement:c,"focus",e),d(Ext.isIE?f.body||f.documentElement:c,"blur",e),d(c,"resize",e),d(c,"beforeunload",e))}a._flyweights={},Ext.destroy(a.CSS),delete a.CSS,a._frameAction=a.domReady=a.domFired=a._hooked=!1},submitAsTarget:function(a){var b=a||{},c=this.getParentDocument(),d=Ext.getDom(b.form?b.form.form||b.form:null,!1,c)||Ext.DomHelper.append(c.body,{tag:"form",cls:"x-hide-offsets x-mif-form",encoding:"multipart/form-data"}),e=Ext.fly(d,"_dynaForm"),f={target:d.target||"",method:d.method||"",encoding:d.encoding||"",enctype:d.enctype||"",action:d.action||""},g=b.encoding||d.encoding,h=b.method||d.method||"POST";e.set({target:this.dom.name,method:h,encoding:g,action:b.url||b.action||d.action}),("POST"==h||b.enctype)&&e.set({enctype:b.enctype||d.enctype||g});var i,j,k;return b.params&&(k=Ext.isFunction(b.params)?b.params():b.params)&&(i=[],Ext.iterate(k="string"==typeof k?Ext.urlDecode(k,!1):k,function(a,b){Ext.fly(j=D.createElement("input")).set({type:"hidden",name:a,value:b}),d.appendChild(j),i.push(j)})),Ext.isFunction(b.callback)&&this.on("datasetchanged",b.callback,b.scope||this,{single:!0,submitOptions:b}),this._frameAction=!0,this._targetURI=location.href,d.submit(),i&&Ext.each(i,Ext.removeNode,Ext),e.hasClass("x-mif-form")?e.remove():e.set(f),e=null,this},resetUrl:function(){return Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:"about:blank"}(),setSrc:function(a,b,c,d){var e=a||this.src||this.resetUrl;Ext.isFunction(c)&&this.queueCallback(c,d||this),b!==!0&&(this.src=e);var f=this._targetURI=Ext.isFunction(e)?e()||"":e;try{this._frameAction=!0,this.dom.src=f,Ext.isIE||this.assertOnReady()}catch(g){}return this},setLocation:function(a,b,c,d){var e=this,f=a||e.src||e.resetUrl;e._unHook(),Ext.isFunction(c)&&e.queueCallback(c,d);var g=e._targetURI=Ext.isFunction(f)?f()||"":f;b!==!0&&(e.src=f);try{e._frameAction=!0,e.getWindow().location.replace(g),Ext.isIE||e.assertOnReady()}catch(h){}return e},reset:function(a,b,c){var d,e=this,f=a;return e._unHook(),(d=e.getWindow())&&(e.isReset=e._frameAction=!0,Ext.isFunction(b)&&e.queueCallback(b,c),Ext.isFunction(a)&&(f=a()),f=e._targetURI=Ext.isEmpty(f,!0)?e.resetUrl:f,d.location.href=f),e},queueCallback:function(a,b){var c=this;return c.callbacks=c.callbacks||[],c.callbacks.push(b?Ext.bind(a,b||c):a),c},dispatchCallbacks:function(a,b,c){var d=this;if(d.callbacks&&d.callbacks.length)for(;d.callbacks.length;)d.callbacks.shift()(a,b,c)},scriptRE:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,update:function(a,c,d,e){var f=this;a=b.markup(a||""),a=c!==!1?a:a.replace(f.scriptRE,"");var g;return(g=f.getFrameDocument())&&a.length?(f._unHook(),f.src=null,Ext.isFunction(d)&&f.queueCallback(d,e||this),f._targetURI=null,f._frameAction=!0,g.open(),g.write(a),f.assertOnReady(),g.close()):Ext.callback(d,e||f),f},execCommand:function(a,b,c,d){var e,f;if((e=this.getFrameDocument())&&a)try{return Ext.isIE&&this.focus(),f=d&&Ext.isFunction(e.queryCommandEnabled)?e.queryCommandEnabled(a):!0,f&&e.execCommand(a,!!b,c)}catch(g){return!1}return!1},setDesignMode:function(a){var b;return(b=this.getFrameDocument())&&(b.designMode=/on|true/i.test(String(a))?"On":"Off"),this},print:function(){try{var a;(a=this.getWindow())&&(Ext.isIE&&a.focus(),a.print())}catch(b){var c=this.statics().Error;c.raise({msg:c.message.printexception||b.description||b.message,error:b,win:a})}return this},writeScript:function(a,b){b=Ext.apply({},b||{},{type:"text/javascript",text:a});try{var c,d,e=this.getFrameDocument();if(e&&"undefined"!=typeof e.getElementsByTagName&&((c=e.getElementsByTagName("head")[0])||(c=e.createElement("head"),e.getElementsByTagName("html")[0].appendChild(c)),c&&(d=e.createElement("script")))){for(var f in b)b.hasOwnProperty(f)&&f in d&&(d[f]=b[f]);return!!c.appendChild(d)}}catch(g){}finally{d=c=null}return!1},execScript:function(a,b){var c=this;try{if(!c.domWritable()){var d=this.statics().Error;throw new d({msg:d.message["execscript-secure-context"],script:a})}if(!b)return c._windowContext.eval(a);c.writeScript(a)}catch(e){return!1}return!0},loadFunction:function(a,b,c){var d=a.name||a,e=a.fn||window[a];d&&e&&this.execScript(d+"="+e,b),c&&this.execScript(d+"()")},assertOnReady:function(){if(!Ext.isGecko&&!this.isReset){var a,b,d,e,f=0,g=this,h=!1,i=this.domReadyRetries||5e3,j=!1,k=(this.getFrameDocument()||{location:{}}).location.href,l=/undefined|unknown/i,m=function(n){if(!this.domReady){if(b=this.getFrameDocument()){e=b.location.href||"",j=!n||e&&(e!=k||e.indexOf(n)>-1),d=0;try{d=l.test(typeof b.fileSize)?0:parseFloat(b.fileSize)}catch(o){}if(h=!!d||j&&(a=b.body)&&!!(a.innerHTML||"").length)return g.loadHandler.call(g,{type:"domready"})}g.loaded||++f>i||Ext.defer(m,2,g,c.call(arguments,0))}};m.call(g,g._targetURI)}},focus:function(a){var b=this,c=b.getWindow();if(c)try{Number(a)?Ext.defer(b.focus,a,b,[null]):c.focus()}catch(d){}return c=null,b},blur:function(){var a=this,b=a.getWindow();if(b)try{b.blur()}catch(c){}return b=null,a},remove:function(){var a=this,b=a.dom;b&&(a.reset(),Ext.removeNode(b),delete a.dom)},statics:{addMethods:function(a){Ext.apply(d.Element.prototype,a)},DOMFrameReadyHandler:function(a){var b;try{b=a.target?a.target.manager:null}catch(c){}b&&b.loadHandler.call(b,a)},eventProxy:function(a){if(a){var b,c;if(!a.eventPhase||a.eventPhase==(a.AT_TARGET||2))switch(a.type){case"blur":case"focus":c="UIEvents";case"resize":if(Ext.isIE)break;case"scroll":b=this.dispatchEvent(this.createEvent(a.type,c||"HTMLEvents"),a.type);break;case"unload":case"beforeunload":this._unHook()}return b}},Flyweight:a.Flyweight,getParentDocument:a.getParentDocument,isDocumentStrict:function(a){return a&&a.compatMode&&"BackCompat"!=a.compatMode},getDocumentHeight:function(a){a=a||window;var b=this.getParentDocument(a);return Math.max(this.isDocumentStrict(b)?b.documentElement.scrollHeight:b.body.scrollHeight,this.getViewportHeight(a))},getDocumentWidth:function(a){a=a||window;var b=this.getParentDocument(a);return Math.max(this.isDocumentStrict(b)?b.documentElement.scrollWidth:b.body.scrollWidth,this.getViewportWidth(a))},getViewportHeight:function(a){return(a||window).innerHeight},getViewportWidth:function(a){return(a||window).innerWidth},getViewSize:function(a){return a=a||window,{width:this.getViewportWidth(a),height:this.getViewportHeight(a)}},fromPoint:function(a,b,c){return c=this.getParentDocument(c||document),c?Ext.fly(c.elementFromPoint(a,b),"_fromPoint"):null}}}),Ext.define("App.ux.ManagedIframe.Error",{extend:"Ext.Error",name:"App.ux.ManagedIframe.Error",statics:{raise:Ext.Error.raise,ignore:!1,handle:function(){return this.ignore},message:{"execscript-secure-context":"An attempt was made at script execution within a document context with restricted access.",printexception:"An Error was encountered attempting the print the frame contents (document access is likely restricted)."}}}),d.Element.addStatics({Error:App.ux.ManagedIframe.Error}),window.addEventListener&&(window.addEventListener("DOMFrameContentLoaded",d.Element.DOMFrameReadyHandler,!1),Ext.EventManager.on(window,"beforeunload",function(){window.removeEventListener("DOMFrameContentLoaded",d.Element.DOMFrameReadyHandler,!1)}))}(),Ext.define("App.ux.PatientEncounterCombo",{extend:"Ext.form.ComboBox",alias:"widget.patientEncounterCombo",hideLabel:!0,displayField:"brief_description",valueField:"brief_description",emptyText:_("search")+"...",width:400,editable:!1,initComponent:function(){var a=this;Ext.define("patientEncounterComboModel",{extend:"Ext.data.Model",fields:[{name:"eid"},{name:"brief_description"},{name:"service_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"close_date",type:"date",dateFormat:"Y-m-d H:i:s"}],proxy:{type:"direct",api:{read:"Encounter.getEncounters"},reader:{totalProperty:"totals",root:"rows"}}}),a.store=Ext.create("Ext.data.Store",{model:"patientEncounterComboModel",pageSize:10,autoLoad:!1,sorters:[{property:"service_date",direction:"DESC"}]}),Ext.apply(this,{store:a.store,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item"><h3>{[Ext.Date.format(values.service_date, g("date_time_display_format"))]} - {[Ext.String.ellipsis(values.brief_description, 25)]} </h3></div>'}},pageSize:10}),a.callParent()}}),Ext.define("App.ux.RenderPanel",{extend:"Ext.container.Container",alias:"widget.renderpanel",cls:"RenderPanel",layout:"border",frame:!1,border:!1,pageLayout:"fit",pageBody:[],pageTitle:"",pageButtons:null,pageTBar:null,pageBBar:null,pagePadding:null,showRating:!1,initComponent:function(){var a=this;Ext.apply(a,{items:[a.mainHeader=Ext.widget("container",{cls:"RenderPanel-header",itemId:"RenderPanel-header",region:"north",layout:"hbox",height:30}),{cls:"RenderPanel-body-container",itemId:"RenderPanel-body-container",xtype:"container",region:"center",layout:"fit",padding:null==this.pagePadding?5:this.pagePadding,items:[a.mainBoddy=Ext.widget("panel",{cls:"RenderPanel-body",frame:!0,border:!1,itemId:"pageLayout",defaults:{frame:!1,border:!1,autoScroll:!0},layout:a.pageLayout,items:a.pageBody,tbar:a.pageTBar,bbar:a.pageBBar,buttons:a.pageButtons})]}]}),a.pageTitleDiv=a.mainHeader.add(Ext.widget("container",{cls:"panel_title",html:a.pageTitle})),a.pageReadOnlyDiv=a.mainHeader.add(Ext.widget("container")),a.showRating&&(a.pageRankingDiv=a.mainHeader.add(Ext.widget("ratingField",{flex:1,listeners:{scope:a,click:function(a,b){Patient.setPatientRating({pid:app.patient.pid,rating:b},function(){app.msg("Sweet!",_("record_saved"))})}}}))),a.pageTimerDiv=a.mainHeader.add(Ext.widget("container",{style:"float:right",width:200})),a.callParent(arguments)},updateTitle:function(a,b,c){this.pageTitleDiv.update(a),this.pageReadOnlyDiv.update(b?_("read_only"):""),this.pageTimerDiv.update(c)},getPageHeader:function(){return this.getComponent("RenderPanel-header")},getPageBodyContainer:function(){return this.getComponent("RenderPanel-body-container")},getPageBody:function(){return this.mainBoddy},onActive:function(a){"function"==typeof a&&a(!0)}}),Ext.define("App.ux.form.fields.Help",{extend:"Ext.Img",alias:"widget.helpbutton",src:"resources/images/icons/icohelp.png",height:16,width:16,margin:"3 10",helpMsg:_("help_message"),initComponent:function(){var a=this;a.listeners={render:function(b){a.setToolTip(b.getEl())}},a.callParent()},setToolTip:function(a){Ext.create("Ext.tip.ToolTip",{target:a,dismissDelay:0,html:this.helpMsg})}}),Ext.define("App.ux.form.fields.Checkbox",{extend:"Ext.form.field.Checkbox",alias:"widget.mitos.checkbox",inputValue:"1",uncheckedValue:"0"}),Ext.define("App.ux.form.fields.ColorPicker",{extend:"Ext.form.field.Trigger",alias:"widget.colorcombo",triggerTip:"Please select a color.",onTriggerClick:function(){var a=this;picker=Ext.create("Ext.picker.Color",{pickerField:this,ownerCt:this,renderTo:document.body,floating:!0,hidden:!0,focusOnShow:!0,style:{backgroundColor:"#fff"},listeners:{scope:this,select:function(b,c){a.setValue("#"+c),a.inputEl.setStyle({backgroundColor:c}),picker.hide()},show:function(a){a.getEl().monitorMouseLeave(500,a.hide,a)}}}),picker.alignTo(a.inputEl,"tl-bl?"),picker.show(a.inputEl)}}),Ext.define("App.ux.form.fields.Currency",{extend:"Ext.form.field.Number",alias:"widget.mitos.currency",currencySymbol:globals.gbl_currency_symbol,useThousandSeparator:!0,thousandSeparator:",",alwaysDisplayDecimals:!0,fieldStyle:"text-align: right;",hideTrigger:!0,initComponent:function(){this.useThousandSeparator&&","==this.decimalSeparator&&","==this.thousandSeparator?this.thousandSeparator=".":this.allowDecimals&&"."==this.thousandSeparator&&"."==this.decimalSeparator&&(this.decimalSeparator=","),this.callParent(arguments)},setValue:function(a){App.ux.form.fields.Currency.superclass.setValue.call(this,null!=a?a.toString().replace(".",this.decimalSeparator):a),this.setRawValue(this.getFormattedValue(this.getValue()))},getFormattedValue:function(a){if(Ext.isEmpty(a)||!this.hasFormat())return a;var b=null;if(a=(b=0>a)?-1*a:a,a=this.allowDecimals&&this.alwaysDisplayDecimals?a.toFixed(this.decimalPrecision):a,this.useThousandSeparator){if(this.useThousandSeparator&&Ext.isEmpty(this.thousandSeparator))throw"NumberFormatException: invalid thousandSeparator, property must has a valid character.";if(this.thousandSeparator==this.decimalSeparator)throw"NumberFormatException: invalid thousandSeparator, thousand separator must be different from decimalSeparator.";a=a.toString();var c=a.split(".");c[1]=c[1]?c[1]:null;for(var d=c[0],e=/(\d+)(\d{3})/,f=this.thousandSeparator;e.test(d);)d=d.replace(e,"$1"+f+"$2");a=d+(c[1]?this.decimalSeparator+c[1]:"")}return Ext.String.format("{0}{1}{2}",b?"-":"",Ext.isEmpty(this.currencySymbol)?"":this.currencySymbol,a)},parseValue:function(a){return App.ux.form.fields.Currency.superclass.parseValue.call(this,this.removeFormat(a))},removeFormat:function(a){return Ext.isEmpty(a)||!this.hasFormat()?a:(a=a.toString().replace(this.currencySymbol,""),a=this.useThousandSeparator?a.replace(new RegExp("["+this.thousandSeparator+"]","g"),""):a)},getErrors:function(a){return App.ux.form.fields.Currency.superclass.getErrors.call(this,this.removeFormat(a))},hasFormat:function(){return"."!=this.decimalSeparator||1==this.useThousandSeparator&&null!=this.getRawValue()||!Ext.isEmpty(this.currencySymbol)||this.alwaysDisplayDecimals},onFocus:function(){this.setRawValue(this.removeFormat(this.getRawValue())),this.callParent(arguments)}}),Ext.define("App.ux.form.fields.CustomTrigger",{extend:"Ext.form.field.Trigger",alias:"widget.customtrigger",hideLabel:!0,triggerTip:_("click_to_clear_selection"),qtip:_("clearable_combo_box"),trigger1Class:"x-form-select-trigger",trigger2Class:"x-form-clear-trigger",onRender:function(){this.callParent(arguments);var a=this.getId();this.triggerConfig={tag:"div",cls:"x-form-twin-triggers",style:"display:block;",cn:[{tag:"img",style:Ext.isIE?"margin-left:0;height:21px":"",src:Ext.BLANK_IMAGE_URL,id:"trigger2"+a,name:"trigger2"+a,cls:"x-form-trigger "+this.trigger2Class}]},this.triggerEl.replaceWith(this.triggerConfig),this.triggerEl.on("mouseup",function(){this.destroy()},this);var b=Ext.get("trigger2"+a);b.addClsOnOver("x-form-trigger-over")}}),Ext.define("App.ux.form.fields.MultiText",{extend:"Ext.form.FieldContainer",xtype:"multitextfield",layout:{type:"vbox",align:"stretch"},name:null,numbers:!0,initComponent:function(){var a=this;a.lastField=null,a.callParent(),a.addField()},addField:function(a){var b=this;b.lastField=b.add({xtype:"textfield",name:"_"+b.name,anchor:"100%",value:a||"",labelWidth:20,enableKeyEvents:!0}),b.numbers&&b.lastField.setFieldLabel((b.items.items.indexOf(b.lastField)+1).toString()),b.lastField.on("keyup",this.onFieldKeyUp,this)},onFieldKeyUp:function(a,b){if(b.getKey()!=b.TAB){var c=this,d=c.items.items.indexOf(a),e=c.items.items.length,f=d+1==e,g=d+2==e;f&&a.getValue().length>0&&this.lastField==a&&b.getKey()!=b.DELETE&&b.getKey()!=b.BACKSPACE?(this.addField(),c.doLayout()):g&&0==a.getValue().length&&c.lastField!=a&&(c.remove(c.lastField),c.doLayout(),c.lastField=a)}},setValue:function(a){var b=this;if(b.removeAll(!0),Ext.isString(a))b.addField(a);else if(Ext.isArray(a))for(var c=0;c<a.length;c++)b.addField(a[c]);b.addField(a[c])},getValue:function(){var a=this,b=a.up("form").getForm().getValues()["_"+a.name];return""==b[b.length-1]&&Ext.Array.erase(b,b.length-1,1),b}}),Ext.define("App.ux.form.fields.plugin.BadgeText",{extend:"Ext.AbstractPlugin",alias:"plugin.badgetext",disableBg:"gray",enableBg:"red",textSize:15,textColor:"white",defaultText:" ",disableOpacity:0,align:"left",text:" ",disable:!0,button:null,init:function(a){var b=this;b.button=a,b.text=b.defaultText,a.on("render",b.addBadgeEl,b),Ext.apply(a,{setBadgeText:function(c){return b.disable="undefined"==typeof c||c===b.defaultText,b.text=b.disable?b.defaultText:c,a.rendered&&(a.badgeEl.update(c.toString?c.toString():c),Ext.isStrict&&Ext.isIE8&&a.el.repaint(),b.setDisabled(b.disable)),a},getBadgeText:function(){return b.text}})},addBadgeEl:function(a){var b=this,c={position:"absolute","background-color":b.disableBg,"font-size":b.textSize+"px",color:b.textColor,padding:"1px 5px",index:50,top:"-3px","border-radius":"15px","font-weight":"bold","text-shadow":"rgba(0, 0, 0, 0.5) 0 -0.08em 0","box-shadow":"rgba(0, 0, 0, 0.3) 0 0.1em 0.1em",cursor:"pointer"};"left"==b.align?c.left="-3px":c.right="-3px",a.badgeEl=Ext.DomHelper.append(a.el,{tag:"div",cls:"badgeText x-unselectable"},!0),a.badgeEl.setOpacity(b.disableOpacity),a.badgeEl.setStyle(c),a.badgeEl.update(b.text.toString?b.text.toString():b.text),a.el.setStyle({overflow:"hidden"})},onBadgeClick:function(){var a=this;a.button.fireEvent("badgeclick",a.button,a.text)},setDisabled:function(a){var b=this;b.button.badgeEl.setStyle({"background-color":a?b.disableBg:b.enableBg,opacity:a?b.disableOpacity:1}),b.button.badgeEl.clearListeners(),a||b.button.badgeEl.on("click",b.onBadgeClick,b,{preventDefault:!0,stopEvent:!0})}}),Ext.define("App.ux.form.fields.DateTime",{extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.field.Field"},alias:"widget.mitos.datetime",combineErrors:!0,msgTarget:"under",layout:"hbox",readOnly:!1,allowBlank:!0,dateFormat:"Y-m-d",timeFormat:"g:i a",dateTimeFormat:"Y-m-d H:i:s",dateConfig:{},timeConfig:{},dateValue:null,dateField:null,timeField:null,initComponent:function(){var a=this;a.items=a.items||[],a.dateConfig.allowBlank=a.allowBlank,a.dateField=Ext.create("Ext.form.field.Date",Ext.apply({format:a.dateFormat,flex:1,emptyText:_("date"),margin:0,submitValue:!1},a.dateConfig)),a.items.push(a.dateField),a.timeField=Ext.create("Ext.form.field.Time",Ext.apply({format:a.timeFormat,flex:1,emptyText:_("time"),margin:0,submitValue:!1},a.timeConfig)),a.items.push(a.timeField);for(var b=0;b<a.items.length;b++)a.items[b].on("focus",Ext.bind(a.onItemFocus,a)),a.items[b].on("blur",Ext.bind(a.onItemBlur,a)),a.items[b].on("specialkey",function(b,c){var d=c.getKey(),e=d==c.TAB;return e&&a.focussedItem==a.dateField?(c.stopEvent(),void a.timeField.focus()):void a.fireEvent("specialkey",b,c)});"vbox"==a.layout&&(a.height=44),a.callParent(),a.initField()},focus:function(){this.callParent(),this.dateField.focus()},onItemFocus:function(a){this.blurTask&&this.blurTask.cancel(),this.focussedItem=a},onItemBlur:function(a){var b=this;a==b.focussedItem&&(b.blurTask=new Ext.util.DelayedTask(function(){b.fireEvent("blur",b)}),b.blurTask.delay(100))},getValue:function(){var a=null,b=this.dateField.getSubmitValue(),c=this.timeField.getSubmitValue();if(b)if(c){var d=this.getFormat();a=Ext.Date.parse(b+" "+c,d)}else a=this.dateField.getValue();return a},getSubmitValue:function(){var a=this.getValue();return a?Ext.Date.format(a,this.dateTimeFormat):null},setValue:function(a){Ext.isString(a)&&(a=Ext.Date.parse(a,this.dateTimeFormat)),this.dateField.setValue(a),this.timeField.setValue(a)},getFormat:function(){return(this.dateField.submitFormat||this.dateField.format)+" "+(this.timeField.submitFormat||this.timeField.format)},getSubmitData:function(){var a=this,b=null;return a.disabled||!a.submitValue||a.isFileUpload()||(b={},b[a.getName()]=""+a.getSubmitValue()),b},setReadOnly:function(a){this.dateField.setReadOnly(a),this.timeField.setReadOnly(a)},setMaxValue:function(a){this.dateField.setMaxValue(a)}}),Ext.define("App.ux.form.fields.Percent",{extend:"Ext.form.field.Number",alias:"widget.mitos.percent",currencySymbol:"%",useThousandSeparator:!1,thousandSeparator:",",alwaysDisplayDecimals:!0,fieldStyle:"text-align: right;",hideTrigger:!0,initComponent:function(){this.useThousandSeparator&&","==this.decimalSeparator&&","==this.thousandSeparator?this.thousandSeparator=".":this.allowDecimals&&"."==this.thousandSeparator&&"."==this.decimalSeparator&&(this.decimalSeparator=","),this.callParent(arguments)},setValue:function(a){App.ux.form.fields.Currency.superclass.setValue.call(this,null!=a?a.toString().replace(".",this.decimalSeparator):a),this.setRawValue(this.getFormattedValue(this.getValue()))},getFormattedValue:function(a){if(Ext.isEmpty(a)||!this.hasFormat())return a;var b=null;if(a=(b=0>a)?-1*a:a,a=this.allowDecimals&&this.alwaysDisplayDecimals?a.toFixed(this.decimalPrecision):a,this.useThousandSeparator){if(this.useThousandSeparator&&Ext.isEmpty(this.thousandSeparator))throw"NumberFormatException: invalid thousandSeparator, property must has a valid character.";if(this.thousandSeparator==this.decimalSeparator)throw"NumberFormatException: invalid thousandSeparator, thousand separator must be different from decimalSeparator.";a=a.toString();var c=a.split(".");c[1]=c[1]?c[1]:null;for(var d=c[0],e=/(\d+)(\d{3})/,f=this.thousandSeparator;e.test(d);)d=d.replace(e,"$1"+f+"$2");a=d+(c[1]?this.decimalSeparator+c[1]:"")}return Ext.String.format("{0}{1}{2}",b?"-":"",a,Ext.isEmpty(this.currencySymbol)?"":this.currencySymbol)},parseValue:function(a){return App.ux.form.fields.Currency.superclass.parseValue.call(this,this.removeFormat(a))},removeFormat:function(a){return Ext.isEmpty(a)||!this.hasFormat()?a:(a=a.toString().replace(this.currencySymbol,""),a=this.useThousandSeparator?a.replace(new RegExp("["+this.thousandSeparator+"]","g"),""):a)},getErrors:function(a){return App.ux.form.fields.Currency.superclass.getErrors.call(this,this.removeFormat(a))},hasFormat:function(){return"."!=this.decimalSeparator||1==this.useThousandSeparator&&null!=this.getRawValue()||!Ext.isEmpty(this.currencySymbol)||this.alwaysDisplayDecimals},onFocus:function(){this.setRawValue(this.removeFormat(this.getRawValue())),this.callParent(arguments)}}),Ext.define("App.ux.form.Panel",{extend:"Ext.form.Panel",alias:"widget.mitos.form",bodyStyle:"padding: 10px;",autoWidth:!0,border:!1}),Ext.define("App.ux.form.AdvanceForm",{extend:"Ext.AbstractPlugin",alias:"plugin.advanceform",syncAcl:!0,autoSync:!1,autoSyncTool:!0,syncDelay:3e3,transition:2e3,init:function(a){this.callParent(arguments),a.pugin=this,this.formPanel=a,this.formPanel.autoSync=this.autoSync,this.formPanel.on("beforerender",this.setFieldEvent,this),this.form=this.formPanel.getForm(),this.form.loadRecord=this.loadRecord,this.autoSyncTool&&this.addTool()},loadRecord:function(a){var b=this,c=b.owner,d=this.owner.pugin;return a?(b.isLoading=!0,b._record=a,d.setFormFieldsClean(!1),a.store.on("write",d.onStoreWrite,d),a.store.on("beforesync",function(a,b){c.fireEvent("beforesync",a,b)},d),a.store.on("update",function(a,b){c.fireEvent("update",a,b)},d),b.setValues(a.data),c.fireEvent("recordloaded",b,a),b.isLoading=!1,b):b},onStoreWrite:function(a,b){this.setFormFieldsClean(this.transition),this.formPanel.fireEvent("write",a,b),app.msg("Sweet!","Record Saved"),delete this.bufferSyncFormFn},setFieldEvent:function(a){for(var b=a.getForm().getFields().items,c=0;c<b.length;c++)"textfield"==b[c].xtype||"textareafield"==b[c].xtype?(b[c].enableKeyEvents=!0,b[c].on("keyup",this.setFieldCondition,this),b[c].on("change",this.setFieldCondition,this)):"radiofield"==b[c].xtype||"checkbox"==b[c].xtype?(b[c].scope=this,b[c].handler=this.setFieldCondition,b[c].on("change",this.setFieldCondition,this)):"datefield"==b[c].xtype?(b[c].on("select",this.setFieldCondition,this),b[c].on("change",this.setFieldCondition,this)):b[c].on("select",this.setFieldCondition,this)},setFieldCondition:function(a){var b,c=this,d=c.form.getRecord(),e=d?d.store:null,f={},g=c.getFieldEl(a);null!=e&&(!c.form.isLoading&&"radiofield"!=a.xtype||!c.form.isLoading&&"radiofield"==a.xtype&&a.checked)&&(f[a.name]=a.getSubmitValue(),d.set(f),b=0!==Object.getOwnPropertyNames(d.getChanges()).length,b===!0?c.setFieldDirty(a,g,!0,c.transition):c.setFieldDirty(a,g,!1,c.transition),this.formPanel.autoSync&&this.syncAcl&&("undefined"==typeof c.bufferSyncFormFn?(c.bufferSyncFormFn=Ext.Function.createBuffered(function(){e.sync()},c.syncDelay),c.bufferSyncFormFn()):b===!0?c.bufferSyncFormFn():(c.setFormFieldsClean(c.transition),delete c.bufferSyncFormFn)))},setFieldDirty:function(a,b,c,d){d=Ext.isNumber(d)?d:0,(a.el.hasChanged&&!c||!a.el.hasChanged&&c)&&(a.el.hasChanged=c,Ext.create("Ext.fx.Animator",{target:b,duration:d,keyframes:{0:{backgroundColor:c?"FFFFFF":"FFDDDD"},100:{backgroundColor:c?"FFDDDD":"FFFFFF"}},listeners:{keyframe:function(a,e){1==e&&(c?b.setStyle({"background-image":"none"}):Ext.Function.defer(function(){b.setStyle({"background-image":null})},d-400))}}}))},getFieldEl:function(a){return"textfield"==a.xtype||"textareafield"==a.xtype?a.inputEl:"radiofield"==a.xtype?a.ownerCt.el:"checkbox"==a.xtype?a.el:a.el},setFormFieldsClean:function(a){for(var b,c=this,d=c.form.getFields().items,e=0;e<d.length;e++)b=c.getFieldEl(d[e]),"undefined"!=typeof d[e].el&&d[e].el.hasChanged&&c.setFieldDirty(d[e],b,!1,a)},addTool:function(){var a=this,b=a.formPanel.getDockedItems()[0],c=a.formPanel.autoSync?"autosave":"";b&&a.autoSyncTool&&b.insert(0,Ext.create("Ext.panel.Tool",{type:"save",cls:c,tooltip:"Autosave",handler:function(b,c,d,e){a.formPanel.autoSync=!a.formPanel.autoSync,a.formPanel.autoSync?e.addCls("autosave"):e.removeCls("autosave"),app.msg("Sweet!","AutoSave is "+(a.formPanel.autoSync?"On":"Off"))}}))}}),Ext.define("App.ux.grid.EventHistory",{extend:"Ext.grid.Panel",alias:"widget.mitos.eventhistorygrid",initComponent:function(){Ext.apply(this,{columns:[{header:_("date"),dataIndex:"date",width:140,renderer:Ext.util.Format.dateRenderer("Y-m-d g:i:s a")},{header:_("user"),dataIndex:"user",width:150},{header:_("event"),dataIndex:"event",flex:1}]},null),this.callParent(arguments)
}}),Ext.define("App.ux.combo.ActiveFacilities",{extend:"Ext.form.ComboBox",xtype:"activefacilitiescombo",storeAutoLoad:!0,initComponent:function(){var a=this;Ext.define("ActiveFacilitiesComboModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"int"}],proxy:{type:"direct",api:{read:"CombosData.getActiveFacilities"}}}),a.store=Ext.create("Ext.data.Store",{model:"ActiveFacilitiesComboModel",autoLoad:a.storeAutoLoad}),Ext.apply(this,{editable:!1,queryMode:"local",valueField:"option_value",displayField:"option_name",emptyText:_("select"),store:a.store}),a.callParent(arguments)}}),Ext.define("App.ux.grid.RowFormEditor",{extend:"Ext.form.Panel",requires:["Ext.tip.ToolTip","Ext.util.HashMap","Ext.util.KeyNav"],saveBtnText:"Update",cancelBtnText:"Cancel",removeBtnText:"Remove",errorsText:"Errors",dirtyText:"Commit Cancel Your Changes",lastScrollLeft:0,lastScrollTop:0,bodyPadding:5,padding:"0 0 5 0",border:!1,saveBtnEnabled:!1,buttonAlign:"center",hideMode:"offsets",errorSummary:!1,style:"background-color:#E0E0E0",initComponent:function(){var a,b,c=this;c.cls=Ext.baseCSSPrefix+"grid-row-editor grid-row-form-editor",c.currRowH=null,b=c.editingPlugin,c.items=b.items,c.fieldDefaults=b.fieldDefaults;var d=[{action:"update",xtype:"button",itemId:"update",handler:b.completeEdit,scope:b,text:c.saveBtnText,disabled:!c.isValid},{xtype:"button",itemId:"cancel",handler:b.cancelEdit,scope:b,text:c.cancelBtnText}];b.enableRemove&&d.push({xtype:"button",itemId:"remove",handler:b.completeRemove,scope:b,text:c.removeBtnText}),c.dockedItems=[{xtype:"toolbar",dock:"bottom",ui:"footer",margin:0,layout:{pack:"center"},cls:"x-grid-row-editor x-panel-body",style:"border-top:none !important",defaults:{minWidth:Ext.panel.Panel.prototype.minButtonWidth},items:d}],c.callParent(arguments),a=c.getForm(),c.setFields(),a.trackResetOnLoad=!0,c.floatingButtons=c.getDockedItems('toolbar[dock="bottom"]')[0]},onFieldValueChange:function(){var a,b=this,c=b.getForm(),d=c.isValid();b.errorSummary&&b.isVisible()&&b[d?"hideToolTip":"showToolTip"](),a=b.query('button[action="update"]')[0],a&&a.setDisabled(!d),b.isValid=d},afterRender:function(){var a=this,b=a.editingPlugin,c=b.grid,d=c.lockable?c.normalGrid.view:c.view;a.callParent(arguments),a.scrollingView=d,a.scrollingViewEl=d.el,a.mon(a.renderTo,"scroll",a.onCtScroll,a,{buffer:100}),a.mon(a.el,{click:Ext.emptyFn,stopPropagation:!0}),a.el.swallowEvent(["keypress","keydown"]),a.keyNav=new Ext.util.KeyNav(a.el,{esc:b.onEscKey,scope:b}),a.mon(b.view,{beforerefresh:a.onBeforeViewRefresh,refresh:a.onViewRefresh,scope:a})},onBeforeViewRefresh:function(a){var b=this,c=a.el.dom;b.el.dom.parentNode===c&&c.removeChild(b.el.dom)},onViewRefresh:function(a){var b,c=this,d=a.el.dom,e=c.context;d.appendChild(c.el.dom),e&&(b=e.store.indexOf(e.record))>=0?(e.row=a.getNode(b),c.reposition(),c.tooltip&&c.tooltip.isVisible()&&c.tooltip.setTarget(e.row)):c.editingPlugin.cancelEdit()},onCtScroll:function(a,b){var c=this,d=b.scrollTop,e=b.scrollLeft;d!==c.lastScrollTop&&(c.lastScrollTop=d,(c.tooltip&&c.tooltip.isVisible()||c.hiddenTip)&&c.repositionTip()),e!==c.lastScrollLeft&&(c.lastScrollLeft=e,c.reposition())},reposition:function(a){this.currRowH&&this.currRow.setHeight(this.currRowH);var b,c,d=this,e=d.context,f=e&&Ext.get(e.row),g=d.editingPlugin.grid,h=g.view.el,i=g.verticalScroller,j=g.headerCt.getFullWidth(),k=g.getWidth(),l=(Math.min(j,k),g.view.el.dom.scrollLeft,function(){i&&(i.invalidate(),btnEl.scrollIntoView(h,!1)),a&&a.callback&&a.callback.call(a.scope||d)});if(f&&Ext.isElement(f.dom))if(f.scrollIntoView(h,!1),b=f.getXY()[1]+19,d.currRowH=f.getHeight(),d.currRow=f,f.setHeight(d.getHeight()+19),Ext.isIE&&(c+=2),a){var m={to:{y:b},duration:a.duration||125,listeners:{afteranimate:function(){l(),b=f.getXY()[1]+19,d.el.setY(b)}}};d.animate(m)}else d.el.setY(b),l();d.getWidth()!=j&&d.setWidth(j)},resizeEditor:function(){this.currRowH&&this.currRow.setHeight(this.currRowH);{var a,b,c=this,d=c.context,e=d&&Ext.get(d.row),f=c.editingPlugin.grid,g=f.view.el,h=(f.verticalScroller,f.headerCt.getFullWidth()),i=f.getWidth();Math.min(h,i),f.view.el.dom.scrollLeft}e&&Ext.isElement(e.dom)&&(e.scrollIntoView(g,!1),a=e.getXY()[1]+19,c.currRowH=e.getHeight(),c.currRow=e,e.setHeight(c.getHeight()+19),Ext.isIE&&(b+=2)),c.getWidth()!=h&&c.setWidth(h)},getGridStores:function(){for(var a=this,b=a.query("grid"),c=[],d=0;d<b.length;d++)c.push(b[d].store);return c},syncChildStoresChanges:function(){for(var a=this,b=a.getGridStores(),c=0;c<b.length;c++)b[c].sync()},rejectChildStoresChanges:function(){for(var a=this,b=a.getGridStores(),c=0;c<b.length;c++)b[c].rejectChanges()},getEditor:function(a){var b=this;return Ext.isNumber(a)?b.query(">[isFormField]")[a]:a instanceof Ext.grid.column.Column?a.getEditor():!1},setFields:function(){for(var a=this,b=a.getForm(),c=b.getFields().items,d=a.query("container"),e=0;e<c.length;e++)a.mon(c[e],"change",a.onFieldValueChange,a);for(var f=0;f<d.length;f++)a.mon(d[f],"resize",a.resizeEditor,a)},loadRecord:function(a){var b=this,c=b.getForm(),d=b.query('button[action="update"]')[0],e=a.phantom?"Save":"Update";c.loadRecord(a),d.setText(e),b.saveBtnEnabled&&d.setDisabled(!b.saveBtnEnabled),this.errorSummary&&(c.isValid()?b.hideToolTip():b.showToolTip()),Ext.Array.forEach(b.query(">displayfield"),function(c){b.renderColumnData(c,a)},b)},renderColumnData:function(a,b){var c=this,d=c.editingPlugin.grid,e=(d.headerCt,d.view),f=(e.store,c.getForm());f.loadRecord(b)},beforeEdit:function(){var a=this;return a.getGridStores(),a.isVisible()&&!a.autoCancel&&a.isDirty()?(a.showToolTip(),!1):void 0},startEdit:function(a){var b=this,c=b.editingPlugin.grid,d=(c.getView(),c.store),e=b.context=Ext.apply(b.editingPlugin.context,{view:c.getView(),store:d});e.grid.getSelectionModel().select(a),b.loadRecord(a),b.isVisible()?b.reposition({callback:this.focusContextCell}):(b.show(),b.focusContextCell())},focusContextCell:function(){var a=this.getEditor(this.context.colIdx);a&&a.focus&&a.focus()},cancelEdit:function(){var a=this,b=a.getForm();a.rejectChildStoresChanges(),a.hide(),b.clearInvalid(),b.reset()},completeEdit:function(){var a=this,b=a.getForm();if(b.isValid())return b.updateRecord(a.context.record),a.editingPlugin.autoSync&&b._record.store.sync({callback:function(){a.fireEvent("sync",a,a.context)}}),a.syncChildStoresChanges(),a.hide(),!0},completeRemove:function(){var a=this,b=a.getForm(),c=a.context.view,d=a.context.store,e=c.getSelectionModel().getLastSelected();c.panel.fireEvent("beforeremove",a,d,e)&&Ext.Msg.show({title:"WAIT!!!",msg:"Are you sure you want to remove this record?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,scope:a,fn:function(f){"yes"==f&&(e.parentNode?e.parentNode.removeChild(e):d.remove(e),c.panel.fireEvent("remove",a,d,e),a.hide(),b.clearInvalid(),b.reset(),a.editingPlugin.autoSync&&d.sync({callback:function(){a.fireEvent("sync",a,a.context)}}))}})},onShow:function(){var a=this;a.callParent(arguments),a.reposition()},onHide:function(){var a=this;a.callParent(arguments),a.hideToolTip(),a.invalidateScroller(),a.context&&(a.context.view.focus(),a.context=null),a.currRow.setHeight(a.currRowH),a.currRowH=null},isDirty:function(){var a=this,b=a.getForm();return b.isDirty()},getToolTip:function(){return this.tooltip||(this.tooltip=new Ext.tip.ToolTip({cls:Ext.baseCSSPrefix+"grid-row-editor-errors",title:this.errorsText,autoHide:!1,closable:!0,closeAction:"disable",anchor:"left",anchorToTarget:!1}))},hideToolTip:function(){var a=this,b=a.getToolTip();b.rendered&&b.disable(),a.hiddenTip=!1},showToolTip:function(){var a=this,b=a.getToolTip();b.showAt([0,0]),b.update(a.getErrors()),a.repositionTip(),b.enable()},repositionTip:function(){var a=this,b=a.getToolTip(),c=a.context,d=Ext.get(c.row),e=a.scrollingViewEl,f=e.dom.clientHeight,g=a.lastScrollTop,h=g+f,i=d.getHeight(),j=d.getOffsetsTo(a.context.view.body)[1],k=j+i;k>g&&h>j?(b.showAt(b.getAlignToXY(e,"tl-tr",[15,d.getOffsetsTo(e)[1]])),a.hiddenTip=!1):(b.hide(),a.hiddenTip=!0)},getErrors:function(){var a,b=this,c=[],d=b.query("[isFormField]"),e=d.length;for(a=0;e>a;a++)c=c.concat(Ext.Array.map(d[a].getErrors(),b.createErrorListItem));return c.length||b.autoCancel||!b.isDirty()||(c[0]=b.createErrorListItem(b.dirtyText)),'<ul class="'+Ext.plainListCls+'">'+c.join("")+"</ul>"},createErrorListItem:function(a){return'<li class="'+Ext.baseCSSPrefix+'grid-row-editor-errors-item">'+a+"</li>"},invalidateScroller:function(){var a=this,b=a.context,c=b.grid.verticalScroller;c&&c.invalidate()}}),Ext.define("App.ux.combo.ActiveInsurances",{extend:"Ext.form.ComboBox",alias:"widget.activeinsurancescombo",initComponent:function(){var a=this;Ext.define("ActiveInsurancesComboModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getActiveInsurances"}}}),a.store=Ext.create("Ext.data.Store",{model:"ActiveInsurancesComboModel"}),Ext.apply(this,{editable:!1,displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store}),a.callParent()}}),Ext.define("App.ux.combo.ActiveProviders",{extend:"Ext.form.ComboBox",alias:"widget.activeproviderscombo",displayField:"option_name",valueField:"option_value",editable:!1,emptyText:_("select"),initComponent:function(){var a=this;Ext.define("ActiveProvidersModel"+this.id,{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"int"}],proxy:{type:"direct",api:{read:"User.getActiveProviders"}}}),a.store=Ext.create("Ext.data.Store",{model:"ActiveProvidersModel"+this.id,autoLoad:!0}),a.callParent(arguments)}}),Ext.define("App.ux.combo.Allergies",{extend:"Ext.form.ComboBox",alias:"widget.mitos.allergiescombo",initComponent:function(){var a=this;Ext.define("AllergiesComboModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"allergy_name"},{name:"allergy_type",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getAllergiesByType}}}),a.store=Ext.create("Ext.data.Store",{model:"AllergiesComboModel",autoLoad:!1}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"allergy_name",valueField:"allergy_name",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.AllergiesAbdominal",{extend:"Ext.form.ComboBox",alias:"widget.mitos.allergiesabdominalcombo",initComponent:function(){var a=this;Ext.define("allergiesabdominalModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getOptionsByListId"}}}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:Ext.create("Ext.data.Store",{model:"allergiesabdominalModel",autoLoad:!1})}),a.callParent(arguments)}}),Ext.define("App.ux.combo.AllergiesLocation",{extend:"Ext.form.ComboBox",alias:"widget.mitos.allergieslocationcombo",initComponent:function(){var a=this;Ext.define("allergieslocationModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getOptionsByListId"},extraParams:{list_id:79}}}),a.store=Ext.create("Ext.data.Store",{model:"allergieslocationModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.AllergiesSeverity",{extend:"Ext.form.ComboBox",alias:"widget.mitos.allergiesseveritycombo",initComponent:function(){var a=this;Ext.define("allergiesseverityModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:84}}}),a.store=Ext.create("Ext.data.Store",{model:"allergiesseverityModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.AllergiesTypes",{extend:"Ext.form.ComboBox",alias:"widget.mitos.allergiestypescombo",initComponent:function(){var a=this;Ext.define("AllergiesTypesComboModel",{extend:"Ext.data.Model",fields:[{name:"allergy_type",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getAllergyTypes"}}}),a.store=Ext.create("Ext.data.Store",{model:"AllergiesTypesComboModel",autoLoad:!1}),Ext.apply(this,{editable:!1,displayField:"allergy_type",valueField:"allergy_type",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.Authorizations",{extend:"Ext.form.ComboBox",alias:"widget.mitos.authorizationscombo",initComponent:function(){var a=this;Ext.define("AuthorizationsModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"name",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getAuthorizations}}}),a.store=Ext.create("Ext.data.Store",{model:"AuthorizationsModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",valueField:"id",displayField:"name",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.BillingFacilities",{extend:"Ext.form.ComboBox",alias:"widget.mitos.billingfacilitiescombo",initComponent:function(){var a=this;Ext.define("BillingFacilitiesComboModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"int"}],proxy:{type:"direct",api:{read:"CombosData.getBillingFacilities"}}}),a.store=Ext.create("Ext.data.Store",{model:"BillingFacilitiesComboModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",valueField:"option_value",displayField:"option_name",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.CalendarCategories",{extend:"Ext.form.ComboBox",alias:"widget.mitos.calcategoriescombobox",editable:!1,displayField:"catname",valueField:"catid",emptyText:_("select"),initComponent:function(){var a=this;Ext.define("CalendarCategoriesModel",{extend:"Ext.data.Model",fields:[{name:"catid",type:"int"},{name:"catname",type:"string"}],idProperty:"catid",proxy:{type:"direct",api:{read:CombosData.getCalendarCategories}}}),a.store=Ext.create("Ext.data.Store",{model:"CalendarCategoriesModel",autoLoad:!0}),Ext.apply(this,{store:a.store},null),a.callParent()}}),Ext.define("App.ux.combo.CalendarStatus",{extend:"Ext.form.ComboBox",alias:"widget.mitos.calstatuscombobox",name:"status",initComponent:function(){var a=this;Ext.define("CalendarStatusModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:30}}}),a.store=Ext.create("Ext.data.Store",{model:"CalendarStatusModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent()}}),Ext.define("App.ux.combo.CodesTypes",{extend:"Ext.form.ComboBox",alias:"widget.mitos.codestypescombo",initComponent:function(){var a=this;Ext.define("CodesTypesModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getOptionsByListId"},extraParams:{list_id:56}}}),a.store=Ext.create("Ext.data.Store",{model:"CodesTypesModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",valueField:"option_value",displayField:"option_name",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.Combo",{extend:"Ext.form.ComboBox",alias:"widget.gaiaehr.combo",displayField:"option_name",valueField:"option_value",emptyText:_("select"),forceSelection:!1,list:null,loadStore:!1,valueDataType:"string",initComponent:function(){var a=this,b=a.id+"ComboModel";Ext.define(b,{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:a.valueDataType},{name:"code",type:"string"},{name:"code_type",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getOptionsByListId"},extraParams:{list_id:a.list}},idProperty:"option_value"}),a.store=Ext.create("Ext.data.Store",{model:b,autoLoad:a.loadStore}),a.callParent(arguments)}}),Ext.define("App.ux.combo.CVXManufacturers",{extend:"Ext.form.ComboBox",alias:"widget.cvxmanufacturerscombo",initComponent:function(){var a=this;Ext.define("CVXManufacturersComboModel",{extend:"Ext.data.Model",fields:[{name:"mvx_code",type:"string"},{name:"manufacturer",type:"string"}],proxy:{type:"direct",api:{read:Immunizations.getMvx}}}),a.store=Ext.create("Ext.data.Store",{model:"CVXManufacturersComboModel",autoLoad:!1}),Ext.apply(this,{editable:!1,valueField:"mvx_code",displayField:"manufacturer",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.CVXManufacturersForCvx",{extend:"Ext.form.ComboBox",alias:"widget.cvxmanufacturersforcvxcombo",initComponent:function(){var a=this;Ext.define("CVXManufacturersForCvxComboModel",{extend:"Ext.data.Model",fields:[{name:"mvx_code",type:"string"},{name:"manufacturer",type:"string"}],proxy:{type:"direct",api:{read:"Immunizations.getMvxForCvx"}}}),a.store=Ext.create("Ext.data.Store",{model:"CVXManufacturersForCvxComboModel",autoLoad:!1}),Ext.apply(this,{queryMode:"local",valueField:"mvx_code",displayField:"manufacturer",emptyText:_("select"),store:a.store}),a.callParent(arguments)}}),Ext.define("App.ux.combo.EncounterICDS",{extend:"Ext.form.ComboBox",alias:"widget.encountericdscombo",initComponent:function(){var a=this;Ext.define("EncounterICDXComboModel",{extend:"Ext.data.Model",fields:[{name:"code",type:"string"},{name:"code_type",type:"string"},{name:"short_desc",type:"string"},{name:"code_and_code_type",type:"string",convert:function(a,b){return b.data.code_type+":"+b.data.code}}],proxy:{type:"direct",api:{read:"Encounter.getEncounterDxs"}}}),Ext.apply(this,{queryMode:"local",editable:!1,multiSelect:!0,displayField:"code_and_code_type",valueField:"code_and_code_type",emptyText:_("select"),store:Ext.create("Ext.data.Store",{model:"EncounterICDXComboModel",autoLoad:!1}),listConfig:{getInnerTpl:function(){return'<span style="font-weight:bold">{code}</span> - {short_desc}</div>'}}}),a.callParent(arguments)}}),Ext.define("App.ux.combo.EncounterPriority",{extend:"Ext.form.ComboBox",alias:"widget.encounterprioritycombo",initComponent:function(){var a=this;Ext.define("EncounterPriorityModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getOptionsByListId"},extraParams:{list_id:94}}}),a.store=Ext.create("Ext.data.Store",{model:"EncounterPriorityModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("priority"),store:a.store,listConfig:{getInnerTpl:function(){return'<span class="{option_name}">{option_name}</span></div>'}}},null),a.on("change",function(a,b){var c,d;"Minimal"==b?(c="#008000",d="#ffffff"):"Delayed"==b?(c="#ffff00",d="#000000"):"Immediate"==b?(c="#ff0000",d="#ffffff"):"Expectant"==b?(c="#808080",d="#ffffff"):"Deceased"==b&&(c="#000000",d="#ffffff"),this.inputEl.setStyle({"background-color":c,"background-image":"none",color:d})},a),a.callParent(arguments)}}),Ext.define("App.ux.combo.Ethnicity",{extend:"Ext.form.ComboBox",alias:"widget.gaiaehr.ethnicitycombo",initComponent:function(){var a=this;Ext.define("ethnicityModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:14}}}),a.store=Ext.create("Ext.data.Store",{model:"ethnicityModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.Facilities",{extend:"Ext.form.ComboBox",alias:"widget.mitos.facilitiescombo",initComponent:function(){var a=this;Ext.define("FacilitiesComboModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"name",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getFacilities"}}}),a.store=Ext.create("Ext.data.Store",{model:"FacilitiesComboModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",valueField:"id",displayField:"name",emptyText:_("select"),store:a.store}),a.callParent(arguments)}}),Ext.define("App.ux.combo.FloorPlanAreas",{extend:"Ext.form.ComboBox",alias:"widget.floorplanareascombo",initComponent:function(){var a=this;Ext.define("FloorPlanAreasModel",{extend:"Ext.data.Model",fields:[{name:"title",type:"string"},{name:"id",type:"int"}],proxy:{type:"direct",api:{read:CombosData.getFloorPlanAreas}}}),a.store=Ext.create("Ext.data.Store",{model:"FloorPlanAreasModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"title",valueField:"id",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.FollowUp",{extend:"Ext.form.ComboBox",alias:"widget.mitos.followupcombo",initComponent:function(){var a=this;Ext.define("FollowUpModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:90}}}),a.store=Ext.create("Ext.data.Store",{model:"FollowUpModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.InsurancePayerType",{extend:"Ext.form.ComboBox",alias:"widget.mitos.insurancepayertypecombo",initComponent:function(){var a=this;a.store=Ext.create("Ext.data.Store",{fields:["id","name"],data:[{id:"1",name:_("all")},{id:"16",name:_("other_hcfa")},{id:"MB",name:_("medicare_part_b")},{id:"MC",name:_("medicaid")},{id:"CH",name:_("champusva")},{id:"CH",name:_("champus")},{id:"BL",name:_("blue_cross_blue_shield")},{id:"16",name:_("feca")},{id:"09",name:_("self_pay")},{id:"10",name:_("central_certification")},{id:"11",name:_("other_nonfederal_programs")},{id:"12",name:_("ppo")},{id:"13",name:_("pos")},{id:"14",name:_("epo")},{id:"15",name:_("indemnity_insurance")},{id:"16",name:_("hmo")},{id:"AM",name:_("automobile_medical")},{id:"CI",name:_("commercial_insurance")},{id:"DS",name:_("disability")},{id:"HM",name:_("health_maintenance_organization")},{id:"LI",name:_("liability")},{id:"LM",name:_("liability_medical")},{id:"OF",name:_("other_federal_program")},{id:"TV",name:_("title_v")},{id:"VA",name:_("veterans_administration_plan")},{id:"WC",name:_("workers_compensation_health_plan")},{id:"ZZ",name:_("mutually_defined")}]}),Ext.apply(this,{name:"freeb_type",editable:!1,displayField:"name",valueField:"id",queryMode:"local",emptyText:_("select"),store:a.store},null),a.callParent()}}),Ext.define("App.ux.combo.LabObservations",{extend:"Ext.form.ComboBox",alias:"widget.labobservationscombo",initComponent:function(){var a=this;Ext.define("labObservationsComboModel",{extend:"Ext.data.Model",fields:[{name:"label"},{name:"name"},{name:"unit"},{name:"range_start"},{name:"range_end"},{name:"threshold"},{name:"notes"}],proxy:{type:"direct",api:{read:"Services.getAllLabObservations"}}}),a.store=Ext.create("Ext.data.Store",{model:"labObservationsComboModel",autoLoad:!1}),Ext.apply(this,{store:a.store,displayField:"label",valueField:"id",emptyText:_("select_existing_observation"),editable:!1,width:810,listConfig:{getInnerTpl:function(){return'<div><span style="width:200px;display:inline-block;"><span style="font-weight:bold;">'+_("Label")+':</span> {label},</span><span style="width:90px;display:inline-block;"><span style="font-weight:bold;">'+_("unit")+':</span> {unit},</span><span style="width:150px;display:inline-block;"><span style="font-weight:bold;">'+_("range_start")+':</span> {range_start},</span><span style="width:130px;display:inline-block;"><span style="font-weight:bold;">'+_("range_end")+':</span> {range_end},</span><span style="width:100px;display:inline-block;"><span style="font-weight:bold;">'+_("threshold")+":</span> {threshold}</span></div>"}}},null),a.callParent()}}),Ext.define("App.ux.combo.LabsTypes",{extend:"Ext.form.ComboBox",alias:"widget.mitos.labstypescombo",initComponent:function(){var a=this;Ext.define("LabsTypesComboModel",{extend:"Ext.data.Model",fields:[{name:"id"},{name:"code_text_short"},{name:"parent_name",type:"string"},{name:"loinc_name",type:"string"}],proxy:{type:"direct",api:{read:Laboratories.getActiveLaboratoryTypes}}}),a.store=Ext.create("Ext.data.Store",{model:"LabsTypesComboModel",autoLoad:!1}),Ext.apply(this,{editable:!1,displayField:"loinc_name",valueField:"loinc_name",emptyText:_("select"),store:a.store}),a.callParent(arguments)}}),Ext.define("App.ux.combo.Languages",{extend:"Ext.form.ComboBox",alias:"widget.languagescombo",initComponent:function(){var a=this;Ext.define("LanguagesComboModel",{extend:"Ext.data.Model",fields:[{name:"code",type:"string"},{name:"description",type:"string"}],proxy:{type:"direct",api:{read:i18nRouter.getAvailableLanguages}}}),a.store=Ext.create("Ext.data.Store",{model:"LanguagesComboModel",autoLoad:!1}),Ext.apply(this,{editable:!1,valueField:"code",displayField:"description",emptyText:_("select"),store:a.store},null),a.callParent()}}),Ext.define("App.ux.combo.Lists",{extend:"Ext.form.ComboBox",alias:"widget.mitos.listscombo",width:250,iconCls:"icoListOptions",initComponent:function(){var a=this;Ext.define("ListComboModel",{extend:"Ext.data.Model",fields:[{name:"id"},{name:"title",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getLists}}}),a.store=Ext.create("Ext.data.Store",{model:"ListComboModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",valueField:"id",displayField:"title",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.MedicalIssues",{extend:"Ext.form.ComboBox",alias:"widget.mitos.medicalissuescombo",initComponent:function(){var a=this;Ext.define("MedicalIssuesModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:75}}}),a.store=Ext.create("Ext.data.Store",{model:"MedicalIssuesModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.Medications",{extend:"Ext.form.ComboBox",alias:"widget.mitos.medicationscombo",initComponent:function(){var a=this;Ext.define("MedicationsModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:74}}}),a.store=Ext.create("Ext.data.Store",{model:"MedicationsModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.MsgNoteType",{extend:"Ext.form.ComboBox",alias:"widget.msgnotetypecombo",initComponent:function(){var a=this;Ext.define("MsgNoteTypeModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:28}}}),a.store=Ext.create("Ext.data.Store",{model:"MsgNoteTypeModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent()}}),Ext.define("App.ux.combo.MsgStatus",{extend:"Ext.form.ComboBox",alias:"widget.msgstatuscombo",initComponent:function(){var a=this;Ext.define("MsgStatusModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:45}}}),a.store=Ext.create("Ext.data.Store",{model:"MsgStatusModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent()}}),Ext.define("App.ux.combo.Occurrence",{extend:"Ext.form.ComboBox",alias:"widget.mitos.occurrencecombo",initComponent:function(){var a=this;Ext.define("OccurrenceModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getOptionsByListId"},extraParams:{list_id:26}}}),a.store=Ext.create("Ext.data.Store",{model:"OccurrenceModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store}),a.callParent(arguments)}}),Ext.define("App.ux.combo.Outcome",{extend:"Ext.form.ComboBox",alias:"widget.mitos.outcomecombo",initComponent:function(){var a=this;Ext.define("OutcomeModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:27}}}),a.store=Ext.create("Ext.data.Store",{model:"OutcomeModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.Outcome2",{extend:"Ext.form.ComboBox",alias:"widget.mitos.outcome2combo",initComponent:function(){var a=this;Ext.define("Outcome2model",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getOptionsByListId"},extraParams:{list_id:74}}}),a.store=Ext.create("Ext.data.Store",{model:"Outcome2model",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store}),a.callParent(arguments)}}),Ext.define("App.ux.combo.PayingEntity",{extend:"Ext.form.ComboBox",alias:"widget.mitos.payingentitycombo",initComponent:function(){var a=this;Ext.define("PayingEntityModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:54}}}),a.store=Ext.create("Ext.data.Store",{model:"PayingEntityModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.PaymentCategory",{extend:"Ext.form.ComboBox",alias:"widget.mitos.paymentcategorycombo",initComponent:function(){var a=this;Ext.define("PaymentCategoryModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:49}}}),a.store=Ext.create("Ext.data.Store",{model:"PaymentCategoryModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.PaymentMethod",{extend:"Ext.form.ComboBox",alias:"widget.mitos.paymentmethodcombo",initComponent:function(){var a=this;Ext.define("PaymentMethodModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:51}}}),a.store=Ext.create("Ext.data.Store",{model:"PaymentMethodModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)
}}),Ext.define("App.ux.combo.Pharmacies",{extend:"Ext.form.ComboBox",alias:"widget.mitos.pharmaciescombo",initComponent:function(){var a=this;Ext.define("PharmaciesComboModel",{extend:"Ext.data.Model",fields:[{name:"option_name"},{name:"option_value"}],proxy:{type:"direct",api:{read:CombosData.getActivePharmacies}}}),a.store=Ext.create("Ext.data.Store",{model:"PharmaciesComboModel",autoLoad:!1}),Ext.apply(this,{editable:!1,displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.posCodes",{extend:"Ext.form.ComboBox",alias:"widget.mitos.poscodescombo",initComponent:function(){var a=this;Ext.define("PosCodesModel",{extend:"Ext.data.Model",fields:[{name:"code",type:"string"},{name:"title",type:"string",convert:function(a,b){return b.data.code+" - "+a}}],proxy:{type:"direct",api:{read:"CombosData.getPosCodes"}}}),a.store=Ext.create("Ext.data.Store",{model:"PosCodesModel",autoLoad:!0}),Ext.apply(a,{editable:!1,queryMode:"local",valueField:"code",displayField:"title",emptyText:_("select"),store:a.store}),a.callParent()}}),Ext.define("App.ux.combo.PrescriptionHowTo",{extend:"Ext.form.ComboBox",alias:"widget.mitos.prescriptionhowto",initComponent:function(){var a=this;Ext.define("PrescriptionHowTomodel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getOptionsByListId"},extraParams:{list_id:88}}}),a.store=Ext.create("Ext.data.Store",{model:"PrescriptionHowTomodel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store}),a.callParent(arguments)}}),Ext.define("App.ux.combo.PrescriptionOften",{extend:"Ext.form.ComboBox",alias:"widget.mitos.prescriptionoften",initComponent:function(){var a=this;Ext.define("PrescriptionOftenmodel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:86}}}),a.store=Ext.create("Ext.data.Store",{model:"PrescriptionOftenmodel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.PrescriptionTypes",{extend:"Ext.form.ComboBox",alias:"widget.mitos.prescriptiontypes",initComponent:function(){var a=this;Ext.define("PrescriptionTypesModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getOptionsByListId"},extraParams:{list_id:89}}}),a.store=Ext.create("Ext.data.Store",{model:"PrescriptionTypesModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store}),a.callParent(arguments)}}),Ext.define("App.ux.combo.PrescriptionWhen",{extend:"Ext.form.ComboBox",alias:"widget.mitos.prescriptionwhen",initComponent:function(){var a=this;Ext.define("PrescriptionWhenmodel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:87}}}),a.store=Ext.create("Ext.data.Store",{model:"PrescriptionWhenmodel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.PreventiveCareTypes",{extend:"Ext.form.ComboBox",alias:"widget.mitos.preventivecaretypescombo",initComponent:function(){var a=this;Ext.define("PreventiveCareTypesModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:78}}}),a.store=Ext.create("Ext.data.Store",{model:"PreventiveCareTypesModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",valueField:"option_value",displayField:"option_name",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.ProceduresBodySites",{extend:"Ext.form.ComboBox",alias:"widget.mitos.proceduresbodysitescombo",initComponent:function(){var a=this;Ext.define("ProceduresBodySitesModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:34}}}),a.store=Ext.create("Ext.data.Store",{model:"ProceduresBodySitesModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.Providers",{extend:"Ext.form.ComboBox",alias:"widget.mitos.providerscombo",initComponent:function(){var a=this;Ext.define("Providersmodel",{extend:"Ext.data.Model",fields:[{name:"id",type:"string"},{name:"name",type:"string"}],proxy:{type:"direct",api:{read:"User.getProviders"}}}),a.store=Ext.create("Ext.data.Store",{model:"Providersmodel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"name",valueField:"id",emptyText:_("select"),store:a.store}),a.callParent(arguments)}}),Ext.define("App.ux.combo.Race",{extend:"Ext.form.ComboBox",alias:"widget.gaiaehr.racecombo",initComponent:function(){var a=this;Ext.define("raceModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:59}}}),a.store=Ext.create("Ext.data.Store",{model:"raceModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.Roles",{extend:"Ext.form.ComboBox",alias:"widget.mitos.rolescombo",initComponent:function(){var a=this;Ext.define("RolesComboModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"role_name",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getRoles}}}),a.store=Ext.create("Ext.data.Store",{model:"RolesComboModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",valueField:"id",displayField:"role_name",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.Sex",{extend:"Ext.form.ComboBox",alias:"widget.gaiaehr.sexcombo",initComponent:function(){var a=this;Ext.define("Sexmodel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:19}}}),a.store=Ext.create("Ext.data.Store",{model:"Sexmodel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.SmokingStatus",{extend:"App.ux.combo.Combo",alias:"widget.mitos.smokingstatuscombo",list:58,loadStore:!0}),Ext.define("App.ux.combo.Surgery",{extend:"Ext.form.ComboBox",alias:"widget.mitos.surgerycombo",initComponent:function(){var a=this;Ext.define("SurgeryModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:76}}}),a.store=Ext.create("Ext.data.Store",{model:"SurgeryModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.TaxId",{extend:"Ext.form.ComboBox",alias:"widget.mitos.taxidcombo",initComponent:function(){var a=this;Ext.define("TaxIdsModel",{extend:"Ext.data.Model",fields:[{name:"option_id",type:"string"},{name:"title",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getTaxIds}}}),a.store=Ext.create("Ext.data.Store",{model:"TaxIdsModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"title",valueField:"option_id",emptyText:_("select"),store:a.store},null),a.callParent()}}),Ext.define("App.ux.combo.Templates",{extend:"Ext.form.ComboBox",alias:"widget.documentstemplatescombo",initComponent:function(){var a=this;Ext.define("DocumentsTemplatesComboModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"title",type:"string"},{name:"body",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getTemplatesTypes"}}}),Ext.apply(this,{editable:!1,displayField:"title",valueField:"id",queryMode:"local",emptyText:_("select"),store:Ext.create("Ext.data.Store",{model:"DocumentsTemplatesComboModel",autoLoad:!1})}),a.callParent(arguments),a.listeners={scope:a,beforerender:function(){a.getStore().load()}}}}),Ext.define("App.ux.combo.Themes",{extend:"Ext.form.ComboBox",alias:"widget.themescombo",initComponent:function(){var a=this;Ext.define("ThemesComboModel",{extend:"Ext.data.Model",fields:[{name:"name",type:"string"},{name:"value",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getThemes"}}}),a.store=Ext.create("Ext.data.Store",{model:"ThemesComboModel",autoLoad:!1}),Ext.apply(this,{editable:!1,valueField:"value",displayField:"name",emptyText:_("select"),store:a.store},null),a.callParent()}}),Ext.define("App.ux.combo.Time",{extend:"Ext.form.ComboBox",alias:"widget.mitos.timecombo",initComponent:function(){var a=this;Ext.define("Timemodel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:77}}}),a.store=Ext.create("Ext.data.Store",{model:"Timemodel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.Titles",{extend:"Ext.form.ComboBox",alias:"widget.mitos.titlescombo",initComponent:function(){var a=this;Ext.define("TitlesModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:22}}}),a.store=Ext.create("Ext.data.Store",{model:"TitlesModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.TransmitMethod",{extend:"Ext.form.ComboBox",alias:"widget.transmitmethodcombo",initComponent:function(){var a=this;a.storeTrsmit=Ext.create("Ext.data.Store",{fields:["id","name"],data:[{id:"1",name:"Print"},{id:"2",name:"Email"},{id:"3",name:"Email"}]}),Ext.apply(this,{name:"transmit_method",editable:!1,displayField:"name",valueField:"id",queryMode:"local",emptyText:_("select"),store:a.storeTrsmit},null),a.callParent()}}),Ext.define("App.ux.combo.Types",{extend:"Ext.form.ComboBox",alias:"widget.mitos.typescombobox",initComponent:function(){var a=this;Ext.define("TypesModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:32}}}),a.store=Ext.create("Ext.data.Store",{model:"TypesModel",autoLoad:!0}),Ext.apply(this,{name:"abook_type",editable:!1,displayField:"option_name",valueField:"option_value",queryMode:"local",store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.Units",{extend:"Ext.form.ComboBox",alias:"widget.mitos.unitscombo",initComponent:function(){var a=this;Ext.define("UnitsModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:38}}}),a.store=Ext.create("Ext.data.Store",{model:"UnitsModel",autoLoad:!0}),Ext.apply(this,{queryMode:"local",valueField:"option_value",displayField:"option_name",store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.Users",{extend:"Ext.form.ComboBox",alias:"widget.userscombo",initComponent:function(){var a=this;Ext.define("UsersComboModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"name",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getUsers}}}),a.store=Ext.create("Ext.data.Store",{model:"UsersComboModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",valueField:"id",displayField:"name",emptyText:_("select"),store:a.store},null),a.callParent()}}),Ext.define("App.ux.combo.YesNoNa",{extend:"Ext.form.ComboBox",alias:"widget.mitos.yesnonacombo",initComponent:function(){var a=this;Ext.define("yesnonaModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:93}}}),a.store=Ext.create("Ext.data.Store",{model:"yesnonaModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.ux.combo.YesNo",{extend:"Ext.form.ComboBox",alias:"widget.mitos.yesnocombo",initComponent:function(){var a=this;Ext.define("yesnoModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:CombosData.getOptionsByListId},extraParams:{list_id:23}}}),a.store=Ext.create("Ext.data.Store",{model:"yesnoModel",autoLoad:!0}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store},null),a.callParent(arguments)}}),Ext.define("App.view.search.PatientSearch",{extend:"App.ux.RenderPanel",id:"panelPatientSearch",pageTitle:_("advance_patient_search"),pageLayout:"border",uses:["Ext.grid.Panel"],initComponent:function(){var a=this;a.form=Ext.create("Ext.form.FormPanel",{region:"north",height:200,bodyPadding:10,margin:"0 0 3 0",buttonAlign:"left",items:[{xtype:"fieldcontainer",fieldLabel:_("name"),layout:"hbox",defaults:{margin:"0 5 0 0"},items:[{xtype:"textfield",emptyText:_("first_name"),name:"fname"},{xtype:"textfield",emptyText:_("middle_name"),name:"mname"},{xtype:"textfield",emptyText:_("last_name"),name:"lname"}]}],buttons:[{text:_("search"),iconCls:"save",handler:function(){}},"-",{text:_("reset"),iconCls:"save",tooltip:_("hide_selected_office_note"),handler:function(){}}]}),a.grid=Ext.create("Ext.grid.Panel",{region:"center",columns:[{header:"id",sortable:!1,dataIndex:"id",hidden:!0},{width:150,header:_("date"),sortable:!0,dataIndex:"date",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{width:150,header:_("user"),sortable:!0,dataIndex:"user"},{flex:1,header:_("note"),sortable:!0,dataIndex:"body"}],tbar:Ext.create("Ext.PagingToolbar",{store:a.store,displayInfo:!0,emptyMsg:_("no_office_notes_to_display"),plugins:Ext.create("Ext.ux.SlidingPager",{})})}),a.pageBody=[a.form,a.grid],a.callParent(arguments)},onActive:function(a){a(!0)}}),Ext.define("Modules.Module",{extend:"Ext.app.Controller",refs:[{ref:"viewport",selector:"viewport"},{ref:"mainNav",selector:"treepanel[action=mainNav]"}],addAppPanel:function(a){this.getViewport().MainPanel.add(a)},addHeaderItem:function(a){this.getViewport().Header.add(a)},addNavigationNodes:function(a,b){var c;if(c="root"==a||null==a?this.getMainNav().getStore().getRootNode():this.getMainNav().getStore().getNodeById(a)){var d=c.findChildBy(function(a){return a.hasChildNodes()});if(Ext.isArray(b)){for(var e=[],f=0;f<b.length;f++)Ext.Array.push(e,c.insertBefore(b[f],d));return e}return c.insertBefore(b,d)}},getModuleData:function(a){var b=this;Modules.getModuleByName(a,function(a,c){b.fireEvent("moduledata",c.result)})},updateModuleData:function(a){var b=this;Modules.updateModule(a,function(a,c){b.fireEvent("moduledataupdate",c.result)})},addLanguages:function(){},insertToHead:function(a){Ext.getHeaad().appendChild(a)}}),Ext.define("App.ux.window.Window",{extend:"Ext.window.Window",autoHeight:!0,modal:!0,border:!0,autoScroll:!0,resizable:!1,closeAction:"hide",initComponent:function(){this.callParent(arguments)},updateTitle:function(a,b){this.setTitle(a+(b?"[ Read Only ]":""))},setReadOnly:function(){for(var a=this.query("form"),b=app.patient.readOnly,c=0;c<a.length;c++){var d,e=a[c];if(e.readOnly!=b){e.readOnly=b,d=e.getForm().getFields().items;for(var f=0;f<d.length;f++)d[f].setReadOnly(b)}}return b},setButtonsDisabled:function(a){for(var b=app.patient.readOnly,c=0;c<a.length;c++){var d=a[c];d.disabled!=b&&(d.disabled=b,d.setDisabled(b))}},checkIfCurrPatient:function(){return app.getCurrPatient()},patientInfoAlert:function(){var a=app.getCurrPatient();Ext.Msg.alert(_("status"),_("patient")+": "+a.name+" ("+a.pid+")")},currPatientError:function(){Ext.Msg.show({title:"Oops! "+_("no_patient_selected"),msg:_("select_patient_patient_live_search"),scope:this,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR,fn:function(){this.goBack()}})},getFormItems:function(formPanel,formToRender,callback){formPanel.removeAll(),FormLayoutEngine.getFields({formToRender:formToRender},function(provider,response){var items=eval(response.result);formPanel.add(items),"function"==typeof callback&&callback(formPanel,items,!0)})},boolRenderer:function(a){return"1"==a||1==a||"true"==a?'<img style="padding-left: 13px" src="resources/images/icons/yes.gif" />':"0"==a||0==a||"false"==a?'<img style="padding-left: 13px" src="resources/images/icons/no.gif" />':a},alertRenderer:function(a){return"1"==a||1==a||"true"==a?'<img style="padding-left: 13px" src="resources/images/icons/no.gif" />':"0"==a||0==a||"false"==a?'<img style="padding-left: 13px" src="resources/images/icons/yes.gif" />':a},warnRenderer:function(a,b,c){var d=c.data.warningMsg?' data-qtip="'+c.data.warningMsg+'" ':"";return"1"==a||1==a||"true"==a?'<img src="resources/images/icons/icoImportant.png" '+d+" />":void 0},onExpandRemoveMask:function(a){a.picker.loadMask.destroy()},strToLowerUnderscores:function(a){return a.toLowerCase().replace(/ /gi,"_")},getCurrPatient:function(){return app.getCurrPatient()},getApp:function(){return app.getApp()},msg:function(a,b){app.msg(a,b)},passwordVerificationWin:function(a){var b=Ext.Msg.prompt(_("password_verification"),_("please_enter_your_password")+":",function(b,c){a(b,c)}),c=b.textField.getInputId();return document.getElementById(c).type="password",b}}),Ext.define("Ext.ux.statusbar.StatusBar",{extend:"Ext.toolbar.Toolbar",alternateClassName:"Ext.ux.StatusBar",alias:"widget.statusbar",requires:["Ext.toolbar.TextItem"],cls:"x-statusbar",busyIconCls:"x-status-busy",busyText:"Loading...",autoClear:5e3,emptyText:"&#160;",activeThreadId:0,initComponent:function(){var a="right"===this.statusAlign;this.callParent(arguments),this.currIconCls=this.iconCls||this.defaultIconCls,this.statusEl=Ext.create("Ext.toolbar.TextItem",{cls:"x-status-text "+(this.currIconCls||""),text:this.text||this.defaultText||""}),a?(this.cls+=" x-status-right",this.add("->"),this.add(this.statusEl)):(this.insert(0,this.statusEl),this.insert(1,"->"))},setStatus:function(a){var b=this;if(a=a||{},Ext.suspendLayouts(),Ext.isString(a)&&(a={text:a}),void 0!==a.text&&b.setText(a.text),void 0!==a.iconCls&&b.setIcon(a.iconCls),a.clear){var c=a.clear,d=b.autoClear,e={useDefaults:!0,anim:!0};Ext.isObject(c)?(c=Ext.applyIf(c,e),c.wait&&(d=c.wait)):Ext.isNumber(c)?(d=c,c=e):Ext.isBoolean(c)&&(c=e),c.threadId=this.activeThreadId,Ext.defer(b.clearStatus,d,b,[c])}return Ext.resumeLayouts(!0),b},clearStatus:function(a){a=a||{};var b=this,c=b.statusEl;if(a.threadId&&a.threadId!==b.activeThreadId)return b;var d=a.useDefaults?b.defaultText:b.emptyText,e=a.useDefaults&&b.defaultIconCls?b.defaultIconCls:"";return a.anim?c.el.puff({remove:!1,useDisplay:!0,callback:function(){c.el.show(),b.setStatus({text:d,iconCls:e})}}):b.setStatus({text:d,iconCls:e}),b},setText:function(a){var b=this;return b.activeThreadId++,b.text=a||"",b.rendered&&b.statusEl.setText(b.text),b},getText:function(){return this.text},setIcon:function(a){var b=this;return b.activeThreadId++,a=a||"",b.rendered?(b.currIconCls&&(b.statusEl.removeCls(b.currIconCls),b.currIconCls=null),a.length>0&&(b.statusEl.addCls(a),b.currIconCls=a)):b.currIconCls=a,b},showBusy:function(a){return Ext.isString(a)&&(a={text:a}),a=Ext.applyIf(a||{},{text:this.busyText,iconCls:this.busyIconCls}),this.setStatus(a)}}),Ext.define("App.model.administration.CPT",{extend:"Ext.data.Model",table:{name:"cpt_codes"},fields:[{name:"id",type:"int"},{name:"ConceptID",type:"int",dataType:"bigint"},{name:"code",type:"string",len:50},{name:"code_text",type:"string",dataType:"text"},{name:"code_text_medium",type:"string",dataType:"text"},{name:"code_text_short",type:"string",dataType:"text"},{name:"code_type",type:"string",store:!1},{name:"isRadiology",type:"bool"},{name:"active",type:"bool"}],proxy:{type:"direct",api:{read:"CPT.getCPTs",create:"CPT.addCPT",update:"CPT.updateCPT",destroy:"CPT.deleteCPT"},reader:{root:"data"}}}),Ext.define("Ext.ux.LiveSearchGridPanel",{extend:"Ext.grid.Panel",requires:["Ext.toolbar.TextItem","Ext.form.field.Checkbox","Ext.form.field.Text","Ext.ux.statusbar.StatusBar"],searchValue:null,indexes:[],currentIndex:null,searchRegExp:null,caseSensitive:!1,regExpMode:!1,matchCls:"x-livesearch-match",defaultStatusText:"Nothing Found",initComponent:function(){var a=this;a.tbar=["Search",{xtype:"textfield",name:"searchField",hideLabel:!0,width:200,listeners:{change:{fn:a.onTextFieldChange,scope:this,buffer:100}}},{xtype:"button",text:"&lt;",tooltip:"Find Previous Row",handler:a.onPreviousClick,scope:a},{xtype:"button",text:"&gt;",tooltip:"Find Next Row",handler:a.onNextClick,scope:a},"-",{xtype:"checkbox",hideLabel:!0,margin:"0 0 0 4px",handler:a.regExpToggle,scope:a},"Regular expression",{xtype:"checkbox",hideLabel:!0,margin:"0 0 0 4px",handler:a.caseSensitiveToggle,scope:a},"Case sensitive"],a.bbar=Ext.create("Ext.ux.StatusBar",{defaultText:a.defaultStatusText,name:"searchStatusBar"}),a.callParent(arguments)},afterRender:function(){var a=this;a.callParent(arguments),a.textField=a.down("textfield[name=searchField]"),a.statusBar=a.down("statusbar[name=searchStatusBar]")},tagsRe:/<[^>]*>/gm,tagsProtect:"",regExpProtect:/\\|\/|\+|\\|\.|\[|\]|\{|\}|\?|\$|\*|\^|\|/gm,getSearchValue:function(){var a=this,b=a.textField.getValue();if(""===b)return null;if(a.regExpMode){try{new RegExp(b)}catch(c){return a.statusBar.setStatus({text:c.message,iconCls:"x-status-error"}),null}if("^"===b||"$"===b)return null}else b=b.replace(a.regExpProtect,function(a){return"\\"+a});return b},onTextFieldChange:function(){var a=this,b=0;a.view.refresh(),a.statusBar.setStatus({text:a.defaultStatusText,iconCls:""}),a.searchValue=a.getSearchValue(),a.indexes=[],a.currentIndex=null,null!==a.searchValue&&(a.searchRegExp=new RegExp(a.searchValue,"g"+(a.caseSensitive?"":"i")),a.store.each(function(c,d){for(var e,f,g,h=Ext.fly(a.view.getNode(d)).down("td");h;)e=h.down(".x-grid-cell-inner"),f=e.dom.innerHTML.match(a.tagsRe),g=e.dom.innerHTML.replace(a.tagsRe,a.tagsProtect),g=g.replace(a.searchRegExp,function(c){return b+=1,-1===Ext.Array.indexOf(a.indexes,d)&&a.indexes.push(d),null===a.currentIndex&&(a.currentIndex=d),'<span class="'+a.matchCls+'">'+c+"</span>"}),Ext.each(f,function(b){g=g.replace(a.tagsProtect,b)}),e.dom.innerHTML=g,h=h.next()},a),null!==a.currentIndex&&(a.getSelectionModel().select(a.currentIndex),a.statusBar.setStatus({text:b+" matche(s) found.",iconCls:"x-status-valid"}))),null===a.currentIndex&&a.getSelectionModel().deselectAll(),a.textField.focus()},onPreviousClick:function(){var a,b=this;-1!==(a=Ext.Array.indexOf(b.indexes,b.currentIndex))&&(b.currentIndex=b.indexes[a-1]||b.indexes[b.indexes.length-1],b.getSelectionModel().select(b.currentIndex))},onNextClick:function(){var a,b=this;-1!==(a=Ext.Array.indexOf(b.indexes,b.currentIndex))&&(b.currentIndex=b.indexes[a+1]||b.indexes[0],b.getSelectionModel().select(b.currentIndex))},caseSensitiveToggle:function(a,b){this.caseSensitive=b,this.onTextFieldChange()},regExpToggle:function(a,b){this.regExpMode=b,this.onTextFieldChange()}}),Ext.define("App.ux.grid.RowFormEditing",{extend:"Ext.grid.plugin.Editing",alias:"plugin.rowformediting",requires:["App.ux.grid.RowFormEditor"],lockableScope:"top",editStyle:"row",enableRemove:!1,enableAddBtn:!1,addBtnText:"Add",addBtnIconCls:null,toolbarDock:"top",fieldDefaults:{},saveBtnEnabled:!1,autoSync:!0,autoCancel:!0,errorSummary:!1,constructor:function(){var a=this;a.callParent(arguments),a.clicksToMoveEditor||(a.clicksToMoveEditor=a.clicksToEdit),a.autoCancel=!!a.autoCancel},init:function(a){var b=this;if(b.callParent(arguments),b.enableAddBtn){var c=a.getDockedItems('toolbar[dock="'+b.toolbarDock+'"]')[0]||a.addDocked({xtype:"toolbar",dock:b.toolbarDock})[0];c.add({xtype:"button",text:b.addBtnText,iconCls:b.addBtnIconCls,handler:b.doAddRecord,scope:b})}b.grid.on("beforeselect",b.editHandler,b),b.grid.on("beforecellclick",b.editHandler,b),b.grid.on("beforecelldblclick",b.editHandler,b),b.grid.on("beforecellmousedown",b.editHandler,b)},editHandler:function(){return!this.editing},doAddRecord:function(){var a=this,b=a.grid,c=b.store;a.cancelEdit(),c.insert(0,{}),a.startEdit(0,0)},destroy:function(){var a=this;Ext.destroy(a.editor),a.callParent(arguments)},startEdit:function(){var a,b=this,c=b.getEditor();return c.beforeEdit()!==!1&&(a=b.callParent(arguments))?(b.context=a,b.lockingPartner&&b.lockingPartner.cancelEdit(),c.startEdit(a.record,a.column,a),!0):!1},cancelEdit:function(){var a=this;return a.editing?(a.getEditor().cancelEdit(),a.callParent(arguments),a.autoCancel&&a.view.store.rejectChanges(),void a.fireEvent("canceledit",a.context)):!0},completeEdit:function(){var a=this;a.editing&&a.validateEdit()&&(a.editing=!1,a.fireEvent("edit",a,a.context))},completeRemove:function(){var a=this;a.editing&&(a.getEditor().completeRemove(),a.fireEvent("completeremove",a,a.context))},validateEdit:function(){var a,b,c,d=this,e=d.editor,f=d.context,g=f.record,h={},i={},j=e.getForm().getFields().items,k=j.length;for(a=0;k>a;a++)c=j[a],b=c.name,h[b]=c.getValue(),i[b]=g.get(b);return Ext.apply(f,{newValues:h,originalValues:i}),d.callParent(arguments)&&d.getEditor().completeEdit()},getEditor:function(){var a=this;return a.editor||(a.editor=a.initEditor()),a.editor},initEditor:function(){return new App.ux.grid.RowFormEditor(this.initEditorConfig())},initEditorConfig:function(){var a,b,c=this,d=c.grid,e=c.view,f=d.headerCt,g=["saveBtnText","cancelBtnText","errorsText","dirtyText"],h=g.length,i={autoCancel:c.autoCancel,errorSummary:c.errorSummary,saveBtnEnabled:c.disableValidation,fields:f.getGridColumns(),hidden:!0,view:e,editingPlugin:c,renderTo:e.el};for(a=0;h>a;a++)b=g[a],Ext.isDefined(c[b])&&(i[b]=c[b]);return i},initEditTriggers:function(){var a=this,b=(a.view,1===a.clicksToMoveEditor?"click":"dblclick");a.callParent(arguments),a.clicksToMoveEditor!==a.clicksToEdit&&a.mon(a.view,"cell"+b,a.moveEditorByClick,a)},startEditByClick:function(){var a=this;a.editing&&a.clicksToMoveEditor!==a.clicksToEdit||a.callParent(arguments)},moveEditorByClick:function(){var a=this;a.editing&&(say(a),say(a.superclass),a.superclass.onCellClick.apply(a,arguments))},onCellClick:function(){var a=this;a.autoCancel&&(a.view.store.rejectChanges(),a.editor&&a.editor.rejectChildStoresChanges()),a.callParent(arguments)},setColumnField:function(a){var b=this;editor.removeField(a),b.callParent(arguments),b.getEditor().setField(a.field,a)}}),Ext.define("App.store.administration.CPT",{extend:"Ext.data.Store",model:"App.model.administration.CPT"}),Ext.define("App.ux.LiveRadiologySearch",{extend:"Ext.form.ComboBox",requires:["App.store.administration.CPT"],alias:"widget.radiologylivetsearch",hideLabel:!0,initComponent:function(){var a=this;a.store=Ext.create("App.store.administration.CPT",{pageSize:10,autoLoad:!1}),a.store.proxy.extraParams={onlyActive:!0,isRadiology:!0},Ext.apply(this,{store:a.store,displayField:"code_text_medium",valueField:"code_text_medium",emptyText:_("search")+"...",typeAhead:!1,hideTrigger:!0,minChars:1,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item"><h3>{code_text_short} ({code})</h3></div>'}},pageSize:10}),a.callParent()}}),Ext.define("App.model.miscellaneous.AddressBook",{extend:"Ext.data.Model",table:{name:"address_book",comment:"Address Book"},fields:[{name:"id",type:"int"},{name:"title",type:"string",len:10},{name:"fname",type:"string",len:80,index:!0},{name:"mname",type:"string",len:80,index:!0},{name:"lname",type:"string",len:80,index:!0},{name:"email",type:"string",len:100,index:!0},{name:"direct_address",type:"string",len:150,index:!0},{name:"url",type:"string",len:150},{name:"organization",type:"string",len:160},{name:"street",type:"string",len:180},{name:"street_cont",type:"string",len:180},{name:"city",type:"string",len:80,index:!0},{name:"state",type:"string",len:100,index:!0},{name:"zip",type:"string",len:15,index:!0},{name:"country",type:"string",len:160},{name:"phone",type:"string",len:20,index:!0},{name:"phone2",type:"string",len:20},{name:"mobile",type:"string",len:20,comment:"cell phone"},{name:"fax",type:"string",len:20},{name:"fullname",type:"string",store:!1,convert:function(a,b){return b.data.fname+" "+b.data.mname+" "+b.data.lname}},{name:"notes",type:"string",len:600}],proxy:{type:"direct",api:{read:"AddressBook.getContacts",create:"AddressBook.addContact",update:"AddressBook.updateContact",destroy:"AddressBook.destroyContact"},reader:{totalProperty:"totals",root:"data"}}}),Ext.define("App.model.patient.CarePlanGoal",{extend:"Ext.data.Model",table:{name:"patient_care_plan_goals",comment:"Patient Care Plan Goals"},fields:[{name:"id",type:"int"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"uid",type:"int"},{name:"goal",type:"string",len:300},{name:"goal_code",type:"string",len:20},{name:"goal_code_type",type:"string",len:15},{name:"instructions",type:"string",len:500},{name:"plan_date",type:"date",dateFormat:"Y-m-d",dataType:"date"},{name:"created_date",type:"date",dateFormat:"Y-m-d H:i:s"}],proxy:{type:"direct",api:{read:"CarePlanGoals.getPatientCarePlanGoals",create:"CarePlanGoals.addPatientCarePlanGoal",update:"CarePlanGoals.updatePatientCarePlanGoal",destroy:"CarePlanGoals.destroyPatientCarePlanGoal"}}}),Ext.define("App.model.patient.CognitiveAndFunctionalStatus",{extend:"Ext.data.Model",table:{name:"patient_cognitive_functional_status",comment:"Patient Cognitive Functional Status"},fields:[{name:"id",type:"int"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"uid",type:"int"},{name:"category",type:"string",len:20},{name:"category_code",type:"string",len:20},{name:"category_code_type",type:"string",len:20},{name:"code",type:"string",len:20},{name:"code_text",type:"string",len:300},{name:"code_type",type:"string",len:15},{name:"status",type:"string",len:20},{name:"status_code",type:"string",len:40},{name:"status_code_type",type:"string",len:15},{name:"note",type:"string",len:500},{name:"begin_date",type:"date",dateFormat:"Y-m-d",dataType:"date"},{name:"end_date",type:"date",dateFormat:"Y-m-d",dataType:"date"},{name:"created_date",type:"date",dateFormat:"Y-m-d H:i:s"}],proxy:{type:"direct",api:{read:"CognitiveAndFunctionalStatus.getPatientCognitiveAndFunctionalStatuses",create:"CognitiveAndFunctionalStatus.addPatientCognitiveAndFunctionalStatus",update:"CognitiveAndFunctionalStatus.updateCognitiveAndFunctionalStatus",destroy:"CognitiveAndFunctionalStatus.destroyCognitiveAndFunctionalStatus"}}}),Ext.define("App.model.patient.SmokeStatus",{extend:"Ext.data.Model",table:{name:"patient_smoke_status",comment:"Patient Smoke status"},fields:[{name:"id",type:"int"},{name:"eid",type:"int",index:!0,comment:"encounter id"},{name:"pid",type:"int",index:!0,comment:"patient ID"},{name:"status",type:"string",len:80},{name:"status_code",type:"string",len:20},{name:"status_code_type",type:"string",len:20},{name:"counseling",type:"bool",comment:"1 if counseling received"},{name:"note",type:"string",dataType:"text"},{name:"create_uid",type:"int",comment:"user ID who created the record"},{name:"update_uid",type:"int",comment:"user ID who updated the record"},{name:"create_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"update_date",type:"date",dateFormat:"Y-m-d H:i:s"}],proxy:{type:"direct",api:{read:"SocialHistory.getSmokeStatus",create:"SocialHistory.addSmokeStatus",update:"SocialHistory.updateSmokeStatus"}}}),Ext.define("App.model.administration.AclGroup",{extend:"Ext.data.Model",table:{name:"acl_groups"},fields:[{name:"id",type:"int"},{name:"title",type:"string"},{name:"active",type:"bool",index:!0}],proxy:{type:"direct",api:{read:"ACL.getAclGroups",create:"ACL.addAclGroup",update:"ACL.updateAclGroup"},reader:{root:"data"}}}),Ext.define("App.model.administration.AclGroupPerm",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"title",type:"string"},{name:"group_id",type:"int"},{name:"category",type:"string"}],proxy:{type:"direct",api:{read:"ACL.getGroupPerms",create:"ACL.updateGroupPerms",update:"ACL.updateGroupPerms"},reader:{type:"json",root:"data"}}}),Ext.define("App.model.administration.AclPermissions",{extend:"Ext.data.Model",table:{name:"acl_permissions"},fields:[{name:"id",type:"int"},{name:"perm_key",type:"string",index:!0},{name:"perm_name",type:"string"},{name:"perm_cat",type:"string"},{name:"seq",type:"int",index:!0},{name:"active",type:"bool",index:!0}]}),Ext.define("App.model.administration.AclRolePermissions",{extend:"Ext.data.Model",table:{name:"acl_role_perms"},fields:[{name:"id",type:"int"},{name:"role_id",type:"int",index:!0},{name:"perm_id",type:"int",index:!0},{name:"value",type:"bool"},{name:"add_date",type:"date",dateFormat:"Y-m-d H:i:s"}]}),Ext.define("App.model.administration.AclRoles",{extend:"Ext.data.Model",table:{name:"acl_roles",comment:"Access Control List Roles"},fields:[{name:"id",type:"int"},{name:"role_name",type:"string"},{name:"group_id",type:"int",index:!0},{name:"seq",type:"int",index:!0},{name:"active",type:"bool",index:!0}],proxy:{type:"direct",api:{read:"ACL.getAclRoles",create:"ACL.addAclRole",update:"ACL.updateAclRole"},reader:{root:"data"}}}),Ext.define("App.model.administration.AclUserRoles",{extend:"Ext.data.Model",table:{name:"acl_user_roles",comment:"Access List User Roles"},fields:[{name:"id",type:"int"},{name:"role_id",type:"int",index:!0},{name:"add_date",type:"date",dataType:"timestamp",defaultValue:"CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP"}]}),Ext.define("App.store.administration.AclGroups",{model:"App.model.administration.AclGroup",extend:"Ext.data.Store"}),Ext.define("App.store.administration.AclGroupPerms",{model:"App.model.administration.AclGroupPerm",extend:"Ext.data.Store"}),Ext.define("App.model.administration.ActiveProblems",{extend:"Ext.data.Model",table:{name:"activeproblems",comment:"Active Problems"},fields:[{name:"id",type:"int",comment:"Active Problems ID"},{name:"code_text",type:"string"},{name:"code",type:"string"}]}),Ext.define("App.model.administration.Applications",{extend:"Ext.data.Model",table:{name:"applications",comment:"Applications"},fields:[{name:"id",type:"int",comment:"Applications ID"},{name:"app_name",type:"string",len:120},{name:"pvt_key",type:"string",len:80},{name:"active",type:"bool"}],proxy:{type:"direct",api:{read:"Applications.getApplications",create:"Applications.addApplication",update:"Applications.updateApplication",destroy:"Applications.deleteApplication"}}}),Ext.define("App.model.administration.DefaultDocuments",{extend:"Ext.data.Model",table:{name:"defaultdocuments",comment:"Default Documents"},fields:[{name:"id",type:"int",comment:"Default Documents ID"},{name:"title",type:"string"},{name:"body",type:"string"},{name:"template_type",type:"string"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"}]}),Ext.define("App.model.administration.DocumentsTemplates",{extend:"Ext.data.Model",table:{name:"documents_templates",comment:"Documents Templates",data:"App.data.administration.DocumentTemplates"},fields:[{name:"id",type:"int",comment:"Documentation Templates ID"},{name:"title",type:"string",len:50},{name:"template_type",type:"string",len:50},{name:"body",type:"string",dataType:"text"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s",comment:"to be replace by created_date"},{name:"created_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"updated_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"created_by_uid",type:"int"},{name:"updated_by_uid",type:"int"}]}),Ext.define("App.model.administration.DocumentToken",{extend:"Ext.data.Model",table:{name:"documenttoken",comment:"Document Tokens"},fields:[{name:"id",type:"int",comment:"Documentation Token ID"},{name:"title",type:"string"},{name:"token",type:"string"}]}),Ext.define("App.model.administration.ExternalDataLoads",{extend:"Ext.data.Model",table:{name:"externaldataloads",comment:"External Data Loads"},fields:[{name:"id",type:"int",comment:"External Data Loads ID"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"version",type:"string"},{name:"path",type:"string"},{name:"basename",type:"string"},{name:"codeType",type:"string"}]}),Ext.define("App.model.administration.Facility",{extend:"Ext.data.Model",table:{name:"facility",comment:"Facilities"},fields:[{name:"id",type:"int",comment:"Facility ID"},{name:"name",type:"string",comment:"Facility Name"},{name:"attn",type:"string"},{name:"phone",type:"string"},{name:"fax",type:"string"},{name:"street",type:"string"},{name:"city",type:"string"},{name:"state",type:"string"},{name:"postal_code",type:"string"},{name:"country_code",type:"string"},{name:"ssn",type:"string"},{name:"ein",type:"string"},{name:"service_location",type:"bool"},{name:"billing_location",type:"bool"},{name:"accepts_assignment",type:"bool"},{name:"pos_code",type:"string"},{name:"x12_sender_id",type:"string"},{name:"clia",type:"string"},{name:"fda",type:"string"},{name:"npi",type:"string"},{name:"active",type:"bool"}],proxy:{type:"direct",api:{read:"Facilities.getFacilities",create:"Facilities.addFacility",update:"Facilities.updateFacility",destroy:"Facilities.deleteFacility"}},reader:{totalProperty:"total",root:"data"}}),Ext.define("App.model.administration.FacilityStructure",{extend:"Ext.data.Model",table:{name:"facility_structures",comment:"Facilities Dept and Specialties"},fields:[{name:"id",type:"string"},{name:"fid",type:"int",index:!0},{name:"parentId",type:"string",index:!0},{name:"foreign_id",type:"int",index:!0},{name:"foreign_type",type:"string",len:1,index:!0,comment:"D = department S = specialty"},{name:"active",type:"bool"},{name:"leaf",type:"bool",store:!1,convert:function(a,b){return"S"==b.data.foreign_type
}},{name:"text",type:"string",store:!1}],idProperty:"id",proxy:{type:"direct",api:{read:"Facilities.getFacilityConfigs",create:"Facilities.addFacilityConfig",update:"Facilities.updateFacilityConfig",destroy:"Facilities.deleteFacilityConfig"}}}),Ext.define("App.model.administration.FloorPlans",{extend:"Ext.data.Model",table:{name:"floor_plans",comment:"Floor Plans",data:"App.data.administration.FloorPlans"},fields:[{name:"id",type:"int",comment:"Floor Plans ID"},{name:"title",type:"string",len:180,comment:"Floor Title"},{name:"facility_id",type:"int",comment:"facility ID",index:!0},{name:"active",type:"bool",comment:"Active Floor Plan?",index:!0}],proxy:{type:"direct",api:{read:"FloorPlans.getFloorPlans",create:"FloorPlans.createFloorPlan",update:"FloorPlans.updateFloorPlan",destroy:"FloorPlans.removeFloorPlan"}}}),Ext.define("App.model.administration.FloorPlanZones",{extend:"Ext.data.Model",table:{name:"floor_plans_zones",comment:"Floor Plan Zones"},fields:[{name:"id",type:"int",comment:"Floor Plan Zones ID"},{name:"floor_plan_id",type:"int",index:!0},{name:"title",type:"string",len:180},{name:"type",type:"string",len:100},{name:"bg_color",type:"string",lem:10,useNull:!0},{name:"border_color",type:"string",lem:10,useNull:!0},{name:"scale",type:"string",lem:30,defaultValue:"medium"},{name:"width",type:"int",useNull:!0},{name:"height",type:"int",useNull:!0},{name:"x",type:"int"},{name:"y",type:"int"},{name:"show_priority_color",type:"bool"},{name:"show_patient_preview",type:"bool"},{name:"active",type:"bool",index:!0}],proxy:{type:"direct",api:{read:"FloorPlans.getFloorPlanZones",create:"FloorPlans.createFloorPlanZone",update:"FloorPlans.updateFloorPlanZone",destroy:"FloorPlans.removeFloorPlanZone"}}}),Ext.define("App.model.administration.FormListOptions",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",comment:"Form List Options ID"},{name:"option_name",type:"string"},{name:"option_value",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getOptionsByListId"}}}),Ext.define("App.model.administration.FormsList",{extend:"Ext.data.Model",table:{name:"forms_layout",comment:"Form List"},fields:[{name:"id",type:"int"},{name:"name",type:"string",len:80},{name:"form_data",type:"string",len:80},{name:"model",type:"string",len:80},{name:"active",type:"bool"}],proxy:{type:"direct",api:{read:"FormLayoutBuilder.getForms"}}}),Ext.define("App.model.administration.Globals",{extend:"Ext.data.Model",table:{name:"globals",comment:"Global Settings"},fields:[{name:"id",type:"int"},{name:"gl_name",type:"string",comment:"Global Setting Unique Name or Key"},{name:"gl_value",type:"string",comment:"Global Setting Value"},{name:"gl_category",type:"string",comment:"Category"},{name:"gl_index",type:"int",comment:"Global Setting Index"}],proxy:{type:"direct",api:{read:"Globals.getGlobals",update:"Globals.updateGlobals"},remoteGroup:!1}}),Ext.define("App.model.administration.HeadersAndFooters",{extend:"Ext.data.Model",table:{name:"headersandfooters",comment:"Headers And Footers"},fields:[{name:"id",type:"int",comment:"Headers and Footers ID"},{name:"title",type:"string"},{name:"template_type",type:"string"},{name:"body",type:"string"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"}]}),Ext.define("App.model.administration.ImmunizationRelations",{extend:"Ext.data.Model",table:{name:"immunizationrelations",comment:"Immunization Relations"},fields:[{name:"id",type:"int",comment:"Immunization Relations ID"},{name:"immunization_id",type:"int"},{name:"foreign_id",type:"int"},{name:"code"},{name:"code_text",type:"string"},{name:"code_type"}],proxy:{type:"direct",api:{read:"PreventiveCare.getRelations",create:"PreventiveCare.addRelations",destroy:"PreventiveCare.removeRelations"}}}),Ext.define("App.model.administration.InsuranceCompany",{extend:"Ext.data.Model",table:{name:"insurance_companies",comment:"Insurance Companies"},fields:[{name:"id",type:"int"},{name:"external_ref",type:"string",len:80,index:!0,comment:"use to reference the insurance to another software"},{name:"name",type:"string",len:120},{name:"attn",type:"string",len:120},{name:"address1",type:"string",len:100},{name:"address2",type:"string",len:100},{name:"city",type:"string",len:80},{name:"state",type:"string",len:80},{name:"zip_code",type:"string",len:15},{name:"country",type:"string",len:80},{name:"phone1",type:"string",len:20},{name:"phone2",type:"string",len:20},{name:"fax",type:"string",len:20},{name:"dx_type",type:"string",len:5},{name:"address_full",type:"string",store:!1,convert:function(a,b){return b.data.address1+" "+b.data.address2+" "+b.data.city+" "+b.data.state+", "+b.data.zip_code}},{name:"combo_text",type:"string",store:!1,convert:function(a,b){return b.data.id+": "+(b.data.name?b.data.name:" * ")+" "+(b.data.active?"":"("+_("inactive")+")")}},{name:"active",type:"bool"}],proxy:{type:"direct",api:{read:"Insurance.getInsuranceCompanies",create:"Insurance.addInsuranceCompany",update:"Insurance.updateInsuranceCompany"},reader:{root:"data"}}}),Ext.define("App.model.administration.LabObservations",{extend:"Ext.data.Model",table:{name:"labs_panels",comment:"Laboratory Observations"},fields:[{name:"id",type:"string",comment:"LOINC"},{name:"code_text_short",type:"string"},{name:"parent_id",type:"int",dataType:"bigint"},{name:"parent_loinc",type:"string",dataType:"text"},{name:"parent_name",type:"string",dataType:"text"},{name:"sequence",type:"string",dataType:"text"},{name:"loinc_number",type:"string",dataType:"text"},{name:"loinc_name",type:"string",dataType:"text"},{name:"default_unit",type:"string"},{name:"range_start",type:"string"},{name:"range_end",type:"string"},{name:"required_in_panel",type:"string",dataType:"text"},{name:"description",type:"string",dataType:"text"},{name:"active",type:"bool"}]}),Ext.define("App.model.administration.Laboratories",{extend:"Ext.data.Model",table:{name:"laboratories",comment:"Laboratories Grid"},fields:[{name:"id",type:"int",comment:"Laboratory ID"},{name:"name",type:"string"},{name:"transmit_method",type:"string"},{name:"email",type:"string"},{name:"address_id",type:"int"},{name:"line1",type:"string",store:!1},{name:"line2",type:"string",store:!1},{name:"city",type:"string",store:!1},{name:"state",type:"string",store:!1},{name:"zip",type:"string",store:!1},{name:"plus_four",type:"string",store:!1},{name:"country",type:"string",store:!1},{name:"address_full",type:"string",store:!1},{name:"phone_id",type:"int"},{name:"phone_country_code",type:"string",store:!1},{name:"phone_area_code",type:"string",store:!1},{name:"phone_prefix",type:"string",store:!1},{name:"phone_number",type:"string",store:!1},{name:"phone_full",type:"string",store:!1},{name:"fax_id",type:"int"},{name:"fax_country_code",type:"string",store:!1},{name:"fax_area_code",type:"string",store:!1},{name:"fax_prefix",type:"string",store:!1},{name:"fax_number",type:"string",store:!1},{name:"fax_full",type:"string",store:!1},{name:"active",type:"bool"}],proxy:{type:"direct",api:{read:"Practice.getLaboratories",create:"Practice.addLaboratory",update:"Practice.updateLaboratory"}}}),Ext.define("App.model.administration.LayoutTree",{extend:"Ext.data.Model",fields:[{name:"id",type:"string"},{name:"parentId",type:"string"},{name:"text",type:"string"},{name:"index",type:"int",mapping:"x_index"},{name:"parentId",type:"string"},{name:"text",type:"string"},{name:"index",type:"int"},{name:"xtype",type:"string"},{name:"form_id",type:"int"},{name:"title",type:"string"},{name:"fieldLabel",type:"string"},{name:"emptyText",type:"string"},{name:"labelWidth",type:"string"},{name:"hideLabel",type:"bool",useNull:!0,defaultValue:null},{name:"layout",type:"string"},{name:"width",type:"string"},{name:"height",type:"string"},{name:"anchor",type:"string"},{name:"margin",type:"string"},{name:"flex",type:"string"},{name:"collapsible",type:"bool",useNull:!0,defaultValue:null},{name:"checkboxToggle",type:"bool",useNull:!0,defaultValue:null},{name:"collapsed",type:"bool",useNull:!0,defaultValue:null},{name:"inputValue",type:"string"},{name:"allowBlank",type:"string"},{name:"value",type:"string"},{name:"minLength",type:"string"},{name:"maxLength",type:"string"},{name:"maxValue",type:"string"},{name:"minValue",type:"string"},{name:"boxLabel",type:"string"},{name:"grow",type:"bool",useNull:!0,defaultValue:null},{name:"growMin",type:"string"},{name:"growMax",type:"string"},{name:"increment",type:"string"},{name:"code",type:"string"},{name:"name",type:"string"},{name:"list_id",type:"string"},{name:"itemId",type:"string"},{name:"action",type:"string"}],proxy:{type:"direct",api:{read:"FormLayoutBuilder.getFormFieldsTree",create:"FormLayoutBuilder.createFormField",update:"FormLayoutBuilder.updateFormField",destroy:"FormLayoutBuilder.removeFormField"}}}),Ext.define("App.model.administration.ListOptions",{extend:"Ext.data.Model",table:{name:"combo_lists_options",comment:"Combo List Options"},fields:[{name:"id",type:"int",comment:"List Options ID"},{name:"list_id",type:"int",comment:"List ID"},{name:"option_value",type:"string",comment:"Value"},{name:"option_name",type:"string",comment:"Name"},{name:"code",type:"string",len:15,index:!0,comment:"value code"},{name:"code_type",type:"string",len:10,comment:"CPT4 LOINC SNOMEDCT ICD9 ICD10 RXNORM"},{name:"seq",type:"int",comment:"Sequence"},{name:"notes",type:"string",comment:"Notes"},{name:"active",type:"bool",comment:"Active?"}],proxy:{type:"direct",api:{read:"Lists.getOptions",create:"Lists.addOption",update:"Lists.updateOption"}}}),Ext.define("App.model.administration.Lists",{extend:"Ext.data.Model",table:{name:"combo_lists",comment:"Combo List"},fields:[{name:"id",type:"int",comment:"List Options ID"},{name:"title",type:"string",comment:"Title of the combo"},{name:"active",type:"bool",comment:"Active?"},{name:"in_use",type:"bool",persist:!1}],proxy:{type:"direct",api:{read:"Lists.getLists",create:"Lists.addList",update:"Lists.updateList",destroy:"Lists.deleteList"}}}),Ext.define("App.model.administration.AuditLog",{extend:"Ext.data.Model",table:{name:"audit_log",comment:"Audit Logs"},fields:[{name:"id",type:"int",comment:"Audit Log ID"},{name:"eid",type:"int",comment:"Encounter ID",index:!0},{name:"pid",type:"int",comment:"Patient ID",index:!0},{name:"uid",type:"int",comment:"User ID",index:!0},{name:"fid",type:"int",comment:"Facility ID",index:!0},{name:"event",type:"string",len:200,comment:"Event description"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s",comment:"Date of the event"}],proxy:{type:"direct",api:{read:"AuditLog.getLogs",create:"AuditLog.setLog",update:"AuditLog.setLog"},reader:{totalProperty:"totals",root:"rows"}}}),Ext.define("App.model.administration.Medications",{extend:"Ext.data.Model",fields:[{name:"RXCUI",type:"auto"},{name:"CODE",type:"auto"},{name:"STR",type:"auto"},{name:"DST",type:"auto"},{name:"DRT",type:"auto"},{name:"DDF",type:"auto"},{name:"DDFA",type:"auto"},{name:"RXN_QUANTITY",type:"auto"},{name:"SAB",type:"auto"},{name:"RXAUI",type:"auto"}],proxy:{type:"direct",api:{read:"Rxnorm.getRXNORMList"},reader:{totalProperty:"totals",root:"data"},filterParam:"query",encodeFilters:function(a){return a[0].value}}}),Ext.define("App.model.administration.Modules",{extend:"Ext.data.Model",table:{name:"modules",comment:"Modules"},fields:[{name:"id",type:"int"},{name:"title",type:"string",len:80},{name:"name",type:"string",len:100},{name:"description",type:"string"},{name:"enable",type:"bool"},{name:"installed_version",type:"string",len:20},{name:"licensekey",type:"string"},{name:"localkey",type:"string"}],proxy:{type:"direct",api:{read:"Modules.getActiveModules",update:"Modules.updateModule"}}}),Ext.define("App.model.administration.ParentFields",{extend:"Ext.data.Model",table:{name:"parentfields",comment:"Parent Fields"},fields:[{name:"name",type:"string"},{name:"value",type:"string"}],proxy:{type:"direct",api:{read:"FormLayoutBuilder.getParentFields"}}}),Ext.define("App.model.administration.Pharmacies",{extend:"Ext.data.Model",table:{name:"pharmacies",comment:"Pharmacies"},fields:[{name:"id",type:"int"},{name:"name",type:"string"},{name:"transmit_method",type:"string"},{name:"email",type:"string"},{name:"address_id",type:"int"},{name:"line1",type:"string",store:!1},{name:"line2",type:"string",store:!1},{name:"city",type:"string",store:!1},{name:"state",type:"string",store:!1},{name:"zip",type:"string",store:!1},{name:"plus_four",type:"string",store:!1},{name:"country",type:"string",store:!1},{name:"address_full",type:"string",store:!1},{name:"phone_id",type:"int"},{name:"phone_country_code",type:"string",store:!1},{name:"phone_area_code",type:"string",store:!1},{name:"phone_prefix",type:"string",store:!1},{name:"phone_number",type:"string",store:!1},{name:"phone_full",type:"string",store:!1},{name:"fax_id",type:"int"},{name:"fax_country_code",type:"string",store:!1},{name:"fax_area_code",type:"string",store:!1},{name:"fax_prefix",type:"string",store:!1},{name:"fax_number",type:"string",store:!1},{name:"fax_full",type:"string",store:!1},{name:"active",type:"bool"}],proxy:{type:"direct",api:{read:"Practice.getPharmacies",create:"Practice.addPharmacy",update:"Practice.updatePharmacy"}}}),Ext.define("App.model.administration.PreventiveCare",{extend:"Ext.data.Model",table:{name:"preventivecare",comment:"Preventive Care"},fields:[{name:"id",type:"int"},{name:"pid",type:"int"},{name:"preventive_care_id",type:"int"},{name:"uid",type:"int"},{name:"description",type:"string"},{name:"age_start",type:"string"},{name:"age_end",type:"string"},{name:"sex",type:"string"},{name:"pregnant",type:"bool"},{name:"frequency",type:"string"},{name:"category_id",type:"string"},{name:"code",type:"string"},{name:"coding_system",type:"string"},{name:"dismiss",type:"bool"},{name:"frequency_type",type:"string"},{name:"reason",type:"string"},{name:"times_to_perform",type:"string"},{name:"doc_url1",type:"string"},{name:"doc_url2",type:"string"},{name:"doc_url3",type:"string"},{name:"active",type:"bool"}]}),Ext.define("App.model.administration.PreventiveCareActiveProblems",{extend:"Ext.data.Model",table:{name:"preventivecareactiveproblems",comment:"Preventive Care Active Problems"},fields:[{name:"guideline_id",type:"int"},{name:"code",type:"string"},{name:"code_text",type:"string"}]}),Ext.define("App.model.administration.PreventiveCareLabs",{extend:"Ext.data.Model",table:{name:"preventivecarelabs",comment:"Preventive Care Labs"},fields:[{name:"id",type:"int"},{name:"value_name",type:"string"},{name:"greater_than",type:"string"},{name:"less_than",type:"string"},{name:"equal_to",type:"string"},{name:"code",type:"string"},{name:"preventive_care_id",type:"string"}]}),Ext.define("App.model.administration.PreventiveCareMedications",{extend:"Ext.data.Model",table:{name:"preventivecaremedications",comment:"Preventive Care Medications"},fields:[{name:"guideline_id",type:"int"},{name:"code",type:"string"},{name:"code_text",type:"string"}]}),Ext.define("App.model.administration.Services",{extend:"Ext.data.Model",table:{name:"services",comment:"Services"},fields:[{name:"id",type:"string",comment:"Services ID"},{name:"code_text",type:"string"},{name:"sg_code",type:"string"},{name:"long_desc",type:"string"},{name:"code_text_short",type:"string"},{name:"code",type:"string"},{name:"code_type",type:"string"},{name:"modifier",type:"string"},{name:"units",type:"string"},{name:"fee",type:"int"},{name:"superbill",type:"string"},{name:"related_code",type:"string"},{name:"taxrates",type:"string"},{name:"active",type:"bool"},{name:"reportable",type:"string"},{name:"has_children",type:"bool"},{name:"sex",type:"string"},{name:"age_start",type:"int"},{name:"age_end",type:"int"},{name:"times_to_perform",type:"int"},{name:"frequency_number",type:"int"},{name:"frequency_time",type:"string"},{name:"pregnant",type:"bool"},{name:"only_once",type:"bool"},{name:"active_problems",type:"string"},{name:"medications",type:"string"},{name:"labs",type:"string"},{name:"has_children",type:"bool"},{name:"class",type:"string"}]}),Ext.define("App.model.administration.XtypesComboModel",{extend:"Ext.data.Model",table:{name:"xtypescombo",comment:"XTYPE Combos"},fields:[{name:"id",type:"string"},{name:"name",type:"string"},{name:"value",type:"string"}],proxy:{type:"direct",api:{read:"CombosData.getFiledXtypes"}},autoLoad:!0}),Ext.define("App.model.administration.DecisionSupportRuleConcept",{extend:"Ext.data.Model",table:{name:"support_rule_concepts"},fields:[{name:"id",type:"int"},{name:"rule_id",type:"int",comment:"support_rule.id"},{name:"concept_type",type:"string",len:10,comment:"PROC PROB MEDI SOCI ALLE LAB VITA"},{name:"concept_text",type:"string",len:25},{name:"concept_code",type:"string",len:25},{name:"concept_code_type",type:"string",len:10},{name:"frequency",type:"int",len:3},{name:"frequency_interval",type:"string",len:3,comment:"1D = one day 2M = two month 1Y = one year"},{name:"frequency_operator",type:"string",len:5,comment:"== != <= >= < >",convert:function(a){return Ext.util.Format.htmlDecode(a)}},{name:"value_operator",type:"string",len:5,comment:"== != <= >= < >",convert:function(a){return Ext.util.Format.htmlDecode(a)}},{name:"value",type:"string",len:10}],proxy:{type:"direct",api:{read:"DecisionSupport.getDecisionSupportRuleConcepts",create:"DecisionSupport.addDecisionSupportRuleConcept",update:"DecisionSupport.updateDecisionSupportRuleConcept",destroy:"DecisionSupport.deleteDecisionSupportRuleConcept"}}}),Ext.define("App.model.administration.DecisionSupportRule",{extend:"Ext.data.Model",requires:"App.model.administration.DecisionSupportRuleConcept",table:{name:"support_rules"},fields:[{name:"id",type:"int"},{name:"category",type:"string",len:10,defaultValue:"C",comment:"C = Clinical A = Administrative"},{name:"alert_type",type:"string",len:2,defaultValue:"P",comment:"A = Active P = Passive"},{name:"description",type:"string"},{name:"service_type",type:"string",len:10,comment:"PROC IMMU DX MEDI LAB RAD"},{name:"service_text",type:"string"},{name:"service_code",type:"string",len:25},{name:"service_code_type",type:"string",len:10},{name:"age_start",type:"int",defaultValue:"0"},{name:"age_end",type:"int",defaultValue:"0"},{name:"sex",type:"string",len:5},{name:"warning",type:"string",len:5,comment:"examples 1W or 5M or 1Y"},{name:"past_due",type:"string",len:5,comment:"examples 1W or 5M or 1Y"},{name:"reference",type:"string"},{name:"active",type:"bool"}],proxy:{type:"direct",api:{read:"DecisionSupport.getDecisionSupportRules",create:"DecisionSupport.addDecisionSupportRule",update:"DecisionSupport.updateDecisionSupportRule",destroy:"DecisionSupport.deleteDecisionSupportRule"},reader:{root:"data"}},hasMany:[{model:"App.model.administration.DecisionSupportRuleConcept",name:"concepts",foreignKey:"rule_id"}]}),Ext.define("App.model.miscellaneous.OfficeNotes",{extend:"Ext.data.Model",table:{name:"office_notes",comment:"Office Notes"},fields:[{name:"id",type:"int",comment:"Office Notes ID"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"body",type:"string"},{name:"user",type:"string"},{name:"facility_id",type:"string"},{name:"activity",type:"string"}],proxy:{type:"direct",api:{read:"OfficeNotes.getOfficeNotes",create:"OfficeNotes.addOfficeNotes",update:"OfficeNotes.updateOfficeNotes"}}}),Ext.define("App.model.account.VoucherLine",{extend:"Ext.data.Model",table:{name:"accvoucherline",comment:"Voucher / Receipt"},fields:[{name:"id",type:"int"},{name:"createUid",type:"int"},{name:"createDate",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"writeUid",type:"int"},{name:"writeDate",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"voucherId",type:"int",comment:"Voucher"},{name:"accountId",type:"int",comment:"Account"},{name:"moveLineId",type:"int",comment:"Journal Item"},{name:"reconcile",type:"bool",defaultValue:!1,comment:"Full Reconcile"},{name:"code",type:"string",comment:"COPAY/CPT/HCPCS/SKU codes"},{name:"name",type:"string",comment:"Description"},{name:"type",type:"string",comment:"debit/credit"},{name:"amountUnreconciled",type:"float",comment:"Open Balance"},{name:"amountUntax",type:"float",comment:"Untax Amount"},{name:"amountOriginal",type:"float",comment:"Default Amount"},{name:"amount",type:"float",comment:"Amount"}],proxy:{type:"direct",api:{read:"AccVoucher.getVoucherLines",create:"AccVoucher.addVoucherLine",update:"AccVoucher.updateVoucherLine",destroy:"AccVoucher.destroyVoucherLine"}},associations:[{type:"belongsTo",model:"App.model.account.Voucher",foreignKey:"voucherId",setterName:"setVoucher",getterName:"getVoucher"}]}),Ext.define("App.model.administration.User",{extend:"Ext.data.Model",table:{name:"users",comment:"User accounts"},fields:[{name:"id",type:"int"},{name:"create_uid",type:"int",comment:"create user ID"},{name:"update_uid",type:"int",comment:"update user ID"},{name:"create_date",type:"date",comment:"create date",dateFormat:"Y-m-d H:i:s"},{name:"update_date",type:"date",comment:"last update date",dateFormat:"Y-m-d H:i:s"},{name:"username",type:"string",comment:"username",len:20,index:!0},{name:"password",type:"string",comment:"password",dataType:"blob",encrypt:!0},{name:"pwd_history1",type:"string",comment:"first password history backwards",dataType:"blob",encrypt:!0},{name:"pwd_history2",type:"string",comment:"second password history backwards",dataType:"blob",encrypt:!0},{name:"title",type:"string",comment:"title (Mr. Mrs.)",len:10},{name:"fname",type:"string",comment:"first name",len:80,index:!0},{name:"mname",type:"string",comment:"middle name",len:80,index:!0},{name:"lname",type:"string",comment:"last name",len:120,index:!0},{name:"fullname",type:"string",comment:"title full name",store:!1},{name:"shortname",type:"string",comment:"title and last name",store:!1},{name:"pin",type:"string",comment:"pin number",len:10},{name:"npi",type:"string",comment:"National Provider Identifier",len:15,index:!0},{name:"fedtaxid",type:"string",comment:"federal tax id",len:80},{name:"feddrugid",type:"string",comment:"federal drug id",len:80},{name:"notes",type:"string",comment:"notes",len:300},{name:"email",type:"string",comment:"email",len:150,index:!0},{name:"direct_address",type:"string",comment:"direct_address",len:150,index:!0},{name:"specialty",type:"array",comment:"specialty",len:80},{name:"taxonomy",type:"string",comment:"taxonomy",defaultValue:"207Q00000X",len:40,index:!0},{name:"warehouse_id",type:"int",comment:"default warehouse"},{name:"facility_id",type:"int",comment:"default facility",index:!0},{name:"role_id",type:"int",comment:"acl_user_roles relation"},{name:"calendar",type:"bool",comment:"has calendar? 0=no 1=yes",index:!0},{name:"authorized",type:"bool"},{name:"active",type:"bool"}],proxy:{type:"direct",api:{read:"User.getUsers",create:"User.addUser",update:"User.updateUser"}},hasMany:[{model:"App.model.Phones",name:"phones",primaryKey:"id",foreignKey:"use_id"},{model:"App.model.Address",name:"address",primaryKey:"id",foreignKey:"use_id"}]}),Ext.define("App.model.account.Voucher",{extend:"Ext.data.Model",table:{name:"accvoucher",comment:"Voucher / Receipt"},fields:[{name:"id",type:"int"},{name:"createUid",type:"int"},{name:"createDate",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"writeUid",type:"int"},{name:"writeDate",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"dateDue",type:"date",dateFormat:"Y-m-d H:i:s",comment:"Due Date"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s",comment:"Date"},{name:"encounterId",type:"int",comment:"Encounter"},{name:"accountId",type:"int",comment:"Account"},{name:"journalId",type:"int",comment:"Journal"},{name:"moveId",type:"int",comment:"Account Entry"},{name:"active",type:"bool",defaultValue:!0,comment:"Active?"},{name:"comment",type:"string",comment:"Comment"},{name:"reference",type:"string",comment:"Ref"},{name:"number",type:"string",comment:"Number"},{name:"notes",type:"string",mapping:"narration",comment:"Notes"},{name:"status",type:"string",mapping:"state",comment:"Status"},{name:"type",type:"string",comment:"visit/product/office"},{name:"amount",type:"float",defaultValue:0,comment:"Total Amount"}],proxy:{type:"direct",api:{read:"AccVoucher.getVoucher",create:"AccVoucher.addVoucher",update:"AccVoucher.updateVoucher",destroy:"AccVoucher.destroyVoucher"}},hasMany:[{model:"App.model.account.VoucherLine",name:"voucherlines",foreignKey:"voucherId"}]}),Ext.define("App.model.fees.Billing",{extend:"Ext.data.Model",table:{name:"billing",comment:"Billing"},fields:[{name:"eid",type:"int "},{name:"pid",type:"int"},{name:"patientName",type:"string"},{name:"primaryProvider",type:"string"},{name:"encounterProvider",type:"string"},{name:"supervisorProvider",type:"string"},{name:"facility",type:"string"},{name:"billing_facility",type:"string"},{name:"service_date",type:"string"},{name:"close_date",type:"string"},{name:"billing_stage",type:"int"},{name:"dxCodes",type:"auto"}],proxy:{type:"direct",api:{read:"Fees.getFilterEncountersBillingData"},reader:{root:"encounters",totalProperty:"totals"}}}),Ext.define("App.model.fees.Checkout",{extend:"Ext.data.Model",table:{name:"checkout",comment:"Checkout"},fields:[{name:"id",type:"int",comment:"Checkout ID"},{name:"time",type:"string"},{name:"follow_up_facility",type:"string"},{name:"note",type:"string"},{name:"reminder",type:"string"},{name:"patient_name",type:"string"},{name:"encounter_number",type:"int"},{name:"transaction_facility",type:"string"},{name:"transaction_number",type:"int"},{name:"transaction_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"payment_amount",type:"string"},{name:"paying_entity",type:"string"},{name:"post_to_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"check_number",type:"int"}],proxy:{type:"direct",api:{read:"Fees.getPaymentsBySearch"},reader:{root:"rows",totalProperty:"totals"}}}),Ext.define("App.model.fees.EncountersPayments",{extend:"Ext.data.Model",table:{name:"encounterspayments",comment:"Encounters Payments"},fields:[{name:"id",type:"int",dataType:"bigint",len:20,primaryKey:!0,autoIncrement:!0,allowNull:!1,store:!0,comment:"Encounter Payments ID"},{name:"paying_entity",type:"string"},{name:"payment_from",type:"string"},{name:"no",type:"int"},{name:"payment_method",type:"string"},{name:"pay_to",type:"string"},{name:"amount",type:"string"},{name:"date_from",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"date_to",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"note",type:"string"}],proxy:{type:"direct",api:{read:"Fees.getPaymentsBySearch"},reader:{root:"rows",totalProperty:"totals"}}}),Ext.define("App.model.fees.PaymentTransactions",{extend:"Ext.data.Model",table:{name:"paymenttransactions",comment:"Payment Transactions"},fields:[],proxy:{type:"direct",api:{read:"Fees.getPaymentsBySearch"},reader:{root:"rows",totalProperty:"totals"}}}),Ext.define("App.model.navigation.Navigation",{extend:"Ext.data.Model",fields:[{name:"text",type:"string"},{name:"disabled",type:"bool",defaultValue:!1}],proxy:{type:"direct",api:{read:"Navigation.getNavigation"}}}),Ext.define("App.model.patient.encounter.snippetTree",{extend:"Ext.data.Model",table:{name:"soap_snippets",comment:"Snippet Tree"},fields:[{name:"id",type:"string"},{name:"parentId",type:"string",len:20,index:!0},{name:"specialty_id",type:"string",len:11,index:!0},{name:"index",type:"int"},{name:"title",type:"string",len:80},{name:"text",type:"string",dataType:"text"},{name:"category",type:"string",len:50,index:!0},{name:"leaf",type:"bool"}],proxy:{type:"direct",api:{read:"Snippets.getSoapSnippets",create:"Snippets.addSoapSnippets",update:"Snippets.updateSoapSnippets",destroy:"Snippets.deleteSoapSnippets"}}}),Ext.define("App.model.patient.encounter.Procedures",{extend:"Ext.data.Model",table:{name:"encounter_procedures",comment:"Patient Encounter Procedures"},fields:[{name:"id",type:"int",comment:"Procedure ID"},{name:"pid",type:"int",comment:"patient ID"},{name:"eid",type:"int",comment:"Encounter ID"},{name:"uid",type:"int"},{name:"create_uid",type:"int",comment:"create user ID"},{name:"update_uid",type:"int",comment:"update user ID"},{name:"create_date",type:"date",comment:"create date",dateFormat:"Y-m-d H:i:s"},{name:"update_date",type:"date",comment:"last update date",dateFormat:"Y-m-d H:i:s"},{name:"code",type:"string",comment:"procedure code"},{name:"code_text",type:"string",comment:"procedure description"},{name:"code_type",type:"string",comment:"CPT/ICD-10-PCS/ICD-9-CM/SNOMED/CDT"},{name:"procedure_date",type:"date",dataType:"date",comment:"when procedure has done",dateFormat:"Y-m-d"},{name:"observation",type:"string",comment:"observation found"}],proxy:{type:"direct",api:{read:"Procedures.loadProcedures",create:"Procedures.saveProcedure",update:"Procedures.saveProcedure",destroy:"Procedures.destroyProcedure"}}}),Ext.define("App.model.patient.Allergies",{extend:"Ext.data.Model",table:{name:"patient_allergies",comment:"Patient Allergies"},fields:[{name:"id",type:"int"},{name:"eid",type:"int",index:!0},{name:"pid",type:"int",index:!0},{name:"allergy_type",type:"string",len:80},{name:"allergy_type_code",type:"string",len:20},{name:"allergy_type_code_type",type:"string",len:20},{name:"allergy",len:80,type:"string"},{name:"allergy_code",type:"string",len:20,comment:"RxNORM RXCUI code if food allergy"},{name:"allergy_code_type",len:20,type:"string"},{name:"location",len:80,type:"string"},{name:"reaction",len:80,type:"string"},{name:"reaction_code",len:20,type:"string"},{name:"reaction_code_type",len:20,type:"string"},{name:"severity",len:80,type:"string"},{name:"severity_code",len:20,type:"string"},{name:"severity_code_type",len:20,type:"string"},{name:"status",len:15,type:"string"},{name:"status_code",len:20,type:"string"},{name:"status_code_type",len:20,type:"string"},{name:"begin_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"end_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"active",type:"bool",store:!1,convert:function(a,b){return""==b.data.end_date||null==b.data.end_date}},{name:"created_uid",type:"int"},{name:"updated_uid",type:"int"},{name:"create_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"update_date",type:"date",dateFormat:"Y-m-d H:i:s",defaultValue:"CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP"}],proxy:{type:"direct",api:{read:"Allergies.getPatientAllergies",create:"Allergies.addPatientAllergy",update:"Allergies.updatePatientAllergy"}}}),Ext.define("App.model.patient.CheckoutAlertArea",{extend:"Ext.data.Model",table:{name:"checkoutalertarea",comment:"Checkout Alert Area"},fields:[{name:"id",type:"int",comment:"Checkout Alert ID"},{name:"alert",type:"string"},{name:"alertType",type:"int"}],proxy:{type:"direct",api:{read:"Encounter.checkoutAlerts"}}}),Ext.define("App.model.patient.CptCodes",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",comment:"CPY Code ID"},{name:"eid",type:"int"},{name:"code",type:"string"},{name:"code_text",type:"string"},{name:"code_text_medium",type:"string"},{name:"place_of_service",type:"string"},{name:"emergency",type:"bool"},{name:"charge",type:"string"},{name:"days_of_units",type:"string"},{name:"essdt_plan",type:"string"},{name:"modifiers",type:"string"},{name:"status",type:"int",defaultValue:0}],proxy:{type:"direct",api:{read:"Services.getCptCodes",create:"Services.addCptCode",update:"Services.updateCptCode",destroy:"Services.deleteCptCode"},reader:{root:"rows",totalProperty:"totals"}}}),Ext.define("App.model.patient.Dental",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",comment:"Dental Data ID"},{name:"eid",type:"int"},{name:"pid",type:"int"},{name:"created_uid",type:"int"},{name:"updated_uid",type:"int"},{name:"create_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"cdt_code",type:"string"},{name:"description",type:"string"},{name:"begin_date",type:"date",dateFormat:"Y-m-d"},{name:"end_date",type:"date",dateFormat:"Y-m-d"},{name:"ocurrence",type:"string"},{name:"referred_by",type:"string"},{name:"outcome",type:"string"},{name:"destination",type:"string"},{name:"alert",type:"bool"}],proxy:{type:"direct",api:{read:"Medical.getPatientDental",create:"Medical.addPatientDental",update:"Medical.updatePatientDental"}}}),Ext.define("App.model.patient.Disclosures",{extend:"Ext.data.Model",table:{name:"patient_disclosures",comment:"Disclosures"},fields:[{name:"id",type:"int"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"uid",type:"int"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"type",type:"string",len:25},{name:"recipient",type:"string",len:25},{name:"description",type:"string",dataType:"text"},{name:"active",type:"bool"}],proxy:{type:"direct",api:{read:"Disclosure.getDisclosures",create:"Disclosure.addDisclosure",update:"Disclosure.updateDisclosure"}}}),Ext.define("App.model.patient.DismissedAlerts",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",comment:"Dismissed Alerts ID"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"preventive_care_id",type:"int"},{name:"reason",type:"string"},{name:"observation",type:"string"},{name:"dismiss",type:"bool"},{name:"description",type:"string"}],proxy:{type:"direct",api:{read:"PreventiveCare.getPreventiveCareDismissedAlertsByPid",update:"PreventiveCare.updatePreventiveCareDismissedAlertsByPid"}}}),Ext.define("App.model.patient.DoctorsNote",{extend:"Ext.data.Model",table:{name:"patient_doctors_notes"},fields:[{name:"id",type:"int"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"uid",type:"int"},{name:"template_id",type:"int"},{name:"create_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"order_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"from_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"to_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"restrictions",type:"array"},{name:"string_restrictions",type:"string",store:!1,convert:function(a,b){return b.data.restrictions.join?b.data.restrictions.join(", "):b.data.restrictions
}},{name:"group_date",type:"date",dateFormat:"Y-m-d",store:!1,convert:function(a,b){return Ext.Date.format(b.data.date,"Y-m-d")}},{name:"comments",type:"string",dataType:"text"}],proxy:{type:"direct",api:{read:"DoctorsNotes.getDoctorsNotes",create:"DoctorsNotes.addDoctorsNote",update:"DoctorsNotes.updateDoctorsNote",destroy:"DoctorsNotes.destroyDoctorsNote"}}}),Ext.define("App.model.patient.EncounterService",{extend:"Ext.data.Model",table:{name:"encounter_services"},fields:[{name:"id",type:"int"},{name:"pid",type:"int"},{name:"eid",type:"int"},{name:"code",type:"string",len:40},{name:"code_type",type:"string",len:40},{name:"code_text",type:"string",dataType:"text"},{name:"units",type:"int",len:5},{name:"modifiers",type:"array"},{name:"dx_group_id",type:"int"},{name:"dx_pointers",type:"array"},{name:"status",type:"string",len:20},{name:"create_uid",type:"int"},{name:"update_uid",type:"int"},{name:"date_create",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"date_update",type:"date",dateFormat:"Y-m-d H:i:s"}],proxy:{type:"direct",api:{read:"Services.getEncounterServices",create:"Services.addEncounterService",update:"Services.updateEncounterService",destroy:"Services.removeEncounterService"}}}),Ext.define("App.model.patient.EventHistory",{extend:"Ext.data.Model",table:{name:"encounter_history"},fields:[{name:"id",type:"int",comment:"Event History ID"},{name:"eid",type:"int"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"user",type:"string",len:80},{name:"event",type:"string",len:600}]}),Ext.define("App.model.patient.HCFAOptions",{extend:"Ext.data.Model",table:{name:"encounter_1500_options",comment:"HCFA options 1500 Data"},fields:[{name:"id",type:"int"},{name:"pid",type:"int"},{name:"eid",type:"int"},{name:"uid",type:"int"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"employment_related",type:"bool"},{name:"auto_accident",type:"bool"},{name:"state",type:"string",len:80},{name:"other_accident",type:"bool"},{name:"similar_illness_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"unable_to_work_from",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"unable_to_work_to",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"hops_date_to",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"out_lab_used",type:"bool"},{name:"amount_charges",type:"string",len:10},{name:"medicaid_resubmission_code",type:"string",len:15},{name:"medicaid_original_reference_number",type:"string",len:60},{name:"prior_authorization_number",type:"string",len:60},{name:"replacement_claim",type:"bool"},{name:"notes",type:"string",dataType:"text"}],proxy:{type:"direct",api:{update:"Encounter.updateHCFA"}},belongsTo:{model:"App.model.patient.Encounter",foreignKey:"eid"}}),Ext.define("App.model.patient.CVXCodes",{extend:"Ext.data.Model",table:{name:"cvx_codes",comment:"Immunizations  CVX"},fields:[{name:"id",type:"int",comment:"Immunization ID"},{name:"cvx_code",type:"int",len:10},{name:"name",type:"string"},{name:"description",type:"string",dataType:"text"},{name:"note",type:"string",dataType:"text"},{name:"status",type:"string",len:25},{name:"update_date",type:"date",dateFormat:"Y-m-d H:i:s"}],proxy:{type:"direct",api:{read:"Medical.getImmunizationsList"}}}),Ext.define("App.model.patient.ImmunizationCheck",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",comment:"Immunization Check ID"},{name:"pid",type:"int"},{name:"code",type:"int"},{name:"vaccine_name",type:"string"},{name:"alert",type:"bool"}],proxy:{type:"direct",api:{read:"Medical.getPatientImmunizations"}}}),Ext.define("App.model.patient.LaboratoryTypes",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",comment:"Laboratory Types ID"},{name:"label",type:"string"},{name:"fields"}],proxy:{type:"direct",api:{read:"Laboratories.getActiveLaboratoryTypes"}}}),Ext.define("App.model.patient.MeaningfulUseAlert",{extend:"Ext.data.Model",table:{name:"meaningfulusealert",comment:"Meaningful Use Alert"},fields:[{name:"id",type:"int",comment:"Meaningful Use Alert ID"},{name:"name",type:"string"},{name:"val",type:"bool"}],proxy:{type:"direct",api:{read:"Patient.getMeaningfulUserAlertByPid"}}}),Ext.define("App.model.patient.Insurance",{extend:"Ext.data.Model",table:{name:"patient_insurances",comment:"Patient Insurances"},fields:[{name:"id",type:"int"},{name:"pid",type:"int",index:!0},{name:"insurance_id",type:"int"},{name:"insurance_type",type:"string",comment:"P = primary S = supplemental C =complementary D = Disable",len:1},{name:"effective_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"expiration_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"policy_number",type:"string",len:40},{name:"group_number",type:"string",comment:"group number",len:40},{name:"covers",type:"array",dataType:"VARCHAR",index:!0,len:300},{name:"subscriber_title",type:"string",len:10},{name:"subscriber_given_name",type:"string",len:80},{name:"subscriber_middle_name",type:"string",len:80},{name:"subscriber_surname",type:"string",len:80},{name:"subscriber_relationship",type:"string",len:40},{name:"subscriber_dob",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"subscriber_sex",type:"string",len:1},{name:"subscriber_ss",type:"string",len:10},{name:"subscriber_street",type:"string",len:80},{name:"subscriber_city",type:"string",len:80},{name:"subscriber_state",type:"string",len:80},{name:"subscriber_country",type:"string",len:80},{name:"subscriber_postal_code",type:"string",len:20},{name:"subscriber_phone",type:"string",len:20},{name:"subscriber_employer",type:"string",len:80},{name:"display_order",type:"int",len:3},{name:"notes",type:"string"},{name:"copay",type:"string",comment:"default copay",len:10},{name:"image",type:"string",dataType:"mediumtext",comment:"insurance image base64 string"},{name:"create_uid",type:"int"},{name:"update_uid",type:"int"},{name:"create_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"update_date",type:"date",dateFormat:"Y-m-d H:i:s"}],proxy:{type:"direct",api:{read:"Insurance.getInsurances",create:"Insurance.addInsurance",update:"Insurance.updateInsurance"}},associations:[{type:"belongsTo",model:"App.model.patient.Patient",associationKey:"pid",foreignKey:"pid"}]}),Ext.define("App.model.patient.Medications",{extend:"Ext.data.Model",table:{name:"patient_medications",comment:"Patient Medications"},fields:[{name:"id",type:"int"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"uid",type:"int"},{name:"ref_order",type:"string",len:100,comment:"reference order number"},{name:"STR",type:"string",len:180},{name:"CODE",type:"string",len:40},{name:"RXCUI",type:"string",len:40},{name:"NDC",type:"string",len:40},{name:"dxs",type:"array"},{name:"dose",type:"string",len:180},{name:"form",type:"string",len:80},{name:"route",type:"string",len:80},{name:"directions",type:"string"},{name:"dispense",type:"string",len:80},{name:"refill",type:"string",len:80},{name:"potency_code",type:"string",len:10},{name:"days_supply",type:"int",useNull:!0},{name:"daw",type:"bool",useNull:!0,comment:"Dispensed As Written"},{name:"notes",type:"string",len:300},{name:"is_compound",type:"bool"},{name:"is_supply",type:"bool"},{name:"prescription_id",type:"int"},{name:"referred_by",type:"string",len:180},{name:"date_ordered",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"begin_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"end_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"active",type:"bool",store:!1,convert:function(a,b){return null==b.data.end_date}},{name:"created_date",type:"date",dateFormat:"Y-m-d H:i:s"}],proxy:{type:"direct",api:{read:"Medications.getPatientMedications",create:"Medications.addPatientMedication",update:"Medications.updatePatientMedication",destroy:"Medications.destroyPatientMedication"},remoteGroup:!1}}),Ext.define("App.model.patient.Notes",{extend:"Ext.data.Model",table:{name:"patient_notes"},fields:[{name:"id",type:"int"},{name:"eid",type:"int",index:!0},{name:"pid",type:"int",index:!0},{name:"uid",type:"int",index:!0},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s",index:!0},{name:"body",type:"string",len:600},{name:"type",type:"string",len:80,index:!0},{name:"user_name",type:"string",store:!1}],proxy:{type:"direct",api:{read:"Notes.getNotes",create:"Notes.addNote",update:"Notes.updateNote"}}}),Ext.define("App.model.patient.PatientActiveProblem",{extend:"Ext.data.Model",table:{name:"patient_active_problems",comment:"Active Problems"},fields:[{name:"id",type:"int"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"code",type:"string",len:80},{name:"code_text",type:"string",len:300},{name:"code_type",type:"string",len:20},{name:"begin_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"end_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"occurrence",type:"string"},{name:"referred_by",type:"string"},{name:"status",type:"string",len:40},{name:"status_code",type:"string",len:20},{name:"status_code_type",type:"string",len:20},{name:"note",type:"string",len:300},{name:"active",type:"bool",store:!1,convert:function(a,b){return""==b.data.end_date||null==b.data.end_date}},{name:"created_uid",type:"int"},{name:"updated_uid",type:"int"},{name:"create_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"update_date",type:"date",dateFormat:"Y-m-d H:i:s"}],proxy:{type:"direct",api:{read:"ActiveProblems.getPatientActiveProblems",create:"ActiveProblems.addPatientActiveProblem",update:"ActiveProblems.updatePatientActiveProblem",destroy:"ActiveProblems.destroyPatientActiveProblem"}}}),Ext.define("App.model.patient.Patient",{extend:"Ext.data.Model",table:{name:"patient",comment:"Patients Demographics"},fields:[{name:"pid",type:"int",comment:"patient ID"},{name:"create_uid",type:"int",comment:"create user ID"},{name:"update_uid",type:"int",comment:"update user ID"},{name:"create_date",type:"date",comment:"create date",dateFormat:"Y-m-d H:i:s"},{name:"update_date",type:"date",comment:"last update date",dateFormat:"Y-m-d H:i:s"},{name:"administrative_status",type:"string",comment:"active | inactive | merged",len:15},{name:"title",type:"string",comment:"Title Mr. Sr.",len:10},{name:"fname",type:"string",comment:"first name",index:!0,len:60},{name:"mname",type:"string",comment:"middle name",index:!0,len:40},{name:"lname",type:"string",comment:"last name",index:!0,len:60},{name:"fullname",type:"string",persist:!1,convert:!1},{name:"sex",type:"string",comment:"sex",index:!0,len:10},{name:"DOB",type:"date",comment:"day of birth",dateFormat:"Y-m-d H:i:s",index:!0,defaultValue:"0000-00-00 00:00:00"},{name:"marital_status",type:"string",comment:"marital status",len:40},{name:"SS",type:"string",index:!0,comment:"social security",len:40},{name:"pubpid",type:"string",index:!0,comment:"external reference id",len:40},{name:"pubaccount",type:"string",index:!0,comment:"external reference account",len:40},{name:"drivers_license",type:"string",index:!0,comment:"driver licence #",len:40},{name:"drivers_license_state",type:"string",len:40},{name:"drivers_license_exp",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"address",type:"string",comment:"address",len:80},{name:"city",type:"string",comment:"city",len:40},{name:"state",type:"string",comment:"state",len:40},{name:"country",type:"string",comment:"country",len:40},{name:"zipcode",type:"string",comment:"postal code",len:10},{name:"fulladdress",type:"string",persist:!1,convert:!1},{name:"home_phone",type:"string",index:!0,comment:"home phone #",len:15},{name:"mobile_phone",type:"string",index:!0,comment:"mobile phone #",len:15},{name:"work_phone",type:"string",index:!0,comment:"work phone #",len:15},{name:"phones",type:"string",persist:!1,convert:!1},{name:"email",type:"string",index:!0,comment:"email",len:60},{name:"mothers_name",type:"string",comment:"mother name",len:40},{name:"guardians_name",type:"string",comment:"guardians name",len:40},{name:"emer_contact",type:"string",comment:"emergency contact",len:40},{name:"emer_phone",type:"string",comment:"emergency phone #",len:15},{name:"provider",type:"string",comment:"default provider",len:40},{name:"pharmacy",type:"string",comment:"default pharmacy",len:40},{name:"hipaa_notice",type:"string",comment:"HIPAA notice status",len:40},{name:"race",type:"string",comment:"race",len:40},{name:"ethnicity",type:"string",comment:"ethnicity",len:40},{name:"language",type:"string",comment:"language",len:10},{name:"allow_leave_msg",type:"bool"},{name:"allow_voice_msg",type:"bool"},{name:"allow_mail_msg",type:"bool"},{name:"allow_sms",type:"bool"},{name:"allow_email",type:"bool"},{name:"allow_immunization_registry",type:"bool"},{name:"allow_immunization_info_sharing",type:"bool"},{name:"allow_health_info_exchange",type:"bool"},{name:"allow_patient_web_portal",type:"bool"},{name:"occupation",type:"string",comment:"patient occupation",len:40},{name:"employer_name",type:"string",comment:"employer name",len:40},{name:"employer_address",type:"string",comment:"employer address",len:40},{name:"employer_city",type:"string",comment:"employer city",len:40},{name:"employer_state",type:"string",comment:"employer state",len:40},{name:"employer_country",type:"string",comment:"employer country",len:40},{name:"employer_postal_code",type:"string",comment:"employer postal code",len:10},{name:"rating",type:"int",comment:"patient stars rating"},{name:"image",type:"string",dataType:"mediumtext",comment:"patient image base64 string"},{name:"qrcode",type:"string",dataType:"mediumtext",comment:"patient QRCode base64 string"},{name:"birth_place",type:"string",len:150},{name:"birth_multiple",type:"bool"},{name:"birth_order",type:"int",defaultValue:1,len:2},{name:"is_veteran",type:"string",len:1},{name:"deceased",type:"string",len:1},{name:"death_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"alias",type:"string",len:80},{name:"citizenship",type:"string",len:80},{name:"primary_facility",type:"int"},{name:"primary_provider",type:"int"},{name:"address_cont",type:"string"},{name:"work_phone_ext",type:"string"}],idProperty:"pid",proxy:{type:"direct",api:{read:"Patient.getPatients",create:"Patient.savePatient",update:"Patient.savePatient"}},hasMany:[{model:"App.model.patient.Insurance",name:"insurance",primaryKey:"pid",foreignKey:"pid"}]}),Ext.define("App.model.patient.PatientArrivalLog",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",comment:"Patient Arrival Log ID"},{name:"area_id",type:"int"},{name:"pid",type:"int"},{name:"time",type:"string"},{name:"name",type:"string"},{name:"status",type:"string"},{name:"area",type:"string"},{name:"warning",type:"bool"},{name:"warningMsg",type:"string"},{name:"isNew",type:"bool"}],proxy:{type:"direct",api:{read:"PoolArea.getPatientsArrivalLog",create:"PoolArea.addPatientArrivalLog",update:"PoolArea.updatePatientArrivalLog",destroy:"PoolArea.removePatientArrivalLog"}}}),Ext.define("App.model.patient.PatientCalendarEvents",{extend:"Ext.data.Model",table:{name:"patientcalendarevents",comment:"Patient Calendar Events"},fields:[{name:"id",type:"int",comment:"Patient Calendar Event ID"},{name:"user_id",type:"int"},{name:"category",type:"int"},{name:"facility",type:"int"},{name:"billing_facillity",type:"int"},{name:"patient_id",type:"int"},{name:"title",type:"string"},{name:"status",type:"string"},{name:"start",type:"date",dateFormat:"Y-m-d H:s:i"},{name:"end",type:"date",dateFormat:"Y-m-d H:s:i"},{name:"data",type:"string"},{name:"rrule",type:"string"},{name:"loc",type:"string"},{name:"notes",type:"string"},{name:"url",type:"string"},{name:"ad",type:"string"}],proxy:{type:"direct",api:{read:"Calendar.getPatientFutureEvents"}}}),Ext.define("App.model.patient.PatientDocuments",{extend:"Ext.data.Model",table:{name:"patient_documents",comment:"Patient Documents Storage"},fields:[{name:"id",type:"int",comment:"Patient Documents Storage ID"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"uid",type:"int",index:!0},{name:"docType",type:"string",index:!0},{name:"name",type:"string"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s",index:!0},{name:"url",type:"string"},{name:"note",type:"string"},{name:"title",type:"string"},{name:"hash",type:"string"},{name:"encrypted",type:"bool",defaultValue:0},{name:"groupDate",type:"date",dateFormat:"Y-m-d",store:!1,convert:function(a,b){return Ext.Date.format(b.data.date,"Y-m-d")}},{name:"document",type:"string",dataType:"longblob"}],proxy:{type:"direct",api:{read:"DocumentHandler.getPatientDocuments",create:"DocumentHandler.addPatientDocument",update:"DocumentHandler.updatePatientDocument"},reader:{root:"data"},remoteGroup:!1}}),Ext.define("App.model.patient.PatientImmunization",{extend:"Ext.data.Model",table:{name:"patient_immunizations",comment:"Patient Immunization"},fields:[{name:"id",type:"int",comment:"Patient Immunization ID"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"uid",type:"int"},{name:"code",type:"int",comment:"vaccine code (CVX)"},{name:"code_type",type:"string",defaultValue:"CVX",len:15},{name:"vaccine_name",type:"string",len:300},{name:"lot_number",type:"string",len:60},{name:"administer_amount",type:"string",len:40},{name:"administer_units",type:"string",len:40},{name:"administered_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"exp_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"administered_by",type:"string",len:150},{name:"route",type:"string",len:40},{name:"administration_site",type:"string",len:40},{name:"manufacturer",type:"string",len:180},{name:"education_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"note",type:"string",len:300},{name:"create_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"created_uid",type:"int"},{name:"updated_uid",type:"int"},{name:"is_error",type:"bool"}],proxy:{type:"direct",api:{read:"Medical.getPatientImmunizations",create:"Medical.addPatientImmunization",update:"Medical.updatePatientImmunization"}}}),Ext.define("App.model.patient.PatientLabsResults",{extend:"Ext.data.Model",table:{name:"patientlabsresults",comment:"Patient Labs Results"},fields:[{name:"id",type:"int",comment:"Patient Labs Results ID"},{name:"pid",type:"int"},{name:"uid",type:"int"},{name:"auth_uid",type:"int"},{name:"eid",type:"int"},{name:"document_id",type:"int"},{name:"document_url"},{name:"date",type:"date",dateFormat:"Y-m-d H:s:i"},{name:"data"},{name:"columns"},{name:"parent_id"}],proxy:{type:"direct",api:{read:"Medical.getPatientLabsResults",create:"Medical.addPatientLabsResult",update:"Medical.updatePatientLabsResult",destroy:"Medical.deletePatientLabsResult"}}}),Ext.define("App.model.patient.PatientsLabOrderItems",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"loinc",type:"string"},{name:"title",type:"string"}]}),Ext.define("App.model.patient.PatientSocialHistory",{extend:"Ext.data.Model",table:{name:"patient_social_history",comment:"Patient Social History"},fields:[{name:"id",type:"int"},{name:"eid",type:"int",index:!0,comment:"encounter id"},{name:"pid",type:"int",index:!0,comment:"patient ID"},{name:"category_code",type:"string",len:25},{name:"category_code_type",type:"string",defaultValue:"SNOMEDCT",len:20},{name:"category_code_text",len:120,type:"string"},{name:"observation",type:"string",len:400,comment:"clinical observation for this history"},{name:"observation_code",type:"string",len:20},{name:"observation_code_type",type:"string",len:20},{name:"note",type:"string",dataType:"text"},{name:"start_date",type:"date",dateFormat:"Y-m-d H:i:s",comment:"same as CCD low time"},{name:"end_date",type:"date",dateFormat:"Y-m-d H:i:s",comment:"same as CCD high time"},{name:"create_uid",type:"int",comment:"user ID who created the record"},{name:"update_uid",type:"int",comment:"user ID who updated the record"},{name:"create_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"update_date",type:"date",dateFormat:"Y-m-d H:i:s"}],proxy:{type:"direct",api:{read:"SocialHistory.getSocialHistories",create:"SocialHistory.addSocialHistory",update:"SocialHistory.updateSocialHistory",destroy:"SocialHistory.destroySocialHistory"},remoteGroup:!1}}),Ext.define("App.model.patient.PatientsOrderObservation",{extend:"Ext.data.Model",table:{name:"patient_order_results_observations",comment:"Order Result Observations OBX"},fields:[{name:"id",type:"int",comment:"Results/Observations"},{name:"result_id",type:"int",index:!0,comment:"Order ID"},{name:"code",type:"string",comment:"OBX 3",index:!0},{name:"code_text",type:"string",comment:"OBX 3"},{name:"code_type",type:"string",comment:"OBX 3"},{name:"value",type:"string",comment:"OBX 5"},{name:"units",type:"string",comment:"OBX 6"},{name:"reference_rage",type:"string",comment:"OBX 7"},{name:"probability",type:"string",comment:"OBX 9"},{name:"abnormal_flag",type:"string",comment:"OBX 8"},{name:"nature_of_abnormal",type:"string",comment:"OBX 10"},{name:"observation_result_status",type:"string",comment:"OBX 11"},{name:"date_rage_values",type:"date",dateFormat:"Y-m-d H:i:s",comment:"OBX 12 Effective Date of Reference Range Values"},{name:"date_observation",type:"date",dateFormat:"Y-m-d H:i:s",comment:"OBX 14"},{name:"observer",type:"string",comment:"OBX 16"},{name:"performing_org_name",type:"string",comment:"OBX 23"},{name:"performing_org_address",type:"string",comment:"OBX 24"},{name:"observer",type:"string",comment:"OBX 16"},{name:"date_analysis",type:"date",dateFormat:"Y-m-d H:i:s",comment:"OBX 19"},{name:"notes",type:"string",comment:"OBX NTE segments"}],proxy:{type:"direct",api:{read:"Orders.getOrderResultObservations",create:"Orders.addOrderResultObservations",update:"Orders.updateOrderResultObservations",destroy:"Orders.deleteOrderResultObservations"},remoteGroup:!1},associations:[{type:"belongsTo",model:"App.model.patient.PatientsOrderResult",name:"result",primaryKey:"id",foreignKey:"result_id"}]}),Ext.define("App.model.patient.PatientsOrderResult",{extend:"Ext.data.Model",requires:["App.model.patient.PatientsOrderObservation"],table:{name:"patient_order_results",comment:"Patients Results OBR"},fields:[{name:"id",type:"int"},{name:"order_id",type:"int",index:!0,comment:"OBR-2"},{name:"code",type:"string",len:40},{name:"code_text",type:"string",len:150},{name:"code_type",type:"string",len:20},{name:"lab_order_id",type:"string",len:50,index:!0,comment:"OBR-3"},{name:"lab_name",type:"string",len:150},{name:"lab_address",type:"string",len:200},{name:"result_date",type:"date",dataType:"date",dateFormat:"Y-m-d",index:!0},{name:"observation_date",type:"date",dateFormat:"Y-m-d H:i:s",index:!0},{name:"result_status",type:"string",len:40},{name:"reason_code",type:"string",len:40},{name:"specimen_code",type:"string",len:40},{name:"specimen_text",type:"string",len:180},{name:"specimen_code_type",type:"string",len:40},{name:"specimen_notes",type:"string"},{name:"documentId",type:"string",comment:"this is the document or hl7 message id - example -> doc|123 or hl7|123",len:40},{name:"upload",type:"string",store:!1}],proxy:{type:"direct",api:{read:"Orders.getOrderResults",create:"Orders.addOrderResults",update:"Orders.updateOrderResults",destroy:"Orders.deleteOrderResults"},remoteGroup:!1},associations:[{type:"hasMany",model:"App.model.patient.PatientsOrderObservation",name:"observations",foreignKey:"result_id"},{type:"belongsTo",model:"App.model.patient.PatientsOrders",getterName:"getOrder",setterName:"setOrder",primaryKey:"id",foreignKey:"order_id"}]}),Ext.define("App.model.patient.PatientsOrders",{extend:"Ext.data.Model",requires:["App.model.patient.PatientsOrderResult"],table:{name:"patient_orders",comment:"Patients Orders"},fields:[{name:"id",type:"int"},{name:"eid",type:"int",index:!0,comment:"encounter id"},{name:"pid",type:"int",index:!0,comment:"patient ID"},{name:"uid",type:"int",comment:"user ID who created the order"},{name:"hl7_recipient_id",type:"int",comment:"laboratory id if electronic request"},{name:"code",type:"string",len:25,comment:"Order code"},{name:"code_type",type:"string",defaultValue:"LOINC",len:15,comment:"Order code type LOINC"},{name:"description",type:"string",comment:"Order Text Description"},{name:"date_ordered",type:"date",dateFormat:"Y-m-d H:i:s",comment:"when the order was generated",index:!0},{name:"date_collected",type:"date",dateFormat:"Y-m-d H:i:s",comment:"when the results were collected",index:!0},{name:"priority",type:"string",len:25,comment:"order priority",index:!0},{name:"status",type:"string",len:25,comment:"order status",index:!0},{name:"order_type",type:"string",comment:"rad || lab",index:!0},{name:"note",type:"string"}],proxy:{type:"direct",api:{read:"Orders.getPatientOrders",create:"Orders.addPatientOrder",update:"Orders.updatePatientOrder",destroy:"Orders.deletePatientOrder"},remoteGroup:!1},associations:[{type:"hasMany",model:"App.model.patient.PatientsOrderResult",name:"results",foreignKey:"order_id"}]}),Ext.define("App.model.patient.PatientsPrescriptionMedications",{extend:"Ext.data.Model",table:{name:"patient_medications",comment:"Patient Medications"},fields:[{name:"id",type:"int"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"uid",type:"int"},{name:"prescription_id",type:"int"},{name:"STR",type:"string",len:180},{name:"CODE",type:"string",len:40},{name:"RXCUI",type:"string",len:40},{name:"NDC",type:"string",len:40},{name:"dxs",type:"string"},{name:"dose",type:"string",len:180},{name:"form",type:"string",len:80},{name:"route",type:"string",len:80},{name:"directions",type:"string"},{name:"dispense",type:"string",len:80},{name:"refill",type:"string",len:80},{name:"daw",type:"bool"},{name:"notes",type:"string",len:300},{name:"referred_by",type:"string",len:180},{name:"date_ordered",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"created_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"begin_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"end_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"active",type:"bool",store:!1,convert:function(a,b){return null==b.data.end_date}}]}),Ext.define("App.model.patient.PatientsPrescriptions",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",comment:"Patient Prescription ID"},{name:"pid",type:"int"},{name:"eid",type:"int"},{name:"uid",type:"int"},{name:"created_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"note",type:"string"},{name:"document_id",type:"int"},{name:"docUrl",type:"string"},{name:"medications"}],proxy:{type:"direct",api:{read:"Prescriptions.getPrescriptions",create:"Prescriptions.addPrescription",update:"Prescriptions.updatePrescription"}}}),Ext.define("App.model.patient.PatientsXrayCtOrders",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",comment:"Patients XrayCt Orders ID"},{name:"eid",type:"int"},{name:"pid",type:"int"},{name:"uid",type:"int"},{name:"description",type:"string"},{name:"date_created",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"laboratory_id",type:"int"},{name:"document_id",type:"int"},{name:"order_type",type:"string",defaultValue:"rad"},{name:"order_items",type:"string"},{name:"note",type:"string"},{name:"docUrl",type:"string"}],proxy:{type:"direct",api:{read:"Orders.getPatientXrayCtOrders",create:"Orders.addPatientXrayCtOrder",update:"Orders.updatePatientXrayCtOrder"}}}),Ext.define("App.model.patient.PreventiveCare",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",comment:"Preventive Care ID"},{name:"pid",type:"int"},{name:"eid",type:"int"},{name:"uid",type:"int"},{name:"description"},{name:"date",dateFormat:"Y-m-d"},{name:"observation"},{name:"type"},{name:"dismiss"},{name:"reason"},{name:"alert",type:"bool"}],proxy:{type:"direct",api:{update:"PreventiveCare.addPreventivePatientDismiss",read:"PreventiveCare.getPreventiveCareCheck"}}}),Ext.define("App.model.patient.QRCptCodes",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",comment:"QR CPT Code ID"},{name:"eid",type:"int"},{name:"code",type:"string"},{name:"code_text",type:"string"},{name:"code_text_medium",type:"string"},{name:"place_of_service",type:"string"},{name:"emergency",type:"bool"},{name:"charge",type:"string"},{name:"days_of_units",type:"string"},{name:"essdt_plan",type:"string"},{name:"modifiers",type:"string"},{name:"status",type:"int",defaultValue:0}],proxy:{type:"direct",api:{read:"Services.getCptCodes"},reader:{root:"rows",totalProperty:"totals"}}}),Ext.define("App.model.patient.Referral",{extend:"Ext.data.Model",table:{name:"patient_referrals",comment:"Patients Referrals"},fields:[{name:"id",type:"int"},{name:"eid",type:"int",index:!0,comment:"encounter id"},{name:"pid",type:"int",index:!0,comment:"patient ID"},{name:"create_uid",type:"int",comment:"user ID who created the referral"},{name:"update_uid",type:"int",comment:"user ID who updated the referral"},{name:"create_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"update_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"referral_date",type:"date",dataType:"date",dateFormat:"Y-m-d"},{name:"service_text",type:"string",len:300},{name:"service_code",type:"string",len:10},{name:"service_code_type",type:"string",comment:"CPT SNOMED",len:10},{name:"referal_reason",type:"string",len:1e3},{name:"diagnosis_text",type:"string",len:300},{name:"diagnosis_code",type:"string",len:10},{name:"diagnosis_code_type",type:"string",len:10},{name:"is_external_referral",type:"bool"},{name:"refer_by",type:"string",len:80},{name:"refer_by_text",type:"string",len:120},{name:"refer_to",type:"string",len:80},{name:"refer_to_text",type:"string",len:120},{name:"risk_level",type:"string",len:20},{name:"send_record",type:"bool"}],proxy:{type:"direct",api:{read:"Referrals.getPatientReferrals",create:"Referrals.addPatientReferral",update:"Referrals.updatePatientReferral",destroy:"Referrals.deletePatientReferral"},remoteGroup:!1}}),Ext.define("App.model.patient.Reminders",{extend:"Ext.data.Model",table:{name:"patient_reminders"},fields:[{name:"id",type:"int"},{name:"eid",type:"int",index:!0},{name:"pid",type:"int",index:!0},{name:"uid",type:"int",index:!0},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s",index:!0},{name:"body",type:"string",len:600},{name:"type",type:"string",len:80,index:!0},{name:"user_name",type:"string",store:!1}],proxy:{type:"direct",api:{read:"Reminders.getReminders",create:"Reminders.addReminder",update:"Reminders.updateReminder"}}}),Ext.define("App.model.patient.Surgery",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",comment:"Surgery ID"},{name:"eid",type:"int"},{name:"pid",type:"int"},{name:"created_uid",type:"int"},{name:"updated_uid",type:"int"},{name:"create_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"surgery",type:"string"},{name:"surgery_id",type:"string"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"referred_by",type:"string"},{name:"outcome",type:"string"},{name:"notes",type:"string"},{name:"alert",type:"bool"}],proxy:{type:"direct",api:{read:"Medical.getPatientSurgery",create:"Medical.addPatientSurgery",update:"Medical.updatePatientSurgery"}}}),Ext.define("App.model.patient.ReviewOfSystems",{extend:"Ext.data.Model",table:{name:"encounter_review_of_systems",comment:"Review of system"},fields:[{name:"id",type:"int"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"uid",type:"int"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"weight_change",type:"bool"},{name:"weakness",type:"bool"},{name:"fatigue",type:"bool"},{name:"anorexia",type:"bool"},{name:"fever",type:"bool"},{name:"chills",type:"bool"},{name:"night_sweats",type:"bool"},{name:"insomnia",type:"bool"},{name:"irritability",type:"bool"},{name:"heat_or_cold",type:"bool"},{name:"intolerance",type:"bool"},{name:"change_in_vision",type:"bool"},{name:"eye_pain",type:"bool"},{name:"family_history_of_glaucoma",type:"bool"},{name:"irritation",type:"bool"},{name:"redness",type:"bool"},{name:"excessive_tearing",type:"bool"},{name:"double_vision",type:"bool"},{name:"blind_spots",type:"bool"},{name:"photophobia",type:"bool"},{name:"hearing_loss",type:"bool"},{name:"discharge",type:"bool"},{name:"pain",type:"bool"},{name:"vertigo",type:"bool"},{name:"tinnitus",type:"bool"},{name:"frequent_colds",type:"bool"},{name:"sore_throat",type:"bool"},{name:"sinus_problems",type:"bool"},{name:"post_nasal_drip",type:"bool"},{name:"nosebleed",type:"bool"},{name:"snoring",type:"bool"},{name:"apnea",type:"bool"},{name:"breast_mass",type:"bool"},{name:"abnormal_mammogram",type:"bool"},{name:"biopsy",type:"bool"},{name:"cough",type:"bool"},{name:"sputum",type:"bool"},{name:"shortness_of_breath",type:"bool"},{name:"wheezing",type:"bool"},{name:"hemoptysis",type:"bool"},{name:"asthma",type:"bool"},{name:"copd",type:"bool"},{name:"thyroid_problems",type:"bool"},{name:"diabetes",type:"bool"},{name:"abnormal_blood_test",type:"bool"},{name:"chest_pain",type:"bool"},{name:"palpitation",type:"bool"},{name:"syncope",type:"bool"},{name:"pnd",type:"bool"},{name:"doe",type:"bool"},{name:"orthopnea",type:"bool"},{name:"peripheral",type:"bool"},{name:"edema",type:"bool"},{name:"leg_pain_cramping",type:"bool"},{name:"arrythmia",type:"bool"},{name:"heart_problem",type:"bool"},{name:"history_of_heart_murmur",type:"bool"},{name:"polyuria",type:"bool"},{name:"polydypsia",type:"bool"},{name:"dysuria",type:"bool"},{name:"hematuria",type:"bool"},{name:"frequency",type:"bool"},{name:"urgency",type:"bool"},{name:"utis",type:"bool"},{name:"incontinence",type:"bool"},{name:"renal_stones",type:"bool"},{name:"hesitancy",type:"bool"},{name:"dribbling",type:"bool"},{name:"stream",type:"bool"},{name:"nocturia",type:"bool"},{name:"erections",type:"bool"},{name:"ejaculations",type:"bool"},{name:"cancer",type:"bool"},{name:"psoriasis",type:"bool"},{name:"acne",type:"bool"},{name:"disease",type:"bool"},{name:"other",type:"bool"},{name:"anemia",type:"bool"},{name:"hiv",type:"bool"},{name:"f_h_blood_problems",type:"bool"},{name:"hai_status",type:"bool"},{name:"allergies",type:"bool"},{name:"bleeding_problems",type:"bool"},{name:"frequent_illness",type:"bool"},{name:"dysphagia",type:"bool"},{name:"heartburn",type:"bool"},{name:"food_intolerance",type:"bool"},{name:"belching",type:"bool"},{name:"bloating",type:"bool"},{name:"flatulence",type:"bool"},{name:"nausea",type:"bool"},{name:"vomiting",type:"bool"},{name:"jaundice",type:"bool"},{name:"h_o_hepatitis",type:"bool"},{name:"hematemesis",type:"bool"},{name:"diarrhea",type:"bool"},{name:"hematochezia",type:"bool"},{name:"changed_bowel",type:"bool"},{name:"constipation",type:"bool"},{name:"female_g",type:"bool"},{name:"female_p",type:"bool"},{name:"female_ap",type:"bool"},{name:"lmp",type:"bool"},{name:"female_lc",type:"bool"},{name:"menopause",type:"bool"},{name:"flow",type:"bool"},{name:"abnormal_hair_growth",type:"bool"},{name:"menarche",type:"bool"},{name:"symptoms",type:"bool"},{name:"f_h_female_hirsutism_striae",type:"bool"},{name:"anxiety",type:"bool"},{name:"depression",type:"bool"},{name:"psychiatric_medication",type:"bool"},{name:"social_difficulties",type:"bool"},{name:"psychiatric_diagnosis",type:"bool"},{name:"fms",type:"bool"},{name:"swelling",type:"bool"},{name:"Warm",type:"bool"},{name:"muscle",type:"bool"},{name:"stiffness",type:"bool"},{name:"aches",type:"bool"},{name:"arthritis",type:"bool"},{name:"chronic_joint_pain",type:"bool"},{name:"loc",type:"bool"},{name:"stroke",type:"bool"},{name:"paralysis",type:"bool"},{name:"tia",type:"bool"},{name:"numbness",type:"bool"},{name:"memory_problems",type:"bool"},{name:"seizures",type:"bool"},{name:"intellectual_decline",type:"bool"},{name:"dementia",type:"bool"},{name:"headache",type:"bool"},{name:"cons_weakness",type:"bool"},{name:"brest_discharge",type:"bool"},{name:"fem_frequency",type:"bool"},{name:"notes",type:"string",dataType:"mediumtext"}],proxy:{type:"direct",api:{update:"Encounter.updateReviewOfSystems"}},belongsTo:{model:"App.model.patient.Encounter",foreignKey:"eid"}}),Ext.define("App.model.patient.VectorGraph",{extend:"Ext.data.Model",table:{name:"vectorgraph",comment:"Vector Graphics"},fields:[{name:"id",type:"int",comment:"Vector Graphics ID"},{name:"age_mos",type:"float"},{name:"height",type:"float"},{name:"PP",type:"float"},{name:"P3",type:"float"},{name:"P5",type:"float"},{name:"P10",type:"float"},{name:"P25",type:"float"},{name:"P50",type:"float"},{name:"P75",type:"float"},{name:"P85",type:"float"},{name:"P90",type:"float"},{name:"P95",type:"float"},{name:"P97",type:"float"}],proxy:{type:"direct",api:{read:"VectorGraph.getGraphData"},reader:{type:"json"}}}),Ext.define("App.model.patient.VisitPayment",{extend:"Ext.data.Model",table:{name:"visitpayment",comment:"Visit Payment"},fields:[{name:"id",type:"int",comment:"Visit Payment ID"},{name:"no",type:"int"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"facility",type:"string"},{name:"received_from",type:"string"},{name:"amount",type:"string"},{name:"for_payment_of",type:"string"},{name:"paid_by",type:"string"},{name:"description",type:"string"},{name:"next_appointment",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"accounted_amount",type:"string"},{name:"payment_amount",type:"string"},{name:"balance_due",type:"string"}],proxy:{type:"direct",api:{read:"Encounter.Checkout"},reader:{type:"json"}}}),Ext.define("App.model.patient.Vitals",{extend:"Ext.data.Model",table:{name:"encounter_vitals",comment:"Vitals"},fields:[{name:"id",type:"int",comment:"Vital ID"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"uid",type:"int"},{name:"auth_uid",type:"int"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"weight_lbs",type:"string",useNull:!0,len:10},{name:"weight_kg",type:"float",useNull:!0,len:10},{name:"height_in",type:"float",useNull:!0,len:10},{name:"height_cm",type:"float",useNull:!0,len:10},{name:"bp_systolic",type:"float",useNull:!0,len:10},{name:"bp_diastolic",type:"float",useNull:!0,len:10},{name:"pulse",type:"int",useNull:!0,len:10,convert:function(a){return a>0?a:null
}},{name:"respiration",type:"int",useNull:!0,len:10,convert:function(a){return a>0?a:null}},{name:"temp_f",type:"float",useNull:!0,len:10,convert:function(a){return a>0?a:null}},{name:"temp_c",type:"float",useNull:!0,len:10,convert:function(a){return a>0?a:null}},{name:"temp_location",type:"string",len:40},{name:"oxygen_saturation",type:"float",useNull:!0,len:10},{name:"head_circumference_in",type:"float",useNull:!0,len:10},{name:"head_circumference_cm",type:"float",useNull:!0,len:10},{name:"waist_circumference_in",type:"float",useNull:!0,len:10},{name:"waist_circumference_cm",type:"float",useNull:!0,len:10},{name:"bmi",type:"float",useNull:!0,len:10,convert:function(a){return a>0?a:null}},{name:"bmi_status",type:"string",useNull:!0,len:10},{name:"other_notes",type:"string",len:600},{name:"bp_systolic_normal",type:"int",defaultValue:120,store:!1},{name:"bp_diastolic_normal",type:"int",defaultValue:80,store:!1},{name:"group_date",type:"string",store:!1,convert:function(a,b){return Ext.Date.format(b.data.date,"Y-m-d")}},{name:"administer_by",type:"string",store:!1},{name:"authorized_by",type:"string",store:!1}],proxy:{type:"direct",api:{read:"Vitals.getVitals",create:"Vitals.addVitals",update:"Vitals.updateVitals"}},belongsTo:{model:"App.model.patient.Encounter",foreignKey:"eid"}}),Ext.define("App.model.patient.charts.BMIForAge",{extend:"Ext.data.Model",table:{name:"bmiforage",comment:"BMI For Age"},fields:[{name:"id",type:"int",comment:"BMI For Age ID"},{name:"age",type:"float"},{name:"PP",type:"float"},{name:"P3",type:"float"},{name:"P5",type:"float"},{name:"P10",type:"float"},{name:"P25",type:"float"},{name:"P50",type:"float"},{name:"P75",type:"float"},{name:"P90",type:"float"},{name:"P95",type:"float"},{name:"P97",type:"float"}],proxy:{type:"direct",api:{read:"VectorGraph.getGraphData"},reader:{type:"json"},extraParams:{type:8}}}),Ext.define("App.model.patient.charts.HeadCircumferenceInf",{extend:"Ext.data.Model",table:{name:"headcircumferenceinf",comment:"Head Circumference Information"},fields:[{name:"id",type:"int",comment:"Head Circumference Information ID"},{name:"age",type:"float"},{name:"PP",type:"float"},{name:"P3",type:"float"},{name:"P5",type:"float"},{name:"P10",type:"float"},{name:"P25",type:"float"},{name:"P50",type:"float"},{name:"P75",type:"float"},{name:"P90",type:"float"},{name:"P95",type:"float"},{name:"P97",type:"float"}],proxy:{type:"direct",api:{read:"VectorGraph.getGraphData"},reader:{type:"json"},extraParams:{type:4}}}),Ext.define("App.model.patient.charts.LengthForAgeInf",{extend:"Ext.data.Model",table:{name:"lengthforageinf",comment:"Length For Age Information"},fields:[{name:"id",type:"int",comment:"Length For Age Information ID"},{name:"age",type:"float"},{name:"PP",type:"float"},{name:"P3",type:"float"},{name:"P5",type:"float"},{name:"P10",type:"float"},{name:"P25",type:"float"},{name:"P50",type:"float"},{name:"P75",type:"float"},{name:"P90",type:"float"},{name:"P95",type:"float"},{name:"P97",type:"float"}],proxy:{type:"direct",api:{read:"VectorGraph.getGraphData"},reader:{type:"json"},extraParams:{type:2}}}),Ext.define("App.model.patient.charts.StatureForAge",{extend:"Ext.data.Model",table:{name:"statureforage",comment:"Stature For Age"},fields:[{name:"id",type:"int",comment:"Stature For Age ID"},{name:"age",type:"float"},{name:"PP",type:"float"},{name:"P3",type:"float"},{name:"P5",type:"float"},{name:"P10",type:"float"},{name:"P25",type:"float"},{name:"P50",type:"float"},{name:"P75",type:"float"},{name:"P90",type:"float"},{name:"P95",type:"float"},{name:"P97",type:"float"}],proxy:{type:"direct",api:{read:"VectorGraph.getGraphData"},reader:{type:"json"},extraParams:{type:7}}}),Ext.define("App.model.patient.charts.WeightForAge",{extend:"Ext.data.Model",table:{name:"weightforage",comment:"Weight For Age"},fields:[{name:"id",type:"int",comment:"Weight For Age ID"},{name:"age",type:"float"},{name:"PP",type:"float"},{name:"P3",type:"float"},{name:"P5",type:"float"},{name:"P10",type:"float"},{name:"P25",type:"float"},{name:"P50",type:"float"},{name:"P75",type:"float"},{name:"P90",type:"float"},{name:"P95",type:"float"},{name:"P97",type:"float"}],proxy:{type:"direct",api:{read:"VectorGraph.getGraphData"},reader:{type:"json"},extraParams:{type:6}}}),Ext.define("App.model.patient.charts.WeightForAgeInf",{extend:"Ext.data.Model",table:{name:"weightforageinf",comment:"Weight For Age Information"},fields:[{name:"id",type:"int",comment:"Weight For Age Information ID"},{name:"age",type:"float"},{name:"PP",type:"float"},{name:"P3",type:"float"},{name:"P5",type:"float"},{name:"P10",type:"float"},{name:"P25",type:"float"},{name:"P50",type:"float"},{name:"P75",type:"float"},{name:"P90",type:"float"},{name:"P95",type:"float"},{name:"P97",type:"float"}],proxy:{type:"direct",api:{read:"VectorGraph.getGraphData"},reader:{type:"json"},extraParams:{type:1}}}),Ext.define("App.model.patient.charts.WeightForRecumbentInf",{extend:"Ext.data.Model",table:{name:"weightforrecumbentinf",comment:"Weight For Recumbent Information"},fields:[{name:"id",type:"int",comment:"Weight For Recumbent Information ID"},{name:"age",type:"float"},{name:"PP",type:"float"},{name:"P3",type:"float"},{name:"P5",type:"float"},{name:"P10",type:"float"},{name:"P25",type:"float"},{name:"P50",type:"float"},{name:"P75",type:"float"},{name:"P90",type:"float"},{name:"P95",type:"float"},{name:"P97",type:"float"}],proxy:{type:"direct",api:{read:"VectorGraph.getGraphData"},reader:{type:"json"},extraParams:{type:3}}}),Ext.define("App.model.patient.charts.WeightForStature",{extend:"Ext.data.Model",table:{name:"weightforstature",comment:"Weight For Stature"},fields:[{name:"id",type:"int",comment:"Weight For Stature ID"},{name:"height",type:"float"},{name:"PP",type:"float"},{name:"P3",type:"float"},{name:"P5",type:"float"},{name:"P10",type:"float"},{name:"P25",type:"float"},{name:"P50",type:"float"},{name:"P75",type:"float"},{name:"P85",type:"float"},{name:"P90",type:"float"},{name:"P95",type:"float"},{name:"P97",type:"float"}],proxy:{type:"direct",api:{read:"VectorGraph.getGraphData"},reader:{type:"json"},extraParams:{type:5}}}),Ext.define("App.model.areas.PatientArea",{extend:"Ext.data.Model",fields:[{name:"pid",type:"int",comment:"Pool Areas ID"},{name:"eid",type:"int"},{name:"name",type:"string"},{name:"patient"},{name:"shortName",type:"string"},{name:"poolArea",type:"string"},{name:"floorPlanId",type:"int"},{name:"zoneId",type:"int"},{name:"patientZoneId",type:"int"},{name:"priority",type:"string"},{name:"rank",type:"int"}],proxy:{type:"direct",api:{read:"PoolArea.getPatientsByPoolAreaAccess"}}}),Ext.define("App.model.areas.PoolArea",{extend:"Ext.data.Model",table:{name:"pool_areas"},fields:[{name:"id",type:"int"},{name:"title",type:"string",len:80},{name:"floor_plan_id",type:"int"},{name:"facility_id",type:"int"},{name:"sequence",type:"int"},{name:"active",type:"bool"}]}),Ext.define("App.model.areas.PoolDropAreas",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"name",type:"string"},{name:"pid",type:"int"},{name:"pic",type:"string"}]}),Ext.define("App.view.patient.windows.PreventiveCare",{extend:"App.ux.window.Window",title:_("preventive_care_window"),closeAction:"hide",bodyStyle:"background-color:#fff",modal:!0,bodyPadding:5,initComponent:function(){var a=this;a.patientPreventiveCare=Ext.create("App.store.patient.PreventiveCare",{groupField:"type",sorters:["type"],autoSync:!0}),a.grid=Ext.create("Ext.grid.Panel",{store:a.patientPreventiveCare,height:400,width:700,features:Ext.create("Ext.grid.feature.Grouping",{groupHeaderTpl:_("type")+": {name} ({rows.length} "+_("item")+'{[values.rows.length > 1 ? "s" : ""]})',hideGroupedHeader:!0,startCollapsed:!0}),columns:[{header:_("type"),dataIndex:"type",width:200},{header:_("description"),dataIndex:"description",width:200},{header:_("reason"),dataIndex:"reason",flex:1}],plugins:Ext.create("App.ux.grid.RowFormEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:1,items:[{title:_("general"),xtype:"container",padding:10,layout:"vbox",items:[{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 5 0"},items:[{xtype:"textfield",name:"reason",fieldLabel:_("reason"),width:585,labelWidth:70,disabled:!0,allowBlank:!1,action:"reason"}]},{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 5 0"},items:[{xtype:"textfield",fieldLabel:_("observation"),name:"observation",width:250,labelWidth:70,disabled:!0,action:"observation"},{fieldLabel:_("date"),xtype:"datefield",disabled:!0,action:"date",width:200,labelWidth:40,format:globals.date_display_format,name:"date"},{xtype:"checkboxfield",name:"dismiss",fieldLabel:_("dismiss_alert"),enableKeyEvents:!0,listeners:{scope:a,change:a.onChangeOption}},{xtype:"textfield",hidden:!0,name:"eid",action:"eid"}]}]}]})}),a.items=[a.grid],this.callParent(arguments)},onChangeOption:function(a,b){var c=a.up("form").query('[action="reason"]')[0],d=a.up("form").query('[action="date"]')[0],e=a.up("form").query('[action="eid"]')[0],f=a.up("form").query('[action="observation"]')[0];e.setValue(app.patient.eid),b?(c.setDisabled(!1),d.setDisabled(!1),f.setDisabled(!1)):b?(c.setDisabled(!0),d.setDisabled(!0),f.setDisabled(!0)):(c.setDisabled(!0),d.setDisabled(!0),f.setDisabled(!0))},loadPatientPreventiveCare:function(){var a=this;this.patientPreventiveCare.load({scope:a,params:{pid:app.patient.pid},callback:function(b){return b.length>0?(a.show(),app.AuditLog("Patient preventive care viewed"),!0):!1}})}}),Ext.define("App.view.patient.windows.DocumentViewer",{extend:"Ext.window.Window",xtype:"documentviewerwindow",title:_("documents_viewer_window"),layout:"fit",height:700,width:1e3,bodyStyle:"background-color:#fff",maximizable:!0,defaults:{margin:5},tbar:["->",{text:_("archive_document"),itemId:"archiveDocumentBtn",icon:"resources/images/icons/save.png"}]}),Ext.define("App.view.patient.windows.NewEncounter",{extend:"Ext.window.Window",itemId:"EncounterDetailWindow",title:_("encounter"),closeAction:"hide",closable:!1,modal:!0,width:660,initComponent:function(){var a=this;a.store=Ext.create("App.store.patient.Encounters"),Ext.apply(a,{items:[a.encForm=Ext.create("Ext.form.Panel",{itemId:"EncounterDetailForm",border:!1,bodyPadding:"10 10 0 10"})],buttons:[{text:_("save"),action:"encounter",scope:a,handler:a.onFormSave},{text:_("cancel"),scope:a,handler:a.cancelNewEnc}],listeners:{show:a.checkValidation,hide:a.resetRecord}},a),a.getFormItems(this.encForm,5),a.callParent(arguments)},checkValidation:function(){if(app.patient.pid){var a=this,b=a.down("form").getForm(),c=b.getRecord();!c&&acl.add_encounters?(a.loadRecord(Ext.create("App.model.patient.Encounter",{pid:app.patient.pid,service_date:new Date,priority:"Minimal",open_uid:app.user.id,facility:app.user.facility,billing_facility:app.user.facility,brief_description:globals.default_chief_complaint})),Encounter.checkOpenEncountersByPid(app.patient.pid,function(c,d){d.result.encounter&&Ext.Msg.show({title:"Oops! "+_("open_encounters_found")+"...",msg:_("do_you_want_to")+" <strong>"+_("continue_creating_the_new_encounters")+'</strong><br>"'+_("click_no_to_review_encounter_history")+'"',buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(c){"yes"!=c&&(a.hide(),b.reset())}})})):c&&acl.edit_encounters||app.accessDenied()}else app.currPatientError()},onFormSave:function(b){var c=this,d=c.encForm.getForm(),e=d.getValues(),f=d.getRecord(),g=0==f.data.eid;d.isValid()&&(g&&a("add_encounters")||!g&&a("edit_encounters")?(f.set(e),f.save({callback:function(a){if(g){var b=a.data;app.patientButtonRemoveCls(),app.patientBtn.addCls(b.priority),app.openEncounter(b.eid)}c.close()}})):(b.up("window").close(),app.accessDenied()))},loadRecord:function(a){say(a),this.encForm.getForm().loadRecord(a)},resetRecord:function(){this.down("form").getForm().reset(!0),delete this.down("form").getForm()._record},cancelNewEnc:function(){this.close()}}),Ext.define("App.view.patient.windows.ArrivalLog",{extend:"App.ux.window.Window",title:_("patient_arrival_log"),closeAction:"hide",layout:"fit",modal:!0,width:900,height:600,maximizable:!0,initComponent:function(){var a=this;a.store=Ext.create("App.store.patient.PatientArrivalLog",{autoSync:!0}),a.tbar=[{xtype:"patienlivetsearch",fieldLabel:_("look_for_patient"),width:400,hideLabel:!1,enableKeyEvents:!0,listeners:{scope:a,select:a.onPatientSearchSelect,keyup:a.onPatientSearchKeyUp}},"-",{text:_("add_new_patient"),iconCls:"icoAddRecord",action:"newPatientBtn",disabled:!0,scope:a,handler:a.onNewPatient},"->",{xtype:"tool",type:"refresh",scope:a,handler:a.onGridReload}],a.items=[a.ckGrid=Ext.create("Ext.grid.Panel",{store:a.store,margin:5,columns:[{xtype:"actioncolumn",width:25,items:[{icon:"resources/images/icons/delete.png",tooltip:_("remove"),scope:a,handler:a.onPatientRemove}]},{header:_("time"),dataIndex:"time",width:130},{header:_("record")+" #",dataIndex:"pid"},{header:_("patient_name"),dataIndex:"name",flex:1},{header:_("insurance"),dataIndex:"insurance"},{header:_("area"),dataIndex:"area"},{width:25,dataIndex:"warning",renderer:a.warnRenderer}],listeners:{scope:a,itemdblclick:a.onPatientDlbClick}})],a.listeners={scope:a,show:a.onWinShow},a.callParent(arguments)},onPatientSearchSelect:function(a,b){var c=this,d=c.query("grid")[0].getStore(),e=c.query('button[action="newPatientBtn"]')[0];d.add({pid:b[0].data.pid,name:b[0].data.fullname,time:Ext.Date.format(new Date,"Y-m-d H:i:s"),isNew:!1}),a.reset(),e.setDisabled(!0)},onPatientSearchKeyUp:function(a){this.query('button[action="newPatientBtn"]')[0].setDisabled(null==a.getValue())},onNewPatient:function(a){var b=this,c=b.query("patienlivetsearch")[0],d=c.getValue(),e=b.query("grid")[0].getStore();c.reset(),a.disable(),e.add({name:d,time:Ext.Date.format(new Date,"Y-m-d H:i:s"),isNew:!0})},onPatientRemove:function(a,b){var c=a.getStore(),d=this,e=c.getAt(b);Encounter.checkForAnOpenedEncounterByPid({pid:e.data.pid,date:Ext.Date.format(new Date,"Y-m-d H:i:s")},function(a,b){b.result?d.msg("Oops!",_("patient_have_a_opened_encounter")):(d.msg("Sweet!",_("patient_have_been_removed")),c.remove(e))})},onPatientDlbClick:function(a,b){var c=this,d=b.data;app.setPatient(d.pid,d.name,function(){app.openPatientSummary()}),c.close()},onGridReload:function(){this.store.load()},onWinShow:function(){var a=this;a.onGridReload(),new Ext.util.DelayedTask(function(){a.query("patienlivetsearch")[0].focus()}).delay(1e3)}}),Ext.define("App.store.patient.CheckoutAlertArea",{extend:"Ext.data.Store",model:"App.model.patient.CheckoutAlertArea",remoteSort:!1,autoLoad:!1}),Ext.define("App.model.patient.PatientPossibleDuplicate",{extend:"App.model.patient.Patient",proxy:{type:"direct",api:{read:"Patient.getPossibleDuplicatesByDemographic"},reader:{root:"data"}}}),Ext.define("App.view.dashboard.panel.PortalDropZone",{extend:"Ext.dd.DropTarget",constructor:function(a,b){this.portal=a,Ext.dd.ScrollManager.register(a.body),App.view.dashboard.panel.PortalDropZone.superclass.constructor.call(this,a.body,b),a.body.ddScrollConfig=this.ddScrollConfig},ddScrollConfig:{vthresh:50,hthresh:-1,animate:!0,increment:200},createEvent:function(a,b,c,d,e,f){return{portal:this.portal,panel:c.panel,columnIndex:d,column:e,position:f,data:c,source:a,rawEvent:b,status:this.dropAllowed}},notifyOver:function(a,b,c){var d=b.getXY(),e=this.portal,f=a.proxy;this.grid||(this.grid=this.getGrid());var g=e.body.dom.clientWidth;this.lastCW?this.lastCW!=g&&(this.lastCW=g,this.grid=this.getGrid()):this.lastCW=g;var h=0,i=0,j=this.grid.columnX,k=j.length,l=!1;for(k;k>h;h++)if(i=j[h].x+j[h].w,d[0]<i){l=!0;break}l||h--;var m,n=0,o=0,p=!1,q=e.items.getAt(h),r=q.items.items,s=!1;for(k=r.length;k>n;n++)if(m=r[n],o=m.el.getHeight(),0===o)s=!0;else if(m.el.getY()+o/2>d[1]){p=!0;break}n=(p&&m?n:q.items.getCount())+(s?-1:0);var t=this.createEvent(a,b,c,h,q,n);return e.fireEvent("validatedrop",t)!==!1&&e.fireEvent("beforedragover",t)!==!1?(f.getProxy().setWidth("auto"),m?a.panelProxy.moveProxy(m.el.dom.parentNode,p?m.el.dom:null):a.panelProxy.moveProxy(q.el.dom,null),this.lastPos={c:q,col:h,p:s||p&&m?n:!1},this.scrollPos=e.body.getScroll(),e.fireEvent("dragover",t),t.status):t.status},notifyOut:function(){delete this.grid},notifyDrop:function(a,b,c){if(delete this.grid,this.lastPos){var d=this.lastPos.c,e=this.lastPos.col,f=this.lastPos.p,g=a.panel,h=this.createEvent(a,b,c,e,d,f!==!1?f:d.items.getCount());if(this.portal.fireEvent("validatedrop",h)!==!1&&this.portal.fireEvent("beforedrop",h)!==!1){Ext.suspendLayouts(),g.el.dom.style.display="",a.panelProxy.hide(),a.proxy.hide(),f!==!1?d.insert(f,g):d.add(g),Ext.resumeLayouts(!0),this.portal.fireEvent("drop",h);var i=this.scrollPos.top;if(i){var j=this.portal.body.dom;setTimeout(function(){j.scrollTop=i},10)}}return delete this.lastPos,!0}},getGrid:function(){var a=this.portal.body.getBox();return a.columnX=[],this.portal.items.each(function(b){a.columnX.push({x:b.el.getX(),w:b.el.getWidth()})}),a},unreg:function(){Ext.dd.ScrollManager.unregister(this.portal.body),App.view.dashboard.panel.PortalDropZone.superclass.unreg.call(this)}}),Ext.define("App.view.dashboard.panel.OnotesPortlet",{extend:"Ext.grid.Panel",xtype:"onotesportlet",height:250,initComponent:function(){var a=this;a.store=Ext.create("App.store.dashboard.panel.OfficeNotesPortlet"),Ext.apply(a,{height:a.height,store:a.store,stripeRows:!0,columnLines:!0,columns:[{id:"user",text:"From",sortable:!0,dataIndex:"user"},{text:"Note",sortable:!0,dataIndex:"body",flex:1}]}),a.store.load(),a.callParent(arguments)}}),Ext.define("App.view.dashboard.panel.VisitsPortlet",{extend:"Ext.panel.Panel",xtype:"visitsportlet",action:"visitsportlet",initComponent:function(){var a=this;Ext.apply(a,{layout:"fit",height:300,items:{xtype:"chart",animate:!1,shadow:!1,store:a.store=Ext.create("Ext.data.JsonStore",{fields:["total","time"]}),axes:[{type:"Numeric",minimum:0,position:"left",fields:["total"],title:"Patients Per Hour",label:{font:"11px Arial"}},{type:"Time",position:"bottom",fields:["time"],title:"Time",dateFormat:"g:ia",step:[Ext.Date.HOUR,1],constrain:!0,fromDate:(new Date).setHours(6,0,0,0),toDate:(new Date).setHours(20,0,0,0)}],series:[{type:"line",highlight:{size:7,radius:7},axis:"left",smooth:!0,fill:!0,xField:"time",yField:"total",markerConfig:{type:"circle",size:4,radius:4,"stroke-width":0}}]},listeners:{scope:a,render:a.load}}),a.callParent()},load:function(){var a,b,c,d=this,e=d.store,f=[];Encounter.getTodayEncounters(function(d,g){var h=g.result;for(b=0;b<h.length;b++){a=Ext.Date.parse(h[b].service_date,"Y-m-d H:i:s").setMinutes(0,0,0);var i=!1;for(c=0;c<f.length;c++)f[c].time==a&&(f[c].total=f[c].total+1,i=!0);i||f.push({total:1,time:a})}e.loadData(f)})}}),Ext.define("App.view.dashboard.Dashboard",{extend:"App.ux.RenderPanel",requires:["App.view.dashboard.panel.OnotesPortlet","App.view.dashboard.panel.VisitsPortlet"],pageTitle:_("dashboard"),getTools:function(){return[{xtype:"tool",type:"gear",handler:function(a,b,c){var d=c.ownerCt;d.setLoading(_("working")+"..."),Ext.defer(function(){d.setLoading(!1)},2e3)}}]},initComponent:function(){var a=this;Ext.apply(a,{pageBody:[{xtype:"portalpanel",layout:"fit",region:"center",items:[{itemId:"dashboard-col-1"},{itemId:"dashboard-col-2",items:[{title:"Office Visits",tools:this.getTools(),items:{xtype:"visitsportlet"},listeners:{close:Ext.bind(this.onPortletClose,this)}}]}]}]}),a.callParent(),a.listeners={scope:a,show:a.doReloadStores}},onPortletClose:function(a){this.msg(_("message")+"!",a.title+" "+_("was_removed"))},doReloadStores:function(){Ext.ComponentQuery.query("visitsportlet")[0].load()},onActive:function(a){a(!0)}}),Ext.define("App.view.calendar.Calendar",{extend:"App.ux.RenderPanel",pageTitle:_("calendar_events"),ckInStatus:["@","~"],ckOutStatus:["!","x","?","%"],constructor:function(){var a=this;this.callParent(arguments),a.calendarStore=Ext.create("Extensible.calendar.data.MemoryCalendarStore",{autoLoad:!0,proxy:{type:"direct",api:{read:"Calendar.getCalendars"},noCache:!1,reader:{type:"json",root:"data"}}}),a.eventStore=Ext.create("Extensible.calendar.data.EventStore",{autoLoad:!0,proxy:{type:"direct",api:{read:"Calendar.getEvents",create:"Calendar.addEvent",update:"Calendar.updateEvent",destroy:"Calendar.deleteEvent"},noCache:!1,reader:{type:"json",root:"data"},writer:{type:"json",nameProperty:"mapping"},listeners:{exception:function(a,b){var c=b.message?b.message:Ext.decode(b.responseText).message;Ext.Msg.alert("Server Error",c)}}},listeners:{scope:this,write:function(a,b){var c=Ext.value(b.records[0].data[Extensible.calendar.data.EventMappings.Title.name],"(No title)");"create"==b.action?this.msg(_("add"),'Added "'+c+'"'):"update"==b.action?this.msg(_("update"),'Updated "'+c+'"'):"destroy"==b.action&&this.msg(_("delete"),'Deleted "'+c+'"')}}}),a.pageBody=[{xtype:"panel",layout:"border",border:!0,items:[{id:"app-west",region:"west",width:179,border:!1,items:[{xtype:"datepicker",id:"app-nav-picker",cls:"ext-cal-nav-picker",listeners:{select:{fn:function(a,b){Ext.getCmp("app-calendar").setStartDate(b)},scope:this}}},{xtype:"extensible.calendarlist",id:"app-calendarlist",store:a.calendarStore,collapsible:!0,border:!1,width:178}]},{xtype:"extensible.calendarpanel",eventStore:this.eventStore,calendarStore:a.calendarStore,border:!1,id:"app-calendar",region:"center",activeItem:3,viewConfig:{enableFx:!1,viewStartHour:8,viewEndHour:21,minEventDisplayMinutes:15,showTime:!1},monthViewCfg:{showHeader:!0,showWeekLinks:!0,showWeekNumbers:!0},multiWeekViewCfg:{},enableEditDetails:!1,listeners:{eventclick:{fn:function(){},scope:this},eventover:function(){},eventout:function(){},eventadd:{fn:function(){},scope:this},eventupdate:{fn:function(b,c){a.getPoolAreaAction(c)},scope:this},eventcancel:{fn:function(){},scope:this},viewchange:{fn:function(a,b,c){},scope:this},dayclick:{fn:function(){},scope:this},rangeselect:{fn:function(){},scope:this},eventmove:{fn:function(a,b){{var c=Extensible.calendar.data.EventMappings;b.data[c.IsAllDay.name]?"":" \\a\\t g:i a"}b.commit()},scope:this},eventresize:{fn:function(a,b){b.commit()},scope:this},eventdelete:{fn:function(b,c){a.eventStore.remove(c)},scope:this},initdrag:{fn:function(){},scope:this}}}]}],a.callParent()},getPoolAreaAction:function(a){var b=a.data[Extensible.calendar.data.EventMappings.Status.name];return-1!=Ext.Array.indexOf(this.ckInStatus,b)?"in":-1!=Ext.Array.indexOf(this.ckOutStatus,b)?"out":"none"},onActive:function(a){var b=this,c=Ext.getCmp("app-calendar"),d=Ext.getCmp("app-calendarlist");c.getActiveView().refresh(!0),b.calendarStore.load({callback:function(){d.doLayout()}}),a(!0)}}),Ext.define("App.view.messages.Messages",{extend:"App.ux.RenderPanel",id:"panelMessages",pageTitle:_("messages")+" ("+_("inbox")+")",pageLayout:"border",defaults:{split:!0},uses:["App.ux.LivePatientSearch","App.ux.combo.MsgStatus","App.ux.combo.MsgNoteType","App.ux.combo.Users"],initComponent:function(){var a=this;a.storeMsgs=Ext.create("App.store.messages.Messages"),a.msgGrid=Ext.create("Ext.grid.Panel",{store:a.storeMsgs,region:"center",border:!0,viewConfig:{forceFit:!0,stripeRows:!0},listeners:{scope:this,itemclick:this.onItemClick},columns:[{header:_("status"),sortable:!0,dataIndex:"message_status",width:70},{header:_("from"),sortable:!0,dataIndex:"from_user",width:200},{header:_("to"),sortable:!0,dataIndex:"to_user",width:200},{header:_("patient"),sortable:!0,dataIndex:"patient_name",width:200},{header:_("subject"),sortable:!0,dataIndex:"subject",flex:1},{header:_("type"),sortable:!0,dataIndex:"note_type",width:100}],tbar:Ext.create("Ext.PagingToolbar",{store:a.storeMsgs,displayInfo:!0,emptyMsg:_("no_office_notes_to_display"),plugins:Ext.create("Ext.ux.SlidingPager",{}),items:["-",{text:_("delete"),cls:"winDelete",iconCls:"delete",itemId:"deleteMsg",disabled:!0,scope:a,handler:a.onDelete},"-",{text:_("inbox"),action:"inbox",enableToggle:!0,toggleGroup:"message",pressed:!0,scope:a,handler:a.messagesType},"-",{text:_("sent"),action:"sent",enableToggle:!0,toggleGroup:"message",scope:a,handler:a.messagesType},"-",{text:_("trash"),action:"trash",enableToggle:!0,toggleGroup:"message",scope:a,handler:a.messagesType},"-"]}),bbar:[{text:_("new_message"),iconCls:"newMessage",itemId:"newMsg",handler:function(){a.onNewMessage()}},"-",{text:_("reply"),iconCls:"edit",itemId:"replyMsg",disabled:!0,handler:function(){a.action("reply")}},"-"]}),a.msgForm=Ext.create("Ext.form.Panel",{region:"south",height:340,cls:"msgForm",layout:{type:"vbox",align:"stretch"},fieldDefaults:{labelWidth:60,margin:5,anchor:"100%"},items:[{xtype:"container",height:95,cls:"message-form-header",padding:"5 0",layout:"anchor",items:[{xtype:"container",layout:"column",items:[{xtype:"container",layout:"anchor",columnWidth:".50",items:[{xtype:"patienlivetsearch",fieldLabel:_("patient"),emptyText:_("no_patient_selected"),itemId:"patientCombo",name:"pid",hideLabel:!1},{xtype:"textfield",fieldLabel:_("patient"),itemId:"patientField",name:"patient_name",readOnly:!0,hidden:!0},{xtype:"userscombo",name:"to_id",fieldLabel:_("to"),validateOnChange:!1,allowBlank:!1}]},{xtype:"container",layout:"anchor",columnWidth:".50",items:[{xtype:"msgnotetypecombo",name:"note_type",fieldLabel:_("type"),listeners:{scope:a,select:a.onChange}},{xtype:"msgstatuscombo",name:"message_status",fieldLabel:_("status"),listeners:{scope:a,select:a.onChange}}]}]},{xtype:"textfield",fieldLabel:_("subject"),name:"subject",margin:"0 5 5 5"}]},{xtype:"htmleditor",name:"body",itemId:"bodyMsg",flex:1,readOnly:!0,allowBlank:!1},{xtype:"textfield",hidden:!0,name:"id"},{xtype:"textfield",hidden:!0,name:"pid"},{xtype:"textfield",hidden:!0,name:"reply_id"}],bbar:[{text:_("send"),iconCls:"save",itemId:"sendMsg",scope:a,handler:a.onSend},"-",{text:_("delete"),cls:"winDelete",iconCls:"delete",itemId:"deleteMsg",margin:"0 3 0 0",disabled:!0,scope:a,handler:a.onDelete}],listeners:{scope:a,afterrender:a.onFormRender}}),a.pageBody=[a.msgGrid,a.msgForm],a.callParent(arguments)},messagesType:function(a){this.updateTitle("Messages ("+Ext.String.capitalize(a.action)+")"),this.storeMsgs.proxy.extraParams={get:a.action},this.storeMsgs.load()},onFormRender:function(){this.msgForm.getComponent("bodyMsg").setReadOnly(!0),this.onNewMessage()},onNewMessage:function(){var a=this.msgForm,b=Ext.create("App.model.messages.Messages",{message_status:_("new"),note_type:_("unassigned")});say(b),a.getForm().reset(),a.getForm().loadRecord(b),this.action("new")},onSend:function(a){var b=a.up("form").getForm(),c=this.storeMsgs;if(b.isValid()){var d=b.getRecord(),e=b.getValues(),f=c.indexOf(d);-1==f?c.add(e):d.set(e),c.sync(),c.load(),this.onNewMessage(),this.msg("Sweet!",_("message_sent"))}else this.msg("Oops!",_("please_complete_all_required_fields")+".")},onDelete:function(){var a=this.msgForm.getForm(),b=this.storeMsgs;Ext.Msg.show({title:_("please_confirm")+"...",icon:Ext.MessageBox.QUESTION,msg:_("are_you_sure_to_delete_this_message"),buttons:Ext.Msg.YESNO,scope:this,fn:function(c){if("yes"==c){var d=a.getRecord();b.remove(d),b.destroy(),this.onNewMessage(),this.msg("Sweet!",_("sent_to_trash"))}}})},onChange:function(a,b){var c=this,d=a.up("form").getForm();if(d.getRecord().data.id){var e=d.getRecord().data.id,f=a.name,g=b[0].data.option_id,h={id:e,col:f,val:g};Messages.updateMessage(h,function(){c.storeMsgs.load()})}},onItemClick:function(a,b){b.data.to_id=b.data.from_id,this.msgForm.getForm().loadRecord(b),this.action("old")},action:function(a){var b=this.msgGrid.getSelectionModel(),c=this.msgForm,d=c.query('combo[itemId="patientCombo"]')[0],e=c.query('textfield[itemId="patientField"]')[0],f=c.getComponent("bodyMsg"),g=(c.getComponent("currMsg"),this.query('button[itemId="deleteMsg"]')[0]),h=this.query('button[itemId="deleteMsg"]')[1],i=this.query('button[itemId="replyMsg"]')[0],j=this.query('button[itemId="sendMsg"]')[0];if("new"==a)f.setReadOnly(!1),d.show(),e.hide(),g.disable(),h.disable(),i.disable(),j.enable(),b.deselectAll();else if("old"==a)f.setReadOnly(!0),d.hide(),e.show(),g.enable(),h.enable(),i.enable(),j.disable();else if("reply"==a){var k=f.getValue();f.setValue('<br><br><br><qoute style="margin-left: 10px; padding-left: 10px; border-left: solid 3px #cccccc; display: block;">'+k+"</quote>"),f.setReadOnly(!1),j.enable(),d.hide(),e.show()}},onActive:function(a){this.storeMsgs.load(),a(!0)}}),Ext.define("App.view.areas.FloorPlan",{id:"panelAreaFloorPlan",extend:"App.ux.RenderPanel",pageTitle:_("area_floor_plan"),floorPlanId:null,initComponent:function(){var a=this;a.floorPlanZonesStore=Ext.create("App.store.administration.FloorPlanZones"),a.floorPlan=Ext.create("Ext.panel.Panel",{title:_("floor_plans"),layout:"absolute",tbar:["->",{xtype:"floorplanareascombo",fieldLabel:_("area"),labelWidth:40,listeners:{scope:a,select:a.onFloorPlanSelect}}],tools:[{type:"refresh",scope:a,handler:a.setZones}]}),a.pageBody=[a.floorPlan],a.callParent(arguments)},renderZones:function(){var a=this,b=a.query("floorplanareascombo")[0];b.getStore().load({callback:function(c){c.length>0?(b.setValue(c[0].data.id),a.onFloorPlanSelect(b,c)):(b.setValue(""),a.floorPlanId=null,a.floorPlan.removeAll())}})},createZone:function(a){var b,c=this;b=c.floorPlan.add(Ext.create("Ext.button.Split",{text:a.data.title,scale:a.data.scale,itemId:a.data.id,style:{"border-color":a.data.border_color,"background-color":a.data.bg_color},x:a.data.x,y:a.data.y,width:a.data.width,height:a.data.height,scope:c,handler:c.onZoneClicked,tooltip:_("patient_name")+": [empty]",listeners:{scope:c,render:c.initializeZone,arrowclick:c.onZoneArrowClicked},pid:null,zoneId:a.data.id,priority:null,patientZoneId:null})),b.record=a},onZoneArrowClicked:function(a){var b=this;b.patientInfo||(b.patientInfo=Ext.create("Ext.Window",{title:"",width:300,closeAction:"hide",tpl:new Ext.XTemplate('<div class="zoneSummaryContainer">   <div class="zoneSummaryArea">       <tpl if="this.patientImg(image)">','           <img src="{image}" height="96" width="96">       <tpl else>','           <img src="'+app.patientImage+'" height="96" width="96">',"       </tpl>","       <p>Name: {name}</p>       <p>DOB: {DOB}</p>       <p>Age: {age.str}</p>       <p>Sex: {sex}</p>   </div></div>",{patientImg:function(a){return null!=a}}),listeners:{scope:b,blur:{element:"el",fn:b.onPatientInfoBlur}}})),a.data&&(b.patientInfo.update(a.data.patient),b.patientInfo.show(),b.patientInfo.alignTo(a.getEl(),"tl-tr?"),b.patientInfo.focus())},onZoneClicked:function(a){app.setPatient(a.data.pid,a.data.name,function(){a.data.eid?app.openEncounter(a.data.eid):app.openPatientSummary()})},onPatientInfoBlur:function(){this.patientInfo.hide()},onFloorPlanSelect:function(a,b){var c=this;c.floorPlanId=b[0].data.id,c.loadZones(function(){c.setZones()})},loadZones:function(a){var b=this;b.floorPlan.removeAll(),b.floorPlanZonesStore.load({params:{floor_plan_id:this.floorPlanId},scope:b,callback:function(c){for(var d=0;d<c.length;d++)b.createZone(c[d]);a()}})},initializeZone:function(a){var b=this;a.dragZone=Ext.create("Ext.dd.DragZone",a.getEl(),{ddGroup:"patientPoolAreas",getDragData:function(){var b,c=a.btnEl.dom;return c?(b=c.cloneNode(!0),b.id=Ext.id(),a.dragData={sourceEl:c,repairXY:Ext.fly(c).getXY(),ddel:b,patientData:a.data,zone:a}):!1},getRepairXY:function(){return this.dragData.repairXY},b4MouseDown:function(a){this.autoOffset(a.getPageX(),a.getPageY())}}),a.dragZone.lock(),a.dropZone=Ext.create("Ext.dd.DropZone",a.getEl(),{ddGroup:"patientPoolAreas",notifyOver:function(){return null==a.pid?Ext.dd.DropZone.prototype.dropAllowed:Ext.dd.DropZone.prototype.dropNotAllowed},notifyDrop:function(c,d,e){a.data=e.patientData,e.zone&&b.unAssignPatient(e.zone,a.data),b.assignPatient(a,a.data)}})},assignPatient:function(a,b){var c=this,d={zone_id:a.zoneId,pid:b.pid};PatientZone.addPatientToZone(d,function(d,e){b.patientZoneId=e.result.data.id,c.msg("Sweet!",b.name+_("successfully_moved")+"."),c.setZone(a,b)})},unAssignPatient:function(a,b){var c=this;
PatientZone.removePatientFromZone({id:b.patientZoneId},function(){c.unSetZone(a)})},setZone:function(a,b){a.pid=b.pid,a.priority=b.priority,a.patientZoneId=b.patientZoneId,a.dropZone&&a.dropZone.lock(),a.dragZone&&a.dragZone.unlock(),a.setTooltip(_("patient_name")+":"+b.name),a.addCls(b.priority),a.data=b},unSetZone:function(a){a.pid=null,a.data=null,a.dropZone&&a.dropZone.unlock(),a.dragZone&&a.dragZone.lock(),a.setTooltip(_("patient_name")+": [empty]"),a.removeCls(a.priority),a.data=null},setZones:function(){var a,b,c,d=this;PatientZone.getPatientsZonesByFloorPlanId(d.floorPlanId,function(e,f){b=d.floorPlan.items.items,c=f.result;for(var g=0;g<b.length;g++)d.unSetZone(b[g]);for(var h=0;h<c.length;h++)a=d.floorPlan.getComponent(c[h].zoneId),a.data=c[h],d.setZone(a,c[h])})},setFloorPlan:function(){},onActive:function(a){var b=this;null==b.floorPlanId?b.renderZones():b.setZones(),a(!0)}}),Ext.define("App.view.patient.charts.BPPulseTemp",{extend:"Ext.container.Container",layout:{type:"vbox",align:"stretch"},style:"background-color:#fff",defaults:{xtype:"panel",layout:"fit",flex:1},initComponent:function(){var a=this;a.items=[{title:_("blood_pressure"),margin:5,items:[{xtype:"chart",style:"background:#fff",store:a.store,animate:!1,shadow:!0,legend:{position:"right"},axes:[{title:_("blood_pressure"),type:"Numeric",position:"left",fields:["bp_systolic","bp_diastolic","bp_systolic_normal","bp_diastolic_normal"],grid:{odd:{opacity:1,stroke:"#bbb","stroke-width":.5}}},{title:_("date"),type:"Time",dateFormat:"Y-m-d h:i:s a",position:"bottom",fields:["date"]}],series:[{title:_("systolic"),type:"line",axis:"left",xField:"date",yField:"bp_systolic",smooth:!0,highlight:{size:10,radius:10},markerConfig:{type:"circle",size:5,radius:5,"stroke-width":0},tips:{trackMouse:!0,renderer:function(a){this.update("Date: "+Ext.Date.format(a.get("date"),"Y-m-d h:i:s a")+"<br>Systolic: "+a.get("bp_systolic"))}}},{title:_("diastolic"),type:"line",axis:"left",xField:"date",yField:"bp_diastolic",smooth:!0,highlight:{size:5,radius:5},markerConfig:{type:"cross",size:5,radius:5,"stroke-width":0},tips:{trackMouse:!0,renderer:function(a){this.update(_("date")+": "+Ext.Date.format(a.get("date"),"Y-m-d h:i:s a")+"<br>"+_("diastolic")+": "+a.get("bp_diastolic"))}}},{type:"line",showMarkers:!1,axis:"left",xField:"date",yField:"bp_diastolic_normal",style:{stroke:"#000000","stroke-width":1}},{type:"line",showMarkers:!1,axis:"left",xField:"date",yField:"bp_systolic_normal",style:{stroke:"#000000","stroke-width":1}}]}]},{title:"Pulse",margin:"0 5 5 5",items:[{xtype:"chart",style:"background:#fff",store:a.store,animate:!1,shadow:!0,legend:{position:"right"},axes:[{title:_("pulse_per_min"),type:"Numeric",position:"left",fields:["pulse"],grid:{odd:{opacity:1,stroke:"#bbb","stroke-width":.5}}},{title:_("date"),type:"Time",dateFormat:"Y-m-d h:i:s a",position:"bottom",fields:["date"]}],series:[{title:_("pulse"),type:"line",axis:"left",xField:"date",yField:"pulse",smooth:!0,highlight:{size:10,radius:10},markerConfig:{type:"circle",size:5,radius:5,"stroke-width":0},tips:{trackMouse:!0,renderer:function(a){this.update(_("date")+": "+Ext.Date.format(a.get("date"),"Y-m-d h:i:s a")+"<br>"+_("pulse_per_min")+": "+a.get("pulse"))}}}]}]},{title:_("temperature"),margin:"0 5 5 5",items:[{xtype:"chart",store:a.store,animate:!1,shadow:!0,legend:{position:"right"},axes:[{title:_("temp_fahrenheits"),type:"Numeric",position:"left",fields:["temp_f"],grid:{odd:{opacity:1,stroke:"#bbb","stroke-width":.5}}},{title:_("date"),type:"Time",dateFormat:"Y-m-d h:i:s a",position:"bottom",fields:["date"]}],series:[{title:_("temp_fahrenheits"),type:"line",axis:"left",xField:"date",yField:"temp_f",smooth:!0,highlight:{size:10,radius:10},markerConfig:{type:"circle",size:5,radius:5,"stroke-width":0},tips:{trackMouse:!0,renderer:function(a){this.update(_("date")+": "+Ext.Date.format(a.get("date"),"Y-m-d h:i:s a")+"<br>"+_("temp_fahrenheits")+": "+a.get("temp_f"))}}}]}]}],a.callParent(arguments)}}),Ext.define("App.view.patient.charts.HeadCircumference",{extend:"Ext.panel.Panel",layout:"fit",margin:5,initComponent:function(){var a=this;a.items=[{xtype:"chart",store:a.store,animate:!1,shadow:!1,legend:{position:"right"},axes:[{title:a.xTitle,type:"Numeric",position:"left",fields:["PP","P3","P5","P10","P25","P50","P75","P90","P95","P97"],grid:{odd:{opacity:1,stroke:"#bbb","stroke-width":.5}},minimum:a.xMinimum,maximum:a.xMaximum},{title:a.yTitle,type:"Numeric",position:"bottom",fields:["age"],minimum:a.yMinimum,maximum:a.yMaximum}],series:[{title:_("circumference_cm"),type:"scatter",axis:"left",xField:"age",yField:"PP",smooth:!0,highlight:{size:10,radius:10},markerConfig:{type:"circle",size:5,radius:5,"stroke-width":0},tips:{trackMouse:!0,renderer:function(b){this.update(a.yTitle+" : "+b.get("age")+"<br>"+a.xTitle+": "+b.get("PP"))}}},{title:"97%",type:"line",axis:"left",xField:"age",yField:"P97",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}},{title:"95%",type:"line",axis:"left",xField:"age",yField:"P95",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}},{title:"75%",type:"line",axis:"left",xField:"age",yField:"P75",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}},{title:"50%",type:"line",axis:"left",xField:"age",yField:"P50",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":3,opacity:.5},highlight:{stroke:"#FF9900",size:4}},{title:"25%",type:"line",axis:"left",xField:"age",yField:"P25",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}},{title:"10%",type:"line",axis:"left",xField:"age",yField:"P10",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}},{title:"5%",type:"line",axis:"left",xField:"age",yField:"P5",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}},{title:"3%",type:"line",axis:"left",xField:"age",yField:"P3",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}}]}],a.callParent(arguments)}}),Ext.define("App.view.patient.charts.HeightForStature",{extend:"Ext.panel.Panel",layout:"fit",margin:5,title:_("weight_for_age"),initComponent:function(){var a=this;a.items=[{xtype:"chart",store:a.store,animate:!1,shadow:!1,legend:{position:"right"},axes:[{title:_("weight_kg"),type:"Numeric",position:"left",fields:["PP","P3","P5","P10","P25","P50","P75","P85","P90","P95","P97"],grid:{odd:{opacity:1,stroke:"#bbb","stroke-width":.5}},minimum:7,maximum:31},{title:_("length_cm"),type:"Numeric",position:"bottom",fields:["height"],minimum:77,maximum:121.5}],series:[{title:_("weight_kg"),type:"scatter",axis:"left",xField:"height",yField:"PP",smooth:!0,highlight:{size:10,radius:10},markerConfig:{type:"circle",size:5,radius:5,"stroke-width":0},tips:{trackMouse:!0,renderer:function(a){this.update(_("length_cm")+": "+a.get("height")+"<br>"+_("weightArray")+": "+a.get("PP"))}}},{title:"97%",type:"line",axis:"left",xField:"height",yField:"P97",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}},{title:"95%",type:"line",axis:"left",xField:"height",yField:"P95",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}},{title:"85%",type:"line",axis:"left",xField:"height",yField:"P85",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}},{title:"75%",type:"line",axis:"left",xField:"height",yField:"P75",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}},{title:"50%",type:"line",axis:"left",xField:"height",yField:"P50",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":3,opacity:.5},highlight:{stroke:"#FF9900",size:4}},{title:"25%",type:"line",axis:"left",xField:"height",yField:"P25",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}},{title:"10%",type:"line",axis:"left",xField:"height",yField:"P10",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}},{title:"5%",type:"line",axis:"left",xField:"height",yField:"P5",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}},{title:"3%",type:"line",axis:"left",xField:"height",yField:"P3",smooth:!0,showMarkers:!1,style:{stroke:"#000000","stroke-width":1,opacity:.3},highlight:{stroke:"#FF9900",size:2}}]}],a.callParent(arguments)}}),Ext.define("App.view.patient.encounter.CurrentProceduralTerminology",{extend:"Ext.panel.Panel",alias:"widget.currentproceduralterminology",autoScroll:!0,border:!1,bodyBorder:!1,bodyPadding:5,bodyStyle:"background-color:#fff",layout:"border",pid:null,eid:null,initComponent:function(){var a=this;a.referenceCptStore=Ext.create("App.store.patient.QRCptCodes"),a.encounterCptStore=Ext.create("App.store.patient.EncounterServices",{autoSync:!0,listeners:{scope:a,beforesync:a.beforesync}}),a.cptFormEdit=Ext.create("App.ux.grid.RowFormEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:1,enableRemove:!0,items:[{fieldLabel:_("full_description"),xtype:"displayfield",name:"code_text",anchor:"100%"},{xtype:"container",layout:"column",items:[{xtype:"fieldcontainer",layout:"anchor",columnWidth:.5,margin:"0 3 0 0",defaults:{xtype:"textfield"},items:[{fieldLabel:_("place_of_service"),name:"place_of_service",anchor:"100%"},{xtype:"checkbox",labelWidth:105,fieldLabel:_("emergency")+"?",name:"emergency"},{fieldLabel:_("charges"),name:"charge",anchor:"100%"}]},{xtype:"fieldcontainer",layout:"anchor",columnWidth:.5,margin:"0 0 0 3",defaults:{xtype:"textfield",anchor:"100%",labelWidth:110},items:[{fieldLabel:_("days_of_units"),name:"days_of_units"},{fieldLabel:_("essdt_fam_plan"),name:"essdt_plan"},{fieldLabel:_("modifiers"),xtype:"livecptsearch",hideLabel:!1,name:"modifiers"}]}]},{xtype:"liveicdxsearch",fieldLabel:_("diagnosis"),hideLabel:!1,name:"diagnosis"}],listeners:{scope:a,afterremove:a.onCompleteRemove}}),a.items=[{xtype:"panel",title:_("cpt_search"),itemId:"leftCol",region:"west",width:450,hidden:!0,titleCollapse:!0,margin:"0 5 0 0",bodyStyle:"background-color:#fff",layout:{type:"vbox",align:"stretch",padding:5},items:[{xtype:"fieldset",title:_("cpt_quick_reference_options"),padding:"10 15",margin:"0 0 3 0",layout:"anchor",items:{xtype:"combobox",anchor:"100%",editable:!1,queryMode:"local",valueField:"value",displayField:"name",store:Ext.create("Ext.data.Store",{fields:["name","value"],data:[{name:_("show_related_cpt_for_current_diagnostics"),value:0},{name:_("show_cpt_history_for_this_patient"),value:1},{name:_("show_cpt_commonly_used_by_clinic"),value:2}]}),listeners:{scope:a,change:a.onQuickReferenceOption}}},Ext.create("Ext.ux.LiveSearchGridPanel",{margins:0,flex:1,store:a.referenceCptStore,viewConfig:{copy:!0,stripRows:!0,loadMask:!0,plugins:[{ptype:"gridviewdragdrop",dragGroup:"CPTGridDDGroup"}]},columns:[{text:_("code"),width:70,sortable:!0,dataIndex:"code"},{text:_("description"),flex:1,sortable:!0,dataIndex:"code_text_medium"}]})],listeners:{scope:a,collapse:a.onQuickReferenceCollapsed}},{xtype:"panel",title:_("encounter_cpts"),region:"center",itemId:"rightCol",bodyStyle:"background-color:#fff",layout:{type:"vbox",align:"stretch",padding:5},items:[{xtype:"fieldset",title:_("cpt_live_sarch"),padding:"10 15",margin:"0 0 3 0",layout:"anchor",items:{xtype:"livecptsearch",listeners:{scope:a,select:a.onLiveCptSelect}}},{xtype:"grid",flex:1,margins:0,store:a.encounterCptStore,columns:[{text:_("code"),width:70,sortable:!0,dataIndex:"code"},{text:_("description"),flex:1,sortable:!0,dataIndex:"code_text"},{text:_("status"),width:50,sortable:!0,dataIndex:"status",renderer:a.status}],tbar:[{text:_("quick_reference"),action:"referenceCptBtn",enableToggle:!0,scope:a,toggleHandler:a.onQuickReferenceToggle},"->",{text:_("reload"),handler:function(){a.encounterCptStoreLoad(null)}}],viewConfig:{itemId:"view",plugins:{ptype:"gridviewdragdrop",dropGroup:"CPTGridDDGroup"},listeners:{scope:a,drop:a.onCptDropped}},plugins:a.cptFormEdit}]}],a.callParent(arguments)},status:function(a){return"0"==a?'<img style="padding-left: 10px" src="resources/images/icons/no.gif" />':"1"==a?'<img style="padding-left: 10px" src="resources/images/icons/yes.gif" />':"2"==a?'<img style="padding-left: 10px" src="resources/images/icons/icohelp.png" />':a},onQuickReferenceCollapsed:function(){var a=this.query('button[action="referenceCptBtn"]');a[0].pressed&&a[0].toggle(!1)},onQuickReferenceToggle:function(a,b){b?this.getComponent("leftCol").show():this.getComponent("leftCol").hide()},onQuickReferenceOption:function(a,b){this.loadCptQuickReferenceGrid(b)},onCompleteRemove:function(){app.msg("Sweet!",_("cpt_removed_from_this_encounter"))},onLiveCptSelect:function(a,b){var c=this;a.reset(),delete b[0].data.id,b[0].data.eid=c.eid,c.encounterCptStore.add(b[0].data)},loadCptQuickReferenceGrid:function(a){this.referenceCptStore.load({params:{pid:this.pid,eid:this.eid,filter:a}})},beforesync:function(a){a.create&&(a.create[0].data.eid=this.eid)},onCptDropped:function(a,b,c,d){app.msg("Sweet!",_("cpt_added_to_this_encounter")),this.cptFormEdit.cancelEdit();var e=c.store,f=e.indexOf(c),g="before"==d?f-1:f+1;this.cptFormEdit.startEdit(g,0)},setDefaultQRCptCodes:function(){var a=this.down("combobox");1!=a.getValue()?a.setValue(1):this.loadCptQuickReferenceGrid(1)},encounterCptStoreLoad:function(a,b,c){this.pid=a?a:this.pid,this.eid=b?b:this.eid,this.encounterCptStore.load({filters:[{property:"eid",value:this.eid}],callback:function(){c?c():null}})}}),Ext.define("App.view.patient.encounter.HealthCareFinancingAdministrationOptions",{extend:"Ext.form.Panel",xtype:"hcafaoptions",pid:null,eid:null,initComponent:function(){var a=this;a.callParent(),a.loadHCFAForm()},loadHCFAForm:function(){var a=this;a.getFormItems(this,10,function(){})}}),Ext.define("App.view.patient.encounter.ICDs",{extend:"Ext.form.FieldSet",alias:"widget.icdsfieldset",title:_("dx_codes"),padding:"10 15",layout:{type:"vbox",align:"stretch"},requires:["App.ux.LiveICDXSearch"],autoFormSync:!0,dxGroup:{},initComponent:function(){var a=this;a.items=[{xtype:"container",layout:"hbox",items:[{xtype:"combobox",store:Ext.create("Ext.data.Store",{fields:["option",{name:"value",type:"int"}],data:[{option:"DX:1",value:1},{option:"DX:2",value:2},{option:"DX:3",value:3},{option:"DX:4",value:4},{option:"DX:5",value:5},{option:"DX:6",value:6},{option:"DX:7",value:7},{option:"DX:8",value:8},{option:"DX:9",value:9}]}),width:55,itemId:this.id+"-group-cmb",queryMode:"local",displayField:"option",valueField:"value",value:1,margin:"0 3 0 0",forceSelection:!0,editable:!1},{xtype:"liveicdxsearch",itemId:"liveicdxsearch",emptyText:a.emptyText,name:"dxCodes",flex:1,listeners:{scope:a,select:a.onLiveIcdSelect,blur:function(a){a.reset()}}}]}],a.callParent(arguments)},getGroupContainer:function(a){var b=this;return this.dxGroup[a]||(this.dxGroup[a]=Ext.widget("container",{layout:{type:"table",columns:6},itemId:this.id+"-group-"+a,margin:"5 0 0 0",items:[{xtype:"container",itemId:this.id+"-dx-order-1",action:"pointer"},{xtype:"container",itemId:this.id+"-dx-order-2",action:"pointer"},{xtype:"container",itemId:this.id+"-dx-order-3",action:"pointer"},{xtype:"container",itemId:this.id+"-dx-order-4",action:"pointer"},{xtype:"container",itemId:this.id+"-dx-order-5",action:"pointer"},{xtype:"container",itemId:this.id+"-dx-order-6",action:"pointer"},{xtype:"container",itemId:this.id+"-dx-order-7",action:"pointer"},{xtype:"container",itemId:this.id+"-dx-order-8",action:"pointer"},{xtype:"container",itemId:this.id+"-dx-order-9",action:"pointer"},{xtype:"container",itemId:this.id+"-dx-order-10",action:"pointer"},{xtype:"container",itemId:this.id+"-dx-order-11",action:"pointer"},{xtype:"container",itemId:this.id+"-dx-order-12",action:"pointer"}],listeners:{afterrender:function(c){for(var d=c.items.items,e=0;e<d.length;e++)new Ext.dd.DropTarget(d[e].el,{ddGroup:"group-"+a+"-dx",dropPos:!1,dxsContainer:c,dxContainer:d[e],notifyOver:function(a,b,d){{var e=d.panel,f=this.dxContainer;a.proxy}if(0==f.items.items.length)return!1;if(f.items.items[0]==e)return!1;var g=c.items.items.indexOf(e.ownerCt),h=c.items.items.indexOf(f);return this.dropBefore=g>h,this.dropPos=c.items.items.indexOf(f),!0},notifyDrop:function(a,d,e){if(a.panelProxy.hide(),a.proxy.hide(),Ext.suspendLayouts(),this.lastPos!==!1){var f=e.panel.ownerCt,g=this.dxsContainer.items.items[this.dropPos],h=this.dxsContainer.items.items[this.dropPos].items.items[0],i=e.panel;f.remove(i,!1),g.remove(h,!1),g.add(i),f.add(h)}return Ext.resumeLayouts(!0),delete this.dropPos,b.onReOrder(c),!0}})}}})),this.add(this.dxGroup[a]),this.dxGroup[a]},onLiveIcdSelect:function(a,b){var c,d=this,e=d.up("form").getForm().getRecord(),f=d.getDxGroupCombo().getValue(),g=d.getNextOrder(f);c=this.store.add({pid:e.data.pid,eid:e.data.eid,uid:app.user.id,code:b[0].data.code,dx_group:f,dx_order:g,code_type:b[0].data.code_type,code_text:b[0].data.code_text}),d.addIcd(c[0],f,g),a.reset()},removeIcds:function(){Ext.Object.each(this.dxGroup,function(a,b){Ext.destroy(b)}),this.dxGroup={}},loadIcds:function(a){var b=this,c=a.data.items;b.store=a,b.removeIcds(),b.loading=!0;for(var d=0;d<c.length;d++)b.addIcd(c[d],c[d].data.dx_group,c[d].data.dx_order);b.loading=!1,b.getIcdLiveSearch().reset()},addIcd:function(a,b,c){this.getDxCell(b,c).add({xtype:"panel",closable:!0,title:a.data.code,dxRecord:a,width:100,margin:"0 5 0 0",name:this.name,editable:!1,action:"Dx",draggable:{moveOnDrag:!1,ddGroup:"group-"+b+"-dx"}})},getDxCell:function(a,b){return this.getGroupContainer(a).getComponent(this.id+"-dx-order-"+b)},getIcdLiveSearch:function(){return this.query("liveicdxsearch")[0]},getDxGroupCombo:function(){return this.query("#"+this.id+"-group-cmb")[0]},getNextOrder:function(a){var b,c=this.getGroupContainer(a).query("container[action=pointer]"),d=c.length;for(b=0;d>b;b++)if(0==c[b].items.items.length)return b+1;return!1},onReOrder:function(a){var b,c=a.query("container[action=pointer]");b=c.length;for(var d=0;b>d;d++)c[d].items.items.length>0&&"Dx"==c[d].items.items[0].action&&c[d].items.items[0].dxRecord.set({dx_order:d+1})},sync:function(){this.store.sync()}}),Ext.define("App.view.patient.windows.PossibleDuplicates",{extend:"App.ux.window.Window",title:_("possible_duplicates"),itemId:"PossiblePatientDuplicatesWindow",closeAction:"hide",bodyStyle:"background-color:#fff",modal:!0,closable:!1,requires:["Ext.toolbar.Paging","Ext.ux.SlidingPager"],initComponent:function(){var a=this;a.items=[{xtype:"grid",store:a.store=Ext.create("App.store.patient.PatientPossibleDuplicates"),width:600,frame:!0,margin:5,hideHeaders:!0,columns:[{dataIndex:"image",width:65,renderer:function(a){return'<img src="'+a+'" class="icon32Round" />'}},{dataIndex:"fullname",flex:1,renderer:function(a,b,c){return a+" "+c.data.SS+"<br>"+c.data.fulladdress+"<br>"+c.data.phones}}],bbar:{xtype:"pagingtoolbar",pageSize:10,store:a.store,displayInfo:!0,plugins:Ext.create("Ext.ux.SlidingPager")}}],a.buttons=[{text:_("continue"),itemId:"PossiblePatientDuplicatesContinueBtn"}],a.callParent()}}),Ext.define("App.store.patient.DoctorsNotes",{extend:"Ext.data.Store",model:"App.model.patient.DoctorsNote",autoLoad:!1}),Ext.define("App.view.patient.DoctorsNotes",{extend:"Ext.grid.Panel",requires:["App.store.patient.DoctorsNotes","App.ux.grid.RowFormEditing","App.ux.form.fields.MultiText","App.ux.combo.Templates"],xtype:"patientdoctorsnotepanel",title:_("doctors_notes"),itemId:"DoctorsNotes",columnLines:!0,store:Ext.create("App.store.patient.DoctorsNotes",{groupField:"order_date",remoteFilter:!0,pageSize:200,sorters:[{property:"order_date",direction:"DESC"}]}),selModel:Ext.create("Ext.selection.CheckboxModel",{showHeaderCheckbox:!1}),features:[{ftype:"grouping"}],columns:[{xtype:"actioncolumn",width:20,items:[{icon:"resources/images/icons/cross.png",tooltip:_("remove")}]},{xtype:"datecolumn",text:_("date"),dataIndex:"order_date",format:g("date_display_format")},{text:_("type"),dataIndex:"template_id",renderer:function(a){return App.Current.getController("patient.DoctorsNotes").templatesRenderer(a)},allowBlank:!1},{xtype:"datecolumn",text:_("from"),dataIndex:"from_date",format:g("date_display_format")},{xtype:"datecolumn",text:_("to"),dataIndex:"to_date",format:g("date_display_format")},{text:_("comments"),dataIndex:"comments",flex:1},{text:_("restrictions"),dataIndex:"string_restrictions",flex:1}],plugins:[{ptype:"rowformediting",clicksToEdit:2,items:[{xtype:"container",layout:{type:"hbox"},items:[{xtype:"fieldset",layout:"anchor",title:_("general"),width:300,items:[{xtype:"datefield",fieldLabel:_("order_date"),format:g("date_display_format"),name:"order_date"},{xtype:"documentstemplatescombo",fieldLabel:_("document"),name:"template_id"},{xtype:"datefield",fieldLabel:_("from"),format:g("date_display_format"),name:"from_date"},{xtype:"datefield",fieldLabel:_("to"),format:g("date_display_format"),name:"to_date"}]},{xtype:"fieldset",layout:"fit",title:_("comments"),flex:1,height:138,margin:"0 5 0 5",items:[{xtype:"textareafield",anchor:"100%",name:"comments"}]},{xtype:"fieldset",title:_("restrictions"),height:138,width:400,autoScroll:!0,items:[{xtype:"multitextfield",name:"restrictions"}]}]}]}],tbar:["->","-",{text:_("new_order"),iconCls:"icoAdd",action:"encounterRecordAdd",itemId:"newDoctorsNoteBtn"},"-",{text:_("print"),iconCls:"icoPrint",disabled:!0,margin:"0 5 0 0",itemId:"printDoctorsNoteBtn"}]}),Ext.define("App.view.patient.EncounterDocumentsGrid",{extend:"Ext.grid.Panel",alias:"widget.documentsimplegrid",title:_("documents"),split:!0,initComponent:function(){var a=this;a.store=Ext.create("App.store.patient.PatientDocuments"),a.columns=[{xtype:"actioncolumn",width:26,items:[{icon:"resources/images/icons/preview.png",tooltip:_("view_document"),handler:a.onDocumentView,getClass:function(){return"x-grid-icon-padding"}}]},{header:_("type"),flex:1,dataIndex:"docType"}],a.callParent(arguments)},onDocumentView:function(a,b){var c=a.getStore().getAt(b);app.onDocumentView(c.data.id)},loadDocs:function(a){this.store.load({params:{eid:a}})}}),Ext.define("App.store.patient.PatientImmunization",{extend:"Ext.data.Store",model:"App.model.patient.PatientImmunization"}),Ext.define("App.store.patient.Allergies",{extend:"Ext.data.Store",model:"App.model.patient.Allergies"}),Ext.define("App.store.patient.PatientActiveProblems",{extend:"Ext.data.Store",requires:["App.model.patient.PatientActiveProblem"],model:"App.model.patient.PatientActiveProblem"}),Ext.define("App.store.patient.Medications",{extend:"Ext.data.Store",model:"App.model.patient.Medications"}),Ext.define("App.view.patient.ItemsToReview",{extend:"Ext.panel.Panel",alias:"widget.itemstoreview",layout:{type:"vbox",align:"stretch"},frame:!0,bodyPadding:5,bodyBorder:!0,bodyStyle:"background-color:white",showRating:!0,autoScroll:!0,itemId:"ItemsToReviewPanel",items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},defaults:{xtype:"grid",margin:"0 0 5 0"},items:[{title:_("immunizations"),frame:!0,height:180,flex:1,store:Ext.create("App.store.patient.PatientImmunization"),itemId:"ItemsToReviewImmuGrid",margin:"0 5 5 0",columns:[{header:_("immunization"),width:250,dataIndex:"vaccine_name"},{header:_("date"),width:90,xtype:"datecolumn",format:"Y-m-d",dataIndex:"administered_date"},{header:_("notes"),flex:1,dataIndex:"note"}]},{title:_("allergies"),frame:!0,height:180,flex:1,store:Ext.create("App.store.patient.Allergies"),itemId:"ItemsToReviewAllergiesGrid",columns:[{header:_("type"),width:100,dataIndex:"allergy_type"},{header:_("name"),width:100,dataIndex:"allergy"},{header:_("severity"),flex:1,dataIndex:"severity"}]}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},defaults:{xtype:"grid",margin:"0 0 5 0"},items:[{title:_("active_problems"),frame:!0,height:180,flex:1,margin:"0 5 5 0",store:Ext.create("App.store.patient.PatientActiveProblems"),itemId:"ItemsToReviewActiveProblemsGrid",columns:[{header:_("problem"),width:250,dataIndex:"code_text"},{xtype:"datecolumn",header:_("begin_date"),width:90,format:"Y-m-d",dataIndex:"begin_date"},{xtype:"datecolumn",header:_("end_date"),flex:1,format:"Y-m-d",dataIndex:"end_date"}]},{title:_("medications"),frame:!0,height:180,flex:1,store:Ext.create("App.store.patient.Medications"),itemId:"ItemsToReviewMedicationsGrid",columns:[{header:_("medication"),width:250,dataIndex:"STR"},{xtype:"datecolumn",header:_("begin_date"),width:90,format:"Y-m-d",dataIndex:"begin_date"},{xtype:"datecolumn",header:_("end_date"),flex:1,format:"Y-m-d",dataIndex:"end_date"}]}]},{xtype:"fieldset",title:_("social_history"),items:[{fieldLabel:_("smoking_status"),xtype:"mitos.smokingstatuscombo",itemId:"reviewsmokingstatuscombo",allowBlank:!1,labelWidth:100,width:325}]}],buttons:[{text:_("review_all"),name:"review",itemId:"encounterRecordAdd"}]}),Ext.define("App.view.patient.CheckoutAlertsView",{extend:"Ext.view.View",alias:"widget.checkoutalertsview",trackOver:!0,cls:"checkoutalert",itemSelector:"div.alert-div",loadMask:!0,singleSelect:!0,emptyText:'<span style="color: #616161; font-size: 12px;">Sweet! '+_("no_alerts_found")+".</span>",initComponent:function(){var a=this;a.tpl='<table><tpl for="."><tr class="alert-div><div class="alert-div"><img class="alert-img" src="{icon}" /><div class="alert-msg">{alert}</div></div></tr></tpl></table>',a.callParent(arguments)}}),Ext.define("App.view.patient.NewPatient",{extend:"App.ux.RenderPanel",id:"panelNewPatient",pageTitle:_("patient_entry_form"),initComponent:function(){var a=this;a.pageBody=[a.newPatientPanel=Ext.create("App.view.patient.Patient")],a.callParent(arguments)},confirmationWin:function(a){Ext.Msg.show({title:_("please_confirm")+"...",msg:_("do_you_want_to_create_a_new_patient"),icon:Ext.MessageBox.QUESTION,buttons:Ext.Msg.YESNO,scope:this,fn:function(b){a(b)}})},onActive:function(a){var b=this;this.confirmationWin(function(c){"yes"==c?(b.newPatientPanel.loadNew(),app.unsetPatient(null,!0),a(!0)):(app.nav.goBack(),a(!1))})}}),Ext.define("App.view.patient.Vitals",{extend:"Ext.panel.Panel",requires:["Ext.grid.plugin.RowEditing","App.ux.form.fields.DateTime"],alias:"widget.vitalspanel",title:_("vitals"),layout:"border",bodyPadding:5,items:[{xtype:"container",height:100,region:"north",itemId:"vitalsBlocks",layout:{type:"hbox",align:"stretch"},defaults:{xtype:"container",cls:"latest-vitals-items",margin:"0 5 5 5",width:130},items:[{itemId:"bpBlock",margin:"0 5 5 0",html:'<p class="title">'+_("bp")+'</p><p class="value">--/--</p><p class="extra">'+_("systolic")+"/"+_("diastolic")+"</p>"},{itemId:"tempBlock",html:'<p class="title">'+_("temp")+'</p><p class="value">--</p><p class="extra">--</p>'},{itemId:"weighBlock",html:'<p class="title">'+_("weight")+'</p><p class="value">--</p>'},{itemId:"heightBlock",html:'<p class="title">'+_("height")+'</p><p class="value">--</p>'},{itemId:"bmiBlock",html:'<p class="title">'+_("bmi")+'</p><p class="value">--</p><p class="extra">--</p>'},{itemId:"notesBlock",margin:"0 5 5 5",html:'<p class="title">'+_("notes")+'</p><p class="value" style="text-align: left"> -- </p><p class="extra">--</p>',flex:1}]},{xtype:"grid",region:"center",flex:1,columnLines:!0,itemId:"historyGrid",multiSelect:!0,plugins:[{ptype:"rowediting"}],viewConfig:{getRowClass:function(a){return 0==a.data.auth_uid?"unsignedVital":""}},tbar:[{xtype:"button",icon:"resources/images/icons/blueInfo.png",focusCls:"",handler:function(){App.app.getController("InfoButton").doGetInfoByUrl("https://vsearch.nlm.nih.gov/vivisimo/cgi-bin/query-meta?v%3Aproject=medlineplus&query=vitals+signs&x=0&y=0")}},"->",{text:_("vitals"),iconCls:"icoAdd",itemId:"vitalAddBtn",action:"encounterRecordAdd"},"-",{text:_("sign"),icon:"resources/images/icons/pen.png",itemId:"vitalSignBtn",action:"encounterRecordAdd"}]}],initComponent:function(){var a=this,b=[{xtype:"datecolumn",text:_("date"),dataIndex:"date",format:"Y-m-d g:i a",width:180,editor:{xtype:"mitos.datetime",timeFormat:"g:i a"}},{text:_("bp"),columns:[{text:_("systolic"),dataIndex:"bp_systolic",width:65,editor:{xtype:"textfield",vtype:"numeric"}},{text:_("diastolic"),dataIndex:"bp_diastolic",width:65,editor:{xtype:"textfield",vtype:"numeric"}}]}];b.push("metric"!=g("units_of_measurement")?{text:_("temp"),dataIndex:"temp_f",width:70,editor:{xtype:"textfield",itemId:"vitalTempFField",vtype:"numericWithDecimal",enableKeyEvents:!0},renderer:function(a){return 0==a||null==a?"":a+"&deg;F"}}:{text:_("temp"),dataIndex:"temp_c",width:70,editor:{xtype:"textfield",itemId:"vitalTempCField",vtype:"numericWithDecimal",enableKeyEvents:!0},renderer:function(a){return 0==a||null==a?"":a+"&deg;C"}}),b.push({text:_("temp_location"),dataIndex:"temp_location",editor:{xtype:"gaiaehr.combo",list:62}}),"metric"!=g("units_of_measurement")?(b.push({text:_("weight_lbs"),dataIndex:"weight_lbs",width:80,editor:{xtype:"textfield",itemId:"vitalWeightLbsField",vtype:"numericWithSlash",enableKeyEvents:!0},renderer:function(a){return 0==a||null==a?"":a+" lbs/oz"}}),b.push({text:_("height_in"),dataIndex:"height_in",width:70,editor:{xtype:"textfield",itemId:"vitalHeightInField",vtype:"numericWithDecimal",enableKeyEvents:!0},renderer:function(a){return 0==a||null==a?"":a+" in"}})):(b.push({text:_("weight"),dataIndex:"weight_kg",width:80,editor:{xtype:"textfield",itemId:"vitalWeightKgField",vtype:"numericWithDecimal",enableKeyEvents:!0},renderer:function(a){return 0==a||null==a?"":a+" kg"}}),b.push({text:_("height_cm"),dataIndex:"height_cm",width:70,editor:{xtype:"textfield",itemId:"vitalHeightCmField",vtype:"numericWithDecimal",enableKeyEvents:!0},renderer:function(a){return 0==a||null==a?"":a+" cm"}})),b.push({text:_("pulse"),dataIndex:"pulse",width:60,editor:{xtype:"textfield",vtype:"numeric"},renderer:function(a){return 0==a||null==a?"":a}}),b.push({text:_("respiration"),dataIndex:"respiration",editor:{xtype:"textfield",vtype:"numeric"},renderer:function(a){return 0==a||null==a?"":a}}),b.push({text:_("bmi"),dataIndex:"bmi",width:50}),b.push({text:_("other_notes"),dataIndex:"other_notes",flex:1,editor:{xtype:"textfield"}}),b.push({text:_("administer_by"),dataIndex:"administer_by"}),b.push({text:_("authorized_by"),dataIndex:"authorized_by"}),a.items[1].columns=b,a.callParent()}}),Ext.define("App.view.patient.ProgressNote",{extend:"Ext.panel.Panel",alias:"widget.progressnote",bodyPadding:5,autoScroll:!0,loadMask:!1,initComponent:function(){var a=this;a.tpl=new Ext.XTemplate('<div class="progressNote">   <div class="secession general-data">       <div class="title"> '+_("general")+' </div>       <table width="100%">           <tr>               <td>                   <div class="header row">'+_("name")+': {patient_name} </div>                   <div class="header row">'+_("record")+': #{pid} </div>                   <div class="header row">'+_("provider_date")+': {open_by} </div>                   <div class="header row">'+_("onset_date")+': {[values.onset_date || "-"]} </div>                   <div class="header row">'+_("provider")+': {[values.signed_by || "-"]} </div>               </td>               <td>                   <div class="header row">'+_("service_date")+': {service_date} </div>                   <div class="header row">'+_("visit_category")+': {visit_category} </div>                   <div class="header row">'+_("facility")+': {facility} </div>                   <div class="header row">'+_("priority")+': {priority} </div>                   <div class="header row">'+_("signed_on")+': {[values.close_date || "-"]} </div>               </td>           </tr>           <tr>               <td colspan="2">                   <div class="header row" style="white-space: normal;">'+_("chief_complaint")+': {brief_description} </div>               </td>           </tr>       </table>   </div>   <tpl if="reviewofsystems">       <div class="secession">           <div class="title"> '+_("review_of_systems")+' </div>           <tpl for="reviewofsystems">               <tpl if="this.isNotNull(value)">                   <div class="pblock"> {name}: {value} </div>               </tpl>           </tpl>       </div>   </tpl>   <tpl if="reviewofsystemschecks">       <div class="secession">           <div class="title"> '+_("review_of_system_checks")+' </div>           <tpl for="reviewofsystemschecks">               <tpl if="this.isNotNull(value)">                   <div class="pblock"> {name}: {value} </div>               </tpl>           </tpl>       </div>   </tpl>   <tpl for="soap">       <div class="secession">           <div class="title"> '+_("soap")+" </div>           <p><span>"+_("subjective")+':</span> {[this.doHtmlDecode(values.subjective) || "-"]} </p>           <p><span>'+_("objective")+':</span> {[this.doHtmlDecode(values.objective) || "-"]}</p>           <p><span>'+_("assessment")+':</span> {[this.doHtmlDecode(values.assessment) || "-"]}</p>           <p><span>'+_("plan")+':</span> {[this.doHtmlDecode(values.plan) || "-"]}</p>       </div>   </tpl>   <tpl for="speechdictation">       <div class="secession">           <div class="title"> '+_("speech_dictation")+" </div>           <p><span>"+_("dictation")+":</span> {dictation}</p>           <p><span>"+_("additional_notes")+':</span> {additional_notes}</p>       </div>   </tpl>   <tpl if="vitals">       <div class="secession vitals-data">           <div class="title"> '+_("vitals")+' </div>           <div style="overflow-x: auto">               <table>                   <tr>                       <td>                          <table class="x-grid-table x-grid-table-vitals vitals-column">                              <tbody>                                  <tr class="x-grid-row">                                       <td class="x-grid-cell x-grid-table-vitals-date">                                           <div class="x-grid-cell-inner ">'+i18n["date_&_time"]+'</div>                                       </td>                                   </tr>                       <tpl if="!this.isMetric()">                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("weight_lbs")+"</div>                                       </td>                                   </tr>                       <tpl else>",'                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("weight_kg")+"</div>                                       </td>                                   </tr>                       </tpl>",'                       <tpl if="!this.isMetric()">                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("height_in")+"</div>                                       </td>                                   </tr>                       <tpl else>",'                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("height_cm")+"</div>                                       </td>                                   </tr>                       </tpl>",'                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("bp_systolic")+'</div>                                       </td>                                   </tr>                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("bp_diastolic")+'</div>                                       </td>                                   </tr>                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("pulse")+'</div>                                       </td>                                   </tr>                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("respiration")+'</div>                                       </td>                                   </tr>                       <tpl if="!this.isMetric()">                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("temp_f")+"</div>                                       </td>                                   </tr>                       <tpl else>",'                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("temp_c")+"</div>                                       </td>                                   </tr>                       </tpl>",'                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("temp_location")+'</div>                                       </td>                                   </tr>                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("oxygen_saturation")+'%</div>                                       </td>                                   </tr>                       <tpl if="!this.isMetric()">                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("head_circumference_in")+"</div>                                       </td>                                   </tr>                       <tpl else>",'                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("head_circumference_cm")+"</div>                                       </td>                                   </tr>                       </tpl>",'                       <tpl if="!this.isMetric()">                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("waist_circumference_in")+"</div>                                       </td>                                   </tr>                       <tpl else>",'                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("waist_circumference_cm")+"</div>                                       </td>                                   </tr>                       </tpl>",'                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("bmi")+'</div>                                       </td>                                   </tr>                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("bmi_status")+'</div>                                       </td>                                   </tr>                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("other_notes")+'</div>                                       </td>                                   </tr>                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+_("administer")+'<div>                                       </td>                                   </tr>                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">'+i18n["Sign by"]+'<div>                                       </td>                                   </tr>                               </tbody>                           </table>                       </td>                       <tpl for="vitals">                           <td>                           <table class="x-grid-table x-grid-table-vitals vitals-column">                               <tbody>                                   <tr class="x-grid-row">                                       <td class="x-grid-cell x-grid-table-vitals-date">                                           <div class="x-grid-cell-inner ">{date}</div>                                       </td>                                   </tr>                       <tpl if="!this.isMetric()">                                   <tr class="x-grid-row first">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.weight_lbs)]}</div>                                       </td>                                   </tr>                       <tpl else>','                                   <tr class="x-grid-row first">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.weight_kg)]}<div>                                       </td>                                   </tr>                       </tpl>','                       <tpl if="!this.isMetric()">                                   <tr class="x-grid-row x-grid-row-alt">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.height_in)]}<div>                                       </td>                                   </tr>                       <tpl else>','                                   <tr class="x-grid-row x-grid-row-alt">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.height_cm)]}<div>                                       </td>                                   </tr>                       </tpl>','                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.bp_systolic)]}<div>                                       </td>                                   </tr>                                   <tr class="x-grid-row x-grid-row-alt">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.bp_diastolic)]}<div>                                       </td>                                   </tr>                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.pulse)]}<div>                                       </td>                                   </tr>                                   <tr class="x-grid-row x-grid-row-alt">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.respiration)]}<div>                                       </td>                                   </tr>                       <tpl if="!this.isMetric()">                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.temp_f)]}<div>                                       </td>                                   </tr>                       <tpl else>','                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.temp_c)]}<div>                                       </td>                                   </tr>                       </tpl>','                                   <tr class="x-grid-row x-grid-row-alt">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.temp_location.toUpperCase())]}<div>                                       </td>                                   </tr>                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.oxygen_saturation)]}<div>                                       </td>                                   </tr>                       <tpl if="!this.isMetric()">                                   <tr class="x-grid-row x-grid-row-alt">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.head_circumference_in)]}<div>                                       </td>                                   </tr>                       <tpl else>','                                   <tr class="x-grid-row x-grid-row-alt">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.head_circumference_cm)]}<div>                                       </td>                                   </tr>                       </tpl>','                       <tpl if="!this.isMetric()">                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.waist_circumference_in)]}<div>                                       </td>                                   </tr>                       <tpl else>','                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.waist_circumference_cm)]}<div>                                       </td>                                   </tr>                       </tpl>','                                   <tr class="x-grid-row x-grid-row-alt">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.bmi)]}<div>                                       </td>                                   </tr>                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.bmi_status)]}<div>                                       </td>                                   </tr>                                   <tr class="x-grid-row x-grid-row-alt">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[this.getVitalsValue(values.other_notes)]}<div>                                       </td>                                   </tr>                                   <tr class="x-grid-row">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[(values.administer_by == null || values.administer_by == " ") ? "-" : values.administer_by]}<div>                                       </td>                                   </tr>                                   <tr class="x-grid-row  x-grid-row-alt">                                       <td class="x-grid-cell">                                           <div class="x-grid-cell-inner ">{[(values.authorized_by == null || values.authorized_by == " ") ? "-" : values.authorized_by]}<div>                                       </td>                                   </tr>                               </tbody>                           </table>                           </td>                       </tpl>                   </tr>               </table>           </div>       </div>   </tpl></div>',{isNotNull:function(a){return"null"!=a&&null!=a
},isNotEmpty:function(){},getVitalsValue:function(a){return 0==a||null==a?"-":a},isMetric:function(){return"metric"==g("units_of_measurement")},doHtmlDecode:function(a){return Ext.String.htmlDecode(a)}}),a.callParent(arguments)}}),Ext.define("App.store.patient.PatientsOrders",{extend:"Ext.data.Store",model:"App.model.patient.PatientsOrders",remoteSort:!1,autoLoad:!1}),Ext.define("App.view.patient.Results",{extend:"Ext.panel.Panel",requires:["Ext.grid.plugin.CellEditing","Ext.grid.plugin.RowEditing","App.store.patient.PatientsOrders","App.ux.LiveLabsSearch"],title:_("results"),xtype:"patientresultspanel",layout:"border",items:[{xtype:"grid",action:"orders",region:"center",split:!0,columnLines:!0,store:Ext.create("App.store.patient.PatientsOrders",{remoteFilter:!0}),plugins:[{ptype:"rowediting"}],columns:[{xtype:"actioncolumn",width:25,items:[{icon:"resources/images/icons/blueInfo.png",tooltip:"Get Info",handler:function(a,b,c,d,e,f){App.app.getController("InfoButton").doGetInfo(f.data.code,f.data.code_type,f.data.description)}}]},{header:_("orders"),dataIndex:"description",menuDisabled:!0,resizable:!1,flex:1,editor:{xtype:"labslivetsearch",itemId:"rxLabOrderLabsLiveSearch",allowBlank:!1}},{header:_("status"),dataIndex:"status",menuDisabled:!0,resizable:!1,width:60}],bbar:["->",{text:_("new_order"),itemId:"OrderResultNewOrderBtn",iconCls:"icoAdd"}]},{xtype:"form",title:_("order_result"),region:"south",height:400,frame:!0,split:!0,layout:{type:"border"},tools:[{xtype:"button",text:_("view_document"),icon:"resources/images/icons/icoView.png",action:"orderDocumentViewBtn"}],items:[{xtype:"panel",title:_("report_info"),region:"west",collapsible:!0,autoScroll:!0,width:260,bodyPadding:5,split:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:_("report_info"),defaults:{xtype:"textfield",anchor:"100%"},layout:"anchor",items:[{xtype:"datefield",fieldLabel:_("report_date"),name:"result_date",format:"Y-m-d",allowBlank:!1},{fieldLabel:_("report_number"),name:"lab_order_id",allowBlank:!1},{fieldLabel:_("status"),name:"result_status"},{fieldLabel:_("observation_date"),name:"observation_date"},{fieldLabel:_("specimen"),name:"specimen_text"},{xtype:"textareafield",fieldLabel:_("specimen_notes"),name:"specimen_notes",height:50},{xtype:"filefield",labelAlign:"top",fieldLabel:_("upload_document"),action:"orderresultuploadfield",submitValue:!1}]},{xtype:"fieldset",title:_("laboratory_info"),defaults:{xtype:"textfield",anchor:"100%"},layout:"anchor",margin:0,collapsible:!0,collapsed:!0,items:[{fieldLabel:_("name"),name:"lab_name"},{xtype:"textareafield",fieldLabel:_("address"),name:"lab_address",height:50}]}]},{xtype:"grid",action:"observations",flex:1,region:"center",split:!0,columnLines:!0,plugins:[{ptype:"cellediting",clicksToEdit:1}],columns:[{xtype:"actioncolumn",width:25,items:[{icon:"resources/images/icons/blueInfo.png",tooltip:"Get Info",handler:function(a,b,c,d,e,f){App.app.getController("InfoButton").doGetInfo(f.data.code,f.data.code_type,f.data.code_text)}}]},{text:_("name"),menuDisabled:!0,dataIndex:"code_text",width:350},{text:_("value"),menuDisabled:!0,dataIndex:"value",width:180,editor:{xtype:"textfield"},renderer:function(a,b,c){var d=["LL","HH",">","<","AA","VS"],e=["L","H","A","W","MS"],f=["B","S","U","D","R","I"],g=["N"];return Ext.Array.contains(g,c.data.abnormal_flag)?'<span style="color:green;">'+a+"</span>":Ext.Array.contains(f,c.data.abnormal_flag)?'<span style="color:blue;">'+a+"</span>":Ext.Array.contains(e,c.data.abnormal_flag)?'<span style="color:orange;">'+a+"</span>":Ext.Array.contains(d,c.data.abnormal_flag)?'<span style="color:red;">'+a+"</span>":a}},{text:_("units"),menuDisabled:!0,dataIndex:"units",width:75,editor:{xtype:"textfield"}},{text:_("abnormal"),menuDisabled:!0,dataIndex:"abnormal_flag",width:75,editor:{xtype:"textfield"},renderer:function(a){var b=["LL","HH",">","<","AA","VS"],c=["L","H","A","W","MS"],d=["B","S","U","D","R","I"],e=["N"];return Ext.Array.contains(e,a)?'<span style="color:green;">'+a+"</span>":Ext.Array.contains(d,a)?'<span style="color:blue;">'+a+"</span>":Ext.Array.contains(c,a)?'<span style="color:orange;">'+a+"</span>":Ext.Array.contains(b,a)?'<span style="color:red;">'+a+"</span>":a}},{text:_("range"),menuDisabled:!0,dataIndex:"reference_rage",width:150,editor:{xtype:"textfield"}},{text:_("notes"),menuDisabled:!0,dataIndex:"notes",width:300,editor:{xtype:"textfield"}},{text:_("status"),menuDisabled:!0,dataIndex:"observation_result_status",width:60,editor:{xtype:"textfield"}}]}],buttons:[{text:_("reset"),action:"orderResultResetBtn"},{text:_("save"),action:"orderResultSaveBtn"}]}]}),Ext.define("App.store.patient.PatientSocialHistory",{extend:"Ext.data.Store",requires:["App.model.patient.PatientSocialHistory"],model:"App.model.patient.PatientSocialHistory",groupField:"category_code_text"}),Ext.define("App.view.patient.SocialHistory",{extend:"Ext.grid.Panel",requires:["Ext.grid.plugin.RowEditing","Ext.grid.feature.Grouping","App.store.patient.PatientSocialHistory","App.ux.combo.Combo"],xtype:"patientsocialhistorypanel",itemId:"PatientSocialHistoryGrid",columnLines:!0,store:Ext.create("App.store.patient.PatientSocialHistory",{remoteFilter:!0}),plugins:[{ptype:"rowediting"}],features:[{ftype:"grouping",groupHeaderTpl:_("type")+": {name}"}],columns:[{text:_("type"),dataIndex:"category_code_text",width:250},{text:_("observation"),dataIndex:"observation",flex:1,itemId:"socialhistorypanelobservationcolumn",editor:{xtype:"textfield",allowBlank:!1}},{text:_("note"),dataIndex:"note",flex:1,editor:{xtype:"textfield"}},{xtype:"datecolumn",text:_("start"),dataIndex:"start_date",format:"Y-m-d",width:120,editor:{xtype:"datefield",format:"Y-m-d",allowBlank:!1}},{xtype:"datecolumn",text:_("end"),dataIndex:"end_date",format:"Y-m-d",width:120,editor:{xtype:"datefield",format:"Y-m-d"}}],tbar:[{xtype:"tbtext",text:_("social_history"),width:100},{xtype:"gaiaehr.combo",width:250,list:101,allowBlank:!1,action:"socialHistoryTypeCombo"},{iconCls:"icoAdd",disabled:!0,itemId:"encounterRecordAdd",action:"socialHistoryAddBtn"}]}),Ext.define("App.view.patient.Visits",{extend:"App.ux.RenderPanel",pageTitle:_("visits_history"),uses:["Ext.grid.Panel","Ext.ux.PreviewPlugin"],showRating:!0,initComponent:function(){var a=this;a.store=Ext.create("App.store.patient.Encounters",{remoteFilter:!0}),a.historyGrid=Ext.create("Ext.grid.Panel",{title:_("encounter_history"),store:a.store,columns:[{header:"eid",sortable:!1,dataIndex:"eid",hidden:!0},{width:150,header:_("date"),sortable:!0,dataIndex:"service_date",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{flex:1,header:_("reason"),sortable:!0,dataIndex:"brief_description"},{width:180,header:_("provider"),sortable:!1,dataIndex:"provider"},{width:120,header:_("facility"),sortable:!1,dataIndex:"facility"},{width:120,header:_("billing_facility"),sortable:!0,dataIndex:"billing_facility"},{width:45,header:_("close")+"?",sortable:!0,dataIndex:"close_date",renderer:a.openBool}],viewConfig:{itemId:"view",plugins:[{pluginId:"preview",ptype:"preview",bodyField:"brief_description",previewExpanded:!1}],listeners:{scope:a,itemclick:a.gridItemClick,itemdblclick:a.gridItemDblClick}},tbar:Ext.create("Ext.PagingToolbar",{store:a.store,displayInfo:!0,emptyMsg:"No Encounters Found",plugins:Ext.create("Ext.ux.SlidingPager",{}),items:[{iconCls:"",text:_("show_details"),enableToggle:!0,scope:a,toggleHandler:a.onDetailToggle},"-",{text:_("new_encounter"),scope:a,handler:a.createNewEncounter}]})}),a.pageBody=[a.historyGrid],a.callParent(arguments)},openBool:function(a){return null!==a?'<img src="resources/images/icons/yes.gif" />':'<img src="resources/images/icons/no.gif" />'},onDetailToggle:function(a,b){this.historyGrid.getComponent("view").getPlugin("preview").toggleExpanded(b)},gridItemClick:function(a){a.getPlugin("preview").toggleRowExpanded()},gridItemDblClick:function(a,b){app.openEncounter(b.data.eid)},createNewEncounter:function(){app.createNewEncounter()},onActive:function(a){this.checkIfCurrPatient()?(this.updateTitle(app.patient.name+" ("+_("encounters")+")"),this.store.clearFilter(!0),this.store.filter([{property:"pid",value:app.patient.pid}]),a(!0)):(a(!1),this.currPatientError())}}),Ext.define("App.view.patient.VisitCheckout",{extend:"App.ux.RenderPanel",id:"panelVisitCheckout",pageTitle:"Visit Checkout",showRating:!0,initComponent:function(){var a=this;a.VisitVoucherStore=Ext.create("App.store.account.Voucher",{remoteFilter:!0}),a.pageBody=Ext.create("Ext.panel.Panel",{itemId:"visitpayment",defaults:{bodyStyle:"padding:15px",bodyBorder:!0,labelWidth:110},layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1,layout:{type:"hbox",align:"stretch"},items:[a.invoicePanel=Ext.widget("panel",{title:_("services_charges"),border:!0,frame:!0,bodyBorder:!0,bodyStyle:"background-color:#fff",margin:"5 5 0 5",flex:2,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1,autoScroll:!0,items:[a.invoiceGrid=Ext.widget("grid",{frame:!1,border:!1,enableColumnMove:!1,enableColumnHide:!1,sortableColumns:!1,columns:[{xtype:"actioncolumn",width:20,items:[{icon:"resources/images/icons/delete.png",tooltip:_("remove"),scope:a,handler:a.onRemoveCharge}]},{header:_("item"),dataIndex:"name",flex:1,editor:{xtype:"livecptsearch",allowBlank:!1}},{header:_("price"),width:80,dataIndex:"amountOriginal",align:"right",renderer:a.currencyRenderer},{header:_("charge"),width:80,dataIndex:"amount",align:"right",editor:{xtype:"textfield",allowBlank:!1},renderer:a.currencyRenderer}],plugins:[Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:2})]}),{xtype:"container",border:!1,padding:1,height:200,items:[{xtype:"container",style:"float:right",layout:"anchor",width:150,items:[a.total=Ext.widget("mitos.currency",{fieldLabel:_("total"),labelWidth:70,anchor:"100%",labelAlign:"right",cls:"charges_total",margin:"2 0 1 0"}),a.paid=Ext.widget("mitos.currency",{fieldLabel:_("paid"),labelWidth:70,anchor:"100%",labelAlign:"right",margin:"1 0"}),a.balance=Ext.widget("mitos.currency",{fieldLabel:_("balance"),labelWidth:70,anchor:"100%",labelAlign:"right",cls:"charges_balance",margin:"2 0 1 0"})]}]}]},{xtype:"form",height:135,border:!1,items:[{xtype:"fieldset",layout:"column",margin:"5 10",title:_("payment"),items:[a.billingNotes=Ext.widget("textarea",{xtype:"textarea",anchor:"100%",name:"notes",columnWidth:.5,height:85,emptyText:_("additional_billing_notes")}),{xtype:"container",layout:"anchor",columnWidth:.5,margin:"0 0 0 15",items:[a.method=Ext.widget("mitos.paymentmethodcombo",{fieldLabel:_("payment_method"),labelWidth:100,name:"method",anchor:"100%"}),a.ref=Ext.widget("textfield",{fieldLabel:_("reference_#"),labelWidth:100,name:"reference",anchor:"100%"}),a.amount=Ext.widget("mitos.currency",{fieldLabel:_("amount"),xtype:"mitos.currency",labelWidth:100,name:"amount",anchor:"100%"})]}]}]}],buttons:["->",{text:_("save_and_print"),scope:a,action:"saveprint",handler:a.onInvoiceSave},{text:_("save"),scope:a,action:"save",handler:a.onInvoiceSave}],listeners:{scope:a,render:a.onInvoicePanelRender}}),a.docsGrid=Ext.widget("documentsimplegrid",{title:_("documents"),frame:!0,margin:"5 5 0 0",flex:1})]},{xtype:"container",layout:"hbox",defaults:{height:170},items:[a.notesReminders=Ext.widget("form",{title:_("notes_and_reminders"),frame:!0,flex:2,action:"formnotes",bodyPadding:10,margin:"5 5 0 5",bodyBorder:!0,bodyStyle:"background-color:#fff",defaults:{anchor:"100%"},items:[{xtype:"displayfield",fieldLabel:_("message"),name:"message"},{xtype:"textfield",fieldLabel:_("note"),name:"new_note",action:"notes"},{xtype:"textfield",grow:!0,fieldLabel:_("reminders"),name:"new_reminder",action:"notes"}],buttons:[{text:_("reset"),scope:a,handler:a.resetNotes},"-",{text:_("save"),scope:a,handler:a.onCheckoutSaveNotes}]}),a.followUp=Ext.widget("form",{title:_("followup_information"),frame:!0,flex:1,margin:"5 5 5 0",bodyPadding:10,bodyBorder:!0,bodyStyle:"background-color:#fff",defaults:{labelWidth:110,anchor:"100%"},items:[{fieldLabel:_("time"),xtype:"textfield",name:"followup_time"},{fieldLabel:_("facility"),xtype:"activefacilitiescombo",name:"followup_facility"}],buttons:[{text:_("schedule_appointment"),scope:a,handler:a.scheduleAppointment}]})]}]}),a.callParent(arguments)},onInvoicePanelRender:function(a){var b=this;a.getHeader().add({xtype:"button",text:_("service"),iconCls:"icoAdd",margin:"0 5 0 0",scope:b,handler:b.onNewService},{xtype:"button",text:_("copay"),iconCls:"icoAdd",margin:"0 5 0 0",scope:b,handler:b.onAddCoPay})},onNewService:function(){this.invoiceGrid.getStore().add({code_text:" ",charge:"20.00",ins:!1})},onAddCoPay:function(){this.invoiceGrid.getStore().add({code_text:"Co-Pay",charge:"00.00",ins:!1})},onAddService:function(){this.query('[action="totalField"]')[0]},onRemoveCharge:function(a,b){var c=this,d=a.getStore(),e=d.getAt(b);d.remove(e),c.updateTotalBalance()},onInvoiceSave:function(a){for(var b=this,c={},d=("saveprint"==a.action,b.VisitVoucherStore.data.items),e=[],f=0;f<d.length;f++)e.push(d[f].data);c.pid=b.pid,c.eid=b.eid,c.lines=e,c.payment={amount:b.amount.getValue(),method:b.method.getValue(),notes:b.billingNotes.getValue(),ref:b.ref.getValue()},AccBilling.setVisitVoucher(c,function(){})},cancelPrint:function(a){var b=a.up("window");b.close()},resetReceiptForm:function(){for(var a=this.query('[action="receipt"]'),b=0;b<a.length;b++)a[b].reset()},resetNotes:function(){for(var a=this.query('[action="notes"]'),b=0;b<a.length;b++)a[b].reset()},onAddPaymentClick:function(){app.onPaymentEntryWindow()},currencyRenderer:function(a){return'<span style="float:right; padding-right:17px">'+app.currency+" "+a+"</span>"},onCheckoutSaveNotes:function(){var a,b,c=this,d=c.query('form[action="formnotes"]');a=d[0].getForm(),b=a.getFieldValues(),b.date=Ext.Date.format(new Date,"Y-m-d H:i:s"),b.pid=app.patient.pid,b.eid=c.eid,b.uid=app.user.id,b.type="administrative",a.isValid()&&Patient.addPatientNoteAndReminder(b,function(a,b){b.result.success?app.msg("Sweet!",_("note_and_reminder")):app.msg("Oops!",_("note_entry_error"))})},scheduleAppointment:function(a){var b,c=a.up("form").getForm(),d=c.findField("followup_time").getValue(),e=c.findField("followup_facility").getValue(),f=Ext.getCmp("app-calendar");switch(d){case"1 Day":b=Ext.Date.add(new Date,Ext.Date.DAY,1);break;case"2 Days":b=Ext.Date.add(new Date,Ext.Date.DAY,2);break;case"3 Days":b=Ext.Date.add(new Date,Ext.Date.DAY,3);break;case"1 Week":b=Ext.Date.add(new Date,Ext.Date.DAY,7);break;case"2 Weeks":b=Ext.Date.add(new Date,Ext.Date.DAY,14);break;case"3 Weeks":b=Ext.Date.add(new Date,Ext.Date.DAY,21);break;case"1 Month":b=Ext.Date.add(new Date,Ext.Date.MONTH,1);break;case"2 Months":b=Ext.Date.add(new Date,Ext.Date.MONTH,2);break;case"3 Months":b=Ext.Date.add(new Date,Ext.Date.MONTH,3);break;case"4 Months":b=Ext.Date.add(new Date,Ext.Date.MONTH,4);break;case"5 Months":b=Ext.Date.add(new Date,Ext.Date.MONTH,5);break;case"6 Months":b=Ext.Date.add(new Date,Ext.Date.MONTH,6);break;case"1 Year":b=Ext.Date.add(new Date,Ext.Date.YEAR,1);break;case"2 Year":b=Ext.Date.add(new Date,Ext.Date.YEAR,2);break;default:b=new Date}app.navigateTo("panelCalendar"),f.facility=e,f.setStartDate(b)},getVisitOtherInfo:function(){var a,b=this,c=[];a=b.query("form"),Encounter.getEncounterFollowUpInfoByEid(b.eid,function(b,c){a[1].getForm().setValues(c.result)}),Encounter.getEncounterMessageByEid(b.eid,function(b,c){a[0].getForm().setValues(c.result)});for(var d=0;d<a.length;d++)c.push(a[d].getForm().getFields().items)},calculatePercent:function(a,b){return 100*(a/b)},setVoucher:function(){var a=this;a.docsGrid.loadDocs(a.eid),a.getVisitOtherInfo(),a.VisitVoucherStore.load({filters:[{property:"encounterId",value:a.eid},{property:"type",value:"visit"}],callback:function(b){var c=b[0];c?c.voucherlines().load({callback:function(){say("hello")}}):AccVoucher.getVisitCheckOutCharges({pid:a.pid,eid:a.eid},function(b,c){var d=c.result;if(d.length>0){var e=a.VisitVoucherStore.add({encounterId:a.eid,date:new Date,type:"visit"}),f=e[0].voucherlines();a.invoiceGrid.reconfigure(f);for(var g=0;g<d.length;g++)f.add(d[g]);a.paid.setValue(0),a.updateTotalBalance()}})}})},updateTotalBalance:function(){for(var me=this,amount=me.amount.getValue(),paid=me.paid.getValue(),records=me.invoiceGrid.getStore().data.items,form=me.invoicePanel.down("form"),total=0,balance,i=0;i<records.length;i++)total=eval(total)+eval(records[i].data.amount);say(total),me.total.setValue(total),balance=total-paid,me.balance.setValue(balance),me.setPaid(0==balance&&records.length>0)},setPaid:function(a){var b=this.invoicePanel.down("form");a?(b.addBodyCls("paid"),b.down("fieldset").setVisible(!1)):(b.removeBodyCls("paid"),b.down("fieldset").setVisible(!0))},setVisitPanel:function(){this.pid=app.patient.pid,this.eid=app.patient.eid,this.uid=app.user.id,this.updateTitle(app.patient.name+" - #"+app.patient.pid+" ("+_("visit_checkout")+")"),this.setVoucher()},onActive:function(a){var b=this;app.patient.pid&&app.patient.eid?(b.setVisitPanel(),a(!0)):(a(!1),b.currPatientError())}}),Ext.define("App.view.fees.Billing",{extend:"App.ux.RenderPanel",id:"panelBilling",pageTitle:_("billing"),uses:["Ext.grid.Panel"],pageLayout:"card",initComponent:function(){var a=this;a.paymentstatus=1,a.patient=null,a.pastDue=null,a.dateRange={start:null,limit:null},a.patientListStore=Ext.create("App.store.fees.Billing"),a.encountersGrid=Ext.create("Ext.grid.Panel",{store:a.patientListStore,selModel:Ext.create("Ext.selection.CheckboxModel",{listeners:{scope:a,selectionchange:a.onSelectionChanged}}),viewConfig:{stripeRows:!0},columns:[{header:_("service_date"),dataIndex:"service_date",width:200},{header:_("patient"),dataIndex:"patientName",width:200},{header:_("primary_provider"),dataIndex:"primaryProvider",width:200},{header:_("encounter_provider"),dataIndex:"encounterProvider",flex:1},{header:_("insurance"),dataIndex:"insurance",width:200},{header:_("billing_stage"),dataIndex:"billing_stage",renderer:a.stage,width:135}],tbar:[{xtype:"fieldcontainer",itemId:"fieldContainerPatientSearch",items:[{xtype:"displayfield",fieldLabel:_("patient_search")},{xtype:"patienlivetsearch",itemId:"patienlivetsearch",width:235,margin:"0 5 0 0"}]},{xtype:"fieldcontainer",itemId:"fieldContainerDateRange",items:[{xtype:"datefield",itemId:"datefrom",fieldLabel:_("from"),labelWidth:35,width:150,format:globals.date_display_format},{xtype:"datefield",itemId:"dateto",fieldLabel:_("to"),labelWidth:35,padding:"0 5 0 0",width:150,format:globals.date_display_format}]},{xtype:"fieldcontainer",itemId:"fieldContainerInsurance",items:[{xtype:"mitos.providerscombo",itemId:"provider",labelWidth:60,typeAhead:!0,padding:"0 5 0 5",fieldLabel:_("provider"),defaultValue:"All"},{xtype:"mitos.insurancepayertypecombo",itemId:"insurance",labelWidth:60,padding:"0 5 0 5",fieldLabel:_("insurance"),defaultValue:"All"}]},"-",{xtype:"fieldcontainer",itemId:"fieldContainerSearch",layout:"vbox",items:[{xtype:"button",width:80,margin:"0 0 3 0",text:_("search"),listeners:{scope:a,click:a.ReloadGrid}}]},"-",{xtype:"fieldcontainer",itemId:"fieldContainerGenerate1500",layout:"vbox",items:[{xtype:"button",width:170,margin:"0 0 3 0",text:_("generate_cms1500_pdf")},{xtype:"button",width:170,margin:"0 0 3 0",text:_("generate_cms1500_text")}]},"-",{xtype:"fieldcontainer",itemId:"fieldContainerGenerateANSI",layout:"vbox",items:[{xtype:"button",text:_("generate_x12")}]},"->",{xtype:"tbtext",text:_("past_due")+":"},{text:_("30+"),enableToggle:!0,action:30,toggleGroup:"pastduedates",enableKeyEvents:!0,scale:"large",listeners:{scope:a,click:a.onBtnClicked}},{text:_("60+"),enableToggle:!0,action:60,scale:"large",toggleGroup:"pastduedates",listeners:{scope:a,click:a.onBtnClicked}},{text:_("120+"),enableToggle:!0,action:120,scale:"large",toggleGroup:"pastduedates",listeners:{scope:a,click:a.onBtnClicked}},{text:_("180+"),enableToggle:!0,action:180,scale:"large",toggleGroup:"pastduedates",listeners:{scope:a,click:a.onBtnClicked}}],listeners:{scope:a,itemdblclick:a.rowDblClicked}}),a.encounterBillingDetails=Ext.create("Ext.panel.Panel",{defaultTitle:_("encounter_billing_details"),title:_("encounter_billing_details"),layout:"border",bodyStyle:"background-color:#fff",items:[Ext.create("Ext.container.Container",{region:"center",layout:"border",style:"background-color:#fff",items:[a.icdForm=Ext.create("Ext.form.Panel",{region:"north",border:!1,items:[{xtype:"fieldset",title:_("encounter_general_info"),margin:"5 5 0 5",items:[{xtype:"fieldcontainer",layout:{type:"hbox"},defaults:{margin:"0 10"},hideLabel:!0,items:[{xtype:"datefield",name:"service_date",fieldLabel:_("service_date"),labelAlign:"right",labelWidth:80,format:globals.date_display_format},{xtype:"activeinsurancescombo",name:"insurance",fieldLabel:_("insurance"),labelAlign:"right"},{xtype:"textfield",name:"facility",fieldLabel:_("facility"),labelAlign:"right",labelWidth:60,flex:1}]},{xtype:"fieldcontainer",layout:{type:"hbox"},defaults:{margin:"0 10"},hideLabel:!0,items:[{xtype:"datefield",name:"hosp_date",fieldLabel:_("hosp_date"),labelAlign:"right",labelWidth:80,format:globals.date_display_format},{xtype:"activeinsurancescombo",name:"sec_insurance",fieldLabel:_("sec_insurance"),labelAlign:"right"},{xtype:"mitos.providerscombo",name:"provider",fieldLabel:_("provider"),labelAlign:"right",labelWidth:60,flex:1}]},{xtype:"fieldcontainer",layout:{type:"hbox"},defaults:{margin:"0 10"},hideLabel:!0,items:[{xtype:"mitos.authorizationscombo",name:"authorization",fieldLabel:_("authorization"),labelAlign:"right",labelWidth:80},{xtype:"textfield",name:"sec_authorization",fieldLabel:_("sec_authorization"),labelAlign:"right"},{xtype:"textfield",name:"referal_by",fieldLabel:_("referal_by"),labelAlign:"right",labelWidth:60,flex:1}]}]},{xtype:"icdsfieldset",title:_("encounter_icd9"),margin:"5 5 0 5"}]}),a.cptPanel=Ext.create("App.view.patient.encounter.CurrentProceduralTerminology",{region:"center"})]}),a.progressNote=Ext.create("App.view.patient.ProgressNote",{title:_("encounter_progress_note"),region:"east",margin:5,bodyStyle:"padding:15px",width:500,autoScroll:!0,collapsible:!0,animCollapse:!0,collapsed:!1})],buttons:[{text:_("encounters"),scope:a,action:"encounters",tooltip:_("back_to_encounter_list"),handler:a.onBtnCancel},"->",{xtype:"tbtext",action:"page",text:"( 1 of 1 )"},{text:_("back"),scope:a,action:"back",iconCls:"icoArrowLeftSmall",tooltip:_("previous_encounter_details"),handler:a.onBtnBack},{text:_("save"),scope:a,action:"save",tooltip:_("save_billing_details"),handler:a.onBtnSave},{text:_("cancel"),scope:a,action:"cancel",tooltip:_("cancel_and_go_back_to_encounter_list"),handler:a.onBtnCancel},{text:_("next"),scope:a,action:"next",iconCls:"icoArrowRightSmall",iconAlign:"right",tooltip:_("next_encounter_details"),handler:a.onBtnNext}]}),a.pageBody=[a.encountersGrid,a.encounterBillingDetails],a.callParent(arguments)},stage:function(a){switch(say(a),a){case 0:return'<img src="resources/images/icons/stage0.png" />';case 1:return'<img src="resources/images/icons/stage1.png" />';case 2:return'<img src="resources/images/icons/stage2.png" />';case 3:return'<img src="resources/images/icons/stage3.png" />';case 4:return'<img src="resources/images/icons/stage4.png" />';default:return a}},onBtnClicked:function(a){var b=this.query('datefield[itemId="datefrom"]'),c=this.query('datefield[itemId="dateto"]');a.pressed?(b[0].reset(),c[0].reset(),this.pastDue=a.action):this.pastDue=0,this.ReloadGrid()},rowDblClicked:function(){this.goToEncounterBillingDetail()},goToEncounterBillingDetail:function(){this.getPageBody().getLayout().setActiveItem(1)},goToEncounterList:function(){this.getPageBody().getLayout().setActiveItem(0)},onSelectionChanged:function(a,b){if(b[0]){var c=this,d=c.encounterBillingDetails.defaultTitle,e=c.encounterBillingDetails.query('button[action="back"]'),f=c.encounterBillingDetails.query('button[action="next"]'),g=c.encounterBillingDetails.query('tbtext[action="page"]'),h=b[0].index;c.pid=b[0].data.pid,c.eid=b[0].data.eid,c.updateProgressNote(c.eid),c.encounterBillingDetails.setTitle(d+" ( "+b[0].data.patientName+" )"),c.getEncounterIcds(),c.cptPanel.encounterCptStoreLoad(c.pid,c.eid,function(){c.cptPanel.setDefaultQRCptCodes()}),g[0].setText("( "+_("page")+" "+(h+1)+" of "+a.store.data.length+" )"),f[0].setDisabled(h==a.store.data.length-1),e[0].setDisabled(0==h)}},onBtnCancel:function(){this.getPageBody().getLayout().setActiveItem(0)},onBtnBack:function(){var a=this.encountersGrid.getSelectionModel(),b=a.getLastSelected().index,c=b-1;a.select(c)},onBtnNext:function(){var a=this.encountersGrid.getSelectionModel(),b=a.getLastSelected().index,c=b+1;a.select(c)},onBtnSave:function(){var a=this,b=a.icdForm.getForm(),c=b.getValues();a.updateEncounterIcds(c),a.msg("Sweet!",_("encounter_billing_data_updated"))},getEncounterIcds:function(){},updateEncounterIcds:function(a){var b=this;a.eid=b.eid},updateProgressNote:function(a){var b=this;Encounter.getProgressNoteByEid(a,function(a,c){var d=c.result;b.progressNote.tpl.overwrite(b.progressNote.body,d)})},ReloadGrid:function(){var a=this.encountersGrid.getDockedItems('toolbar[dock="top"]')[0],b=a.getComponent("fieldContainerDateRange").getComponent("datefrom").getValue(),c=a.getComponent("fieldContainerDateRange").getComponent("dateto").getValue();(b||c)&&(this.pastDue=0),this.patientListStore.load({params:{datefrom:b,dateto:c,provider:a.getComponent("fieldContainerInsurance").getComponent("provider").getValue(),insurance:a.getComponent("fieldContainerInsurance").getComponent("insurance").getValue(),patient:a.getComponent("fieldContainerPatientSearch").getComponent("patienlivetsearch").getValue(),pastDue:this.pastDue}})},onActive:function(a){this.ReloadGrid(),a(!0)}}),Ext.define("App.view.fees.PaymentEntryWindow",{extend:"Ext.window.Window",title:_("add_new_payment"),closeAction:"hide",modal:!0,initComponent:function(){var a=this;a.items=[{xtype:"form",defaults:{margin:5},border:!1,height:163,width:747,items:[{xtype:"fieldcontainer",layout:"hbox",items:[{fieldLabel:_("paying_entity"),xtype:"mitos.payingentitycombo",name:"paying_entity",action:"new_payment",labelWidth:98,width:220},{xtype:"patienlivetsearch",fieldLabel:_("from"),hideLabel:!1,name:"payer_id",action:"new_payment",anchor:null,labelWidth:42,width:300,margin:"0 0 0 25"},{xtype:"textfield",fieldLabel:_("no"),action:"new_payment",name:"check_number",labelWidth:47,width:167,margin:"0 0 0 25"}]},{xtype:"fieldcontainer",layout:"hbox",items:[{fieldLabel:_("payment_method"),xtype:"mitos.paymentmethodcombo",action:"new_payment",labelWidth:98,name:"payment_method",width:220},{xtype:"mitos.billingfacilitiescombo",fieldLabel:_("pay_to"),action:"new_payment",labelWidth:42,name:"pay_to",width:300,margin:"0 0 0 25"},{xtype:"mitos.currency",fieldLabel:_("amount"),action:"new_payment",name:"amount",labelWidth:47,width:167,margin:"0 0 0 25",enableKeyEvents:!0}]},{fieldLabel:_("post_to_date"),xtype:"datefield",name:"post_to_date",action:"new_payment",format:globals.date_display_format,labelWidth:98,width:220},{fieldLabel:_("note"),xtype:"textareafield",grow:!0,action:"new_payment",name:"note",labelWidth:98,anchor:"100%"}]}],a.buttons=[{text:_("save"),scope:a,handler:a.onPaymentSave},"-",{text:_("reset"),scope:a,handler:a.resetNewPayment}],a.callParent(arguments)},onPaymentSave:function(){var a,b,c,d=this;a=d.down("form"),b=a.getForm(),c=b.getFieldValues(),c.date_created=Ext.Date.format(new Date,"Y-m-d H:i:s"),b.isValid()&&Fees.addPayment(c,function(a,c){c.result.success?(b.reset(),d.hide()):app.msg("Oops!",_("payment_entry_error"))})},resetNewPayment:function(){for(var a=this.query('[action="new_payment"]'),b=0;b<a.length;b++)a[b].reset()}}),Ext.define("App.view.fees.Payments",{extend:"App.ux.RenderPanel",id:"panelPayments",pageTitle:_("payments"),initComponent:function(){var a=this;a.encountersPaymentsStore=Ext.create("App.store.fees.EncountersPayments"),a.searchPanel=Ext.create("Ext.panel.Panel",{title:_("search"),layout:"border",items:[{xtype:"form",itemId:"searchPanelForm",height:145,region:"north",bodyPadding:10,bodyStyle:"background-color:transparent",margin:"0 0 5 0",items:[{xtype:"fieldcontainer",itemId:"fieldcontainerSearchItems",layout:"hbox",items:[{fieldLabel:_("paying_entity"),itemId:"fieldPayingEntityCombo",xtype:"mitos.payingentitycombo",labelWidth:95,width:230},{xtype:"patienlivetsearch",fieldLabel:_("from"),hideLabel:!1,itemId:"fieldPatient",name:"from",anchor:null,labelWidth:42,width:470,margin:"0 0 0 25"},{xtype:"textfield",fieldLabel:_("no"),itemId:"fieldPatientNo",name:"transaction_number",labelWidth:45,width:230,labelAlign:"right",margin:"0 0 0 25",fieldStyle:"text-align: right;"}]},{xtype:"fieldcontainer",layout:"hbox",itemId:"fieldcontainerFacility",items:[{xtype:"mitos.billingfacilitiescombo",itemId:"fieldFacility",fieldLabel:_("pay_to"),labelWidth:95,width:470}]},{xtype:"fieldcontainer",itemId:"fieldcontainerFromTo",layout:"hbox",items:[{fieldLabel:_("from"),itemId:"fieldFromDate",xtype:"datefield",format:globals.date_display_format,labelWidth:95,width:230},{fieldLabel:_("to"),xtype:"datefield",itemId:"fieldToDate",format:globals.date_display_format,margin:"0 0 0 25",labelWidth:42,width:230}]}],buttons:[{text:_("search"),handler:a.onSearchButton,scope:a},"-",{text:_("reset"),scope:a,handler:a.onFormResetButton}]},{xtype:"grid",region:"center",store:a.encountersPaymentsStore,columns:[{header:_("service_date")},{header:_("patient_name")},{header:_("insurance")},{header:_("billing_notes"),flex:1},{header:_("balance_due")}]}]}),a.detailPanel=Ext.create("Ext.panel.Panel",{title:_("detail"),layout:"border",items:[{xtype:"form",height:145,region:"north",bodyPadding:10,bodyStyle:"background-color:transparent",margin:"0 0 5 0",items:[{xtype:"fieldcontainer",layout:"hbox",items:[{fieldLabel:_("paying_entity"),xtype:"mitos.payingentitycombo",labelWidth:95,width:230},{xtype:"patienlivetsearch",fieldLabel:_("from"),hideLabel:!1,itemId:"patientFrom",name:"from",anchor:null,labelWidth:42,width:470,margin:"0 0 0 25"},{xtype:"textfield",fieldLabel:_("no"),name:"transaction_number",labelWidth:45,width:230,labelAlign:"right",margin:"0 0 0 25",fieldStyle:"text-align: right;"}]},{xtype:"fieldcontainer",layout:"hbox",items:[{fieldLabel:_("payment_method"),xtype:"mitos.paymentmethodcombo",labelWidth:95,width:230},{xtype:"mitos.billingfacilitiescombo",fieldLabel:_("pay_to"),labelWidth:42,width:470,margin:"0 0 0 25"},{xtype:"mitos.currency",fieldLabel:_("amount"),name:"amount",labelWidth:45,width:230,labelAlign:"right",margin:"0 0 0 25",enableKeyEvents:!0}]},{xtype:"fieldcontainer",layout:"hbox",items:[{fieldLabel:_("from"),xtype:"datefield",format:globals.date_display_format,labelWidth:95,width:230},{fieldLabel:_("to"),xtype:"datefield",format:globals.date_display_format,margin:"0 0 0 25",labelWidth:42,width:230}]}],buttons:[{text:_("save")},"-",{text:_("reset")},"->",{text:_("add_payment"),scope:a,handler:a.onAddPaymentClick}]},{xtype:"grid",region:"center",plugins:Ext.create("App.ux.grid.RowFormEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:1,enableRemove:!0,listeners:{scope:a,beforeedit:a.beforeCptEdit}}),columns:[{header:_("service_date")},{header:_("patient_name")},{header:_("insurance")},{header:_("billing_notes"),flex:1},{header:_("balance_due")}]}]}),a.tapPanel=Ext.create("Ext.tab.Panel",{layout:"fit",items:[a.searchPanel,a.detailPanel]}),a.pageBody=[a.tapPanel],a.callParent(arguments)},onAddPaymentClick:function(){app.onPaymentEntryWindow()},beforeCptEdit:function(a,b){this.addCptFields(a.editor,b.record.data)},addCptFields:function(a){a.removeAll();
for(var b=this.testData(),c=0;c<b.length;c++)a.add({xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"textfield",width:100,name:"code",readOnly:!0,margin:"0 5 0 10"},{xtype:"textfield",name:"copay",readOnly:!0,width:400,margin:"0 5 0 5"},{xtype:"mitos.currency",name:"remaining",readOnly:!0,width:100,margin:"0 5 0 5"},{xtype:"mitos.currency",name:"allowed",readOnly:!0,width:100,margin:"0 5 0 5"},{xtype:"mitos.currency",name:"payment",readOnly:!0,width:100,margin:"0 5 0 5"},{xtype:"mitos.currency",name:"deductible",readOnly:!0,width:100,margin:"0 5 0 5"},{xtype:"mitos.currency",name:"takeback",readOnly:!0,width:100,margin:"0 5 0 5"},{xtype:"checkbox",name:"takeback",readOnly:!0,width:50,margin:"0 5 0 5"},{xtype:"textfield",name:"takeback",readOnly:!0,width:100,margin:"0 5 0 5"}]})},testData:function(){var a,b=[];for(floor=Math.floor(6*Math.random()+1),a=0;floor>a;a++)b.push({data1:Math.floor(Math.max(100*Math.random(),floor)),data2:Math.floor(Math.max(100*Math.random(),floor)),data3:Math.floor(Math.max(100*Math.random(),floor)),data4:Math.floor(Math.max(100*Math.random(),floor)),data5:Math.floor(Math.max(100*Math.random(),floor)),data6:Math.floor(Math.max(100*Math.random(),floor)),data7:Math.floor(Math.max(100*Math.random(),floor)),data8:Math.floor(Math.max(100*Math.random(),floor)),data9:Math.floor(Math.max(100*Math.random(),floor))});return b},onBtnClick:function(a){var b=this;"search"==a.action?b.forms.getLayout().setActiveItem(0):"details"==a.action?b.forms.getLayout().setActiveItem(1):"new"==a.action&&b.window.show()},onSearchButton:function(){var a=this.searchPanel.getComponent("searchPanelForm"),b=a.getComponent("fieldcontainerFromTo").getComponent("fieldFromDate").getValue(),c=a.getComponent("fieldcontainerFromTo").getComponent("fieldToDate").getValue();this.encountersPaymentsStore.load({params:{datefrom:b,dateto:c,payingEntityCombo:a.getComponent("fieldcontainerSearchItems").getComponent("fieldPayingEntityCombo").getValue(),patientSearch:a.getComponent("fieldcontainerSearchItems").getComponent("fieldPatient").getValue(),patientNo:a.getComponent("fieldcontainerSearchItems").getComponent("fieldPatientNo").getValue(),facility:a.getComponent("fieldcontainerFacility").getComponent("fieldFacility").getValue()}})},onFormResetButton:function(){alert("Hello there")},onActive:function(a){this.encountersPaymentsStore.load(),a(!0)}}),Ext.define("App.view.administration.practice.Facilities",{extend:"Ext.grid.Panel",xtype:"facilitiespanel",title:_("facilities"),initComponent:function(){var a=this;Ext.apply(a,{store:a.store=Ext.create("App.store.administration.Facility"),columns:[{text:_("name"),flex:1,sortable:!0,dataIndex:"name"},{text:_("phone"),width:100,sortable:!0,dataIndex:"phone"},{text:_("fax"),width:100,sortable:!0,dataIndex:"fax"},{text:_("city"),width:100,sortable:!0,dataIndex:"city"}],plugins:Ext.create("App.ux.grid.RowFormEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:1,items:[{xtype:"container",layout:"column",defaults:{xtype:"container",columnWidth:.5,padding:5,layout:"anchor",defaultType:"textfield"},items:[{defaults:{anchor:"100%"},items:[{fieldLabel:_("name"),name:"name",allowBlank:!1},{fieldLabel:_("phone"),name:"phone"},{fieldLabel:_("fax"),name:"fax"},{fieldLabel:_("street"),name:"street"},{fieldLabel:_("city"),name:"city"},{fieldLabel:_("state"),name:"state"},{fieldLabel:_("postal_code"),name:"postal_code"},{fieldLabel:_("country_code"),name:"country_code"},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"textfield",fieldLabel:_("ssn"),name:"ssn",margin:"0 10 0 0"},{xtype:"textfield",fieldLabel:_("ein"),labelWidth:40,name:"ein"}]}]},{items:[{fieldLabel:_("billing_attn"),name:"attn",anchor:"100%"},{xtype:"mitos.poscodescombo",fieldLabel:_("pos_code"),name:"pos_code",anchor:"100%"},{fieldLabel:_("clia_number"),name:"clia",anchor:"100%"},{fieldLabel:_("npi"),name:"npi",anchor:"100%"},{fieldLabel:_("fda_number"),name:"fda",anchor:"100%"},{xtype:"checkbox",fieldLabel:_("active"),name:"active"},{xtype:"checkbox",fieldLabel:_("service_location"),name:"service_location"},{xtype:"checkbox",fieldLabel:_("billing_location"),name:"billing_location"},{xtype:"checkbox",fieldLabel:_("accepts_assignment"),name:"accepts_assignment"}]}]}]}),tbar:Ext.create("Ext.PagingToolbar",{pageSize:30,store:a.store,displayInfo:!0,plugins:Ext.create("Ext.ux.SlidingPager",{}),items:["-",{text:_("add_new_facility"),iconCls:"save",scope:a,handler:a.addFacility},"-",{text:_("show_active_facilities"),action:"active",scope:a,handler:a.filterFacilitiesby},"-",{text:_("show_inactive_facilities"),action:"inactive",scope:a,handler:a.filterFacilitiesby}]})}),a.callParent(arguments)},filterFacilitiesby:function(a){this.store.load({filters:[{property:"active",value:"active"==a.action?1:0}]})},addFacility:function(){var a=this,b=a,c=b.store;b.editingPlugin.cancelEdit(),c.insert(0,{active:1,service_location:1,billing_location:0,accepts_assignment:0}),b.editingPlugin.startEdit(0,0)}}),Ext.define("App.model.administration.Department",{extend:"Ext.data.Model",table:{name:"departments"},fields:[{name:"id",type:"int"},{name:"title",type:"string",len:100}],proxy:{type:"direct",api:{read:"Facilities.getDepartments",create:"Facilities.addDepartment",update:"Facilities.updateDepartment"},reader:{root:"data"}}}),Ext.define("App.store.administration.Departments",{extend:"Ext.data.Store",requires:["App.model.administration.Department"],model:"App.model.administration.Department"}),Ext.define("App.model.administration.Specialty",{extend:"Ext.data.Model",table:{name:"specialties",comment:"Providers Specialties"},fields:[{name:"id",type:"string"},{name:"code",type:"string",len:100},{name:"title",type:"string",len:100},{name:"taxonomy",type:"string",len:30},{name:"modality",type:"string",len:50},{name:"ges",type:"string",len:5},{name:"active",type:"bool"},{name:"text_details",type:"string",store:!1,convert:function(a,b){return b.data.id+": "+b.data.title}},{name:"combo_text",type:"string",store:!1,convert:function(a,b){return b.data.id+": "+b.data.title+" "+(b.data.active?"("+_("not_active")+")":"")}},{name:"create_uid",type:"int"},{name:"update_uid",type:"int"},{name:"create_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"update_date",type:"date",dateFormat:"Y-m-d H:i:s"}],proxy:{type:"direct",api:{read:"Specialties.getSpecialties",create:"Specialties.addSpecialty",update:"Specialties.updateSpecialty"},reader:{root:"data"}}}),Ext.define("App.store.administration.Specialties",{model:"App.model.administration.Specialty",extend:"Ext.data.Store"}),Ext.define("App.store.administration.FacilityStructures",{extend:"Ext.data.TreeStore",requires:["App.model.administration.FacilityStructure"],model:"App.model.administration.FacilityStructure"}),Ext.define("App.view.administration.practice.FacilityConfig",{extend:"Ext.panel.Panel",requires:[],xtype:"facilityconfigpanel",title:_("facility_configuration"),itemId:"FacilityStructurePanel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",margin:5,flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"grid",title:_("departments"),hideHeaders:!0,frame:!0,margin:"0 0 5 0",store:Ext.create("App.store.administration.Departments",{autoLoad:!0}),viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"facilitygroup1",dropGroup:"facilitygroup2",onViewRender:function(a){var b,c=this;c.enableDrag&&(c.containerScroll&&(b=a.getEl()),c.dragZone=new Ext.view.DragZone({view:a,copy:!0,ddGroup:c.dragGroup||c.ddGroup,dragText:c.dragText,containerScroll:c.containerScroll,scrollEl:b})),c.enableDrop&&(c.dropZone=new Ext.grid.ViewDropZone({view:a,ddGroup:c.dropGroup||c.ddGroup}))}},listeners:{drop:function(a,b,c,d){say(a),say(b),say(c),say(d)}}},columns:[{text:"title",dataIndex:"title",flex:1}]},{xtype:"grid",title:_("specialties"),frame:!0,flex:1,store:this._sepecialtyStore=Ext.create("App.store.administration.Specialties",{autoLoad:!0}),viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"facilitygroup1",dropGroup:"facilitygroup2"},listeners:{drop:function(a,b,c,d){say(a),say(b),say(c),say(d)}}},columns:[{width:200,text:_("title"),dataIndex:"title",sortable:!0,flex:1,editor:{xtype:"textfield"}},{text:_("taxonomy"),sortable:!0,dataIndex:"taxonomy",flex:1,editor:{xtype:"textfield"}},{text:_("modality"),sortable:!0,dataIndex:"modality",flex:1,editor:{xtype:"textfield"}},{text:_("active"),sortable:!0,dataIndex:"active",renderer:function(a){return app.boolRenderer(a)},editor:{xtype:"checkboxfield"}}],plugins:[{ptype:"rowediting",clicksToEdit:2}],tools:[{xtype:"button",text:_("specialty"),iconCls:"icoAdd",itemId:"specialitiesAddBtn"}],bbar:Ext.create("Ext.PagingToolbar",{pageSize:10,store:this._sepecialtyStore,displayInfo:!0,plugins:Ext.create("Ext.ux.SlidingPager",{})})}]},{xtype:"treepanel",title:_("facility_structure"),itemId:"FacilityStructureTreePanel",store:Ext.create("App.store.administration.FacilityStructures",{autoLoad:!0}),columnLines:!0,rootVisible:!1,hideHeaders:!0,frame:!0,margin:"5 5 5 0",flex:1,viewConfig:{plugins:{ptype:"treeviewdragdrop",dragGroup:"facilitygroup1",dropGroup:"facilitygroup1",expandDelay:0,allowParentInsert:!0,allowContainerDrops:!0,onViewRender:function(a){var b,c=this;c.enableDrag&&(c.containerScroll&&(b=a.getEl()),c.dragZone=new Ext.tree.ViewDragZone({view:a,ddGroup:c.dragGroup||c.ddGroup,dragText:c.dragText,displayField:c.displayField,repairHighlightColor:c.nodeHighlightColor,repairHighlight:c.nodeHighlightOnRepair,scrollEl:b})),c.enableDrop&&(c.dropZone=new Ext.tree.ViewDropZone({view:a,ddGroup:c.dropGroup||c.ddGroup,allowContainerDrops:c.allowContainerDrops,appendOnly:c.appendOnly,allowParentInserts:c.allowParentInserts,expandDelay:c.expandDelay,dropHighlightColor:c.nodeHighlightColor,dropHighlight:c.nodeHighlightOnDrop,sortOnDrop:c.sortOnDrop,containerScroll:c.containerScroll,handleNodeDrop:function(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=l.view,n=b?b.parentNode:m.panel.getRootNode(),o=m.getStore().treeStore.model,p=a.records[0]instanceof App.model.administration.Department,q=a.records[0]instanceof App.model.administration.Specialty,r=[];if(p||q){for(e=0,f=a.records.length;f>e;e++)Ext.Array.push(r,new o({id:"",fid:1,foreign_id:a.records[e].data.id,foreign_type:p?"D":"S",text:a.records[e].data.title,active:!1}));a.records=r}if(a.copy)for(d=a.records,a.records=[],e=0,f=d.length;f>e;e++)g=d[e],a.records.push(g.isNode?g.copy(void 0,!0):new o(g.data,g.getId()));l.cancelExpand(),"before"==c?(h=n.insertBefore,i=[null,b],b=n):"after"==c?(b.nextSibling?(h=n.insertBefore,i=[null,b.nextSibling]):(h=n.appendChild,i=[null]),b=n):(b.isExpanded()||b.isLoading()||(j=!0),h=b.appendChild,i=[null]),k=function(){var c,d;for(Ext.suspendLayouts(),m.getSelectionModel().clearSelections(),e=0,f=a.records.length;f>e;e++)g=a.records[e],g.isNode||(g=g.isModel?new o(g.data,g.getId()):new o(g)),g.save({callback:function(a,b){a.set({id:b.response.result.id}),a.save()}}),a.records[e]=g,i[0]=g,h.apply(b,i);if(l.sortOnDrop&&b.sort(b.getOwnerTree().store.generateComparator()),Ext.resumeLayouts(!0),Ext.enableFx&&l.dropHighlight)for(c=l.dropHighlightColor,e=0;f>e;e++)d=m.getNode(a.records[e]),d&&Ext.fly(d).highlight(c)},j?b.expand(!1,k):b.isLoading()?b.on({expand:k,delay:1,single:!0}):k()}}))}}},columns:[{xtype:"treecolumn",text:"Config",flex:2,sortable:!0,dataIndex:"text"},{xtype:"actioncolumn",width:20,icon:"resources/images/icons/delete.png",tooltip:_("delete"),handler:function(a,b,c,d,e,f){return f.childNodes.length>0?void app.msg(_("oops"),_("please_remove_child_records_first"),!0):void Ext.Msg.show({title:_("wait"),msg:_("delete_this_record"),buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(a){"yes"==a&&f.destroy()}})},getClass:function(a,b,c){return"f"!=c.data.id[0]?"x-grid-center-icon":"x-hide-display"}}]}]}),Ext.define("App.store.administration.InsuranceCompanies",{extend:"Ext.data.Store",model:"App.model.administration.InsuranceCompany"}),Ext.define("App.view.administration.practice.Insurance",{extend:"Ext.grid.Panel",requires:["App.ux.combo.Titles","App.ux.grid.RowFormEditing","App.ux.combo.TransmitMethod"],xtype:"insurancecompaniespanel",title:_("insurance_companies"),store:this._adminInsuranceCmonpanySotrie=Ext.create("App.store.administration.InsuranceCompanies"),columnLines:!0,plugins:[{ptype:"rowformediting",autoCancel:!1,errorSummary:!1,items:[{xtype:"container",layout:"hbox",itemId:"InsuranceCompanyFormContainer",items:[{xtype:"fieldset",title:_("contact_info"),layout:"hbox",margin:"0 10 0 0",items:[{xtype:"container",margin:"0 10 0 0",layout:"anchor",defaults:{margin:"0 10 5 0"},items:[{xtype:"textfield",fieldLabel:_("name"),name:"name",allowBlank:!1,width:385},{xtype:"textfield",fieldLabel:_("attn"),name:"attn",width:385},{xtype:"textfield",fieldLabel:_("address"),name:"address1",width:385},{xtype:"textfield",fieldLabel:_("address_cont"),name:"address2",width:385},{xtype:"fieldcontainer",margin:"0 0 10 105",layout:"hbox",items:[{xtype:"textfield",width:150,name:"city"},{xtype:"textfield",width:50,name:"state"},{xtype:"textfield",width:75,name:"zip_code"}]}]},{xtype:"container",width:300,layout:"anchor",defaults:{margin:"0 10 5 0"},items:[{xtype:"textfield",fieldLabel:_("phone_number"),name:"phone_number"},{xtype:"textfield",fieldLabel:_("fax_number"),name:"fax_number"},{xtype:"checkbox",fieldLabel:_("active"),name:"active"}]}]}]}]}],columns:[{width:50,sortable:!0,dataIndex:"id"},{header:_("insurance_name"),width:200,sortable:!0,dataIndex:"name"},{header:_("attn"),width:200,sortable:!0,dataIndex:"attn"},{header:_("address"),flex:1,sortable:!0,dataIndex:"address_full"},{header:_("phone"),width:120,sortable:!0,dataIndex:"phone1"},{header:_("phone"),width:120,sortable:!0,dataIndex:"phone2"},{header:_("fax"),width:120,sortable:!0,dataIndex:"fax"},{header:_("active"),width:55,sortable:!0,dataIndex:"active",renderer:function(a){return app.boolRenderer(a)}}],tbar:Ext.create("Ext.PagingToolbar",{pageSize:30,store:this._adminInsuranceCmonpanySotrie,displayInfo:!0,plugins:Ext.create("Ext.ux.SlidingPager",{}),items:["-",{text:_("insurance_company"),iconCls:"icoAdd",action:"insurance",itemId:"addBtn"}]})}),Ext.define("App.store.administration.Laboratories",{model:"App.model.administration.Laboratories",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:Practice.getLaboratories,create:Practice.addLaboratory,update:Practice.updateLaboratory}}}),Ext.define("App.view.administration.practice.Laboratories",{extend:"Ext.grid.Panel",requires:["App.ux.combo.Titles","App.ux.grid.RowFormEditing","App.ux.combo.TransmitMethod"],xtype:"laboratoriespanel",title:_("laboratories"),store:Ext.create("App.store.administration.Laboratories"),border:!1,frame:!1,columnLines:!0,plugins:[{ptype:"rowformediting",autoCancel:!1,errorSummary:!1,clicksToEdit:1,items:[{xtype:"container",layout:"hbox",width:900,items:[{xtype:"container",width:450,layout:"anchor",items:[{xtype:"textfield",fieldLabel:_("name"),name:"name",allowBlank:!1,width:385},{xtype:"textfield",fieldLabel:_("address"),name:"line1",width:385},{xtype:"textfield",fieldLabel:_("address_cont"),name:"line2",width:385},{xtype:"fieldcontainer",layout:"hbox",defaults:{hideLabel:!0},items:[{xtype:"displayfield",width:105,value:_("city_state_zip")},{xtype:"textfield",width:150,name:"city"},{xtype:"displayfield",width:5,value:","},{xtype:"textfield",width:50,name:"state"},{xtype:"textfield",width:75,name:"zip"}]}]},{xtype:"container",width:300,layout:"anchor",items:[{xtype:"textfield",fieldLabel:_("email"),name:"email",width:275},{xtype:"fieldcontainer",layout:"hbox",defaults:{hideLabel:!0},items:[{xtype:"displayfield",width:100,value:_("phone")},{xtype:"textfield",width:40,name:"phone_area_code"},{xtype:"displayfield",width:10,value:"-"},{xtype:"textfield",width:50,name:"phone_prefix"},{xtype:"displayfield",width:10,value:"-"},{xtype:"textfield",width:70,name:"phone_number"}]},{xtype:"fieldcontainer",layout:"hbox",defaults:{hideLabel:!0},items:[{xtype:"displayfield",width:100,value:_("fax")},{xtype:"textfield",width:40,name:"fax_area_code"},{xtype:"displayfield",width:10,value:"-"},{xtype:"textfield",width:50,name:"fax_prefix"},{xtype:"displayfield",width:10,value:"-"},{xtype:"textfield",width:70,name:"fax_number"}]},{xtype:"transmitmethodcombo",fieldLabel:_("default_method"),labelWidth:100,width:275}]},{xtype:"checkbox",fieldLabel:_("active"),labelWidth:60,name:"active"}]}]}],columns:[{header:_("pharmacy_name"),width:150,sortable:!0,dataIndex:"name"},{header:_("address"),flex:1,sortable:!0,dataIndex:"address_full"},{header:_("phone"),width:120,sortable:!0,dataIndex:"phone_full"},{header:_("fax"),width:120,sortable:!0,dataIndex:"fax_full"},{header:_("default_method"),flex:1,sortable:!0,dataIndex:"transmit_method",renderer:function(a){return"1"==a?"Print":"2"==a?"Email":"3"==a?"Email":a}},{header:_("active"),width:55,sortable:!0,dataIndex:"active",renderer:function(a){return app.boolRenderer(a)}}],tbar:["->",{text:_("laboratory"),iconCls:"icoAdd",action:"laboratory",itemId:"addBtn"}]}),Ext.define("App.store.administration.Pharmacies",{model:"App.model.administration.Pharmacies",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:"Practice.getPharmacies",create:"Practice.addPharmacy",update:"Practice.updatePharmacy"}}}),Ext.define("App.view.administration.practice.Pharmacies",{extend:"Ext.grid.Panel",requires:["App.ux.combo.Titles","App.ux.grid.RowFormEditing","App.ux.combo.TransmitMethod"],xtype:"pharmaciespanel",title:_("pharmacies"),store:Ext.create("App.store.administration.Pharmacies"),border:!1,frame:!1,columnLines:!0,plugins:[{ptype:"rowformediting",autoCancel:!1,errorSummary:!1,clicksToEdit:1,items:[{xtype:"container",layout:"hbox",items:[{xtype:"container",width:400,layout:"anchor",items:[{xtype:"textfield",fieldLabel:_("name"),name:"name",allowBlank:!0,width:385},{xtype:"textfield",fieldLabel:_("address"),name:"address",width:385},{xtype:"textfield",fieldLabel:_("address_cont"),name:"address_cont",width:385},{xtype:"fieldcontainer",layout:"hbox",defaults:{hideLabel:!0},items:[{xtype:"displayfield",width:105,value:_("city_state_zip")},{xtype:"textfield",width:150,name:"city"},{xtype:"displayfield",width:5,value:","},{xtype:"textfield",width:50,name:"state"},{xtype:"textfield",width:75,name:"zip"}]}]},{xtype:"container",width:300,layout:"anchor",items:[{xtype:"fieldcontainer",layout:"hbox",defaults:{hideLabel:!0},items:[{xtype:"displayfield",width:100,value:_("phone")},{xtype:"textfield",width:40,name:"phone_area_code"},{xtype:"displayfield",width:10,value:"-"},{xtype:"textfield",width:50,name:"phone_prefix"},{xtype:"displayfield",width:10,value:"-"},{xtype:"textfield",width:70,name:"phone_number"}]},{xtype:"fieldcontainer",layout:"hbox",defaults:{hideLabel:!0},items:[{xtype:"displayfield",width:100,value:_("fax")},{xtype:"textfield",width:40,name:"fax_area_code"},{xtype:"displayfield",width:10,value:"-"},{xtype:"textfield",width:50,name:"fax_prefix"},{xtype:"displayfield",width:10,value:"-"},{xtype:"textfield",width:70,name:"fax_number"}]},{xtype:"textfield",fieldLabel:_("email"),name:"email",width:385},{xtype:"transmitmethodcombo",fieldLabel:_("default_method"),labelWidth:100,width:275}]},{xtype:"checkbox",fieldLabel:_("active"),labelWidth:60,margin:"0 0 0 10",name:"active"}]}]}],columns:[{header:_("pharmacy_name"),width:150,sortable:!0,dataIndex:"name"},{header:_("address"),flex:1,sortable:!0,dataIndex:"address_full"},{header:_("phone"),width:120,sortable:!0,dataIndex:"phone_full"},{header:_("fax"),width:120,sortable:!0,dataIndex:"fax_full"},{header:_("default_method"),flex:1,sortable:!0,dataIndex:"transmit_method",renderer:function(a){return"1"==a?"Print":"2"==a?"Email":"3"==a?"Email":a}},{header:_("active"),width:55,sortable:!0,dataIndex:"active",renderer:function(a){return app.boolRenderer(a)}}],tbar:["->",{text:_("pharmacy"),iconCls:"icoAdd",action:"pharmacy",itemId:"addBtn"}]}),Ext.define("App.model.administration.InsuranceNumber",{extend:"Ext.data.Model",table:{name:"insurance_numbers",comment:"Insurance Numbers"},fields:[{name:"id",type:"int"},{name:"provider_id",type:"int"},{name:"insurance_company_id",type:"int"},{name:"provider_id_text",type:"string",store:!1},{name:"insurance_company_id_text",type:"string",store:!1},{name:"provider_number",type:"string",len:20},{name:"rendering_provider_number",type:"string",len:20},{name:"group_number",type:"string",len:20},{name:"provider_number_type",type:"string",len:4},{name:"rendering_provider_number_type",type:"string",len:4}],proxy:{type:"direct",api:{read:"Insurance.getInsuranceNumbers",create:"Insurance.addInsuranceNumber",update:"Insurance.updateInsuranceNumber"}}}),Ext.define("App.store.administration.InsuranceNumbers",{extend:"Ext.data.Store",model:"App.model.administration.InsuranceNumber"}),Ext.define("App.view.administration.practice.ProviderNumbers",{extend:"Ext.grid.Panel",requires:["App.ux.combo.Titles","App.ux.grid.RowFormEditing","App.ux.combo.TransmitMethod"],xtype:"providersnumberspanel",title:_("provider_numbers"),store:Ext.create("App.store.administration.InsuranceNumbers"),border:!1,frame:!1,columnLines:!0,features:[{ftype:"grouping",groupHeaderTpl:"{name}"}],plugins:[{ptype:"rowformediting",autoCancel:!1,errorSummary:!1,clicksToEdit:1,items:[{xtype:"container",layout:"column",items:[{xtype:"container",defaults:{labelWidth:140},margin:"0 10 0 0",items:[{xtype:"textfield",fieldLabel:_("provider"),name:"provider_id"},{xtype:"textfield",fieldLabel:_("provider_number"),name:"provider_number"},{xtype:"textfield",fieldLabel:_("provider_number_type"),name:"provider_number_type"}]},{xtype:"container",defaults:{labelWidth:140},margin:"0 10 0 0",items:[{xtype:"textfield",fieldLabel:_("insurance_company"),name:"insurance_company_id"},{xtype:"textfield",fieldLabel:_("rendering_number"),name:"rendering_provider_number"},{xtype:"textfield",fieldLabel:_("rendering_number_type"),name:"rendering_provider_number_type"}]},{xtype:"container",defaults:{labelWidth:140},items:[{xtype:"textfield",fieldLabel:_("group_number"),name:"group_number"}]}]}]}],columns:[{text:_("provider"),flex:1,sortable:!0,dataIndex:"provider_id_text"},{text:_("insurance"),flex:1,sortable:!0,dataIndex:"insurance_company_id_text"},{text:_("provider_number"),flex:1,sortable:!0,dataIndex:"provider_number"},{text:_("rendering_number"),flex:1,sortable:!0,dataIndex:"rendering_number"},{text:_("group_number"),flex:1,sortable:!0,dataIndex:"phone"}],tbar:[_("group_by"),{text:_("provider"),enableToggle:!0,toggleGroup:"insurance_number_group",action:"provider_id_text"},{text:_("insurance"),enableToggle:!0,toggleGroup:"insurance_number_group",action:"insurance_company_id_text"},"-","->",{text:_("insurance_number"),iconCls:"icoAdd",action:"insurance",itemId:"addBtn"}]}),Ext.define("App.view.administration.practice.Specialties",{extend:"Ext.grid.Panel",xtype:"specialtiespanel",requires:["Ext.grid.plugin.RowEditing","Ext.ux.SlidingPager"],title:_("specialties"),initComponent:function(){var a=this;Ext.apply(a,{store:a.store=Ext.create("App.store.administration.Specialties",{autoSync:!1}),columns:[{width:200,text:_("title"),dataIndex:"title",sortable:!0,flex:1,editor:{xtype:"textfield"}},{text:_("taxonomy"),sortable:!0,dataIndex:"taxonomy",flex:1,editor:{xtype:"textfield"}},{text:_("modality"),sortable:!0,dataIndex:"modality",flex:1,editor:{xtype:"textfield"}},{text:_("active"),sortable:!0,dataIndex:"active",renderer:a.boolRenderer,editor:{xtype:"checkboxfield"}}],plugins:[{ptype:"rowediting",clicksToEdit:1}],tbar:["->",{xtype:"button",text:_("specialty"),iconCls:"icoAdd",itemId:"specialitiesAddBtn"}],bbar:Ext.create("Ext.PagingToolbar",{pageSize:10,store:a.store,displayInfo:!0,plugins:Ext.create("Ext.ux.SlidingPager",{})})}),a.callParent(arguments)}}),Ext.define("App.view.administration.practice.ReferringProviders",{extend:"Ext.grid.Panel",xtype:"referringproviderspanel",requires:[],title:_("referring_providers"),initComponent:function(){var a=this;Ext.apply(a,{store:Ext.create("App.store.administration.ReferringProviders",{autoSync:!1}),columns:[{width:200,text:_("name"),sortable:!0,renderer:function(a,b,c){return c.data.title+" "+c.data.fname+" "+c.data.mname+" "+c.data.lname}},{flex:1,text:_("email"),sortable:!0,dataIndex:"email"},{flex:1,text:_("phone_number"),sortable:!0,dataIndex:"phone_number"},{flex:1,text:_("cel_number"),sortable:!0,dataIndex:"cel_number"},{flex:1,text:_("aditional_info"),sortable:!0,dataIndex:"notes"},{text:_("active"),sortable:!0,dataIndex:"active",renderer:a.boolRenderer}],plugins:[a.formEditing=Ext.create("App.ux.grid.RowFormEditing",{clicksToEdit:1,items:[{xtype:"fieldcontainer",fieldLabel:_("first_middle_last"),labelWidth:130,labelAlign:"right",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}},msgTarget:"under",items:[{width:50,xtype:"mitos.titlescombo",name:"title"},{width:150,xtype:"textfield",name:"fname",allowBlank:!1},{width:100,xtype:"textfield",name:"mname"},{width:150,xtype:"textfield",name:"lname",allowBlank:!1}]},{xtype:"fieldcontainer",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}},items:[{xtype:"textfield",name:"email",fieldLabel:_("email"),labelWidth:130,labelAlign:"right"},{xtype:"textfield",fieldLabel:_("taxonomy"),labelWidth:130,labelAlign:"right",name:"taxonomy"}]},{xtype:"fieldcontainer",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}},items:[{xtype:"textfield",fieldLabel:_("upin"),labelWidth:130,labelAlign:"right",name:"upin"},{xtype:"textfield",fieldLabel:_("npi"),labelWidth:130,labelAlign:"right",name:"npi"}]},{xtype:"fieldcontainer",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}},items:[{xtype:"textfield",fieldLabel:_("lic"),labelWidth:130,labelAlign:"right",name:"lic"},{xtype:"textfield",fieldLabel:_("ssn"),labelWidth:130,labelAlign:"right",name:"ssn"}]},{xtype:"fieldcontainer",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}},items:[{xtype:"textfield",fieldLabel:_("phone_number"),labelWidth:130,labelAlign:"right",name:"phone_number"},{xtype:"textfield",fieldLabel:_("fax_number"),labelWidth:130,labelAlign:"right",name:"fax_number"}]},{xtype:"fieldcontainer",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}},items:[{xtype:"textfield",fieldLabel:_("cel_number"),labelWidth:130,labelAlign:"right",name:"cel_number"},{xtype:"checkbox",fieldLabel:_("active"),labelWidth:130,labelAlign:"right",name:"active"}]},{height:50,xtype:"textareafield",name:"notes",width:600,fieldLabel:_("notes"),labelWidth:130,labelAlign:"right",emptyText:_("additional_info")}]})],dockedItems:[{xtype:"toolbar",dock:"top",items:["->",{xtype:"button",text:_("referring_provider"),iconCls:"icoAdd",itemId:"referringProviderAddBtn"}]}]}),a.callParent(arguments)}}),Ext.define("App.view.administration.Applications",{extend:"App.ux.RenderPanel",pageTitle:_("applications"),initComponent:function(){var a=this;a.store=Ext.create("App.store.administration.Applications"),a.grid=Ext.create("Ext.grid.Panel",{store:a.store,plugins:[a.edditing=Ext.create("Ext.grid.plugin.RowEditing",{clicksToEdit:2,errorSummary:!1})],columns:[{xtype:"actioncolumn",width:20,items:[{icon:"resources/images/icons/cross.png",tooltip:"Remove",scope:a,handler:a.removeApplication}]},{text:_("name"),flex:1,sortable:!0,dataIndex:"app_name",editor:{xtype:"textfield",allowBlank:!1}},{text:_("private_key"),flex:1,sortable:!0,dataIndex:"pvt_key"},{text:_("active?"),width:50,sortable:!0,renderer:a.boolRenderer,dataIndex:"active",editor:{xtype:"checkbox"}}],tbar:[{text:_("add"),iconCls:"icoAdd",scope:a,handler:a.addApplication}]}),a.pageBody=[a.grid],a.callParent(arguments)},removeApplication:function(a,b){var c=this,d=c.store.getAt(b);Ext.Msg.show({title:"Wait!",msg:'This action is final. Are you sure you want to remove <span style="font-weight: bold">"'+d.data.app_name+'"</span>?',buttons:Ext.Msg.YESNO,icon:Ext.Msg.WARNING,fn:function(a){"yes"==a&&(c.edditing.cancelEdit(),c.store.remove(d),c.store.sync({callback:function(){c.msg("Sweet!",_("record_removed"))}}))}})},addApplication:function(){var a=this;a.edditing.cancelEdit(),a.store.insert(0,{active:1}),a.edditing.startEdit(0,0)},onActive:function(a){this.store.load(),a(!0)}}),Ext.define("App.view.administration.Globals",{extend:"App.ux.RenderPanel",id:"panelGlobals",pageTitle:"GaiaEHR "+_("global_settings"),uses:["App.ux.form.fields.Checkbox"],initComponent:function(){var a=this;a.store=Ext.create("App.store.administration.Globals",{groupField:"gl_category",remoteSort:!1,autoSync:!0,pageSize:500,sorters:[{sorterFn:function(a,b){var c=function(a){var b=a.get("gl_category");return say(b),"General"===b?1:"Locale"===b?2:"Clinical"===b?3:"Email"===b?4:"Audit"===b?5:"Fax/Scanner"===b?6:7},d=c(a),e=c(b);return d===e?0:e>d?-1:1}}]}),a.default_top_pane_store=Ext.create("Ext.data.Store",{fields:["title","option_id"],data:[{title:_("dashboard"),option_id:"app/dashboard/dashboard.ejs.php"},{title:_("calendar"),option_id:"app/calendar/calendar.ejs.php"},{title:_("messages"),option_id:"app/messages/messages.ejs.php"}]}),a.fullname_store=Ext.create("Ext.data.Store",{fields:["format","option_id"],data:[{format:_("last_first_middle"),option_id:"0"},{format:_("first_middle_last"),option_id:"1"}]}),a.main_navigation_menu_left_store=Ext.create("Ext.data.Store",{fields:["title","option_id"],data:[{title:_("main_navigation_menu_left"),option_id:"west"},{title:_("main_navigation_menu_right"),option_id:"east"}]}),a.css_header_store=Ext.create("Ext.data.Store",{fields:["title","option_id"],data:[{title:_("grey_default"),option_id:"ext-all-gray.css"},{title:_("blue"),option_id:"ext-all.css"},{title:_("access"),option_id:"ext-all-access.css"}]}),a.full_new_patient_form_store=Ext.create("Ext.data.Store",{fields:["title","option_id"],data:[{title:_("oldstyle_static_form_without_search_or_duplication_check"),option_id:"0"},{title:_("all_demographics_fields_with_search_and_duplication_check"),option_id:"1"},{title:_("mandatory_or_specified_fields_only_search_and_dup_check"),option_id:"2"},{title:_("mandatory_or_specified_fields_only_dup_check_no_search"),option_id:"3"}]}),a.patient_search_results_style_store=Ext.create("Ext.data.Store",{fields:["title","option_id"],data:[{title:_("encounter_statistics"),option_id:"0"},{title:_("mandatory_and_specified_fields"),option_id:"1"}]}),a.units_of_measurement_store=Ext.create("Ext.data.Store",{fields:["title","option_id"],data:[{title:_("show_both_us_and_metric_main_unit_is_us"),option_id:"1"},{title:_("show_both_us_and_metric_main_unit_is_metric"),option_id:"2"},{title:_("show_us_only"),option_id:"3"},{title:_("show_metric_only"),option_id:"4"}]}),a.date_display_format_store=Ext.create("Ext.data.Store",{fields:["title","option_id"],data:[{title:_("yyyy_mm_dd"),option_id:"Y-m-d"},{title:_("mm_dd_yyyy"),option_id:"m/d/Y"},{title:_("dd_mm_yyyy"),option_id:"d/m/Y"}]}),a.time_display_format_store=Ext.create("Ext.data.Store",{fields:["title","option_id"],data:[{title:_("24_hr"),option_id:"H:i"},{title:i18n["12 hr"],option_id:"g:i a"}]}),a.currency_decimals_store=Ext.create("Ext.data.Store",{fields:["title","option_id"],data:[{title:_("0"),option_id:"0"},{title:_("1"),option_id:"1"},{title:_("2"),option_id:"2"}]}),a.currency_dec_point_store=Ext.create("Ext.data.Store",{fields:["title","option_id"],data:[{title:_("comma"),option_id:","},{title:_("period"),option_id:"."}]}),a.currency_thousands_sep_store=Ext.create("Ext.data.Store",{fields:["title","option_id"],data:[{title:_("comma"),option_id:","},{title:_("period"),option_id:"."},{title:_("space"),option_id:" "},{title:_("none"),option_id:""}]}),a.EMAIL_METHOD_store=Ext.create("Ext.data.Store",{fields:["title","option_id"],data:[{title:"PHPMAIL",option_id:"PHPMAIL"},{title:"SENDMAIL",option_id:"SENDMAIL"},{title:"SMTP",option_id:"SMTP"}]}),a.state_country_data_type_store=Ext.create("Ext.data.Store",{fields:["title","option_id"],data:[{title:_("text_field"),option_id:"2"},{title:_("single_selection_list"),option_id:"1"},{title:_("single_selection_list_with_ability_to_add_to_the_list"),option_id:"26"}]}),a.dummyStore=new Ext.data.ArrayStore({fields:["title","option_id"],data:[[_("option_1"),"Option 1"],[_("option_2"),"Option 2"],[_("option_3"),"Option 3"],[_("option_5"),"Option 5"],[_("option_6"),"Option 6"],[_("option_7"),"Option 7"]]}),a.grid=Ext.create("Ext.grid.Panel",{store:a.store,features:[{ftype:"grouping",groupHeaderTpl:_("category")+": {name}"}],plugins:[{ptype:"cellediting"}],columns:[{text:_("title"),dataIndex:"gl_name",flex:1},{text:_("value"),dataIndex:"gl_value",flex:1,editor:{xtype:"textfield"}},{text:_("category"),dataIndex:"gl_category"}]}),a.pageBody=[a.grid],a.callParent(arguments)
},onGloblasSave:function(a,b){var c=(a.getRecord(),a.getValues());Globals.updateGlobals(c,function(){b.load()}),this.msg(_("new_global_configuration_saved"),_("refresh_the_application"))},onActive:function(a){this.store.load(),a(!0)}}),Ext.define("App.view.administration.Layout",{extend:"App.ux.RenderPanel",id:"panelLayout",pageTitle:_("layout_form_editor"),pageLayout:"border",initComponent:function(){var a=this;a.currForm=null,a.currField=null,a.fieldsGridStore=Ext.create("App.store.administration.LayoutTree"),a.fieldXTypesStore=Ext.create("App.store.administration.XtypesComboModel"),a.formsGridStore=Ext.create("App.store.administration.FormsList"),a.parentFieldsStore=Ext.create("App.store.administration.ParentFields"),a.selectListoptionsStore=Ext.create("App.store.administration.FormListOptions"),a.selectListGrid=Ext.create("Ext.grid.Panel",{store:a.selectListoptionsStore,collapseMode:"mini",height:200,split:!0,border:!1,titleCollapse:!1,hideCollapseTool:!0,collapsible:!0,collapsed:!0,columns:[{text:_("name"),flex:1,sortable:!1,dataIndex:"option_name"},{text:_("value"),flex:1,sortable:!1,dataIndex:"option_value"}]}),a.fieldForm=Ext.create("Ext.form.Panel",{flex:2,border:!1,autoScroll:!0,fieldDefaults:{msgTarget:"side",labelWidth:100},defaults:{anchor:"100%"},items:[{fieldLabel:_("type"),xtype:"combo",name:"xtype",displayField:"name",valueField:"value",allowBlank:!1,editable:!1,store:a.fieldXTypesStore,queryMode:"local",margin:"5 5 5 10",itemId:"xtype",listeners:{scope:a,change:a.onXtypeChange}},{fieldLabel:_("child_of"),xtype:"combo",name:"parentId",displayField:"name",valueField:"value",editable:!1,hideTrigger:!0,allowBlank:!1,store:a.parentFieldsStore,queryMode:"local",margin:"5 5 5 10",emptyText:"None",itemId:"parentFields",listeners:{scope:a,expand:a.onParentFieldsExpand}},{xtype:"fieldset",itemId:"aditionalProperties",title:_("aditional_properties"),margin:"0 5 5 5",defaults:{anchor:"100%"},items:[{fieldLabel:_("title"),xtype:"textfield",name:"title",itemId:"title",allowBlank:!1,hidden:!0},{fieldLabel:_("field_label"),xtype:"textfield",name:"fieldLabel",itemId:"fieldLabel",hidden:!0},{fieldLabel:_("box_label"),xtype:"textfield",name:"boxLabel",itemId:"boxLabel",allowBlank:!1,hidden:!0},{fieldLabel:_("label_width"),xtype:"textfield",name:"labelWidth",itemId:"labelWidth",hidden:!0},{fieldLabel:_("hide_label"),xtype:"checkbox",name:"hideLabel",itemId:"hideLabel",hidden:!0},{fieldLabel:_("empty_text"),xtype:"textfield",name:"emptyText",itemId:"emptyText",hidden:!0},{fieldLabel:_("layout"),xtype:"textfield",name:"layout",itemId:"layout",hidden:!0},{fieldLabel:_("name"),xtype:"textfield",name:"name",itemId:"name",allowBlank:!1,hidden:!0,listeners:{scope:a,change:a.onNameValueChange}},{fieldLabel:_("input_value"),xtype:"textfield",name:"inputValue",itemId:"inputValue",hidden:!0},{fieldLabel:_("width"),xtype:"textfield",name:"width",itemId:"width",emptyText:"ei. 5 for 5px",hidden:!0},{fieldLabel:_("height"),xtype:"textfield",name:"height",itemId:"height",emptyText:"ei. 5 for 5px",hidden:!0},{fieldLabel:_("anchor"),xtype:"textfield",name:"anchor",itemId:"anchor",emptyText:"ei. 100%",hidden:!0},{fieldLabel:_("flex"),xtype:"checkbox",name:"flex",itemId:"flex",hidden:!0},{fieldLabel:_("collapsible"),xtype:"checkbox",name:"collapsible",itemId:"collapsible",hidden:!0},{fieldLabel:_("checkbox_toggle"),xtype:"checkbox",name:"checkboxToggle",itemId:"checkboxToggle",hidden:!0},{fieldLabel:_("collapsed"),xtype:"checkbox",name:"collapsed",itemId:"collapsed",hidden:!0},{fieldLabel:_("margin"),xtype:"textfield",name:"margin",itemId:"margin",emptyText:"ei. 5 5 5 5",hidden:!0},{fieldLabel:_("column_width"),xtype:"textfield",name:"columnWidth",itemId:"columnWidth",emptyText:"ei. .5",hidden:!0},{fieldLabel:_("is_required"),xtype:"checkbox",name:"allowBlank",itemId:"allowBlank",hidden:!0},{fieldLabel:_("min_length"),xtype:"numberfield",name:"minLength",itemId:"minLength",minValue:0,hidden:!0},{fieldLabel:_("max_length"),xtype:"numberfield",name:"maxLength",itemId:"maxLength",minValue:0,hidden:!0},{fieldLabel:_("value"),xtype:"textfield",name:"value",itemId:"value",hidden:!0},{fieldLabel:_("max_value"),xtype:"textfield",name:"maxValue",itemId:"maxValue",hidden:!0},{fieldLabel:_("min_value"),xtype:"textfield",name:"minValue",itemId:"minValue",hidden:!0},{fieldLabel:_("max_value"),xtype:"timefield",name:"maxValue",itemId:"timeMaxValue",hidden:!0},{fieldLabel:_("min_value"),xtype:"timefield",name:"minValue",itemId:"timeMinValue",hidden:!0},{fieldLabel:_("grow"),xtype:"checkbox",name:"grow",itemId:"grow",hidden:!0},{fieldLabel:_("grow_min"),xtype:"textfield",name:"growMin",itemId:"growMin",hidden:!0},{fieldLabel:_("grow_max"),xtype:"textfield",name:"growMax",itemId:"growMax",hidden:!0},{fieldLabel:_("increment"),xtype:"textfield",name:"increment",itemId:"increment",hidden:!0},{fieldLabel:_("list_options"),xtype:"mitos.listscombo",name:"list_id",itemId:"list_id",hidden:!0,allowBlank:!1,listeners:{scope:a,change:a.onSelectListSelect}},{fieldLabel:_("code"),xtype:"textfield",name:"code",itemId:"code",emptyText:"ei. SNOMED:254687942 or ICD10:H25.091",hidden:!0},{fieldLabel:_("item_id"),xtype:"textfield",name:"itemId",itemId:"itemId",emptyText:"sencha itemId",hidden:!0},{fieldLabel:_("action"),xtype:"textfield",name:"action",itemId:"action",emptyText:"sencha action",hidden:!0}]}]}),a.formContainer=Ext.create("Ext.panel.Panel",{title:_("field_configuration"),border:!0,split:!0,width:390,region:"east",layout:{type:"vbox",align:"stretch"},bodyStyle:"background-color:#fff!important",items:[a.fieldForm,a.selectListGrid],buttons:[{text:_("delete"),iconCls:"icoDeleteBlack",scope:a,handler:a.onFieldDelete},{text:_("reset"),iconCls:"icoReload",scope:a,handler:a.onFormReset},{text:_("save"),iconCls:"save",scope:a,handler:a.onFieldSave}],dockedItems:[{xtype:"toolbar",items:["->",{text:_("add_new"),iconCls:"icoAddRecord",scope:a,handler:a.onFormReset},"-",{text:_("add_child"),iconCls:"icoAddRecord",itemId:"addChild",disabled:!0,scope:a,handler:a.onAddChild},"-",{text:_("form_preview"),iconCls:"icoPreview",enableToggle:!0,listeners:{scope:a,toggle:a.onFormPreview}}]}]}),a.fieldsGrid=Ext.create("Ext.tree.Panel",{store:a.fieldsGridStore,region:"center",border:!0,sortable:!1,rootVisible:!1,title:_("field_editor_demographics"),viewConfig:{plugins:{ptype:"treeviewdragdrop",expandDelay:0,allowParentInsert:!1},listeners:{scope:a,drop:a.onDragDrop,itemkeydown:a.onFieldKeyDown}},columns:[{xtype:"treecolumn",text:_("field_type"),sortable:!1,dataIndex:"xtype",width:200,align:"left"},{text:_("title"),sortable:!1,dataIndex:"title",width:100,align:"left"},{text:_("label"),sortable:!1,dataIndex:"fieldLabel",flex:1,align:"left"}],listeners:{scope:a,selectionchange:a.onFieldsGridSelectionChange}}),a.formsGrid=Ext.create("Ext.grid.Panel",{title:_("form_list"),region:"west",store:a.formsGridStore,width:200,border:!0,split:!0,hideHeaders:!0,columns:[{dataIndex:"id",hidden:!0},{flex:1,sortable:!0,dataIndex:"name"}],listeners:{scope:a,itemclick:a.onFormGridItemClick}}),a.fromPreview=Ext.create("Ext.form.Panel",{region:"south",height:300,collapsible:!0,titleCollapse:!1,hideCollapseTool:!0,collapsed:!0,border:!0,split:!0,collapseMode:"header",bodyStyle:"padding: 5px",layout:"anchor",fieldDefaults:{msgTarget:"side"},tools:[{itemId:"refresh",type:"refresh",scope:a,handler:a.previewFormRender}]}),a.pageBody=[a.fieldsGrid,a.formsGrid,a.formContainer,a.fromPreview],a.callParent(arguments)},onFieldSave:function(){var a=this,b=a.fieldForm.getForm(),c=b.getRecord(),d=a.fieldsGridStore,e=d.getNodeById(c.data.parentId)||d.getRootNode(),f=b.getValues();b.isValid()&&(f.form_id=c.data.form_id,f.leaf="fieldcontainer"!=f.xtype&&"fieldset"!=f.xtype,c.set(f),""==c.data.id&&e.appendChild(c),a.fieldsGridStore.sync({success:function(b,d){a.previewFormRender(),a.loadCurrFormParentField(),say(b),say(d),""==c.data.id&&(say(b.proxy.reader.rawData.id),c.set({id:b.proxy.reader.rawData.id}),c.commit()),a.fieldsGrid.getSelectionModel().select(c),a.msg("Sweet!",_("record_saved"))},failure:function(b){c.remove(),a.msg("Oops!",b.proxy.reader.rawData.message,!0),a.loadFieldsGrid()}}))},deleteField:function(a){var b=this;return say(a.childNodes),a.childNodes.length>0?void b.msg(_("oops"),_("children_fields_must_be_remove_first"),!0):void Ext.Msg.show({title:_("please_confirm")+"...",icon:Ext.MessageBox.QUESTION,msg:_("delete_this_field"),buttons:Ext.Msg.YESNO,scope:this,fn:function(c){"yes"==c&&(a.remove(),b.fieldsGridStore.sync({success:function(){b.previewFormRender(),b.msg("Sweet!",_("record_removed"))},failure:function(a){b.msg("Oops!",a.proxy.reader.rawData.message,!0),b.loadFieldsGrid()}}))}})},onFieldKeyDown:function(a,b,c,d,e){e.getKey()==e.DELETE&&this.deleteField(b)},onFieldDelete:function(){var a=this,b=a.fieldForm.getForm(),c=b.getRecord();a.deleteField(c)},onDragDrop:function(){var a=this;a.fieldsGridStore.sync({success:function(){a.previewFormRender(),a.msg("Sweet!","Field Updated")},failure:function(b){Ext.Msg.alert("Oops!",b.proxy.reader.rawData.error),a.loadFieldsGrid()}})},onFormReset:function(){var a=this,b=a.fieldForm,c=b.getForm(),d=a.fieldsGrid.getSelectionModel(),e=Ext.create("App.model.administration.LayoutTree",{form_id:a.currForm,parentId:"root"});d.deselectAll(),c.reset(),c.loadRecord(e)},onNameValueChange:function(a){a.setDisabled(0!=a.up("form").getForm().getRecord().data.id)},onAddChild:function(){var a=this,b=a.fieldForm,c=b.getForm(),d=a.fieldsGrid.getSelectionModel();d.deselectAll(),c.reset(),c.loadRecord(Ext.create("App.model.administration.LayoutTree",{form_id:a.currForm,parentId:a.currField}))},onFieldsGridSelectionChange:function(a,b){var c=this,d=c.fieldForm,e=d.getForm();b.length>0?(e.loadRecord(b[0]),c.currField=b[0].data.id,"fieldset"==b[0].data.xtype||"fieldcontainer"==b[0].data.xtype?c.formContainer.down("toolbar").getComponent("addChild").enable():c.formContainer.down("toolbar").getComponent("addChild").disable(),d.el.unmask()):c.onFormReset()},onFormGridItemClick:function(a,b){var c=this;c.currForm=b.get("id"),c.fieldsGrid.setTitle(_("field_editor")+" ("+b.get("name")+")"),c.loadFieldsGrid(),c.onFormReset()},onSelectListSelect:function(a,b){var c=this;c.selectListoptionsStore.load({params:{list_id:b}})},onParentFieldsExpand:function(a){a.picker.loadMask.destroy()},onXtypeChange:function(a,b){function c(a){for(var b=0;b<g.length;b++)a.find(g[b])?(f.getComponent(g[b]).show(),f.getComponent(g[b]).enable()):(f.getComponent(g[b]).hide(),f.getComponent(g[b]).disable())}var d=this;"combobox"==b?(d.selectListGrid.setTitle(_("select_list_options")),d.selectListGrid.expand(),d.selectListGrid.enable()):(d.selectListGrid.setTitle(""),d.selectListGrid.collapse(),d.selectListGrid.disable()),Array.prototype.find=function(a){for(var b=!1,c=0;c<this.length;c++)"function"==typeof a?a.test(this[c])&&(b||(b=[]),b.push(c)):this[c]===a&&(b||(b=[]),b.push(c));return b};var e,f=d.fieldForm.getComponent("aditionalProperties"),g=f.items.keys;e="fieldset"==b?["itemId","action","title","collapsible","collapsed","checkboxToggle","margin","columnWidth","layout"]:"fieldcontainer"==b?["itemId","action","fieldLabel","labelWidth","hideLabel","width","layout","margin","columnWidth"]:"combobox"==b?["itemId","action","name","width","emptyText","fieldLabel","hideLabel","labelWidth","margin","allowBlank","list_id"]:"checkbox"==b?["itemId","action","name","width","boxLabel","inputValue","fieldLabel","hideLabel","labelWidth","margin"]:"textfield"==b?["itemId","action","name","width","anchor","emptyText","fieldLabel","hideLabel","labelWidth","allowBlank","margin","minLength","maxLength"]:"textareafield"==b?["itemId","action","name","width","anchor","height","emptyText","fieldLabel","hideLabel","labelWidth","allowBlank","grow","growMin","growMax","margin","minLength","maxLength"]:"numberfield"==b?["itemId","action","name","width","value","emptyText","maxValue","minValue","increment","fieldLabel","labelWidth","hideLabel","margin"]:"timefield"==b?["itemId","action","name","width","value","emptyText","timeMaxValue","timeMinValue","increment","fieldLabel","labelWidth","hideLabel","margin"]:"radiofield"==b?["itemId","action","name","width","boxLabel","labelWidth","hideLabel","margin","inputValue"]:"datefield"==b||"mitos.datetime"==b?["itemId","action","name","width","value","layout","emptyText","fieldLabel","labelWidth","hideLabel","allowBlank","margin"]:"checkboxwithfamilyhistory"==b?["itemId","action","name","width","boxLabel","inputValue","fieldLabel","hideLabel","labelWidth","margin","code"]:["itemId","action","name","width","emptyText","fieldLabel","labelWidth","hideLabel","margin"],c(e)},onFormPreview:function(a,b){var c=this;b===!0?(c.fromPreview.expand(!1),c.previewFormRender()):c.fromPreview.collapse(!1)},previewFormRender:function(){var a=this,b=this.fromPreview;b.collapsed!==!0&&(b.el.mask(),a.getFormItems(b,a.currForm,function(){b.el.unmask()}))},loadFieldsGrid:function(){var a=this;a.fieldsGridStore.load({params:{currForm:a.currForm}}),a.loadCurrFormParentField(),a.previewFormRender(),a.fieldsGrid.doLayout()},loadCurrFormParentField:function(){var a=this;a.parentFieldsStore.load({params:{currForm:a.currForm}})},onActive:function(a){var b=this,c=b.formsGrid.getSelectionModel();null===b.currForm&&b.formsGridStore.load({filters:[{property:"active",value:1}],callback:function(a){c.select(a[0]),b.currForm=a[0].data.id,b.loadFieldsGrid(),b.onFormReset()}}),a(!0)}}),Ext.define("App.view.administration.Lists",{extend:"App.ux.RenderPanel",id:"panelLists",pageTitle:_("select_list_options"),pageLayout:"border",uses:["App.ux.form.Panel","Ext.grid.plugin.RowEditing"],initComponent:function(){var a=this;a.listsStore=Ext.create("App.store.administration.Lists"),a.optionsStore=Ext.create("App.store.administration.ListOptions",{remoteFilter:!0}),a.optionsRowEditing=Ext.create("Ext.grid.plugin.RowEditing",{}),a.listsRowEditing=Ext.create("Ext.grid.plugin.RowEditing",{}),a.listsGrid=Ext.create("Ext.grid.Panel",{store:a.listsStore,itemId:"listsGrid",plugins:[a.listsRowEditing],width:320,margin:"0 2 0 0",region:"west",columns:[{width:30,dataIndex:"id"},{text:_("select_lists"),flex:1,sortable:!1,dataIndex:"title",editor:{xtype:"textfield",allowBlank:!1}},{text:_("active"),width:55,sortable:!1,dataIndex:"active",renderer:a.boolRenderer,editor:{xtype:"checkbox",padding:"0 0 0 18"}},{text:_("in_use"),width:55,sortable:!1,dataIndex:"in_use",renderer:a.boolRenderer}],listeners:{scope:a,select:a.onListsGridClick},dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:_("new_list"),iconCls:"icoAddRecord",scope:a,handler:a.onNewList},"->",{text:_("delete_list"),iconCls:"icoDeleteBlack",itemId:"listDeleteBtn",disabled:!0,scope:a,handler:a.onListDelete,tooltip:_("can_be_disable")}]}]}),a.optionsGrid=Ext.create("Ext.grid.Panel",{store:a.optionsStore,itemId:"optionsGrid",plugins:[a.optionsRowEditing],region:"center",viewConfig:{plugins:{ptype:"gridviewdragdrop",dragText:_("drag_and_drop_reorganize")},listeners:{scope:a,drop:a.onDragDrop}},columns:[{xtype:"rownumberer"},{text:_("option_title"),width:200,sortable:!0,dataIndex:"option_name",editor:{allowBlank:!1,enableKeyEvents:!0,listeners:{scope:a,keyup:a.onOptionTitleChange}}},{text:_("option_value"),width:200,sortable:!0,dataIndex:"option_value",editor:{allowBlank:!1,itemId:"optionValueTextField"}},{text:_("code"),sortable:!0,dataIndex:"code",width:120,editor:{allowBlank:!0}},{text:_("code_type"),sortable:!0,dataIndex:"code_type",width:100,editor:{allowBlank:!0}},{text:_("notes"),sortable:!0,dataIndex:"notes",flex:1,width:100,editor:{allowBlank:!0}},{text:_("active"),width:55,sortable:!1,dataIndex:"active",renderer:a.boolRenderer,editor:{xtype:"checkbox",margin:0}}],dockedItems:[{xtype:"toolbar",dock:"top",items:["->",{text:_("add_option"),iconCls:"icoAddRecord",scope:a,handler:a.onNewOption}]}]}),a.pageBody=[a.listsGrid,a.optionsGrid],a.callParent(arguments)},onNewList:function(){var a=this;a.listsRowEditing.cancelEdit(),a.listsStore.insert(0,Ext.create("App.model.administration.Lists")),a.listsRowEditing.startEdit(0,0)},onListsGridClick:function(a,b){var c=this,d=c.listsGrid.down("toolbar").getComponent("listDeleteBtn"),e="1"==!!b.data.in_use,f=b.data.id;c.optionsStore.clearFilter(!0),c.optionsStore.filter([{property:"list_id",value:f}]),e?d.disable():d.enable()},onNewOption:function(){var a,b=this,c=b.getCurrList();c!==!1&&(b.optionsRowEditing.cancelEdit(),a=Ext.create("App.model.administration.ListOptions",{list_id:c}),b.optionsStore.insert(0,a),b.optionsRowEditing.startEdit(0,0))},onOptionTitleChange:function(){},onDragDrop:function(a,b,c){for(var d=this,e=c.stores[0].data.items,f=d.getCurrList(),g=[],h=0;h<e.length;h++)Ext.Array.push(g,e[h].data.id);var i={list_id:b.records[0].data.list_id,fields:g};Lists.sortOptions(i,function(){d.optionsStore.clearFilter(!0),d.optionsStore.filter([{property:"list_id",value:f}])})},onListDelete:function(a){var b=this,c=a.up("grid"),d=c.getStore(),e=c.getSelectionModel(),f=e.getLastSelected();f.data.in_use?Ext.Msg.alert("Oops!",_("unable_to_delete")+' "'+f.data.title+'"<br>'+_("list_currently_used_forms")+"."):Ext.Msg.show({title:_("please_confirm")+"...",icon:Ext.MessageBox.QUESTION,msg:_("delete_this_record"),buttons:Ext.Msg.YESNO,scope:b,fn:function(a){"yes"==a&&(d.remove(f),d.sync({success:function(){b.msg("Sweet!",_("record_deleted")),b.optionsStore.removeAll()},failure:function(){b.msg("Oops!",_("unable_to_delete")+' "'+f.data.title,!0)}}))}})},getCurrList:function(){var a=this.listsGrid.getSelectionModel().getSelection();return a.length>0?a[0].data.id:!1},onActive:function(a){var b=this;b.listsStore.load(),a(!0)}}),Ext.define("App.view.administration.Modules",{extend:"App.ux.RenderPanel",id:"panelModules",pageTitle:_("modules"),initComponent:function(){var a=this;a.store=Ext.create("App.store.administration.Modules"),a.grid=Ext.create("Ext.grid.Panel",{store:a.store,plugins:[a.edditing=Ext.create("Ext.grid.plugin.RowEditing",{clicksToEdit:2,errorSummary:!1})],columns:[{text:_("title"),width:200,sortable:!0,dataIndex:"title"},{text:_("description"),flex:1,sortable:!0,dataIndex:"description"},{text:_("version"),width:100,sortable:!0,dataIndex:"installed_version"},{text:_("key_if_required"),flex:1,sortable:!0,dataIndex:"licensekey",editor:{xtype:"textfield"}},{text:_("enabled?"),width:60,sortable:!0,renderer:a.boolRenderer,dataIndex:"enable",editor:{xtype:"checkbox"}}]}),a.pageBody=[a.grid],a.callParent(arguments)},onActive:function(a){this.store.load(),a(!0)}}),Ext.define("App.view.administration.Log",{extend:"App.ux.RenderPanel",id:"panelLog",uses:["Ext.grid.Panel"],pageTitle:_("event_history_log"),initComponent:function(){var a=this;a.fullMode=window.innerWidth>=a.minWidthToFullMode,a.logStore=Ext.create("App.store.administration.AuditLog"),a.patient={pid:null},a.logGrid=Ext.create("Ext.grid.Panel",{store:a.logStore,columns:[{text:"id",sortable:!1,dataIndex:"id",hidden:!0},{width:120,text:_("date_created"),sortable:!0,dataIndex:"date",renderer:Ext.util.Format.dateRenderer("Y-m-d g:i:s a")},{width:180,text:_("user"),sortable:!0,dataIndex:"user"},{width:200,text:_("patient_record_id"),sortable:!0,dataIndex:"patient_id"},{flex:1,text:_("event"),sortable:!0,dataIndex:"event"}],listeners:{scope:this,itemclick:a.onItemclick,itemdblclick:a.onItemdblclick},tbar:Ext.create("Ext.PagingToolbar",{store:a.logStore,displayInfo:!0,emptyMsg:_("no_office_notes_to_display"),plugins:Ext.create("Ext.ux.SlidingPager",{}),items:[{xtype:"button",text:_("view_log_event_details"),iconCls:"edit",itemId:"detail",disabled:!0,handler:function(){a.winLog.show()}},{xtype:"datefield",name:"from",labelWidth:30,width:150,fieldLabel:_("from"),format:"Y-m-d"},{xtype:"datefield",name:"to",labelWidth:30,width:150,fieldLabel:_("to"),format:"Y-m-d",value:new Date},{xtype:"patienlivetsearch",emptyText:_("patient_live_search")+"...",fieldStyle:a.fullMode?"width:300":"width:250",listeners:{scope:a,select:a.liveSearchSelect}},{xtype:"button",text:_("filter"),listeners:{click:function(){a.logStore.load({filters:[{property:"patient_id",value:a.patient.pid},{property:"date",operator:">=",value:this.up("toolbar").query("datefield[name=from]")[0].getRawValue()},{property:"date",operator:"<=",value:this.up("toolbar").query("datefield[name=to]")[0].getRawValue()}]})}}},{xtype:"button",text:_("reset"),listeners:{click:function(){this.up("toolbar").query("datefield[name=from]")[0].setRawValue(""),this.up("toolbar").query("datefield[name=to]")[0].setValue(new Date),this.up("toolbar").query("patienlivetsearch")[0].reset(),a.logStore.load()}}}]})}),a.winLog=Ext.create("Ext.window.Window",{title:_("log_event_details"),width:500,closeAction:"hide",items:[{xtype:"form",bodyStyle:"padding: 10px;",autoWidth:!0,border:!1,hideLabels:!0,defaults:{labelWidth:89,anchor:"100%",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}}},items:[{xtype:"textfield",hidden:!0,name:"id"},{fieldLabel:_("date"),xtype:"displayfield",name:"date"},{fieldLabel:_("event"),xtype:"displayfield",name:"event"},{fieldLabel:_("user"),xtype:"displayfield",name:"user"},{fieldLabel:_("facility"),xtype:"displayfield",name:"facility"},{fieldLabel:_("patient_record_id"),xtype:"displayfield",name:"patient_id"}]}],buttons:[{text:_("close"),handler:function(){this.up("window").hide()}}]}),a.pageBody=[a.logGrid],a.callParent(arguments)},onItemclick:function(a,b){var c=this.winLog.down("form"),d=this.logGrid.down("toolbar").getComponent("detail");c.getForm().loadRecord(b),d.enable()},onItemdblclick:function(a,b){var c=this.winLog.down("form");c.getForm().loadRecord(b),this.winLog.show()},onActive:function(a){this.logStore.load(),a(!0)},liveSearchSelect:function(a,b){var c=this,d=b[0];d&&c.setPatient(d.get("pid"),null,function(){a.reset(),c.openPatientSummary()})},openPatientSummary:function(){var a=this;a.navigateTo("App.view.patient.Summary",function(b){b&&Ext.Function.defer(function(){a.getPanelByCls("App.view.patient.Summary").onActive()},100)})},setPatient:function(a){var b=this;b.patient={pid:a}}}),Ext.define("App.view.administration.Medications",{extend:"App.ux.RenderPanel",id:"panelMedications",pageTitle:_("medications"),initComponent:function(){var a=this;a.query="",a.storeMedications=Ext.create("App.store.administration.Medications"),a.medicationsGrid=Ext.create("Ext.grid.Panel",{region:"center",store:a.storeMedications,columns:[{width:70,header:_("number"),dataIndex:"PRODUCTNDC",sortable:!0},{width:80,header:_("name"),dataIndex:"PROPRIETARYNAME",sortable:!0},{width:200,header:_("active_component"),dataIndex:"NONPROPRIETARYNAME",sortable:!0},{width:175,header:_("dosage"),dataIndex:"DOSAGEFORMNAME",sortable:!0},{width:45,header:_("number"),dataIndex:"ACTIVE_NUMERATOR_STRENGTH",sortable:!0},{flex:1,header:_("unit"),dataIndex:"ACTIVE_INGRED_UNIT",sortable:!0}],plugins:Ext.create("App.ux.grid.RowFormEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:1,enableRemove:!0,items:[{title:"general",xtype:"container",padding:10,layout:"vbox",items:[{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 5 0"},items:[{xtype:"textfield",fieldLabel:_("name"),width:150,labelWidth:50,name:"PROPRIETARYNAME"},{xtype:"textfield",fieldLabel:_("active_component"),width:350,labelWidth:125,name:"NONPROPRIETARYNAME"},{xtype:"textfield",fieldLabel:_("dosage"),width:200,labelWidth:50,name:"DOSAGEFORMNAME"}]},{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 5 0"},items:[{xtype:"textfield",fieldLabel:_("code"),labelWidth:50,width:150,name:"PRODUCTNDC"},{xtype:"textfield",fieldLabel:_("dosis"),margin:"0 0 5 0",value:0,minValue:0,width:275,labelWidth:125,name:"ACTIVE_NUMERATOR_STRENGTH"},{xtype:"textfield",name:"ACTIVE_INGRED_UNIT",width:75}]}]}]}),tbar:Ext.create("Ext.PagingToolbar",{store:a.storeMedications,displayInfo:!0,emptyMsg:_("no_office_notes_to_display"),plugins:Ext.create("Ext.ux.SlidingPager"),items:["-",{text:"Add New",scope:a,handler:a.onAddMedication},"-",{xtype:"textfield",emptyText:_("search"),enableKeyEvents:!0,itemId:"query",listeners:{scope:a,keyup:a.onSearchMedications,buffer:500}},"-",{text:_("reset"),scope:a,handler:a.onFieldReset},{text:"Print",iconCls:"icon-print",handler:function(){App.ux.grid.Printer.printAutomatically=!1,App.ux.grid.Printer.print(this.up("grid"))}}]})}),a.pageBody=[a.medicationsGrid],a.callParent(arguments)},onFieldReset:function(){},onAddMedication:function(){this.medicationsGrid.editingPlugin.cancelEdit(),this.storeMedications.insert(0,{}),this.medicationsGrid.editingPlugin.startEdit(0,0)},onSearchMedications:function(a){var b=this,c=b.storeMedications;b.query=a.getValue(),c.proxy.extraParams={query:b.query},c.load()},onActive:function(){this.medicationsGrid.down("toolbar").getComponent("query").reset(),this.storeMedications.proxy.extraParams={},this.storeMedications.load()}}),Ext.define("App.view.administration.FloorPlans",{extend:"App.ux.RenderPanel",id:"panelFloorPlans",pageTitle:_("floor_plan_editor"),pageLayout:"border",floorPlanId:null,activeZone:null,initComponent:function(){var a=this;a.floorPlansStore=Ext.create("App.store.administration.FloorPlans"),a.floorZonesStore=Ext.create("App.store.administration.FloorPlanZones"),a.floorPlans=Ext.create("Ext.grid.Panel",{title:_("floor_plans"),region:"west",width:200,split:!0,hideHeaders:!0,store:a.floorPlansStore,plugins:[a.floorPlanEditing=Ext.create("Ext.grid.plugin.RowEditing",{clicksToEdit:2})],columns:[{dataIndex:"title",sortable:!1,hideable:!1,flex:1,editor:{xtype:"textfield",emptyText:_("new_floor")}}],tbar:[{text:_("add_floor"),action:"newFloorPlan",iconCls:"icoAdd",scope:a,handler:a.onNewFloorPlan},"-",{text:_("remove_floor"),action:"newFloorPlan",iconCls:"icoDelete",scope:a,handler:a.onRemoveFloorPlan}],listeners:{scope:a,select:a.onFloorPlanSelected}}),a.floorPlanZones=Ext.create("Ext.panel.Panel",{title:_("floor_plan"),region:"center",bodyCls:"floorPlan",layout:"absolute",tbar:[{text:_("add_zone"),action:"newZone",iconCls:"icoAdd",scope:a,handler:a.onNewZone}]}),a.floorPlanZoneEditor=Ext.create("Ext.window.Window",{title:_("zone_editor"),closeAction:"hide",closable:!1,resizable:!1,items:[{xtype:"form",border:!1,bodyPadding:"10",defaults:{labelWidth:130,anchor:"100%"},items:[{xtype:"textfield",fieldLabel:_("zone_name"),name:"title"},{xtype:"colorcombo",fieldLabel:_("bg_color"),name:"bg_color"},{xtype:"colorcombo",fieldLabel:_("border_color"),name:"border_color"},{xtype:"numberfield",fieldLabel:_("width"),minValue:30,maxValue:300,name:"width"},{xtype:"numberfield",fieldLabel:_("height"),minValue:30,maxValue:300,name:"height"},{xtype:"checkbox",fieldLabel:_("show_priority_color"),name:"show_priority_color"},{xtype:"checkbox",fieldLabel:_("show_patient_preview"),name:"show_patient_preview"},{xtype:"checkbox",fieldLabel:_("active"),name:"active"}]}],buttons:[{text:_("remove"),xtype:"button",scope:a,handler:a.onZoneRemove},"->",{text:_("cancel"),xtype:"button",scope:a,handler:a.onZoneCancel},"-",{text:_("save"),xtype:"button",scope:a,handler:a.onZoneSave}],listeners:{scope:a,afterrender:function(a){a.alignTo(this.floorPlanZones.getEl(),"tr-tr",[-130,70])}}}),a.listeners={show:function(){a.nav=Ext.create("Ext.util.KeyNav",Ext.getDoc(),{scope:a,left:function(){a.moveZone("left")},up:function(){a.moveZone("up")},right:function(){a.moveZone("right")},down:function(){a.moveZone("down")}})},hide:function(){a.nav&&Ext.destroy(a.nav),a.setEditMode(!1)}},a.pageBody=[a.floorPlans,a.floorPlanZones],a.callParent(arguments)},setEditMode:function(a,b){var c=this,d=c.activeZone?c.activeZone.getEl():null;d?c.setEditor(a,b):c.setEditor(a,b)},setEditor:function(a,b){say("setEditor");var c=this;a?(c.activeZone=b,c.getEditor().zone=b,c.floorPlanZones.focus(),c.getEditor().getForm().loadRecord(b.record),c.floorPlanZoneEditor.hidden&&c.floorPlanZoneEditor.show(b.getEl())):(c.floorPlanZoneEditor.hide(),c.getEditor().getForm().reset(),c.activeZone=null)},getEditor:function(){return this.floorPlanZoneEditor.down("form")},onZoneCancel:function(){var a,b=this,c=b.activeZone,d=c.record;d.reject(),a={text:d.data.title,scale:d.data.scale,style:{"border-color":d.data.border_color,"background-color":d.data.bg_color},width:d.data.width,height:d.data.height},b.activeZone.setPosition(d.data.x,d.data.y),b.applyZoneConfig(c,a),b.setEditMode(!1)},onZoneSave:function(){var a,b=this,c=b.getEditor(),d=c.getForm(),e=d.getValues(),f=d.getRecord();f.set(e),a={text:f.data.title,scale:f.data.scale,style:{"border-color":f.data.border_color,"background-color":f.data.bg_color},width:f.data.width,height:f.data.height},f.store.sync(),b.applyZoneConfig(c.zone,a),b.setEditMode(!1)},onZoneHandler:function(a){var b=this;b.setEditMode(!0,a)},onZoneRemove:function(){var a=this,b=this.getEditor(),c=b.getForm(),d=c.getRecord(),e=b.zone;Ext.Msg.show({title:"Wait!",msg:_("remove_final_notice")+' <span style="font-weight: bold">"'+d.data.title+'"</span>?',buttons:Ext.Msg.YESNO,icon:Ext.Msg.WARNING,fn:function(c){"yes"==c&&(a.floorZonesStore.remove(d),a.floorZonesStore.sync({success:function(){a.floorPlanZones.remove(e,!0),b.up("window").hide()}}))}})},onRemoveFloorPlan:function(a){var b=this,c=a.up("grid"),d=c.store,e=c.getSelectionModel(),f=e.getLastSelected();Ext.Msg.show({title:"Wait!",msg:_("remove_final_notice")+' <span style="font-weight: bold">"'+f.data.title+'"</span>?',buttons:Ext.Msg.YESNO,icon:Ext.Msg.WARNING,fn:function(a){"yes"==a&&(d.remove(f),d.sync({callback:function(){e.deselectAll(),b.floorPlanZones.removeAll(),b.msg("Sweet!",_("record_removed"))}}))}})},onNewZone:function(){var a=this;a.floorZonesStore.add({floor_plan_id:a.floorPlanId,title:_("new_zone"),x:5,y:5,show_priority_color:1,show_patient_preview:1,active:0}),a.floorZonesStore.sync({callback:function(b){a.createZone(b.operations[0].records[0])}})},createZone:function(a){var b,c=this;b=c.floorPlanZones.add(Ext.create("Ext.button.Split",{text:a.data.title,draggable:{listeners:{scope:c,dragend:c.zoneDragged}},scale:a.data.scale,style:{"border-color":a.data.border_color,"background-color":a.data.bg_color},x:a?a.data.x:5,y:a?a.data.y:5,width:a.data.width,height:a.data.height,scope:c,handler:c.onZoneHandler})),b.record=a},applyZoneConfig:function(a,b){say(b),a.setText(b.text),a.getEl().applyStyles(b.style),a.setScale(b.scale),a.setSize(b.width,b.height)},moveZone:function(a){if(app.currCardCmp==this&&null!=this.activeZone){var b=this.activeZone.x,c=this.activeZone.y;"left"==a?b-=1:"right"==a?b+=1:"up"==a?c-=1:"down"==a&&(c+=1),this.activeZone.setPosition(b,c),this.activeZone.record.set({x:b,y:c})}},zoneDragged:function(a){var b=a.comp;b.record.set({x:b.x,y:b.y})},onNewFloorPlan:function(){this.floorPlansStore.add({})},onFloorPlanSelected:function(a,b){this.setEditMode(!1),this.floorPlanId=b.data.id,this.reloadFloorPlanZones()},reloadFloorPlanZones:function(){var a=this;a.floorPlanZones.removeAll(),a.floorZonesStore.load({params:{floor_plan_id:this.floorPlanId},scope:a,callback:function(b){a.setEditMode(!1);for(var c=0;c<b.length;c++)a.createZone(b[c])}})},onActive:function(a){var b=this;b.floorPlansStore.load({callback:function(){b.floorPlans.getSelectionModel().select(0)}}),a(!0)}}),Ext.define("App.view.administration.PreventiveCare",{extend:"App.ux.RenderPanel",id:"panelPreventiveCare",pageTitle:_("preventive_care"),uses:["Ext.grid.Panel","App.ux.combo.CodesTypes","App.ux.combo.Titles"],initComponent:function(){var a=this;a.active=1,a.dataQuery="",a.category_id="3",a.store=Ext.create("App.store.administration.PreventiveCare"),a.activeProblemsStore=Ext.create("App.store.administration.PreventiveCareActiveProblems"),a.medicationsStore=Ext.create("App.store.administration.PreventiveCareMedications"),a.labsStore=Ext.create("App.store.administration.PreventiveCareLabs"),a.guidelineGrid=Ext.create("Ext.grid.Panel",{region:"center",store:a.store,columns:[{xtype:"actioncolumn",width:30,items:[{icon:"resources/images/icons/delete.png",tooltip:_("remove"),handler:function(a,b){a.getStore().getAt(b)
},getClass:function(){return"x-grid-icon-padding"}}]},{flex:1,header:_("description"),sortable:!0,dataIndex:"description"},{width:100,header:_("age_start"),sortable:!0,dataIndex:"age_start"},{width:100,header:_("age_end"),sortable:!0,dataIndex:"age_end"},{width:100,header:_("sex"),sortable:!0,dataIndex:"sex"},{width:100,header:_("frequency"),sortable:!0,dataIndex:"frequency"}],plugins:Ext.create("App.ux.grid.RowFormEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:1,listeners:{scope:a,beforeedit:a.beforeServiceEdit,edit:a.onServiceEdit,canceledit:a.onServiceCancelEdit},items:[{xtype:"tabpanel",action:_("immunizations"),layout:"fit",plain:!0,listeners:{scope:a,tabchange:a.onFormTapChange},items:[{title:_("general"),xtype:"container",padding:10,layout:"vbox",items:[{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 5 0",action:"field"},items:[{xtype:"textfield",fieldLabel:_("description"),name:"description",labelWidth:130,width:703},{xtype:"gaiaehr.sexcombo",fieldLabel:_("sex"),name:"sex",width:100,labelWidth:30},{fieldLabel:_("active"),xtype:"checkboxfield",labelWidth:75,name:"active"}]},{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 5 0",action:"field"},items:[{xtype:"mitos.codestypescombo",fieldLabel:_("coding_system"),labelWidth:130,value:"CVX",name:"coding_system",readOnly:!0},{xtype:"numberfield",fieldLabel:_("frequency"),margin:"0 0 5 0",value:0,minValue:0,width:150,name:"frequency"},{xtype:"mitos.timecombo",name:"frequency_time",width:100},{xtype:"numberfield",fieldLabel:_("age_start"),name:"age_start",labelWidth:75,width:140,value:0,minValue:0},{fieldLabel:_("must_be_pregnant"),xtype:"checkboxfield",labelWidth:105,name:"pregnant"}]},{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 5 0",action:"field"},items:[{xtype:"textfield",fieldLabel:_("code"),name:"code",labelWidth:130},{xtype:"numberfield",fieldLabel:_("times_to_perform"),name:"times_to_perform",width:250,value:0,minValue:0,tooltip:_("greater_than_1_or_just_check_perform_once")},{xtype:"numberfield",fieldLabel:_("age_end"),name:"age_end",labelWidth:75,width:140,value:0,minValue:0},{fieldLabel:_("perform_only_once"),xtype:"checkboxfield",labelWidth:105,name:"only_once"}]}]},{title:_("active_problems"),action:"problems",xtype:"grid",margin:5,store:a.activeProblemsStore,columns:[{xtype:"actioncolumn",width:20,items:[{icon:"resources/images/icons/delete.png",tooltip:_("remove"),scope:a,handler:a.onRemoveRelation}]},{header:_("code"),width:100,dataIndex:"code"},{header:_("description"),flex:1,dataIndex:"code_text"}],bbar:{xtype:"liveicdxsearch",margin:5,fieldLabel:_("add_problem"),hideLabel:!1,listeners:{scope:a,select:a.addActiveProblem}}},{title:_("medications"),action:"medications",xtype:"grid",width:300,store:a.medicationsStore,columns:[{xtype:"actioncolumn",width:20,items:[{icon:"resources/images/icons/delete.png",tooltip:_("remove"),scope:a,handler:a.onRemoveRelation}]},{header:_("code"),width:100,dataIndex:"code"},{header:_("description"),flex:1,dataIndex:"code_text"}],bbar:{xtype:"medicationlivetsearch",margin:5,fieldLabel:_("add_problem"),hideLabel:!1,listeners:{scope:a,select:a.addMedications}}},{title:_("labs"),action:"labs",xtype:"grid",store:a.labsStore,width:300,columns:[{xtype:"actioncolumn",width:20,items:[{icon:"resources/images/icons/delete.png",tooltip:_("remove"),scope:a,handler:a.onRemoveRelation}]},{header:_("value_name"),flex:1,dataIndex:"value_name"},{header:_("less_than"),flex:1,dataIndex:"less_than",editor:{xtype:"numberfield"}},{header:_("greater_than"),flex:1,dataIndex:"greater_than",editor:{xtype:"numberfield"}},{header:_("equal_to"),flex:1,dataIndex:"equal_to",editor:{xtype:"numberfield"}}],plugins:Ext.create("Ext.grid.plugin.CellEditing",{autoCancel:!0,errorSummary:!1,clicksToEdit:2,listeners:{scope:a,edit:a.afterLabTimeEdit}}),bbar:{xtype:"labslivetsearch",margin:5,fieldLabel:_("add_labs"),hideLabel:!1,listeners:{scope:a,select:a.addLabs}}}]}]}),tbar:a.PagingToolbar=Ext.create("Ext.PagingToolbar",{store:a.store,displayInfo:!0,emptyMsg:_("no_office_notes_to_display"),plugins:Ext.create("Ext.ux.SlidingPager",{}),items:["-",{xtype:"mitos.preventivecaretypescombo",width:150,listeners:{scope:a,select:a.onCodeTypeSelect}}]})}),a.pageBody=[a.guidelineGrid],a.callParent(arguments)},onServiceEdit:function(){},onServiceCancelEdit:function(){},afterLabTimeEdit:function(){},beforeServiceEdit:function(a,b){for(var c=a.editor,d=c.query("grid"),e=0;e<d.length;e++)d[e].store.load({params:{id:b.record.data.id}})},onFormTapChange:function(){},onCodeTypeSelect:function(a,b){var c=this;c.category_id=b[0].data.option_value,"dismiss"==c.category_id||(c.PagingToolbar.moveFirst(),c.store.proxy.extraParams={category_id:c.category_id},c.store.load())},addActiveProblem:function(a,b){this.activeProblemsStore.add({code:b[0].data.code,code_text:b[0].data.code_text,guideline_id:this.getSelectId()}),a.reset()},addMedications:function(a,b){this.medicationsStore.add({code:b[0].data.id,code_text:b[0].data.PROPRIETARYNAME,guideline_id:this.getSelectId()}),a.reset()},addLabs:function(a,b){this.labsStore.add({code:b[0].data.loinc_number,value_name:b[0].data.loinc_name,less_than:"0",greater_than:"0",equal_to:"0",preventive_care_id:this.getSelectId()}),a.reset()},onRemoveRelation:function(a,b){var c=a.getStore(),d=c.getAt(b);c.remove(d)},getSelectId:function(){var a=this.guidelineGrid.getSelectionModel().getLastSelected();return a.data.id},onActive:function(a){this.guidelineGrid.query("combobox")[0].setValue(this.category_id),this.store.proxy.extraParams={category_id:this.category_id},this.store.load(),a(!0)}}),Ext.define("App.view.administration.Roles",{extend:"App.ux.RenderPanel",requires:["App.ux.combo.XCombo","Ext.grid.plugin.CellEditing","Ext.ux.DataTip"],itemId:"AdministrationRolePanel",pageTitle:_("roles_and_permissions"),pageBody:[{xtype:"grid",bodyStyle:"background-color:white",itemId:"AdministrationRoleGrid",frame:!0,columnLines:!0,tbar:[{xtype:"xcombo",emptyText:_("select"),labelWidth:50,width:250,valueField:"id",displayField:"title",queryMode:"local",store:Ext.create("App.store.administration.AclGroups"),itemId:"AdministrationRoleGroupCombo",windowConfig:{title:_("add_group")},formConfig:{border:!1,bodyPadding:10,items:[{xtype:"textfield",fieldLabel:_("group_name"),name:"title"},{xtype:"checkbox",fieldLabel:_("active"),name:"active"}]}},"-","->","-",{xtype:"button",text:_("add_role"),iconCls:"icoAdd",action:"adminAclAddRole"},"-"],features:[{ftype:"grouping"}],plugins:[{ptype:"cellediting",clicksToEdit:1},{ptype:"datatip",tpl:_("click_to_edit")}],columns:[{text:"Permission",width:250,locked:!0}]}],pageButtons:[{text:_("cancel"),cls:"cancelBtn",action:"adminAclCancel"},"-",{text:_("save"),cls:"saveBtn",action:"adminAclSave"}]}),Ext.define("App.view.administration.ExternalDataLoads",{extend:"App.ux.RenderPanel",id:"panelExternalDataLoads",pageTitle:_("external_data_loads"),pageLayout:{type:"accordion",animate:!0,activeOnTop:!0},initComponent:function(){var a=this;a.stores=[],a.stores.push(a.icd9Store=Ext.create("App.store.administration.ExternalDataLoads",{codeType:"ICD9"})),a.stores.push(a.icd10Store=Ext.create("App.store.administration.ExternalDataLoads",{codeType:"ICD10",groupField:"version"})),a.stores.push(a.rxnormStore=Ext.create("App.store.administration.ExternalDataLoads",{codeType:"RXNORM"})),a.stores.push(a.snomedStore=Ext.create("App.store.administration.ExternalDataLoads",{codeType:"SNOMED"})),a.stores.push(a.hcpcsStore=Ext.create("App.store.administration.ExternalDataLoads",{codeType:"HCPCS"})),a.icd9Grid=a.getCodeGrid("Available ICD9 Data",a.icd9Store,!1),a.icd10Grid=a.getCodeGrid("Available ICD10 Data",a.icd10Store,!0),a.rxnormGrid=a.getCodeGrid("Available RxNorm Data",a.rxnormStore,!1),a.snomedGrid=a.getCodeGrid("Available SNOMED Data",a.snomedStore,!1),a.hcpcsGrid=a.getCodeGrid("Available HCPCS Data",a.hcpcsStore,!1),a.icd9Form=a.getCodeForm("ICD9"),a.icd10Form=a.getCodeForm("ICD10"),a.rxnormForm=a.getCodeForm("RXNORM"),a.snomedForm=a.getCodeForm("SNOMED"),a.hcpcsForm=a.getCodeForm("HCPCS"),a.icd9=Ext.create("Ext.form.Panel",{title:_("update_icd9"),layout:"border",items:[a.icd9Grid,a.icd9Form]}),a.icd10=Ext.create("Ext.panel.Panel",{title:_("update_icd10"),layout:"border",items:[a.icd10Grid,a.icd10Form]}),a.rxnorm=Ext.create("Ext.panel.Panel",{title:_("update_rxnorm"),layout:"border",items:[a.rxnormGrid,a.rxnormForm]}),a.snomed=Ext.create("Ext.panel.Panel",{title:_("update_snomed"),layout:"border",items:[a.snomedGrid,a.snomedForm]}),a.hcpcs=Ext.create("Ext.panel.Panel",{title:_("update_hcpcs"),layout:"border",items:[a.hcpcsGrid,a.hcpcsForm]}),a.pageBody=[a.icd9,a.icd10,a.rxnorm,a.snomed,a.hcpcs],a.callParent(arguments)},getCodeForm:function(a){var b=this;return Ext.create("Ext.form.Panel",{bodyPadding:10,region:"center",action:a,frame:!0,bodyStyle:"background-color:white",bodyBorder:!0,margin:"5 0 5 0",items:[{xtype:"fieldset",styleHtmlContent:!0,action:a,title:_("current_version_installed"),html:_("no_data_installed"),tpl:_("revision_name")+":  {revision_name}<br>"+_("revision_number")+":  {revision_number}<br>"+_("revision_version")+": {revision_version}<br>"+_("revision_date")+":    {revision_date}<br>"+_("imported_on")+":      {imported_date}"},{xtype:"fieldset",title:_("installation"),action:"installation",styleHtmlContent:!0,html:b.getInstallationDetails(a)},{xtype:"fieldset",title:_("upload"),action:"upload",items:[{xtype:"filefield",name:"filePath",buttonText:i18n["Select file"]+"...",emptyText:_("data_file"),width:350,labelWidth:50,allowBlank:!1}]}],api:{submit:ExternalDataUpdate.updateCodesWithUploadFile},buttons:[{text:_("update"),action:a,scope:b,handler:b.uploadFile}]})},getCodeGrid:function(a,b,c){var d=this;return Ext.create("Ext.grid.Panel",{title:a,store:b,region:"west",width:500,margin:"5 0 5 0",padding:0,split:!0,columns:d.getDefaultColumns(),listeners:{scope:d,itemdblclick:d.onCodeDblClick},features:c?[{ftype:"grouping"}]:[]})},getDefaultColumns:function(){return[{header:_("date"),dataIndex:"date",width:98},{header:_("version"),dataIndex:"version",width:98},{header:_("file"),dataIndex:"basename",width:300}]},getInstallationDetails:function(a){return"ICD9"==a?'<p>Steps to install the ICD 9 data:</p><ol><li>The raw data feed release can be obtained from <a href="https://www.cms.gov/Medicare/Coding/ICD9ProviderDiagnosticCodes/codes.html">this location</a></li><li>Upload the downloaded .zip file, or place the downloaded ICD 9 database zip file into the following directory: contrib/icd9</li><li>Double Click the zip file from the "Available ICD9 Data" grid to install</li></ol><p style="color:red">NOTE: Importing external data can take more than an hour depending on your hardware configuration. For example, one of the RxNorm data tables contain in excess of 6 million rows.</p>':"ICD10"==a?'<p>Steps to install the ICD 10 data:</p><ol><li>The raw data feed release can be obtained from <a href="https://www.cms.gov/Medicare/Coding/ICD10">this location</a></li><li>Upload the downloaded .zip file, or place the downloaded ICD 10 database zip files into the following directory: contrib/icd10</li><li>Double Click the zip file from the "Available ICD10 Data" grid to install</li></ol><p>These are the ICD10 2012 links:</p><ol><li><a href="https://www.cms.gov/Medicare/Coding/ICD10/Downloads/DiagnosisGEMs_2012.zip">DiagnosisGEMs_2012</a></li><li><a href="https://www.cms.gov/Medicare/Coding/ICD10/Downloads/ProcedureGEMs_2012.zip">ProcedureGEMs_2012</a></li><li><a href="https://www.cms.gov/Medicare/Coding/ICD10/Downloads/ReimbursementMapping_2012.zip">ReimbursementMapping_2012</a></li><li><a href="https://www.cms.gov/Medicare/Coding/ICD10/Downloads/2012_PCS_long_and_abbreviated_titles.zip">2012_PCS_long_and_abbreviated_titles</a></li><li><a href="https://www.cms.gov/Medicare/Coding/ICD10/Downloads/ICD10OrderFiles_2012.zip">ICD10OrderFiles_2012</a></li></ol><p style="color:red">NOTE: Importing external data can take more than an hour depending on your hardware configuration. For example, one of the RxNorm data tables contain in excess of 6 million rows.</p>':"RXNORM"==a?'<p>Steps to install the RxNorm data:</p><ol><li>The first step is to open an account with the Unified Medical Language System web site <a href="https://utslogin.nlm.nih.gov/cas/login">here</a></li><li>Then the raw data feed release can be obtained from <a href="http://www.nlm.nih.gov/research/umls/rxnorm/docs/rxnormfiles.html">this location</a></li><li>Upload the downloaded .zip file, or place the downloaded RxNorm database zip file into the following directory: contrib/rxnorm.</li><li>Double Click the zip file from the "Available RxNorm Data" grid to install</li></ol><p style="color:red">NOTE: Only the full monthly RxNorm release is currently supported</p>':"SNOMED"==a?"Lorem ipsum dolor sit amet, porta nam suscipit sed id, vestibulum velit tortor velit viverra, non enim justo, purus nec, libero sociis lobortis, eu et leo mauris velit. Magnis tellus blandit fringilla, morbi mauris commodo, nec morbi ac non":"HCPCS"==a?'<p>Steps to install the HCPCS data:</p><ol><li>The raw data feed release can be obtained from <a href="http://www.cms.gov/Medicare/Coding/HCPCSReleaseCodeSets/Alpha-Numeric-HCPCS.html">this location</a></li><li>Upload the downloaded .zip file, or place the downloaded zip files into the following directory: contrib/hcpcs</li><li>Double Click the zip file from the "Available HCPCS Data" grid to install</li></ol><p>These is the HCPCS 2013 direct link:</p><ol><li><a href="http://www.cms.gov/Medicare/Coding/HCPCSReleaseCodeSets/Downloads/13anweb.zip">13anweb</a></li></ol><p style="color:red">NOTE: Importing external data can take more than an hour depending on your hardware configuration.</p>':void 0},uploadFile:function(a){var b=this,c=a.up("form").getForm();c.isValid()&&c.submit({waitMsg:_("uploading_and_updating_code_database")+"...",scope:b,params:{codeType:a.action},success:function(a,b){say(b.result)},failure:function(a,b){say(b.result)}})},onCodeDblClick:function(a,b){var c=this,d=app.log;d.ActivityMonitor(!1),a.el.mask(_("installing_database_please_wait")+"..."),ExternalDataUpdate.updateCodes(b.data,function(b,e){a.el.unmask(),e.result.success?(c.setCurrentCodesInfo(),c.alert(_("new_database_installed"),"info")):c.alert(e.result.error,"error"),d.ActivityMonitor(!0)})},setCurrentCodesInfo:function(){var a,b,c=this;ExternalDataUpdate.getCurrentCodesInfo(function(d,e){a=e.result;for(var f=0;f<a.length;f++)a[f].data!==!1&&(b=c.query('fieldset[action="'+a[f].data.codeType+'"]')[0],b.update(a[f].data))})},loadStores:function(){for(var a=this,b=0;b<a.stores.length;b++)a.stores[b].load({params:{pid:a.pid}})},onActive:function(a){this.loadStores(),this.setCurrentCodesInfo(),a(!0)}}),Ext.define("App.view.miscellaneous.MySettings",{extend:"App.ux.RenderPanel",id:"panelMySettings",pageTitle:_("my_settings"),uses:["Ext.grid.Panel"],initComponent:function(){var a=this;a.uSettingsForm=Ext.create("App.ux.form.Panel",{id:"uSettingsForm",bodyStyle:"padding: 10px;",cls:"form-white-bg",frame:!0,hideLabels:!0,items:[{xtype:"textfield",hidden:!0,id:"id",name:"id"},{xtype:"fieldset",title:_("appearance_settings"),collapsible:!0,defaultType:"textfield",layout:"anchor",defaults:{labelWidth:89,anchor:"100%",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}}},items:[{},{},{}]},{xtype:"fieldset",title:_("locale_settings"),collapsible:!0,defaultType:"textfield",layout:"anchor",defaults:{labelWidth:89,anchor:"100%",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}}},items:[{},{},{}]},{xtype:"fieldset",title:_("calendar_settings"),collapsible:!0,defaultType:"textfield",layout:"anchor",defaults:{labelWidth:89,anchor:"100%",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}}},items:[{},{},{}]}],dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:_("save"),iconCls:"save",id:"cmdSave",disabled:!0,handler:function(){}}]}]}),a.pageBody=[a.uSettingsForm],a.callParent(arguments)},onActive:function(a){a(!0)}}),Ext.define("App.view.miscellaneous.OfficeNotes",{extend:"App.ux.RenderPanel",id:"panelOfficeNotes",pageTitle:_("office_notes"),pageLayout:"border",initComponent:function(){var a=this;a.store=Ext.create("App.store.miscellaneous.OfficeNotes"),a.form=Ext.create("Ext.form.FormPanel",{region:"north",frame:!0,height:97,margin:"0 0 3 0",items:[{xtype:"textareafield",allowBlank:!1,grow:!0,margin:0,itemId:"body",name:"body",anchor:"100%",emptyText:_("type_new_note_here")+"...",listeners:{scope:a,validitychange:a.onValidityChange}}],dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:_("save"),iconCls:"save",itemId:"cmdSave",disabled:!0,scope:a,handler:a.onNoteSave},"-",{text:_("hide_this_note"),iconCls:"save",itemId:"cmdHide",tooltip:_("hide_selected_office_note"),disabled:!0,scope:a,handler:a.onNoteHide},"-",{text:_("reset"),iconCls:"save",itemId:"cmdReset",disabled:!0,scope:a,handler:a.onFormReset}]}]}),a.grid=Ext.create("Ext.grid.Panel",{region:"center",store:a.store,listeners:{scope:a,itemclick:a.onItemClick},columns:[{width:150,header:_("date"),sortable:!0,dataIndex:"date",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{width:150,header:_("user"),sortable:!0,dataIndex:"user"},{flex:1,header:_("note"),sortable:!0,dataIndex:"body"}],tbar:Ext.create("Ext.PagingToolbar",{store:a.store,displayInfo:!0,emptyMsg:_("no_office_notes_to_display"),plugins:Ext.create("Ext.ux.SlidingPager",{}),items:[{text:_("show_only_active_notes"),iconCls:"save",enableToggle:!0,pressed:!0,handler:function(){a.store.load({params:{show:"active"}})}},"-",{text:_("show_all_notes"),iconCls:"save",enableToggle:!0,handler:function(){a.store.load({params:{show:"all"}})}}]})}),a.pageBody=[a.form,a.grid],a.callParent(arguments)},onNoteSave:function(a){var b=a.up("form").getForm(),c=this.store,d=b.getRecord(),e=b.getValues(),f=c.indexOf(d);-1==f?c.add(e):d.set(e),c.sync()},onNoteHide:function(){},onFormReset:function(){var a=this.form,b=a.getForm(),c=a.down("toolbar"),d=c.getComponent("cmdSave"),e=c.getComponent("cmdHide"),f=c.getComponent("cmdReset");b.reset(),d.disable(),e.disable(),f.disable(),d.setText("Save")},onItemClick:function(a,b){var c=this.form,d=c.getForm(),e=c.down("toolbar"),f=e.getComponent("cmdSave"),g=e.getComponent("cmdHide"),h=e.getComponent("cmdReset");d.reset(),d.loadRecord(b),f.enable(),g.enable(),h.enable(),f.setText("Update")},onValidityChange:function(){var a=this.form,b=a.getComponent("body"),c=a.down("toolbar"),d=c.getComponent("cmdSave"),e=c.getComponent("cmdReset");b.isValid()?(d.enable(),e.enable()):d.disable()},onActive:function(a){this.store.load({params:{show:"active"}}),a(!0)}}),Ext.define("App.view.miscellaneous.Websearch",{extend:"App.ux.RenderPanel",id:"panelWebsearch",pageTitle:_("national_library"),pageLayout:"border",uses:["Ext.grid.Panel"],initComponent:function(){var a,b,c,d=this;Ext.ModelManager.isRegistered("webSearch")||(d.store=Ext.create("App.store.miscellaneous.webSearch"),d.codingStore=Ext.create("Ext.data.Store",{fields:["search","name"],data:[{search:"code",name:"Code"},{search:"term",name:"Term"}]})),d.searchPanel=Ext.create("Ext.panel.Panel",{region:"north",bodyPadding:"8 11 5 11",margin:"0 0 2 0",layout:"anchor",items:[{xtype:"radiogroup",fieldLabel:_("search_by"),items:[{boxLabel:_("heath_topics"),name:"type",inputValue:"health_topics"},{boxLabel:"SNOMED CT",name:"type",inputValue:"snomed"},{boxLabel:"RxCUI",name:"type",inputValue:"rxcui"},{boxLabel:"LOINC",name:"type",inputValue:"loinc"},{boxLabel:"NDC",name:"type",inputValue:"ndc"},{boxLabel:"ICD-9-CM",name:"type",inputValue:"icd9cm"}],listeners:{change:function(){var b=this.getValue();a=b.type,d.searchField.enable(),d.searchField.reset()}}},d.termField=Ext.create("Ext.form.ComboBox",{name:"term",fieldLabel:_("code_term")+":",store:d.codingStore,anchor:"100%",queryMode:"local",displayField:"name",valueField:"search",editable:!1,listeners:{change:function(){b=this.getValue()}}}),d.searchField=Ext.create("Ext.form.field.Text",{emptyText:_("web_search")+"...",enableKeyEvents:!0,hideLabel:!0,anchor:"100%",disabled:!0,listeners:{keyup:function(){var c=this.getValue();c.length>2&&d.store.load({params:{type:a,q:c,term:b}})},buffer:500,focus:function(){d.viewPanel.collapse()}}})]}),d.searchRow=function(a,b,c){return Ext.String.format('<div class="topic"><span class="search_title">{0}</span><br><span class="search_source">{1}</span><br><span class="search_snippet" style="white-space: normal;">{2}</span></div>',a,c.get("source")||"Unknown",c.get("snippet")||"Unknown")},d.onotesGrid=Ext.create("Ext.grid.Panel",{margin:"0 0 2 0",region:"center",store:d.store,viewConfig:{deferEmptyText:!1,emptyText:'<p class="search_nothing_found" style="padding: 10px 0 0 20px; font-size: 24px">'+_("nothing_found")+"!</p>",stripeRows:!0,loadingText:_("searching")+"... "+_("please_wait")},columns:[{flex:1,header:_("search_results"),sortable:!0,dataIndex:"title",renderer:d.searchRow},{hidden:!0,sortable:!0,dataIndex:"source"},{hidden:!0,sortable:!0,dataIndex:"snippet"}],tbar:Ext.create("Ext.PagingToolbar",{store:d.store,displayInfo:!0,emptyMsg:_("nothing_to_display"),plugins:Ext.create("Ext.ux.SlidingPager",{})}),listeners:{itemclick:function(a,b,e,f){c=d.store.getAt(f),d.viewPanel.update(c.data),d.viewPanel.expand()}}}),d.viewPanel=Ext.create("Ext.panel.Panel",{region:"south",height:300,collapsible:!0,collapsed:!0,layout:"fit",frame:!0,bodyBorder:!0,tpl:Ext.create("Ext.XTemplate",'<div class="search_container">','<div class="search_data">','<h3 class="search_title">'+_("title")+": {title}</h3>",'<h4 class="search_source">'+_("source")+": {source}</h4>","</div>",'<div class="search_body">{FullSummary}</div>',"</div>")}),d.pageBody=[d.searchPanel,d.onotesGrid,d.viewPanel],d.callParent(arguments),d.termField.select("code")},onActive:function(a){a(!0)}}),Ext.define("App.view.signature.SignatureWindow",{extend:"Ext.window.Window",title:_("please_sign"),closeAction:"hide",height:250,width:500,bodyStyle:"background-color:#fff",modal:!0,layout:"fit",initComponent:function(){var a=this;a.html=a.signature='<iframe id="svgSignature" src="app/view/signature/signature.svg" height="100%" width="100%" scrolling="no" frameborder="0"></iframe>',a.buttons=[{text:_("save"),scope:a,handler:a.signatureSave},{text:_("reset"),scope:a,handler:a.signatureCancel}],this.callParent(arguments)},signatureSave:function(){var a=document.getElementById("svgSignature").contentWindow;say(a.getSignature())},signatureCancel:function(){var a=document.getElementById("svgSignature").contentWindow;a.clearSignature()}}),Ext.define("App.store.miscellaneous.AddressBook",{model:"App.model.miscellaneous.AddressBook",extend:"Ext.data.Store"}),Ext.define("App.store.patient.CarePlanGoals",{extend:"Ext.data.Store",requires:["App.model.patient.CarePlanGoal"],model:"App.model.patient.CarePlanGoal"}),Ext.define("App.store.patient.CognitiveAndFunctionalStatus",{extend:"Ext.data.Store",requires:["App.model.patient.CognitiveAndFunctionalStatus"],model:"App.model.patient.CognitiveAndFunctionalStatus"}),Ext.define("App.store.patient.SmokeStatus",{extend:"Ext.data.Store",requires:["App.model.patient.SmokeStatus"],model:"App.model.patient.SmokeStatus",remoteFilter:!0}),Ext.define("App.store.patient.PatientPossibleDuplicates",{extend:"Ext.data.Store",model:"App.model.patient.PatientPossibleDuplicate"}),Ext.define("App.store.administration.ActiveProblems",{model:"App.model.administration.ActiveProblems",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:Services.getActiveProblems,create:Services.addActiveProblems,destroy:Services.removeActiveProblems},reader:{totalProperty:"totals",root:"rows"}},autoLoad:!1}),Ext.define("App.store.administration.Applications",{model:"App.model.administration.Applications",extend:"Ext.data.Store",autoSync:!0,autoLoad:!1}),Ext.define("App.store.administration.DefaultDocuments",{model:"App.model.administration.DefaultDocuments",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:DocumentHandler.getDefaultDocumentsTemplates,create:DocumentHandler.addDocumentsTemplates,update:DocumentHandler.updateDocumentsTemplates}},autoSync:!0,autoLoad:!1}),Ext.define("App.store.administration.DocumentsTemplates",{model:"App.model.administration.DocumentsTemplates",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:"DocumentHandler.getDocumentsTemplates",create:"DocumentHandler.addDocumentsTemplates",update:"DocumentHandler.updateDocumentsTemplates"}},autoSync:!0,autoLoad:!1}),Ext.define("App.store.administration.ExternalDataLoads",{model:"App.model.administration.ExternalDataLoads",extend:"Ext.data.Store",constructor:function(a){var b=this;b.proxy={type:"direct",api:{read:ExternalDataUpdate.getCodeFiles},extraParams:{codeType:a.codeType}},b.callParent(arguments)},remoteSort:!1,autoLoad:!1}),Ext.define("App.store.administration.DocumentToken",{model:"App.model.administration.DocumentToken",extend:"Ext.data.Store",data:[{title:_("patient_id"),token:"[PATIENT_ID]"},{title:_("patient_name"),token:"[PATIENT_NAME]"},{title:_("patient_full_name"),token:"[PATIENT_FULL_NAME]"},{title:_("patient_mothers_maiden_name"),token:"[PATIENT_MAIDEN_NAME]"},{title:_("patient_last_name"),token:"[PATIENT_LAST_NAME]"},{title:_("patient_birthdate"),token:"[PATIENT_BIRTHDATE]"},{title:_("patient_marital_status"),token:"[PATIENT_MARITAL_STATUS]"},{title:_("patient_home_phone"),token:"[PATIENT_HOME_PHONE]"},{title:_("patient_mobile_phone"),token:"[PATIENT_MOBILE_PHONE]"},{title:_("patient_work_phone"),token:"[PATIENT_WORK_PHONE]"},{title:_("patient_email"),token:"[PATIENT_EMAIL]"},{title:_("patient_social_security"),token:"[PATIENT_SOCIAL_SECURITY]"},{title:_("patient_sex"),token:"[PATIENT_SEX]"},{title:_("patient_age"),token:"[PATIENT_AGE]"},{title:_("patient_city"),token:"[PATIENT_CITY]"},{title:_("patient_state"),token:"[PATIENT_STATE]"},{title:_("patient_home_address_line_1"),token:"[PATIENT_HOME_ADDRESS_LINE_ONE]"},{title:_("patient_home_address_line_1"),token:"[PATIENT_HOME_ADDRESS_LINE_TWO]"},{title:_("patient_home_address_zip_code"),token:"[PATIENT_HOME_ADDRESS_ZIP_CODE]"},{title:_("patient_home_address_city"),token:"[PATIENT_HOME_ADDRESS_CITY]"},{title:_("patient_home_address_state"),token:"[PATIENT_HOME_ADDRESS_STATE]"},{title:_("patient_postal_address_line_1"),token:"[PATIENT_POSTAL_ADDRESS_LINE_ONE]"},{title:_("patient_postal_address_line_2"),token:"[PATIENT_POSTAL_ADDRESS_LINE_TWO]"},{title:_("patient_postal_address_zip_code"),token:"[PATIENT_POSTAL_ADDRESS_ZIP_CODE]"},{title:_("patient_postal_address_city"),token:"[PATIENT_POSTAL_ADDRESS_CITY]"},{title:_("patient_postal_address_state"),token:"[PATIENT_POSTAL_ADDRESS_STATE]"},{title:_("patient_tabacco"),token:"[PATIENT_TABACCO]"},{title:_("patient_alcohol"),token:"[PATIENT_ALCOHOL]"},{title:_("patient_drivers_license"),token:"[PATIENT_DRIVERS_LICENSE]"},{title:_("patient_employeer"),token:"[PATIENT_EMPLOYEER]"},{title:_("patient_first_emergency_contact"),token:"[PATIENT_FIRST_EMERGENCY_CONTACT]"},{title:_("patient_referral"),token:"[PATIENT_REFERRAL]"},{title:_("patient_date_referred"),token:"[PATIENT_REFERRAL_DATE]"},{title:_("patient_balance"),token:"[PATIENT_BALANCE]"},{title:_("patient_picture"),token:"[PATIENT_PICTURE]"},{title:_("patient_primary_plan"),token:"[PATIENT_PRIMARY_PLAN]"},{title:_("patient_primary_plan_insured_person"),token:"[PATIENT_PRIMARY_INSURED_PERSON]"},{title:_("patient_primary_plan_contract_number"),token:"[PATIENT_PRIMARY_CONTRACT_NUMBER]"},{title:_("patient_primary_plan_expiration_date"),token:"[PATIENT_PRIMARY_EXPIRATION_DATE]"},{title:_("patient_secondary_plan"),token:"[PATIENT_SECONDARY_PLAN]"},{title:_("patient_secondary_insured_person"),token:"[PATIENT_SECONDARY_INSURED_PERSON]"},{title:_("patient_secondary_plan_contract_number"),token:"[PATIENT_SECONDARY_CONTRACT_NUMBER]"},{title:_("patient_secondary_plan_expiration_date"),token:"[PATIENT_SECONDARY_EXPIRATION_DATE]"},{title:_("patient_referral_details"),token:"[PATIENT_REFERRAL_DETAILS]"},{title:_("patient_referral_reason"),token:"[PATIENT_REFERRAL_REASON]"},{title:_("patient_head_circumference"),token:"[PATIENT_HEAD_CIRCUMFERENCE]"},{title:_("patient_height"),token:"[PATIENT_HEIGHT]"},{title:_("patient_pulse"),token:"[PATIENT_PULSE]"},{title:_("patient_respiratory_rate"),token:"[PATIENT_RESPIRATORY_RATE]"},{title:_("patient_temperature"),token:"[PATIENT_TEMPERATURE]"},{title:_("patient_weight"),token:"[PATIENT_WEIGHT]"},{title:_("patient_pulse_oximeter"),token:"[PATIENT_PULSE_OXIMETER]"},{title:_("patient_blood_preasure"),token:"[PATIENT_BLOOD_PREASURE]"},{title:_("patient_body_mass_index"),token:"[PATIENT_BMI]"},{title:_("patient_active_allergies_list"),token:"[PATIENT_ACTIVE_ALLERGIES_LIST]"},{title:_("patient_inactive_allergies_list"),token:"[PATIENT_INACTIVE_ALLERGIES_LIST]"},{title:_("patient_active_medications_list"),token:"[PATIENT_ACTIVE_MEDICATIONS_LIST]"},{title:_("patient_inactive_medications_list"),token:"[PATIENT_INACTIVE_MEDICATIONS_LIST]"},{title:_("patient_active_problems_list"),token:"[PATIENT_ACTIVE_PROBLEMS_LIST]"},{title:_("patient_inactive_problems_list"),token:"[PATIENT_INACTIVE_PROBLEMS_LIST]"},{title:_("patient_active_immunizations_list"),token:"[PATIENT_ACTIVE_IMMUNIZATIONS_LIST]"},{title:_("patient_inactive_immunizations_list"),token:"[PATIENT_INACTIVE_IMMUNIZATIONS_LIST]"},{title:_("patient_active_dental_list"),token:"[PATIENT_ACTIVE_DENTAL_LIST]"},{title:_("patient_inactive_dental_list"),token:"[PATIENT_INACTIVE_DENTAL_LIST]"},{title:_("patient_active_surgery_list"),token:"[PATIENT_ACTIVE_SURGERY_LIST]"},{title:_("patient_inactive_surgery_list"),token:"[PATIENT_INACTIVE_SURGERY_LIST]"},{title:_("encounter_date"),token:"[ENCOUNTER_DATE]"},{title:_("encounter_subjective_part"),token:"[ENCOUNTER_SUBJECTIVE]"},{title:_("encounter_subjective_part"),token:"[ENCOUNTER_OBJECTIVE]"},{title:_("encounter_assessment"),token:"[ENCOUNTER_ASSESSMENT]"},{title:_("encounter_assessment_list"),token:"[ENCOUNTER_ASSESSMENT_LIST]"},{title:_("encounter_assessment_code_list"),token:"[ENCOUNTER_ASSESSMENT_CODE_LIST]"},{title:_("encounter_assessment_full_list"),token:"[ENCOUNTER_ASSESSMENT_FULL_LIST]"},{title:_("encounter_plan"),token:"[ENCOUNTER_PLAN]"},{title:_("encounter_medications"),token:"[ENCOUNTER_MEDICATIONS]"},{title:_("encounter_immunizations"),token:"[ENCOUNTER_IMMUNIZATIONS]"},{title:_("encounter_allergies"),token:"[ENCOUNTER_ALLERGIES]"},{title:_("encounter_active_problems"),token:"[ENCOUNTER_ACTIVE_PROBLEMS]"},{title:_("encounter_surgeries"),token:"[ENCOUNTER_SURGERIES]"},{title:_("encounter_dental"),token:"[ENCOUNTER_DENTAL]"},{title:_("encounter_laboratories"),token:"[ENCOUNTER_LABORATORIES]"},{title:_("encounter_procedures_terms"),token:"[ENCOUNTER_PROCEDURES_TERMS]"},{title:_("encounter_cpt_codes_list"),token:"[ENCOUNTER_CPT_CODES]"},{title:_("encounter_signature"),token:"[ENCOUNTER_SIGNATURE]"},{title:_("orders_laboratories"),token:"[ORDERS_LABORATORIES]"},{title:_("orders_x_rays"),token:"[ORDERS_XRAYS]"},{title:_("orders_referral"),token:"[ORDERS_REFERRAL]"},{title:_("orders_other"),token:"[ORDERS_OTHER]"},{title:_("current_date"),token:"[CURRENT_DATE]"},{title:_("current_time"),token:"[CURRENT_TIME]"},{title:_("current_user_name"),token:"[CURRENT_USER_NAME]"},{title:_("current_user_full_name"),token:"[CURRENT_USER_FULL_NAME]"},{title:_("current_user_license_number"),token:"[CURRENT_USER_LICENSE_NUMBER]"},{title:_("current_user_dea_license_number"),token:"[CURRENT_USER_DEA_LICENSE_NUMBER]"},{title:_("current_user_dm_license_number"),token:"[CURRENT_USER_DM_LICENSE_NUMBER]"},{title:_("current_user_npi_license_number"),token:"[CURRENT_USER_NPI_LICENSE_NUMBER]"},{title:_("referral_id"),token:"[REFERRAL_ID]"},{title:_("referral_date"),token:"[REFERRAL_DATE]"},{title:_("referral_reason"),token:"[REFERRAL_REASON]"},{title:_("referral_diagnosis"),token:"[REFERRAL_DIAGNOSIS]"},{title:_("referral_service_request"),token:"[REFERRAL_SERVICE]"},{title:_("referral_risk_level"),token:"[REFERRAL_RISK_LEVEL]"},{title:_("referral_by"),token:"[REFERRAL_BY_TEXT]"},{title:_("referral_to"),token:"[REFERRAL_TO_TEXT]"}]}),Ext.define("App.store.administration.Facility",{model:"App.model.administration.Facility",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:"Facilities.getFacilities",create:"Facilities.addFacility",update:"Facilities.updateFacility",destroy:"Facilities.deleteFacility"}}}),Ext.define("App.store.administration.FloorPlans",{model:"App.model.administration.FloorPlans",extend:"Ext.data.Store",autoSync:!1,autoLoad:!1}),Ext.define("App.store.administration.FloorPlanZones",{extend:"Ext.data.Store",model:"App.model.administration.FloorPlanZones",autoSync:!1,autoLoad:!1}),Ext.define("App.store.administration.FormListOptions",{model:"App.model.administration.FormListOptions",extend:"Ext.data.Store",autoLoad:!1}),Ext.define("App.store.administration.FormsList",{model:"App.model.administration.FormsList",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:FormLayoutBuilder.getForms}},autoSync:!0,remoteSort:!0,autoLoad:!1}),Ext.define("App.store.administration.Globals",{requires:["App.model.administration.Globals"],model:"App.model.administration.Globals",extend:"Ext.data.Store"}),Ext.define("App.store.administration.HeadersAndFooters",{model:"App.model.administration.HeadersAndFooters",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:DocumentHandler.getHeadersAndFootersTemplates,create:DocumentHandler.addDocumentsTemplates,update:DocumentHandler.updateDocumentsTemplates}},autoSync:!0,autoLoad:!1}),Ext.define("App.store.administration.ImmunizationRelations",{model:"App.model.administration.ImmunizationRelations",extend:"Ext.data.Store",autoLoad:!1,autoSync:!0,remoteSort:!1}),Ext.define("App.store.administration.LabObservations",{model:"App.model.administration.LabObservations",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:Laboratories.getLabObservations,create:Laboratories.addLabObservation,update:Laboratories.updateLabObservation,destroy:Laboratories.removeLabObservation}},autoSync:!0,autoLoad:!1}),Ext.define("App.store.administration.LayoutTree",{model:"App.model.administration.LayoutTree",extend:"Ext.data.TreeStore",folderSort:!1,autoLoad:!1}),Ext.define("App.store.administration.ListOptions",{model:"App.model.administration.ListOptions",extend:"Ext.data.Store",pageSize:300,remoteSort:!0,sorters:[{property:"seq",direction:"ASC"}]}),Ext.define("App.store.administration.Lists",{model:"App.model.administration.Lists",extend:"Ext.data.Store",pageSize:300,sorters:[{property:"title",direction:"ASC"}]}),Ext.define("App.store.administration.AuditLog",{model:"App.model.administration.AuditLog",extend:"Ext.data.Store",autoLoad:!1}),Ext.define("App.store.administration.Medications",{model:"App.model.administration.Medications",extend:"Ext.data.Store",buffered:!0,leadingBufferZone:100,pageSize:50,remoteFilter:!0}),Ext.define("App.store.administration.Modules",{model:"App.model.administration.Modules",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:"Modules.getActiveModules",update:"Modules.updateModule"}}}),Ext.define("App.store.administration.ParentFields",{model:"App.model.administration.ParentFields",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:"FormLayoutBuilder.getParentFields"}},autoLoad:!1}),Ext.define("App.store.administration.PreventiveCare",{model:"App.model.administration.PreventiveCare",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:"PreventiveCare.getGuideLinesByCategory",create:"PreventiveCare.addGuideLine",update:"PreventiveCare.updateGuideLine"},reader:{totalProperty:"totals",root:"rows"},extraParams:{code_type:this.code_type,query:this.query,active:this.active}},autoSync:!0,remoteSort:!1,autoLoad:!1}),Ext.define("App.store.administration.PreventiveCareActiveProblems",{model:"App.model.administration.PreventiveCareActiveProblems",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:"PreventiveCare.getGuideLineActiveProblems",create:"PreventiveCare.addGuideLineActiveProblems",destroy:"PreventiveCare.removeGuideLineActiveProblems"}},remoteSort:!1,autoLoad:!1}),Ext.define("App.store.administration.PreventiveCareMedications",{model:"App.model.administration.PreventiveCareMedications",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:"PreventiveCare.getGuideLineMedications",create:"PreventiveCare.addGuideLineMedications",destroy:"PreventiveCare.removeGuideLineMedications"}},remoteSort:!1,autoLoad:!1}),Ext.define("App.store.administration.PreventiveCareLabs",{model:"App.model.administration.PreventiveCareLabs",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:"PreventiveCare.getGuideLineLabs",create:"PreventiveCare.addGuideLineLabs",destroy:"PreventiveCare.removeGuideLineLabs",update:"PreventiveCare.updateGuideLineLabs"}},remoteSort:!1,autoLoad:!1}),Ext.define("App.store.administration.Services",{model:"App.model.administration.Services",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:"DataManager.getServices",create:"DataManager.addService",update:"DataManager.updateService"},reader:{totalProperty:"totals",root:"rows"},extraParams:{code_type:this.code_type,query:this.query,active:this.active}},autoSync:!0,remoteSort:!0,autoLoad:!1}),Ext.define("App.store.administration.User",{model:"App.model.administration.User",extend:"Ext.data.Store",autoLoad:!1}),Ext.define("App.store.administration.XtypesComboModel",{model:"App.model.administration.XtypesComboModel",extend:"Ext.data.Store",proxy:{type:"direct",api:{read:"CombosData.getFiledXtypes"}},autoLoad:!0}),Ext.define("App.store.miscellaneous.OfficeNotes",{extend:"Ext.data.Store",model:"App.model.miscellaneous.OfficeNotes",autoLoad:!1}),Ext.define("App.store.account.VoucherLine",{extend:"Ext.data.Store",model:"App.model.account.VoucherLine",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.account.Voucher",{extend:"Ext.data.Store",model:"App.model.account.Voucher",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.fees.Billing",{extend:"Ext.data.Store",model:"App.model.fees.Billing",autoLoad:!1}),Ext.define("App.store.fees.Checkout",{extend:"Ext.data.Store",model:"App.model.fees.Checkout",autoLoad:!1}),Ext.define("App.store.fees.EncountersPayments",{extend:"Ext.data.Store",model:"App.model.fees.EncountersPayments",autoLoad:!1}),Ext.define("App.store.fees.PaymentTransactions",{extend:"Ext.data.Store",model:"App.model.fees.PaymentTransactions",autoLoad:!1}),Ext.define("App.store.navigation.Navigation",{extend:"Ext.data.TreeStore",requires:["App.model.navigation.Navigation"],model:"App.model.navigation.Navigation"}),Ext.define("App.store.patient.encounter.snippetTree",{model:"App.model.patient.encounter.snippetTree",extend:"Ext.data.TreeStore"}),Ext.define("App.store.patient.encounter.Procedures",{model:"App.model.patient.encounter.Procedures",extend:"Ext.data.Store",autoLoad:!1}),Ext.define("App.store.patient.CptCodes",{extend:"Ext.data.Store",model:"App.model.patient.CptCodes",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.Dental",{extend:"Ext.data.Store",model:"App.model.patient.Dental",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.Disclosures",{extend:"Ext.data.Store",model:"App.model.patient.Disclosures",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.EncounterServices",{extend:"Ext.data.Store",model:"App.model.patient.EncounterService"}),Ext.define("App.store.patient.CVXCodes",{extend:"Ext.data.Store",requires:["App.model.patient.CVXCodes"],model:"App.model.patient.CVXCodes",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.ImmunizationCheck",{extend:"Ext.data.Store",model:"App.model.patient.ImmunizationCheck",remoteSort:!0,autoLoad:!1}),Ext.define("App.store.patient.LaboratoryTypes",{extend:"Ext.data.Store",model:"App.model.patient.LaboratoryTypes",remoteSort:!1}),Ext.define("App.store.patient.MeaningfulUseAlert",{extend:"Ext.data.Store",model:"App.model.patient.MeaningfulUseAlert",remoteSort:!0,autoLoad:!1}),Ext.define("App.store.patient.Notes",{extend:"Ext.data.Store",model:"App.model.patient.Notes",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.Patient",{extend:"Ext.data.Store",model:"App.model.patient.Patient",remoteSort:!0,autoLoad:!1}),Ext.define("App.store.patient.PatientArrivalLog",{extend:"Ext.data.Store",model:"App.model.patient.PatientArrivalLog",remoteSort:!0,autoLoad:!1}),Ext.define("App.store.patient.PatientCalendarEvents",{extend:"Ext.data.Store",model:"App.model.patient.PatientCalendarEvents",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.PatientDocuments",{extend:"Ext.data.Store",model:"App.model.patient.PatientDocuments",remoteSort:!1,autoLoad:!1,autoSync:!0}),Ext.define("App.store.patient.DismissedAlerts",{extend:"Ext.data.Store",model:"App.model.patient.DismissedAlerts",remoteSort:!1,autoLoad:!1,autoSync:!0}),Ext.define("App.store.patient.PatientLabsResults",{extend:"Ext.data.Store",model:"App.model.patient.PatientLabsResults",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.PatientsLabOrderItems",{extend:"Ext.data.Store",model:"App.model.patient.PatientsLabOrderItems",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.PatientsOrderObservations",{extend:"Ext.data.Store",model:"App.model.patient.PatientsOrderObservation",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.PatientsOrderResults",{extend:"Ext.data.Store",model:"App.model.patient.PatientsOrderResult",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.PatientsPrescriptionMedications",{extend:"Ext.data.Store",model:"App.model.patient.PatientsPrescriptionMedications",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.PatientsPrescriptions",{extend:"Ext.data.Store",model:"App.model.patient.PatientsPrescriptions",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.PatientsXrayCtOrders",{extend:"Ext.data.Store",model:"App.model.patient.PatientsXrayCtOrders",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.PreventiveCare",{extend:"Ext.data.Store",model:"App.model.patient.PreventiveCare",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.QRCptCodes",{extend:"Ext.data.Store",model:"App.model.patient.QRCptCodes",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.Referrals",{extend:"Ext.data.Store",model:"App.model.patient.Referral",autoLoad:!1}),Ext.define("App.store.patient.Reminders",{extend:"Ext.data.Store",model:"App.model.patient.Reminders",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.Surgery",{extend:"Ext.data.Store",model:"App.model.patient.Surgery",remoteSort:!1,autoLoad:!1}),Ext.define("App.store.patient.VectorGraph",{extend:"Ext.data.Store",requires:["App.model.patient.VectorGraph"],model:"App.model.patient.VectorGraph"}),Ext.define("App.store.patient.VisitPayment",{extend:"Ext.data.Store",requires:["App.model.patient.VisitPayment"],model:"App.model.patient.VisitPayment"}),Ext.define("App.store.patient.Vitals",{extend:"Ext.data.Store",requires:["App.model.patient.Vitals"],pageSize:10,model:"App.model.patient.Vitals"}),Ext.define("App.store.patient.charts.BMIForAge",{extend:"Ext.data.Store",requires:["App.model.patient.charts.BMIForAge"],model:"App.model.patient.charts.BMIForAge"}),Ext.define("App.store.patient.charts.HeadCircumferenceInf",{extend:"Ext.data.Store",requires:["App.model.patient.charts.HeadCircumferenceInf"],model:"App.model.patient.charts.HeadCircumferenceInf"}),Ext.define("App.store.patient.charts.LengthForAgeInf",{extend:"Ext.data.Store",requires:["App.model.patient.charts.LengthForAgeInf"],model:"App.model.patient.charts.LengthForAgeInf"}),Ext.define("App.store.patient.charts.StatureForAge",{extend:"Ext.data.Store",requires:["App.model.patient.charts.StatureForAge"],model:"App.model.patient.charts.StatureForAge"}),Ext.define("App.store.patient.charts.WeightForAge",{extend:"Ext.data.Store",requires:["App.model.patient.charts.WeightForAge"],model:"App.model.patient.charts.WeightForAge"}),Ext.define("App.store.patient.charts.WeightForAgeInf",{extend:"Ext.data.Store",requires:["App.model.patient.charts.WeightForAgeInf"],model:"App.model.patient.charts.WeightForAgeInf"}),Ext.define("App.store.patient.charts.WeightForRecumbentInf",{extend:"Ext.data.Store",requires:["App.model.patient.charts.WeightForRecumbentInf"],model:"App.model.patient.charts.WeightForRecumbentInf"}),Ext.define("App.store.patient.charts.WeightForStature",{extend:"Ext.data.Store",requires:["App.model.patient.charts.WeightForStature"],model:"App.model.patient.charts.WeightForStature"}),Ext.define("App.store.areas.PatientAreas",{extend:"Ext.data.Store",requires:["App.model.areas.PatientArea"],model:"App.model.areas.PatientArea",pageSize:10}),Ext.define("App.store.areas.PoolAreas",{extend:"Ext.data.Store",requires:["App.model.areas.PoolArea"],model:"App.model.areas.PoolArea"}),Ext.define("App.store.areas.PoolDropAreas",{extend:"Ext.data.Store",requires:["App.model.areas.PoolDropAreas"],pageSize:10,model:"App.model.areas.PoolDropAreas"}),Ext.define("App.controller.administration.CPT",{extend:"Ext.app.Controller",refs:[{ref:"CptAdminGrid",selector:"cptadmingrid"},{ref:"AdminCpt4CodeOnlyActiveBtn",selector:"#adminCpt4CodeOnlyActiveBtn"}],init:function(){var a=this;
a.control({cptadmingrid:{activate:a.onCptAdminGridActive},"#adminCpt4CodeSearchField":{keyup:a.onAdminCpt4CodeSearchFieldKeyUp}})},onCptAdminGridActive:function(a){a.getStore().load()},onAdminCpt4CodeSearchFieldKeyUp:function(a){var b=this,c=b.getCptAdminGrid().getStore();b.dataQuery=a.getValue(),c.proxy.extraParams={onlyActive:b.getAdminCpt4CodeOnlyActiveBtn().pressed,query:b.dataQuery},c.loadPage(1)}}),Ext.define("App.controller.administration.DataPortability",{extend:"Ext.app.Controller",refs:[{ref:"DataPortabilityPanel",selector:"#DataPortabilityPanel"}],init:function(){var a=this;a.control({"#DataPortabilityExportBtn":{click:a.onDataPortabilityExportBtnClick}})},onDataPortabilityExportBtnClick:function(){var a=Ext.create("App.ux.ManagedIframe",{src:g("url")+"/dataProvider/DataPortability.php?token="+app.user.token+"&site="+g("site")});this.getDataPortabilityPanel().add(a),this.getDataPortabilityPanel().update("<p>Download will begin shortly...</p><p>This could take several minutes, depending on the amount of patients stored</p>")}}),Ext.define("App.controller.administration.FacilityStructure",{extend:"Ext.app.Controller",refs:[{ref:"FacilityStructurePanel",selector:"#FacilityStructurePanel"},{ref:"FacilityStructureTreePanel",selector:"#FacilityStructureTreePanel"}],init:function(){var a=this;a.control({"#FacilityStructurePanel":{activate:a.onFacilityStructurePanelActivate}})},onFacilityStructurePanelActivate:function(){this.getFacilityStructureTreePanel().getStore().load()}}),Ext.define("App.controller.administration.DecisionSupport",{extend:"Ext.app.Controller",refs:[{ref:"DecisionSupportAdminPanel",selector:"decisionSupportAdminPanel"},{ref:"DecisionSupportAdminGrid",selector:"#decisionSupportAdminGrid"},{ref:"DecisionSupportRuleAddBtn",selector:"#decisionSupportRuleAddBtn"},{ref:"DecisionSupportEditorTabPanel",selector:"#decisionSupportEditorTabPanel"},{ref:"DecisionSupportProcGrid",selector:"grid[action=PROC]"},{ref:"DecisionSupportProBGrid",selector:"grid[action=PROB]"},{ref:"DecisionSupportSociGrid",selector:"grid[action=SOCI]"},{ref:"DecisionSupportMediGrid",selector:"grid[action=MEDI]"},{ref:"DecisionSupportAlleGrid",selector:"grid[action=ALLE]"},{ref:"DecisionSupportLabGrid",selector:"grid[action=LAB]"},{ref:"DecisionSupportVitaGrid",selector:"grid[action=VITA]"},{ref:"DecisionSupportVitalCombo",selector:"#DecisionSupportVitalCombo"},{ref:"DecisionSupportSocialHistoryCombo",selector:"#DecisionSupportSocialHistoryCombo"}],init:function(){var a=this;a.control({"#decisionSupportAdminPanel":{activate:a.onDecisionSupportAdminPanelActive},"#decisionSupportRuleAddBtn":{click:a.onDecisionSupportRuleAddBtnClick},"#decisionSupportAdminGrid":{beforeedit:a.onDecisionSupportAdminGridBeforeEdit},"#DecisionSupportProcedureCombo":{select:a.onDecisionSupportProcedureComboSelect},"#DecisionSupportProblemCombo":{select:a.onDecisionSupportProblemComboSelect},"#DecisionSupportMedicationCombo":{select:a.onDecisionSupportMedicationComboSelect},"#DecisionSupportMedicationAllergyCombo":{select:a.onDecisionSupportMedicationAllergyComboSelect},"#DecisionSupportLabCombo":{select:a.onDecisionSupportLabComboSelect},"#DecisionSupportVitalAddBtn":{click:a.onDecisionSupportVitalAddBtnClick},"#DecisionSupportSocialHistoryAddBtn":{click:a.onDecisionSupportSocialHistoryAddBtnClick},"#DecisionSupportSocialHistoryCombo":{beforerender:a.onDecisionSupportSocialHistoryComboBeforeRender}})},onDecisionSupportAdminPanelActive:function(){this.getDecisionSupportAdminGrid().getStore().load()},onDecisionSupportRuleAddBtnClick:function(a){var b=a.up("grid");b.editingPlugin.cancelEdit(),b.getStore().insert(0,{create_date:new Date,update_date:new Date,create_uid:app.user.id,update_uid:app.user.id,active:1}),b.editingPlugin.startEdit(0,0)},onDecisionSupportAdminGridBeforeEdit:function(a,b){var c=a.editor,d=b.record,e=c.query("grid");this.getDecisionSupportEditorTabPanel().setActiveTab(0);for(var f=0;f<e.length;f++){var g=e[f],h=g.getStore();h.grid=g,h.load({filters:[{property:"rule_id",value:d.data.id},{property:"concept_type",value:g.action}],callback:function(a){this.grid.setTitle(this.grid.initialConfig.title+" ("+a.length+")")}})}},onDecisionSupportProcedureComboSelect:function(a,b){var c=a.up("grid"),d=c.getStore();c.editingPlugin.cancelEdit();var e=d.add({rule_id:this.getRuleId(),concept_type:c.action,concept_code:b[0].data.code,concept_text:b[0].data.code_text,concept_code_type:b[0].data.code_type});c.editingPlugin.startEdit(e[0],2)},onDecisionSupportProblemComboSelect:function(a,b){var c=a.up("grid"),d=c.getStore();c.editingPlugin.cancelEdit();var e=d.add({rule_id:this.getRuleId(),concept_type:c.action,concept_code:b[0].data.ConceptId,concept_text:b[0].data.FullySpecifiedName,concept_code_type:b[0].data.CodeType});c.editingPlugin.startEdit(e[0],2)},onDecisionSupportMedicationComboSelect:function(a,b){var c=a.up("grid"),d=c.getStore();c.editingPlugin.cancelEdit();var e=d.add({rule_id:this.getRuleId(),concept_type:c.action,concept_code:b[0].data.RXCUI,concept_text:b[0].data.STR,concept_code_type:b[0].data.CodeType});c.editingPlugin.startEdit(e[0],2)},onDecisionSupportMedicationAllergyComboSelect:function(a,b){var c=a.up("grid"),d=c.getStore();c.editingPlugin.cancelEdit();var e=d.add({rule_id:this.getRuleId(),concept_type:c.action,concept_code:b[0].data.RXCUI,concept_text:b[0].data.STR,concept_code_type:b[0].data.CodeType});c.editingPlugin.startEdit(e[0],2)},onDecisionSupportLabComboSelect:function(a,b){var c=a.up("grid"),d=c.getStore();c.editingPlugin.cancelEdit();var e=d.add({rule_id:this.getRuleId(),concept_type:c.action,concept_code:b[0].data.loinc_number,concept_text:b[0].data.loinc_name,concept_code_type:"LOINC"});c.editingPlugin.startEdit(e[0],2)},onDecisionSupportVitalAddBtnClick:function(){var a=this.getDecisionSupportVitalCombo(),b=a.getStore(),c=b.findRecord("option_value",a.getValue()),d=a.up("grid"),e=d.getStore();d.editingPlugin.cancelEdit();var f=e.add({rule_id:this.getRuleId(),concept_type:d.action,concept_code:c.data.code,concept_text:c.data.option_name,concept_code_type:c.data.code_type});d.editingPlugin.startEdit(f[0],2)},onDecisionSupportSocialHistoryAddBtnClick:function(){var a=this.getDecisionSupportSocialHistoryCombo(),b=a.getStore(),c=b.findRecord("option_value",a.getValue()),d=a.up("grid"),e=d.getStore();d.editingPlugin.cancelEdit();var f=e.add({rule_id:this.getRuleId(),concept_type:d.action,concept_code:c.data.code,concept_text:c.data.option_name,concept_code_type:c.data.code_type});d.editingPlugin.startEdit(f[0],2)},onDecisionSupportSocialHistoryComboBeforeRender:function(a){a.getStore().on("load",function(a){a.insert(0,{code:"smoking_status",option_name:_("smoking_status"),option_value:"smoking_status",code_type:""})})},getRuleId:function(){return this.getDecisionSupportEditorTabPanel().up("form").getForm().getRecord().data.id},doRemoveRule:function(a){a.store.remove(a)},doRemoveRuleConcept:function(a){a.store.remove(a)}}),Ext.define("App.controller.administration.HL7",{extend:"Ext.app.Controller",refs:[{ref:"HL7ServersPanel",selector:"hl7serverspanel"},{ref:"HL7ServersGrid",selector:"#hl7serversgrid"},{ref:"HL7ClientsGrid",selector:"#hl7clientsgrid"}],init:function(){var a=this;a.control({hl7serverspanel:{activate:a.onHL7ServersPanelActive},"#hl7serversgrid":{beforeedit:a.onHL7ServersGridBeforeEdit,validateedit:a.onHL7ServersGridValidateEdit},"#hl7serversgrid #addHL7ServerBtn":{click:a.onAddHL7ServerBtnClick},"#hl7serversgrid #removeHL7ServerBtn":{click:a.onRemoveHL7ServerBtnClick},"#hl7clientsgrid #addHL7ClientBtn":{click:a.onAddHL7ClientBtnClick},"#hl7clientsgrid #removeHL7ClientBtn":{click:a.onRemoveHL7ClientBtnClick}})},onAddHL7ServerBtnClick:function(){var a=this,b=a.getHL7ServersGrid(),c=b.getStore();b.editingPlugin.cancelEdit(),c.insert(0,{}),b.editingPlugin.startEdit(0,0)},onAddHL7ClientBtnClick:function(){var a=this,b=a.getHL7ClientsGrid(),c=b.getStore();b.editingPlugin.cancelEdit(),c.insert(0,{}),b.editingPlugin.startEdit(0,0)},onRemoveHL7ServerBtnClick:function(){},onRemoveHL7ClientBtnClick:function(){},serverStartHandler:function(a){HL7ServerHandler.start({ip:a.data.ip,port:a.data.port},function(b,c){say(c.result),a.set({online:c.result.online}),a.commit()})},serverStopHandler:function(a){HL7ServerHandler.stop({ip:a.data.ip,port:a.data.port},function(b,c){say(c.result),a.set({online:c.result.online}),a.commit()})},onHL7ServersPanelActive:function(){this.reloadStore()},reloadStore:function(){this.getHL7ServersGrid().getStore().load(),this.getHL7ClientsGrid().getStore().load()},onHL7ServersGridBeforeEdit:function(a,b){var c=a.editor.query("multitextfield")[0],d=b.record.data.allow_ips;Ext.Function.defer(function(){c.setValue(d)},10)},onHL7ServersGridValidateEdit:function(a,b){var c=a.editor.query("multitextfield")[0],d=c.getValue();b.record.set({allow_ips:d})}}),Ext.define("App.controller.administration.Practice",{extend:"Ext.app.Controller",refs:[{ref:"PracticePanel",selector:"practicepanel"}],init:function(){var a=this;a.control({"practicepanel grid":{activate:a.onPracticeGridPanelsActive},"practicepanel button[toggleGroup=insurance_number_group]":{toggle:a.onInsuranceNumberGroupToggle},"practicepanel toolbar > #addBtn":{click:a.onAddBtnClick}})},onPracticeGridPanelsActive:function(a){a.getStore().load()},onAddBtnClick:function(a){var b=a.up("grid"),c=b.getStore();b.editingPlugin.cancelEdit(),c.insert(0,{active:1}),b.editingPlugin.startEdit(0,0)},onInsuranceNumberGroupToggle:function(a,b){var c=a.up("grid");b?(c.view.features[0].enable(),c.getStore().group(a.action)):c.view.features[0].disable()}}),Ext.define("App.controller.administration.ReferringProviders",{extend:"Ext.app.Controller",refs:[{ref:"ReferringProvidersPanel",selector:"referringproviderspanel"},{ref:"ReferringProviderAddBtn",selector:"#referringProviderAddBtn"}],init:function(){var a=this;a.control({"#referringProviderAddBtn":{click:a.onReferringProviderAddBtnClick}})},onReferringProviderAddBtnClick:function(a){var b=a.up("grid");b.editingPlugin.cancelEdit(),b.getStore().insert(0,{create_date:new Date,update_date:new Date,create_uid:app.user.id,update_uid:app.user.id,active:1}),b.editingPlugin.startEdit(0,0)}}),Ext.define("App.controller.administration.Roles",{extend:"Ext.app.Controller",requires:["App.model.administration.AclGroupPerm"],refs:[{ref:"AdministrationRoleGroupCombo",selector:"#AdministrationRoleGroupCombo"},{ref:"AdministrationRoleGrid",selector:"#AdministrationRoleGrid"}],init:function(){this.control({"#AdministrationRolePanel":{render:this.onAdministrationRolePanelRender},"#AdministrationRoleGrid":{beforeedit:this.beforeCellEdit},"#AdministrationRoleGroupCombo":{select:this.doAdministrationRoleGridReconfigure},"button[action=adminAclAddRole]":{click:this.doAddRole},"button[action=adminAclSave]":{click:this.doSaveAcl},"button[action=adminAclCancel]":{click:this.doCancelAcl}})},onAdministrationRolePanelRender:function(){var a=this,b=a.getAdministrationRoleGroupCombo(),c=b.getStore();c.load({callback:function(c){b.select(c[0]),a.doAdministrationRoleGridReconfigure()}})},doSaveAcl:function(){var a=this,b=this.getAdministrationRoleGrid().getStore();b.getUpdatedRecords().length>0&&a.getAdministrationRoleGrid().el.mask(_("saving")),b.sync({callback:function(){app.msg(_("sweet"),_("record_saved")),a.getAdministrationRoleGrid().el.unmask()}})},doCancelAcl:function(){this.getAdministrationRoleGrid().getStore().rejectChanges()},beforeCellEdit:function(a,b){return"title"!=b.field},doAdministrationRoleGridReconfigure:function(){var a,b=this,c=b.getAdministrationRoleGroupCombo(),d=c.getValue(),e=b.getAdministrationRoleGrid(),f=[{name:"id",type:"int"},{name:"title",type:"string"},{name:"group_id",type:"int"},{name:"category",type:"string"}];e.view.el.mask("Loading"),ACL.getGroupPerms({group_id:d},function(c){a=c.columns,f=f.concat(c.fields),b.getModel("administration.AclGroupPerm").setFields(f);var d=Ext.create("Ext.data.Store",{model:"App.model.administration.AclGroupPerm",groupField:"category"});d.loadRawData(c.data);for(var g=0;g<a.length;g++)a[g].editor={xtype:"checkbox"},a[g].renderer=app.boolRenderer;a.push({flex:1}),e.reconfigure(d,a),e.view.el.unmask()})},doAddRole:function(){var a=this,b=Ext.create("App.model.administration.AclRoles",{group_id:a.getAdministrationRoleGroupCombo().getValue()});a.getRoleWindow().show(),a.roleWindow.down("form").getForm().loadRecord(b)},doSaveRole:function(){var a=this,b=a.roleWindow.down("form"),c=b.getForm(),d=c.getRecord(),e=c.getValues();c.isValid()&&(b.el.mask(_("be_right_back")),d.set(e),d.save({callback:function(){a.doAdministrationRoleGridReconfigure(),b.el.unmask(),a.roleWindow.close()}}))},doCancelRole:function(){this.roleWindow.close()},getRoleWindow:function(){var a=this;return a.roleWindow=Ext.widget("window",{title:_("new_role"),items:[{xtype:"form",border:!1,bodyPadding:10,items:[{xtype:"textfield",fieldLabel:_("role_name"),name:"role_name",allowBlank:!1},{xtype:"checkbox",fieldLabel:_("active"),name:"active"}]}],buttons:[{text:_("cancel"),cls:"cancelBtn",scope:a,handler:a.doCancelRole,action:"adminAclRoleCancel"},{text:_("save"),cls:"saveBtn",scope:a,handler:a.doSaveRole,action:"adminAclRoleSave"}]}),a.roleWindow}}),Ext.define("App.controller.administration.Specialties",{extend:"Ext.app.Controller",refs:[{ref:"SpecialtiesPanel",selector:"specialtiespanel"},{ref:"SpecialtiesAddBtn",selector:"#specialtiesAddBtn"}],init:function(){var a=this;a.control({"#specialtiesAddBtn":{click:a.onSpecialtiesAddBtnClick}})},onSpecialtiesAddBtnClick:function(a){var b=a.up("grid");b.editingPlugin.cancelEdit(),b.getStore().insert(0,{create_date:new Date,update_date:new Date,create_uid:app.user.id,update_uid:app.user.id,active:1}),b.editingPlugin.startEdit(0,0)}}),Ext.define("App.controller.Cron",{extend:"Ext.app.Controller",cronTaskInterval:10,fns:["app.getPatientsInPoolArea()","me.checkSession()"],init:function(){var me=this;me.cronTask={scope:me,run:function(){for(var i=0;i<me.fns.length;i++)eval(me.fns[i])},interval:1e3*me.cronTaskInterval}},start:function(){Ext.TaskManager.start(this.cronTask)},stop:function(){Ext.TaskManager.stop(this.cronTask)},addCronFn:function(a){this.fns.push(a)},removeCronFn:function(a){Ext.Array.remove(this.fns,a)},checkSession:function(){authProcedures.ckAuth(function(a,b){b.result.authorized||window.location.reload()})}}),Ext.define("App.controller.DualScreen",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"DualViewport",selector:"#dualViewport"},{ref:"Header",selector:"#RenderPanel-header"},{ref:"TabPanel",selector:"#dualViewport tabpanel"}],isDual:!1,appMask:null,init:function(){var a=this;a._loggedout=!1,a._enable=!0,a._screen=null,a.control({"#dualViewport":{render:a.onDualViewportRender,beforerender:a.onDualViewportBeforeRender}})},startDual:function(){var a=this;a.enable(),(null==a._screen||a._screen.closed)&&(a._screen=window.open("./?dual=true","_target","fullscreen=yes,menubar=no",!0))},stopDual:function(){this.disable(),this._screen.close(),this._screen=null},enable:function(){this._enable=!0},disable:function(){this._enable=!1},isEnabled:function(){return this._enable},onDualViewportBeforeRender:function(){this.isDual=!0,window.app=window.opener.app,app.on("patientset",this.onPatientSet,this),app.on("patientunset",this.onPatientUnset,this)},onDualViewportRender:function(){Ext.get("mainapp-loading").remove(),Ext.get("mainapp-loading-mask").fadeOut({remove:!0}),this.onPatientUnset(!1),this.initHandShakeTask()},onPatientSet:function(){if(this.isDual&&!this._loggedout){var a=app.patient.name+" - #"+app.patient.pid+" - "+app.patient.age.str,b=this.getActiveStore();this.unmask(),this.getHeader().update(a),b.clearFilter(!0),b.filter([{property:"pid",value:app.patient.pid}])}},onPatientUnset:function(a){if(this.isDual&&!this._loggedout){var b=this.getActiveStore();this.mask(_("no_patient_selected")),this.getHeader().update(""),a!==!1&&(b.clearFilter(!0),b.filter([{property:"pid",value:app.patient.pid}]))}},getActiveStore:function(){var a=this.getTabPanel().getActiveTab();return a.getStore?a.getStore():"patientdocumentspanel"==a.xtype||"patientimmunizationspanel"==a.xtype||"patientmedicationspanel"==a.xtype||"patientimmunizationspanel"==a.xtype?a.down("grid").getStore():void 0},mask:function(a){var b=this;null==b.appMask?b.appMask=new Ext.LoadMask(b.getDualViewport(),{msg:'<img src="resources/images/gaiaehr-med-dark.png"><p>'+a+"</p>",maskCls:"dualAppMask",cls:"dualAppMaskMsg",autoShow:!0}):(b.appMask.show(),b.appMask.msgEl.query("p")[0].innerHTML=a)},unmask:function(){this.appMask&&this.appMask.hide()},initHandShakeTask:function(){var a=this,b={run:function(){null==window.opener&&window.close(),window.opener.app.logged||a._loggedout||(a.mask(_("logged_out")),a._loggedout=!0)},interval:1e3,scope:a};Ext.TaskManager.start(b)}}),Ext.define("App.controller.Header",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"AppHeaderRight",selector:"#AppHeaderRight"},{ref:"AppHeaderLeft",selector:"#AppHeaderLeft"}],init:function(){},addHeaderBtn:function(a,b,c){a=a||{},b=b||"left",c=c||0;var d="left"==b?this.getAppHeaderLeft():this.getAppHeaderRight(),e=Ext.apply(a,{xtype:"button",scale:"large",margin:"0 3 0 0",cls:"headerLargeBtn",padding:0});d.insert(c,e)}}),Ext.define("App.controller.InfoButton",{extend:"Ext.app.Controller",requires:[],init:function(){var a=this;a.medline="http://apps2.nlm.nih.gov/medlineplus/services/mpconnect.cfm?",a.language=_("lang_code").match(/^es/)?"es":"en",a.codeSytem={ICD10CM:"2.16.840.1.113883.6.90","ICD10-CM":"2.16.840.1.113883.6.90","ICD-10-CM":"2.16.840.1.113883.6.90",ICD9CM:"2.16.840.1.113883.6.103","ICD9-CM":"2.16.840.1.113883.6.103","ICD-9-CM":"2.16.840.1.113883.6.103",SNOMED:"2.16.840.1.113883.6.96",RXCUI:"2.16.840.1.113883.6.88",NDC:"2.16.840.1.113883.6.69",LN:"2.16.840.1.113883.6.1",LOINC:"2.16.840.1.113883.6.1"},a.control({})},doGetInfo:function(a,b){var c=this,d=c.medline;d+="mainSearchCriteria.v.c="+a,d+="&mainSearchCriteria.v.cs="+c.codeSytem[b],d+="&informationRecipient.languageCode.c="+c.language,window.open(d,"_blank","toolbar=no, scrollbars=yes, resizable=yes, top=10, left=10, width=1000, height=600")},doGetInfoByUrl:function(a){window.open(a,"_blank","toolbar=no, scrollbars=yes, resizable=yes, top=10, left=10, width=1000, height=600")},getInformationWindow:function(a){Ext.widget("window",{title:_("information"),autoShow:!0,width:800,height:600,data:a,autoScroll:!0,tpl:new Ext.XTemplate('<div class="externalinfo-container"><h1>{feed.title._value}</h1><h2>{feed.subtitle._value}</h2><p><span>Author:</span> {feed.author.name._value}</h1><p><span>Updated:</span> {feed.updated._value}</h1><div class="entries">   <tpl for="feed.entry"><div class="externalinfo-entry"><h3><a href="{link.href}">{title._value}</a></h3>{summary._value}</div>   </tpl></div></div>')})}}),Ext.define("App.controller.LogOut",{extend:"Ext.app.Controller",requires:["App.ux.ActivityMonitor"],init:function(){var me=this;me.activityMonitorInterval=10,me.activityMonitorMaxInactive=eval(g("timeout")),me.cron=me.getController("Cron"),me.control({"treepanel[action=mainNav]":{beforerender:me.onNavigationBeforeRender},"menuitem[action=logout]":{click:me.appLogout}})},onNavigationBeforeRender:function(a){a.getStore().on("load",function(){this.ActivityMonitor(!0)},this)},ActivityMonitor:function(a){var b=this;a?(App.ux.ActivityMonitor.init({interval:1e3*b.activityMonitorInterval,maxInactive:6e4*b.activityMonitorMaxInactive,verbose:!1,controller:b,isInactive:function(){b.startAutoLogout()}}),b.cron.start(),App.ux.ActivityMonitor.start()):(b.cron.stop(),App.ux.ActivityMonitor.stop())},cancelAutoLogout:function(){var a=this;app.el.unmask(),a.LogoutTask.stop(a.LogoutTaskTimer),a.logoutWarinigWindow.destroy(),delete a.logoutWarinigWindow,App.ux.ActivityMonitor.start()},startAutoLogout:function(){var a=this;a.logoutWarinigWindow=Ext.create("Ext.Container",{floating:!0,cls:"logout-warning-window",html:"Logging Out in...",seconds:10}).show(),app.el.mask(),a.LogoutTask||(a.LogoutTask=new Ext.util.TaskRunner),a.LogoutTaskTimer?a.LogoutTask.start(a.LogoutTaskTimer):a.LogoutTaskTimer=a.LogoutTask.start({scope:a,run:a.logoutCounter,interval:1e3})},logoutCounter:function(){var a=this,b=a.logoutWarinigWindow.seconds-1;0>=b?(a.logoutWarinigWindow.update("Logging Out... Bye! Bye!"),a.appLogout(!0)):(a.logoutWarinigWindow.update("Logging Out in "+b+"sec"),a.logoutWarinigWindow.seconds=b,say("Logging Out in "+b+"sec"))},appLogout:function(a){var b=this,c=b.getController("Navigation");a===!0?(b.ActivityMonitor(!1),app.patient.pid&&Patient.unsetPatient(app.patient.pid),authProcedures.unAuth(function(){c.navigateTo("App.view.login.Login",null,!0),window.location.reload()})):Ext.Msg.show({title:_("please_confirm")+"...",msg:_("are_you_sure_to_quit")+" GaiaEHR?",icon:Ext.MessageBox.QUESTION,buttons:Ext.Msg.YESNO,fn:function(a){"yes"==a&&(app.patient.pid&&Patient.unsetPatient(app.patient.pid),authProcedures.unAuth(function(){b.ActivityMonitor(!1),c.navigateTo("App.view.login.Login",null,!0),window.location.reload()}))}})}}),Ext.define("App.controller.Navigation",{extend:"Ext.app.Controller",requires:["Ext.util.History"],refs:[{ref:"viewport",selector:"viewport"},{ref:"mainNavPanel",selector:"panel[action=mainNavPanel]"},{ref:"mainNav",selector:"treepanel[action=mainNav]"},{ref:"patientPoolArea",selector:"panel[action=patientPoolArea]"},{ref:"appFooter",selector:"container[action=appFooter]"},{ref:"appFooterDataView",selector:"container[action=appFooter] > dataview"}],navKey:"ALT",enableNavKeys:!1,init:function(){var a=this;a.navKey=this.setNavKey(this.navKey),a.activePanel=null,a.altIsDown=!1,Ext.util.History.init(),Ext.util.History.on("change",a.urlChange,a),a.enableNavKeys&&a.initFunctionKeyNav(),a.control({viewport:{patientset:a.onPatientSet,patientunset:a.onPatientUnset},"treepanel[action=mainNav]":{selectionchange:a.onNavigationNodeSelected,beforerender:a.onNavigationBeforeRender},"panel[action=mainNavPanel]":{beforecollapse:a.onNavCollapsed,beforeexpand:a.onNavExpanded}})},getTopNavigation:function(){return app},onNavigationBeforeRender:function(a){a.getStore().on("load",this.afterNavigationLoad,this)},navigateToDefault:function(){this.navigateTo("App.view.dashboard.Dashboard")},navigateTo:function(a,b,c){var d=c!==!0?this.getUrlParams():[];d[0]=a,this.setUrlParams(d),"function"==typeof b&&b(!0)},goTo:function(a,b,c){this.navigateTo(a,b,c)},onNavigationNodeSelected:function(a,b){0<b.length&&b[0].data.leaf&&this.navigateTo(b[0].data.id)},afterNavigationLoad:function(){app.fullMode?app.navColumn.expand():app.navColumn.collapse(),app.removeAppMask(),this.navigateToDefault()},setUrlParams:function(a){var b="./#!/";a.length>0&&(b+=a.join("/")),window.location=b},getUrlParams:function(){return window.location.hash?window.location.hash.substring(1).replace(/!\//,"").split("/"):[]},urlChange:function(a){var b=this,c=b.getMainNav(),d=c.getStore(),e=b.getUrlParams()[0],f=b.getNavRefByClass(e),g=b.getViewport().MainPanel.getLayout(),h=c.getSelectionModel(),i=d.getNodeById(e);this.url=a,h.select(i),"App.view.login.Login"!=e&&("undefined"==typeof b[f]?(b.getViewport().MainPanel.el.mask(),b[f]=b.getViewport().MainPanel.add(Ext.create(e))):b[f].isDestroyed&&b[f].render(),b.getViewport().fireEvent("beforenavigation",b[f]),b[f].onActive(function(a){b.getViewport().MainPanel.el.unmask(),a&&(b.activePanel=g.setActiveItem(b[f]))}),b.getViewport().fireEvent("afternavigation",b[f]))},goBack:function(){Ext.util.History.back()},getPanelByCls:function(a){var b=this,c=b.getNavRefByClass(a);return"undefined"==typeof b[c]?b[c]=b.getViewport().MainPanel.add(Ext.create(a)):b[c]},getNavRefByClass:function(a){return a.replace(/\./g,"_")},getClassByNavRef:function(a){return a.replace(/_/g,".")},onNavCollapsed:function(){var a=this,b=a.getPatientPoolArea(),c=a.getAppFooter(),d=a.getAppFooterDataView();d&&(c.setHeight(60),d.show()),a.getMainNavPanel().isCollapsed=!0,b.hide()},onNavExpanded:function(){var a=this,b=a.getPatientPoolArea(),c=a.getAppFooter(),d=a.getAppFooterDataView();d&&(c.setHeight(30),d.hide()),a.getMainNavPanel().isCollapsed=!1,b.show()},onPatientSet:function(){},onPatientUnset:function(){},initFunctionKeyNav:function(){Ext.getBody().on("keydown",this.captureDownKey,this),Ext.getBody().on("keyup",this.captureUpKey,this)},captureDownKey:function(a){return a.getKey()==a.ALT?void(this.altIsDown=!0):void(this.altIsDown&&this.getViewport().fireEvent("navkey",a,a.getKey()))},captureUpKey:function(a){a.getKey()==a.ALT&&(this.altIsDown=!1)},setNavKey:function(a){return this.navKey=Ext.EventObjectImpl[a]},getNavKey:function(){return this.navKey},getExtraParams:function(){for(var params=this.getUrlParams(),i=0;i<params.length;i++)if(params[i].match(/^{.*}$/))return eval("("+params[i]+")");return!1}}),Ext.define("App.controller.Support",{extend:"Ext.app.Controller",requires:["App.ux.ManagedIframe"],refs:[{ref:"viewport",selector:"viewport"}],init:function(){var a=this;a.control({"button[action=supportBtn]":{click:a.supportBtnClick}})},supportBtnClick:function(a){var b=this;b.getSupportWindow(),b.winSupport.remove(b.miframe),b.winSupport.add(b.miframe=Ext.create("App.ux.ManagedIframe",{src:a.src}))},getSupportWindow:function(){var a=this;a.winSupport?a.winSupport.show():(a.winSupport=Ext.create("Ext.window.Window",{title:_("support"),closeAction:"hide",bodyStyle:"background-color: #ffffff; padding: 5px;",animateTarget:a.Footer,resizable:!1,draggable:!1,maximizable:!1,autoScroll:!0,maximized:!0,dockedItems:{xtype:"toolbar",dock:"top",items:["-",{text:"List issues",iconCls:"list",action:"supportBtn",url:"http://GaiaEHR.org/projects/GaiaEHR001/issues"},"-",{text:"Create an issue",iconCls:"icoAddRecord",action:"supportBtn",url:"http://GaiaEHR.org/projects/GaiaEHR001/issues/new"}]}}),a.winSupport.show())}}),Ext.define("App.controller.ScriptCam",{extend:"Ext.app.Controller",refs:[{ref:"webCamWindow",selector:"scriptcamwindow"},{ref:"ScriptCamCameras",selector:"combobox[action=ScriptCamCameras]"}],init:function(){var a=this;a.userMedia=null,a.control({"button[action=onWebCam]":{click:a.onWebCamClick},"button[action=onCaptureImage]":{click:a.onCapture}})},onWebCamClick:function(a){var b=this;b.action=a.up("panel").action,b.imgPanel=a.up("panel"),navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getMedia({video:!0,audio:!1},b.onConnect,b.onError)},onConnect:function(a){var b=app.getController("ScriptCam");b.win=Ext.create("Ext.window.Window",{title:"...",html:'<video id="WebCamVideo" width="640" height="480"></video>',autoShow:!0,buttons:["->",{text:_("capture_img"),action:"onCaptureImage"}],listeners:{close:function(){a.stop()}}}),b.video=document.getElementById("WebCamVideo"),b.video.src=window.URL?window.URL.createObjectURL(a):a,b.video.play()},onError:function(a){say(a)},onClose:function(){var a=document.getElementById("WebCamVideo");a.src=window.URL?window.URL.createObjectURL(stream):stream,a.play()},onCapture:function(){var a,b=this,c=document.createElement("canvas"),d=c.getContext("2d"),e=b.imgPanel.down("image"),f=b.imgPanel.down("textareafield");c.width=b.video.videoWidth/4,c.height=b.video.videoHeight/4,d.drawImage(b.video,0,0,c.width,c.height),a=c.toDataURL(),c.remove(),e.setSrc(a),f.setValue(a),b.win.close()}}),Ext.define("App.controller.patient.ActiveProblems",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"ActiveProblemsGrid",selector:"patientactiveproblemspanel"},{ref:"ActiveProblemLiveSearch",selector:"#activeProblemLiveSearch"},{ref:"AddActiveProblemBtn",selector:"patientactiveproblemspanel #addActiveProblemBtn"}],init:function(){var a=this;a.control({patientactiveproblemspanel:{activate:a.onActiveProblemsGridActive},"#activeProblemLiveSearch":{select:a.onActiveProblemLiveSearchSelect},"#ActiveProblemStatusCombo":{select:a.onActiveProblemStatusComboSelect},"patientactiveproblemspanel #addActiveProblemBtn":{click:a.onAddActiveProblemBtnClick}})},onAddActiveProblemBtnClick:function(){var a=this,b=a.getActiveProblemsGrid(),c=b.getStore();b.editingPlugin.cancelEdit(),c.insert(0,{pid:app.patient.pid,eid:app.patient.eid,uid:app.user.id,created_uid:app.user.id,create_date:new Date,begin_date:new Date}),b.editingPlugin.startEdit(0,0)},onActiveProblemsGridActive:function(a){var b=a.getStore();b.clearFilter(!0),b.filter([{property:"pid",value:app.patient.pid}])},onActiveProblemLiveSearchSelect:function(a,b){var c=a.up("form").getForm(),d=c.getRecord();d.set({code:b[0].data.ConceptId,code_type:b[0].data.CodeType})},onActiveProblemStatusComboSelect:function(a,b){var c=a.up("form").getForm(),d=c.getRecord();d.set({status_code:b[0].data.code,status_code_type:b[0].data.code_type})}}),Ext.define("App.controller.patient.Allergies",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"AllergiesGrid",selector:"patientallergiespanel"},{ref:"AddAllergyBtn",selector:"patientallergiespanel #addAllergyBtn"},{ref:"ReviewAllergiesBtn",selector:"patientallergiespanel #reviewAllergiesBtn"},{ref:"ActiveAllergyBtn",selector:"patientallergiespanel #activeAllergyBtn"},{ref:"AllergyCombo",selector:"#allergyCombo"},{ref:"AllergyTypesCombo",selector:"#allergyTypesCombo"},{ref:"AllergySearchCombo",selector:"#allergySearchCombo"},{ref:"AllergyMedicationCombo",selector:"#allergyMedicationCombo"},{ref:"AllergyReactionCombo",selector:"#allergyReactionCombo"},{ref:"AllergySeverityCombo",selector:"#allergySeverityCombo"},{ref:"AllergyLocationCombo",selector:"#allergyLocationCombo"}],init:function(){var a=this;a.control({patientallergiespanel:{activate:a.onAllergiesGridActivate},"patientallergiespanel #addAllergyBtn":{click:a.onAddAllergyBtnClick},"patientallergiespanel #activeAllergyBtn":{toggle:a.onActiveAllergyBtnToggle},"patientallergiespanel #reviewAllergiesBtn":{toggle:a.onReviewAllergiesBtnClick},"#allergyTypeCombo":{select:a.onAllergyTypeComboSelect},"#allergyMedicationCombo":{select:a.onAllergyLiveSearchSelect},"#allergyLocationCombo":{select:a.onAllergyLocationComboSelect},"#allergySearchCombo":{select:a.onAllergySearchComboSelect},"#allergyReactionCombo":{select:a.onAllergyReactionComboSelect},"#allergySeverityCombo":{select:a.onAllergySeverityComboSelect},"#allergyStatusCombo":{select:a.onAllergyStatusComboSelect}})},onAllergySearchComboSelect:function(a,b){var c=a.up("form").getForm().getRecord();c.set({allergy_code:b[0].data.allergy_code,allergy_code_type:b[0].data.allergy_code_type})},onAllergyReactionComboSelect:function(a,b){var c=a.up("form").getForm().getRecord();c.set({reaction_code:b[0].data.code,reaction_code_type:b[0].data.code_type})},onAllergySeverityComboSelect:function(a,b){var c=a.up("form").getForm().getRecord();c.set({severity_code:b[0].data.code,severity_code_type:b[0].data.code_type})},onAllergyStatusComboSelect:function(a,b){var c=a.up("form").getForm().getRecord();c.set({status_code:b[0].data.code,status_code_type:b[0].data.code_type}),say(c)},onAllergyLiveSearchSelect:function(a,b){var c=a.up("form").getForm();c.getRecord().set({allergy_code:b[0].data.RXCUI,allergy_code_type:b[0].data.CodeType})},onAllergyTypeComboSelect:function(a,b){var c=this,d=b[0],e=d.data.code,f="419511003"==e||"416098002"==e||"59037007"==e;c.getAllergyMedicationCombo().setVisible(f),c.getAllergyMedicationCombo().setDisabled(!f),c.getAllergySearchCombo().setVisible(!f),c.getAllergySearchCombo().setDisabled(f),f?c.getAllergyMedicationCombo().reset():c.getAllergySearchCombo().store.load(),a.up("form").getForm().getRecord().set({allergy_type_code:d.data.code,allergy_type_code_type:d.data.code_type})},onAllergyLocationComboSelect:function(a){var b,c=this,d=a.getValue();"Skin"==d?b=80:"Local"==d?b=81:"Abdominal"==d?b=82:"Systemic / Anaphylactic"==d&&(b=83),c.getAllergyReactionCombo().getStore().load({params:{list_id:b}})},onAllergiesGridActivate:function(){var a=this.getAllergiesGrid().getStore();a.clearFilter(!0),a.filter([{property:"pid",value:app.patient.pid}])},onAddAllergyBtnClick:function(){var a=this,b=a.getAllergiesGrid(),c=b.getStore();
b.editingPlugin.cancelEdit(),c.insert(0,{created_uid:app.user.id,uid:app.user.id,pid:app.patient.pid,eid:app.patient.eid,create_date:new Date,begin_date:new Date}),b.editingPlugin.startEdit(0,0)},onActiveAllergyBtnToggle:function(a,b){var c=this,d=c.getAllergiesGrid().getStore();d.load(b?{filters:[{property:"pid",value:app.patient.pid},{property:"end_date",value:"0000-00-00"}]}:{filters:[{property:"pid",value:app.patient.pid}]})},beforeAllergyEdit:function(a,b){this.allergieMedication.setValue(b.record.data.allergy)},onReviewAllergiesBtnClick:function(){var a={eid:app.patient.eid,area:"review_allergies"};Medical.reviewMedicalWindowEncounter(a,function(){app.msg("Sweet!",_("succefully_reviewed"))})}}),Ext.define("App.controller.patient.CarePlanGoals",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"CarePlanGoalsGrid",selector:"careplangoalsgrid"},{ref:"CarePlanGoalsNewWindow",selector:"careplangoalsnewwindow"},{ref:"CarePlanGoalsNewForm",selector:"#CarePlanGoalsNewForm"},{ref:"CarePlanGoalPlanDateField",selector:"#CarePlanGoalPlanDateField"},{ref:"NewCarePlanGoalBtn",selector:"#NewCarePlanGoalBtn"},{ref:"SoapPanelForm",selector:"#soapPanel form"}],init:function(){var a=this;a.control({viewport:{beforeencounterload:a.onBeforeOpenEncounter},careplangoalsgrid:{itemdblclick:a.onCarePlanGoalsGridItemDblClick},"#CarePlanGoalSearchField":{select:a.onCarePlanGoalSearchFieldSelect},"#NewCarePlanGoalBtn":{click:a.onNewCarePlanGoalBtnClick},"#CarePlanGoalsNewFormCancelBtn":{click:a.onCarePlanGoalsNewFormCancelBtn},"#CarePlanGoalsNewFormSaveBtn":{click:a.onCarePlanGoalsNewFormSaveBtn},"#CarePlanGoalPlanDateContainer > button":{click:a.onCarePlanGoalPlanDateContainerButtonsClick}})},onCarePlanGoalPlanDateContainerButtonsClick:function(a){var b,c=new Date,d=this.getCarePlanGoalPlanDateField();switch(a.action){case"1D":b=Ext.Date.add(c,Ext.Date.DAY,1);break;case"1W":b=Ext.Date.add(c,Ext.Date.DAY,7);break;case"2W":b=Ext.Date.add(c,Ext.Date.DAY,14);break;case"1M":b=Ext.Date.add(c,Ext.Date.MONTH,1);break;case"3M":b=Ext.Date.add(c,Ext.Date.MONTH,3);break;case"6M":b=Ext.Date.add(c,Ext.Date.MONTH,6);break;case"1Y":b=Ext.Date.add(c,Ext.Date.YEAR,1)}d.setValue(b||c)},onCarePlanGoalsGridItemDblClick:function(a,b){var c=this;c.getCarePlanGoalsNewWindow().setTitle(b.data.goal+" ["+b.data.goal_code+"]"),c.getCarePlanGoalsNewWindow().show(c.getCarePlanGoalsGrid().el),c.getCarePlanGoalsNewForm().getForm().loadRecord(b)},onCarePlanGoalSearchFieldSelect:function(a,b){var c=this,d=c.getCarePlanGoalsNewForm().getForm(),e=d.getRecord();e.set({goal_code:b[0].data.ConceptId,goal_code_type:b[0].data.CodeType})},onBeforeOpenEncounter:function(a){this.getCarePlanGoalsGrid()&&this.getCarePlanGoalsGrid().getStore().load({filters:[{property:"eid",value:a.data.eid}]})},onNewCarePlanGoalBtnClick:function(a){var b,c=this,d=a.up("grid"),e=d.getStore();b=e.add({pid:app.patient.pid,eid:app.patient.eid,uid:app.user.id,created_date:new Date}),c.getCarePlanGoalsNewWindow().setTitle(_("new_goal")),c.getCarePlanGoalsNewWindow().setSize(c.getSoapPanelForm().getSize()),c.getCarePlanGoalsNewWindow().show(c.getCarePlanGoalsGrid().el),c.getCarePlanGoalsNewForm().getForm().loadRecord(b[0])},onCarePlanGoalsNewFormSaveBtn:function(){var a=this,b=a.getCarePlanGoalsNewForm().getForm(),c=b.getRecord(),d=b.getValues();b.isValid()&&(c.set(d),c.store.sync({success:function(){app.msg(_("sweet"),_("record_saved"))},failure:function(){app.msg(_("oops"),_("record_error"),!0)}}),a.getCarePlanGoalsNewForm().getForm().reset(),a.getCarePlanGoalsNewWindow().close())},onCarePlanGoalsNewFormCancelBtn:function(){var a=this;a.getCarePlanGoalsGrid().getStore().rejectChanges(),a.getCarePlanGoalsNewForm().getForm().reset(),a.getCarePlanGoalsNewWindow().close()}}),Ext.define("App.controller.patient.CCD",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"PatientCcdPanel",selector:"patientccdpanel"},{ref:"PatientCcdPanelMiFrame",selector:"patientccdpanel > miframe"}],init:function(){var a=this;a.control({patientccdpanel:{activate:a.onViewCcdBtnClick},"#viewCcdBtn":{click:a.onViewCcdBtnClick},"#exportCcdBtn":{click:a.onExportCcdBtnClick}})},onViewCcdBtnClick:function(){this.getPatientCcdPanelMiFrame().setSrc("dataProvider/CCDDocument.php?action=view&site="+window.site+"&pid="+app.patient.pid+"&token="+app.user.token),app.AuditLog("Patient summary CCD viewed")},onExportCcdBtnClick:function(){this.getPatientCcdPanelMiFrame().setSrc("dataProvider/CCDDocument.php?action=export&site="+window.site+"&pid="+app.patient.pid+"&token="+app.user.token),app.AuditLog("Patient summary CCD exported")}}),Ext.define("App.controller.patient.CCDImport",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"CcdImportWindow",selector:"ccdimportwindow"},{ref:"CcdImportPatientForm",selector:"#CcdImportPatientForm"},{ref:"CcdImportEncounterForm",selector:"#CcdImportEncounterForm"},{ref:"CcdImportEncounterAssessmentContainer",selector:"#CcdImportEncounterAssessmentContainer"},{ref:"CcdImportMedicationsGrid",selector:"#CcdImportMedicationsGrid"},{ref:"CcdImportAllergiesGrid",selector:"#CcdImportAllergiesGrid"},{ref:"CcdImportProceduresGrid",selector:"#CcdImportProceduresGrid"},{ref:"CcdImportActiveProblemsGrid",selector:"#CcdImportActiveProblemsGrid"},{ref:"CcdImportOrderResultsGrid",selector:"#CcdImportOrderResultsGrid"},{ref:"CcdImportEncountersGrid",selector:"#CcdImportEncountersGrid"},{ref:"CcdImportWindowImportBtn",selector:"#CcdImportWindowImportBtn"},{ref:"CcdImportWindowCloseBtn",selector:"#CcdImportWindowCloseBtn"},{ref:"CcdImportWindowPatientSearchField",selector:"#CcdImportWindowPatientSearchField"}],init:function(){var a=this;a.control({ccdimportwindow:{show:a.onCcdImportWindowShow},"#CcdImportWindowImportBtn":{click:a.onCcdImportWindowImportBtnClick},"#CcdImportWindowCloseBtn":{click:a.onCcdImportWindowCloseBtnClick},"#CcdImportWindowPatientSearchField":{select:a.onCcdImportWindowPatientSearchFieldSelect},"#CcdImportWindowSelectAllField":{change:a.onCcdImportWindowSelectAllFieldChange},"#CcdImportWindowViewRawCcdBtn":{click:a.onCcdImportWindowViewRawCcdBtnClick},"#PossiblePatientDuplicatesWindow > grid":{itemdblclick:a.onPossiblePatientDuplicatesGridItemDblClick},"#PossiblePatientDuplicatesContinueBtn":{click:a.onPossiblePatientDuplicatesContinueBtnClick}})},onCcdImportWindowShow:function(a){this.doLoadCcdData(a.ccdData)},doLoadCcdData:function(a){var b=this,c=b.getCcdImportPatientForm().getForm(),d=b.getCcdImportEncounterForm(),e=d.getForm(),f=Ext.create("App.model.patient.Patient",a.patient);if(a.encounter&&!Ext.Object.isEmpty(a.encounter)){d.show();var g=Ext.create("App.model.patient.Patient",a.encounter),h=b.getCcdImportEncounterAssessmentContainer();e.loadRecord(g);for(var i=0;i<a.encounter.assessments.length;i++)h.add({anchor:"100%",boxLabel:a.encounter.assessments[i].text,assessmentData:a.encounter.assessments[i],boxLabelCls:"CheckBoxWrapHammerFix"})}else d.hide();c.loadRecord(f),a.patient.race&&""!=a.patient.race&&CombosData.getDisplayValueByListIdAndOptionValue(14,a.patient.race,function(a){c.findField("race_text").setValue(a)}),a.patient.ethnicity&&""!=a.patient.ethnicity&&CombosData.getDisplayValueByListIdAndOptionCode(59,a.patient.ethnicity,function(a){c.findField("ethnicity_text").setValue(a)}),a&&(a.allergies&&a.allergies.length>0&&b.reconfigureGrid("getCcdImportAllergiesGrid",a.allergies),a.medications&&a.medications.length>0&&b.reconfigureGrid("getCcdImportMedicationsGrid",a.medications),a.problems&&a.problems.length>0&&b.reconfigureGrid("getCcdImportActiveProblemsGrid",a.problems),a.procedures&&a.procedures.length>0&&b.reconfigureGrid("getCcdImportProceduresGrid",a.procedures),a.results&&a.results.length>0&&b.reconfigureGrid("getCcdImportOrderResultsGrid",a.results),a.encounters&&a.encounters.length>0&&b.reconfigureGrid("getCcdImportEncountersGrid",a.encounters))},reconfigureGrid:function(a,b){var c=this,d=c[a]();d.getStore().loadRawData(b)},onCcdImportWindowPatientSearchFieldSelect:function(a,b){var c=this,d=c.getCcdImportPatientForm().getForm().getRecord();d.data.sex!=b[0].data.sex&&app.msg(_("warning"),_("records_sex_are_not_equal"),!0),d.data.DOB.getFullYear()!=b[0].data.DOB.getFullYear()&&d.data.DOB.getMonth()!=b[0].data.DOB.getMonth()&&d.data.DOB.getDate()!=b[0].data.DOB.getDate()&&app.msg(_("warning"),_("records_date_of_birth_are_not_equal"),!0)},doResultShowObservations:function(a,b){say("doResultShowObservations"),say(a),say(b),say(a.getXY());var c=this.getResultObservationGrid();c.down("grid").reconfigure(b),c.show(a)},getResultObservationGrid:function(){return Ext.widget("window",{title:_("observations"),modal:!0,items:[{xtype:"grid",width:900,margin:5,frame:!0,columns:[{text:_("name"),menuDisabled:!0,dataIndex:"code_text",width:200},{text:_("value"),menuDisabled:!0,dataIndex:"value",width:150,renderer:function(a,b,c){var d=["LL","HH",">","<","AA","VS"],e=["L","H","A","W","MS"],f=["B","S","U","D","R","I"],g=["N"];return Ext.Array.contains(g,c.data.abnormal_flag)?'<span style="color:green;">'+a+"</span>":Ext.Array.contains(f,c.data.abnormal_flag)?'<span style="color:blue;">'+a+"</span>":Ext.Array.contains(e,c.data.abnormal_flag)?'<span style="color:orange;">'+a+"</span>":Ext.Array.contains(d,c.data.abnormal_flag)?'<span style="color:red;">'+a+"</span>":a}},{text:_("units"),menuDisabled:!0,dataIndex:"units",width:75},{text:_("abnormal"),menuDisabled:!0,dataIndex:"abnormal_flag",width:75,renderer:function(a){var b=["LL","HH",">","<","AA","VS"],c=["L","H","A","W","MS"],d=["B","S","U","D","R","I"],e=["N"];return Ext.Array.contains(e,a)?'<span style="color:green;">'+a+"</span>":Ext.Array.contains(d,a)?'<span style="color:blue;">'+a+"</span>":Ext.Array.contains(c,a)?'<span style="color:orange;">'+a+"</span>":Ext.Array.contains(b,a)?'<span style="color:red;">'+a+"</span>":a}},{text:_("range"),menuDisabled:!0,dataIndex:"reference_rage",width:150},{text:_("notes"),menuDisabled:!0,dataIndex:"notes",width:300},{text:_("status"),menuDisabled:!0,dataIndex:"observation_result_status",width:60}]}]})},onCcdImportWindowCloseBtnClick:function(){this.getCcdImportWindow().close()},verifyPatientImport:function(){var a=this,b=a.getCcdImportWindowPatientSearchField().getValue();Ext.Msg.show({title:_("wait"),msg:_(b?"patient_merge_verification":"patient_import_verification"),buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(c){"yes"==c&&(b?a.doPatientSectionsImport(b):a.doPatientImport())}})},doPatientImport:function(){var a=this,b=a.getCcdImportPatientForm().getForm().getRecord();b.set({create_uid:app.user.id,create_date:new Date}),b.save({callback:function(b,c,d){d?a.doPatientSectionsImport(b.data.pid):app.msg(_("oops"),_("record_error"),!0)}})},doPatientSectionsImport:function(a){{var b,c,d=this,e=new Date,f=(d.getCcdImportEncounterForm().getForm().getRecord(),d.getCcdImportAllergiesGrid().getSelectionModel().getSelection()),g=d.getCcdImportMedicationsGrid().getSelectionModel().getSelection(),h=d.getCcdImportActiveProblemsGrid().getSelectionModel().getSelection();d.getCcdImportProceduresGrid().getSelectionModel().getSelection(),d.getCcdImportOrderResultsGrid().getSelectionModel().getSelection(),d.getCcdImportEncountersGrid().getSelectionModel().getSelection()}for(c=f.length,b=0;c>b;b++)f[b].set({pid:a,created_uid:app.patient.id,create_date:e}),f[b].save();for(c=g.length,b=0;c>b;b++)g[b].set({pid:a,created_uid:app.patient.id,create_date:e}),g[b].save();for(c=h.length,b=0;c>b;b++)h[b].set({pid:a,created_uid:app.patient.id,create_date:e}),h[b].save({callback:function(){d.getCcdImportWindow().close(),app.setPatient(a,null,function(){app.openPatientSummary()}),app.msg(_("sweet"),_("patient_data_imported"))}})},onPossiblePatientDuplicatesGridItemDblClick:function(a,b){var c=a.up("window");if("ccdImportDuplicateAction"==c.action){var d,e=this,f=e.getCcdImportWindowPatientSearchField(),g=f.getStore();g.removeAll(),d=g.add({pid:b.data.pid,fname:b.data.fname,mname:b.data.mname,lname:b.data.lname}),f.select(d[0]),c.close(),e.verifyPatientImport()}},onCcdImportWindowImportBtnClick:function(){var a=this,b=App.app.getController("patient.Patient"),c=a.getCcdImportPatientForm().getRecord().data,d=a.getCcdImportWindowPatientSearchField().getValue(),e={fname:c.fname,lname:c.lname,sex:c.sex,DOB:c.DOB};d?a.verifyPatientImport():b.lookForPossibleDuplicates(e,"ccdImportDuplicateAction",function(b){0==b&&a.verifyPatientImport()})},onPossiblePatientDuplicatesContinueBtnClick:function(a){"ccdImportDuplicateAction"==a.up("window").action&&this.verifyPatientImport()},onCcdImportWindowSelectAllFieldChange:function(a,b){for(var c=this,d=c.getCcdImportWindow().query("grid"),e=0;e<d.length;e++){var f=d[e].getSelectionModel();b?f.selectAll():f.deselectAll()}if(c.getCcdImportEncounterAssessmentContainer())for(var g=c.getCcdImportEncounterAssessmentContainer().query("checkbox"),h=0;h<g.length;h++)g[h].setValue(b)},onCcdImportWindowViewRawCcdBtnClick:function(){var a=this,b=Ext.create("App.model.patient.PatientDocumentsTemp",{create_date:new Date,document_name:"temp_ccd.xml",document:a.getCcdImportWindow().ccd});b.save({callback:function(a){app.onDocumentView(a.data.id,"ccd"),say(a.data.id)}})}}),Ext.define("App.controller.patient.CognitiveAndFunctionalStatus",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"CognitiveAndFunctionalStatusPanel",selector:"patientcognitiveandfunctionalstatuspanel"},{ref:"NewFunctionalStatusBtn",selector:"#newFunctionalStatusBtn"}],init:function(){var a=this;a.control({patientcognitiveandfunctionalstatuspanel:{activate:a.onCognitiveAndFunctionalStatusPanelActive},"#newFunctionalStatusBtn":{click:a.onNewFunctionalStatusBtnClick},"#functionalStatusCategoryCombo":{select:a.onFunctionalStatusCategoryComboSelect},"#functionalStatusSatausCombo":{select:a.onFunctionalStatusStatusComboSelect},"#functionalStatusCodeCombo":{select:a.onFunctionalStatusCodeComboSelect}})},onCognitiveAndFunctionalStatusPanelActive:function(a){var b=a.getStore();b.clearFilter(!0),b.filter([{property:"pid",value:app.patient.pid}])},onNewFunctionalStatusBtnClick:function(a){var b,c=a.up("grid"),d=c.getStore();c.editingPlugin.cancelEdit(),b=d.add({pid:app.patient.pid,eid:app.patient.eid,uid:app.user.id,begin_date:new Date,created_date:new Date}),c.editingPlugin.startEdit(b[0],0)},onFunctionalStatusCategoryComboSelect:function(a,b){var c=a.up("form").getForm().getRecord();c.set({category_code:b[0].data.code,category_code_type:b[0].data.code_type})},onFunctionalStatusStatusComboSelect:function(a,b){var c=a.up("form").getForm().getRecord();c.set({status_code:b[0].data.code,status_code_type:b[0].data.code_type})},onFunctionalStatusCodeComboSelect:function(a,b){var c=a.up("form").getForm().getRecord();c.set({code:b[0].data.ConceptId,code_type:b[0].data.CodeType})}}),Ext.define("App.controller.patient.DecisionSupport",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"DecisionSupportWarningPanel",selector:"#DecisionSupportWarningPanel"}],init:function(){var a=this;a.control({viewport:{beforeencounterload:a.onBeforeEncounterLoad}})},onBeforeEncounterLoad:function(){this.getDecisionSupportAlerts()},getDecisionSupportAlerts:function(){if(this.getDecisionSupportWarningPanel()){var a=this.getDecisionSupportWarningPanel();a.collapse(),a.hide(),a.removeAll(),DecisionSupport.getAlerts({pid:app.patient.pid,alertType:"P"},function(b){for(var c=0;c<b.length;c++){say(b[c]);var d={xtype:"button",margin:"2 5",icon:""!=b[c].reference?"resources/images/icons/blueInfo.png":null,text:b[c].description,result:b[c],handler:function(a){""!=a.result.reference?window.open(a.result.reference,"_blank","toolbar=no, scrollbars=yes, resizable=yes, top=10, left=10, width=1000, height=600"):app.msg(_("oops"),_("no_reference_provided"),!0)}};a.add(d)}b.length>0&&(a.show(),a.expand())})}}}),Ext.define("App.controller.patient.DoctorsNotes",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"DoctorsNotesGrid",selector:"patientdoctorsnotepanel"},{ref:"PrintDoctorsNoteBtn",selector:"#printDoctorsNoteBtn"},{ref:"NewDoctorsNoteBtn",selector:"#newDoctorsNoteBtn"}],init:function(){var a=this;a.control({patientdoctorsnotepanel:{activate:a.onDoctorsNotesGridActive,selectionchange:a.onDoctorsNotesGridSelectionChange,beforerender:a.onDoctorsNotesGridBeforeRender,beforeedit:a.onDoctorsNotesGridBeforeEdit,validateedit:a.onDoctorsNotesGridValidateEdit},"#printDoctorsNoteBtn":{click:a.onPrintDoctorsNoteBtn},"#newDoctorsNoteBtn":{click:a.onNewDoctorsNoteBtn}}),a.docTemplates={},CombosData.getTemplatesTypes(function(b,c){for(var d=0;d<c.result.length;d++)c.result[d].id&&(a.docTemplates[c.result[d].id]=c.result[d].title)})},onDoctorsNotesGridBeforeRender:function(a){app.on("patientunset",function(){a.editingPlugin.cancelEdit(),a.getStore().removeAll()})},onDoctorsNotesGridSelectionChange:function(a,b){this.getPrintDoctorsNoteBtn().setDisabled(0==b.length)},onNewDoctorsNoteBtn:function(a){var b=a.up("grid");b.editingPlugin.cancelEdit(),b.getStore().insert(0,{pid:app.patient.pid,eid:app.patient.eid,uid:app.user.id,refill:0,order_date:new Date,from_date:new Date}),b.editingPlugin.startEdit(0,0)},onDoctorsNotesGridValidateEdit:function(a,b){var c=a.editor.query("multitextfield")[0],d=c.getValue();b.record.set({restrictions:d})},onDoctorsNotesGridBeforeEdit:function(a,b){var c=a.editor.query("multitextfield")[0],d=b.record.data.restrictions;c.setValue(d)},onPrintDoctorsNoteBtn:function(){var a=this,b=a.getDoctorsNotesGrid(),c=b.getSelectionModel().getSelection()[0],d={};d.pid=c.data.pid,d.eid=c.data.eid,d.docType="Doctors Note",d.templateId=c.data.template_id,d.docNoteid=c.data.id,DocumentHandler.createTempDocument(d,function(a,b){window.dual?dual.onDocumentView(b.result.id,"Doctors Note"):app.onDocumentView(b.result.id,"Doctors Note")})},onDoctorsNotesGridActive:function(a){var b=a.getStore();a.editingPlugin.editing||(b.clearFilter(!0),b.filter([{property:"pid",value:app.patient.pid}]))},templatesRenderer:function(a){return this.docTemplates[a]}}),Ext.define("App.controller.patient.FamilyHistory",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"FamilyHistoryPanel",selector:"familyhistorypanel"},{ref:"FamilyHistorySaveBtn",selector:"#familyHistorySaveBtn"}],init:function(){var a=this;a.control({"#familyHistorySaveBtn":{click:a.onFamilyHistoryPanelSaveBtnClick}})},onFamilyHistoryPanelSaveBtnClick:function(a){var b=a.up("form").getForm(),c=b.getValues(),d=b.getRecord();c.update_uid=app.user.id,c.update_date=new Date,d.set(c),d.store.sync()}}),Ext.define("App.controller.patient.Immunizations",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"ImmunizationPanel",selector:"patientimmunizationspanel"},{ref:"ImmunizationsGrid",selector:"patientimmunizationspanel #patientImmunizationsGrid"},{ref:"CvxGrid",selector:"patientimmunizationspanel #cvxGrid"},{ref:"CvxMvxCombo",selector:"cvxmanufacturersforcvxcombo"},{ref:"AddImmunizationBtn",selector:"patientimmunizationspanel #addImmunizationBtn"},{ref:"ReviewImmunizationsBtn",selector:"patientimmunizationspanel #reviewImmunizationsBtn"},{ref:"SubmitVxuBtn",selector:"patientimmunizationspanel #submitVxuBtn"}],init:function(){var a=this;a.control({patientimmunizationspanel:{activate:a.onPatientImmunizationsPanelActive},"patientimmunizationspanel #patientImmunizationsGrid":{selectionchange:a.onPatientImmunizationsGridSelectionChange},"patientimmunizationspanel #cvxGrid":{expand:a.onCvxGridExpand},"patientimmunizationspanel #submitVxuBtn":{click:a.onSubmitVxuBtnClick},"patientimmunizationspanel #reviewImmunizationsBtn":{click:a.onReviewImmunizationsBtnClick},"patientimmunizationspanel #addImmunizationBtn":{click:a.onAddImmunizationBtnClick},"form #immunizationsearch":{select:a.onImmunizationSearchSelect}})},onImmunizationSearchSelect:function(a,b){var c=a.up("form").getForm();this.getCvxMvxCombo().getStore().load({params:{cvx_code:b[0].data.cvx_code}}),c.getRecord().set({code:b[0].data.cvx_code,code_type:"CVX"})},onCvxGridExpand:function(a){a.getStore().load()},onPatientImmunizationsGridSelectionChange:function(a,b){this.getSubmitVxuBtn().setDisabled(0==b.length)},onPatientImmunizationsPanelActive:function(){this.loadPatientImmunizations()},onSubmitVxuBtnClick:function(){var a=this,b=a.getImmunizationsGrid().getSelectionModel().getSelection(),c=[];a.vxuWindow=a.getVxuWindow();for(var d=0;d<b.length;d++)c.push(b[d].data);a.vxuWindow.getComponent("list").update(c)},onReviewImmunizationsBtnClick:function(){},onAddImmunizationBtnClick:function(){var a=this.getImmunizationsGrid(),b=a.getStore();a.editingPlugin.cancelEdit(),b.insert(0,{created_uid:app.user.id,uid:app.user.id,pid:app.patient.pid,eid:app.patient.eid,create_date:new Date,begin_date:new Date}),a.editingPlugin.startEdit(0,0)},loadPatientImmunizations:function(){var a=this.getImmunizationsGrid().getStore();a.clearFilter(!0),a.filter([{property:"pid",value:app.patient.pid}])},getVxuWindow:function(){var a=this;return Ext.widget("window",{title:_("submit_hl7_vxu"),closable:!1,modal:!0,bodyStyle:"background-color:white",defaults:{xtype:"container",border:!1,margin:10},items:[{html:_("please_verify_the_information")+":",margin:"10 10 0 10"},{width:700,minHeight:50,maxHeight:200,itemId:"list",margin:"0 10 20 10",styleHtmlContent:!0,tpl:new Ext.XTemplate("<ul>",'<tpl for=".">',"   <li>CVX:{code} - {vaccine_name} {administer_amount} {administer_units} {date_administered}</li>","</tpl></ul>")}],buttons:[a.vxuFrom=Ext.create("App.ux.combo.ActiveFacilities",{fieldLabel:_("send_from"),emptyText:_("select"),labelWidth:60,store:Ext.create("App.store.administration.HL7Clients",{filters:[{property:"active",value:!0}]})}),a.vxuTo=Ext.widget("combobox",{xtype:"combobox",fieldLabel:_("send_to"),emptyText:_("select"),allowBlank:!1,forceSelection:!0,labelWidth:60,displayField:"recipient_application",valueField:"id",store:Ext.create("App.store.administration.HL7Clients",{filters:[{property:"active",value:!0}]})}),{text:_("send"),scope:a,handler:a.doSendVxu},{text:_("cancel"),handler:function(){a.vxuWindow.close()}}]}).show()},doSendVxu:function(){var a=this,b=a.getImmunizationsGrid().getSelectionModel(),c=b.getSelection(),d={},e=[];if(a.vxuTo.isValid()){for(var f=0;f<c.length;f++)e.push(c[f].data.id);d.pid=a.pid,d.from=a.vxuFrom.getValue(),d.to=a.vxuTo.getValue(),d.immunizations=e,a.vxuWindow.el.mask(_("sending")),HL7Messages.sendVXU(d,function(c,d){a.vxuWindow.el.unmask(),d.result.success?app.msg(_("sweet!"),_("message_sent")):app.msg(_("oops!"),_("message_error"),!0),a.vxuWindow.close(),b.deselectAll()})}}}),Ext.define("App.controller.patient.ItemsToReview",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"ItemsToReviewPanel",selector:"#ItemsToReviewPanel"},{ref:"ItemsToReviewImmuGrid",selector:"#ItemsToReviewPanel #ItemsToReviewImmuGrid"},{ref:"ItemsToReviewAllergiesGrid",selector:"#ItemsToReviewPanel #ItemsToReviewAllergiesGrid"},{ref:"ItemsToReviewActiveProblemsGrid",selector:"#ItemsToReviewPanel #ItemsToReviewActiveProblemsGrid"},{ref:"ItemsToReviewMedicationsGrid",selector:"#ItemsToReviewPanel #ItemsToReviewMedicationsGrid"},{ref:"ReviewSmokingStatusCombo",selector:"#ItemsToReviewPanel #reviewsmokingstatuscombo"}],init:function(){var a=this;a.control({"#ItemsToReviewPanel":{activate:a.storesLoad},"#encounterRecordAdd":{click:a.onReviewAll}})},storesLoad:function(){var a=this,b={filters:[{property:"pid",value:app.patient.pid}]};a.getReviewSmokingStatusCombo().reset(),a.getItemsToReviewImmuGrid().getStore().load(b),a.getItemsToReviewAllergiesGrid().getStore().load(b),a.getItemsToReviewActiveProblemsGrid().getStore().load(b),a.getItemsToReviewMedicationsGrid().getStore().load(b),a.smokeStatusStore=app.getController("patient.Social").smokeStatusStore,b.callback=function(){this.last()&&a.getReviewSmokingStatusCombo().setValue(this.last().data.status)},a.smokeStatusStore.load(b)},onReviewAll:function(){var a=this,b={pid:app.patient.pid,eid:app.patient.eid};a.getReviewSmokingStatusCombo().isValid()&&Medical.reviewAllMedicalWindowEncounter(b,function(a,b){b.result.success?app.msg("Sweet!",_("items_to_review_save_and_review")):app.msg("Oops!",_("items_to_review_entry_error"))})}}),Ext.define("App.controller.patient.Medical",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"MedicalWindow",selector:"#MedicalWindow"}],init:function(){var a=this;a.control({viewport:{navkey:a.onNavKey},"#MedicalWindow #immunization":{show:a.onPanelShow},"#MedicalWindow #allergies":{show:a.onPanelShow},"#MedicalWindow #activeproblems":{show:a.onPanelShow},"#MedicalWindow #medications":{show:a.onPanelShow},"#MedicalWindow #laboratories":{show:a.onPanelShow},"#MedicalWindow #socialhistory":{show:a.onPanelShow},"#MedicalWindow #referrals":{show:a.onPanelShow}})},onNavKey:function(a,b){if(!app.patient.pid)return void app.msg(_("oops"),_("patient_error"),!0);var c=this.getMedicalWindow().show();switch(b){case a.ONE:c.cardSwitch("immunization");break;case a.TWO:c.cardSwitch("allergies");break;case a.THREE:c.cardSwitch("activeproblems");break;case a.FOUR:c.cardSwitch("medications");break;case a.FIVE:c.cardSwitch("laboratories");break;case a.SIX:c.cardSwitch("socialhistory");break;case a.SEVEN:c.cardSwitch("referrals")}},onPanelShow:function(a){this.setWindowTitle(a.title)},setWindowTitle:function(a){this.getMedicalWindow().setTitle(app.patient.name+" ("+a+") "+(app.patient.readOnly?'-  <span style="color:red">[Read Mode]</span>':""))}}),Ext.define("App.controller.patient.Medications",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"MedicationsPanel",selector:"patientmedicationspanel"},{ref:"PatientMedicationsGrid",selector:"patientmedicationspanel #patientMedicationsGrid"},{ref:"MedicationsListGrid",selector:"patientmedicationspanel #medicationsListGrid"},{ref:"addPatientMedicationBtn",selector:"patientmedicationspanel #addPatientMedicationBtn"},{ref:"MedicationsListGridSearchField",selector:"patientmedicationspanel #medicationsListGrid triggerfield"}],init:function(){var a=this;a.control({patientmedicationspanel:{activate:a.onMedicationsPanelActive},"patientmedicationspanel #medicationsListGrid":{expand:a.onMedicationsListGridExpand},"patientmedicationspanel #medicationsListGrid triggerfield":{beforerender:a.onMedicationsListGridTriggerFieldBeforeRender},"patientmedicationspanel #addPatientMedicationBtn":{click:a.onAddPatientMedicationBtnClick},"#patientMedicationLiveSearch":{select:a.onMedicationLiveSearchSelect}})},onMedicationsListGridExpand:function(a){this.getMedicationsListGridSearchField().reset(),a.getStore().load()},onMedicationsListGridTriggerFieldBeforeRender:function(a){var b=this;a.onTriggerClick=function(){b.getMedicationsListGrid().getStore().load({params:{query:this.getValue()}})}},onAddPatientMedicationBtnClick:function(){var a=this,b=a.getPatientMedicationsGrid(),c=b.getStore();b.editingPlugin.cancelEdit(),c.insert(0,{pid:app.patient.pid,eid:app.patient.eid,uid:app.user.id,created_uid:app.user.id,create_date:new Date,begin_date:new Date}),b.editingPlugin.startEdit(0,0)},onMedicationLiveSearchSelect:function(a,b){var c=a.up("form").getForm();c.getRecord().set({RXCUI:b[0].data.RXCUI,CODE:b[0].data.CODE})},onMedicationsPanelActive:function(){var a=this.getPatientMedicationsGrid().getStore();a.clearFilter(!0),a.filter([{property:"pid",value:app.patient.pid}])}}),Ext.define("App.controller.patient.Patient",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"PossiblePatientDuplicatesWindow",selector:"#PossiblePatientDuplicatesWindow"},{ref:"PatientDemographicForm",selector:"#PatientDemographicForm"}],init:function(){var a=this;a.control({"#PossiblePatientDuplicatesWindow":{close:a.onPossiblePatientDuplicatesWindowCLose},"#PossiblePatientDuplicatesWindow > grid":{itemdblclick:a.onPossiblePatientDuplicatesGridItemDblClick},"#PatientPossibleDuplicatesBtn":{click:a.onPatientPossibleDuplicatesBtnClick},"#PossiblePatientDuplicatesContinueBtn":{click:a.onPossiblePatientDuplicatesContinueBtnClick}})},onPossiblePatientDuplicatesGridItemDblClick:function(a,b){"openPatientSummary"==this.getPossiblePatientDuplicatesWindow().action&&app.setPatient(b.data.pid,null,function(){app.openPatientSummary(),a.up("window").close()})},onPossiblePatientDuplicatesWindowCLose:function(a){var b=a.down("grid").getStore();b.removeAll(),b.commitChanges()},checkForPossibleDuplicates:function(a){var b=this,c=a.isPanel?a.getForm():a.up("form").getForm();if(c.isValid()){var d={fname:c.findField("fname").getValue(),lname:c.findField("lname").getValue(),sex:c.findField("sex").getValue(),DOB:c.findField("DOB").getValue()};c.getRecord()&&(d.pid=c.getRecord().data.pid),b.lookForPossibleDuplicates(d,"openPatientSummary")}else app.msg(_("oops"),_("required_fields_missing"),!0)},lookForPossibleDuplicates:function(a,b,c){var d=this,e=d.getPossiblePatientDuplicatesWindow()||Ext.create("App.view.patient.windows.PossibleDuplicates"),f=e.down("grid").getStore();e.action=b,f.getProxy().extraParams=a,f.load({callback:function(a){"function"==typeof c&&c(a),a.length>0?e.show():app.msg(_("sweet"),_("no_possible_duplicates_found"))}})},onPatientPossibleDuplicatesBtnClick:function(a){this.checkForPossibleDuplicates(a.up("panel").down("form"))},onPossiblePatientDuplicatesContinueBtnClick:function(){var a=this.getPossiblePatientDuplicatesWindow();a.fireEvent("continue",a),a.close()}}),Ext.define("App.controller.patient.RadOrders",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"RadOrdersGrid",selector:"patientradorderspanel"},{ref:"PrintRadOrderBtn",selector:"patientradorderspanel #printRadOrderBtn"}],init:function(){var a=this;a.control({patientradorderspanel:{activate:a.onRadOrdersGridActive,selectionchange:a.onRadOrdersGridSelectionChange,beforerender:a.onRadOrdersGridBeforeRender},"#radOrderliveSearch":{select:a.onRadSearchSelect},"patientradorderspanel #newRadOrderBtn":{click:a.onNewRadOrderBtnClick},"patientradorderspanel #printRadOrderBtn":{click:a.onPrintRadOrderBtnClick}})},onRadOrdersGridBeforeRender:function(a){app.on("patientunset",function(){a.editingPlugin.cancelEdit(),a.getStore().removeAll()})},onRadSearchSelect:function(a,b){var c=a.up("form").getForm();c.getRecord().set({code:b[0].data.code,code_type:b[0].data.code_type}),c.findField("code").setValue(b[0].data.code),c.findField("note").focus(!1,200)},onRadOrdersGridSelectionChange:function(a,b){this.getPrintRadOrderBtn().setDisabled(0==b.length)},onNewRadOrderBtnClick:function(){var a=this,b=a.getRadOrdersGrid(),c=b.getStore();b.editingPlugin.cancelEdit(),c.insert(0,{pid:app.patient.pid,eid:app.patient.eid,uid:app.user.id,date_ordered:new Date,order_type:"rad",status:"Pending",priority:"Normal"}),b.editingPlugin.startEdit(0,0)},onPrintRadOrderBtnClick:function(){var a,b,c=this,d=c.getRadOrdersGrid(),e=d.getSelectionModel().getSelection(),f={};for(f.pid=app.patient.pid,f.eid=app.patient.eid,f.orderItems=[],f.docType="Rad",f.templateId=6,f.orderItems.push(["Description","Notes"]),b=0;b<e.length;b++)a=e[b].data,f.orderItems.push([a.description+" ["+a.code_type+":"+a.code+"]",a.note]);DocumentHandler.createTempDocument(f,function(a,b){window.dual?dual.onDocumentView(b.result.id,"Rad"):app.onDocumentView(b.result.id,"Rad")})},onRadOrdersGridActive:function(a){var b=a.getStore();a.editingPlugin.editing||(b.clearFilter(!0),b.filter([{property:"pid",value:app.patient.pid},{property:"order_type",value:"rad"}]))},radOrdersGridStatusColumnRenderer:function(a){var b="black";return"Canceled"==a?b="red":"Pending"==a?b="orange":"Routed"==a?b="blue":"Complete"==a&&(b="green"),'<div style="color:'+b+'">'+a+"</div>"}}),Ext.define("App.controller.patient.Referrals",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"ReferralPanelGrid",selector:"patientreferralspanel"},{ref:"AddReferralBtn",selector:"button[action=addReferralBtn]"},{ref:"PrintReferralBtn",selector:"#printReferralBtn"},{ref:"ReferralProviderCombo",selector:"#ReferralProviderCombo"},{ref:"ReferralLocalProviderCombo",selector:"#ReferralLocalProviderCombo"},{ref:"ReferralExternalProviderCombo",selector:"#ReferralExternalProviderCombo"},{ref:"ReferralExternalReferralCheckbox",selector:"#ReferralExternalReferralCheckbox"}],init:function(){var a=this;
a.control({patientreferralspanel:{activate:a.onReferralActive,selectionchange:a.onGridSelectionChange,beforeedit:a.onGridBeforeEdit},"button[action=addReferralBtn]":{click:a.onAddReferralBtnClicked},"#referralServiceSearch":{select:a.onReferralServiceSearchSelect},"#referralDiagnosisSearch":{select:a.onReferralDiagnosisSearchSelect},"#ReferralExternalReferralCheckbox":{change:a.onReferralExternalReferralCheckboxChange},"#printReferralBtn":{click:a.onPrintReferralBtnClick},"#ReferralProviderCombo":{select:a.onReferralProviderComboSelect},"#ReferralLocalProviderCombo":{select:a.onReferralLocalProviderComboSelect},"#ReferralExternalProviderCombo":{select:a.onReferralExternalProviderComboSelect}})},onGridBeforeEdit:function(a,b){this.getReferralExternalReferralCheckbox().setValue(b.record.data.is_external_referral),this.getReferralLocalProviderCombo().setValue(b.record.data.refer_to_text),this.getReferralExternalProviderCombo().setValue(b.record.data.refer_to_text)},onReferralProviderComboSelect:function(a,b){var c=a.up("form").getForm().getRecord();c.set({refer_by:b[0].data.option_value})},onReferralLocalProviderComboSelect:function(a,b){var c=a.up("form").getForm().getRecord();c.set({refer_to:b[0].data.id})},onReferralExternalProviderComboSelect:function(a,b){var c=a.up("form").getForm().getRecord();c.set({refer_to:b[0].data.id})},onPrintReferralBtnClick:function(){var a=this,b=a.getReferralPanelGrid(),c=b.getSelectionModel(),d=c.getSelection();b.view.el.mask(_("generating_documents"));for(var e=0;e<d.length;e++){var f={pid:a.pid,eid:a.eid,referralId:d[e].data.id,templateId:10,docType:"Referral"};DocumentHandler.createTempDocument(f,function(a,c){window.dual?dual.onDocumentView(c.result.id,"Referral"):app.onDocumentView(c.result.id,"Referral"),b.view.el.unmask()})}},onGridSelectionChange:function(a,b){this.getPrintReferralBtn().setDisabled(0==b.length)},onReferralServiceSearchSelect:function(a,b){var c=a.up("form").getForm().getRecord();c.set({service_code:b[0].data.code,service_code_type:b[0].data.code_type})},onReferralDiagnosisSearchSelect:function(a,b){var c=a.up("form").getForm().getRecord();c.set({diagnosis_code:b[0].data.code,diagnosis_code_type:b[0].data.code_type})},onReferralExternalReferralCheckboxChange:function(a,b){this.getReferralLocalProviderCombo().setVisible(!b),this.getReferralLocalProviderCombo().setDisabled(b),this.getReferralExternalProviderCombo().setVisible(b),this.getReferralExternalProviderCombo().setDisabled(!b)},onReferralActive:function(a){var b=a.getStore();b.clearFilter(!0),b.filter([{property:"pid",value:app.patient.pid}])},onAddReferralBtnClicked:function(){var a,b=this,c=b.getReferralPanelGrid().getStore(),d=b.getReferralPanelGrid().editingPlugin;d.cancelEdit(),a=c.add({pid:app.patient.pid,eid:app.patient.eid,create_date:new Date,create_uid:app.user.id,referral_date:new Date}),d.startEdit(a[0],0)}}),Ext.define("App.controller.patient.RxOrders",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"RxOrdersGrid",selector:"patientrxorderspanel"},{ref:"RxNormOrderLiveSearch",selector:"#RxNormOrderLiveSearch"},{ref:"CloneRxOrderBtn",selector:"#cloneRxOrderBtn"},{ref:"PrintRxOrderBtn",selector:"#printRxOrderBtn"},{ref:"RxEncounterDxLiveSearch",selector:"#rxEncounterDxLiveSearch"},{ref:"RxEncounterDxCombo",selector:"#RxEncounterDxCombo"},{ref:"RxOrderGridFormNotesField",selector:"#RxOrderGridFormNotesField"},{ref:"RxOrderCompCheckBox",selector:"#RxOrderCompCheckBox"},{ref:"RxOrderSplyCheckBox",selector:"#RxOrderSplyCheckBox"}],init:function(){var a=this;a.control({patientrxorderspanel:{activate:a.onRxOrdersGridActive,selectionchange:a.onRxOrdersGridSelectionChange,beforerender:a.onRxOrdersGridBeforeRender,beforeedit:a.onRxOrdersGridBeforeEdit},"#RxNormOrderLiveSearch":{select:a.onRxNormOrderLiveSearchSelect},"#newRxOrderBtn":{click:a.onNewRxOrderBtnClick},"#cloneRxOrderBtn":{click:a.onCloneRxOrderBtnClick},"#printRxOrderBtn":{click:a.onPrintRxOrderBtnClick},"#RxOrderCompCheckBox":{change:a.onRxOrderCompCheckBoxChange},"#RxOrderSplyCheckBox":{change:a.onRxOrderSplyCheckBoxChange}})},onRxOrderCompCheckBoxChange:function(a,b){b&&this.getRxOrderSplyCheckBox().setValue(!1)},onRxOrderSplyCheckBoxChange:function(a,b){b&&this.getRxOrderCompCheckBox().setValue(!1)},doSelectOrderByOrderId:function(a){var b=this.getRxOrdersGrid().getSelectionModel(),c=this.getRxOrdersGrid().getStore().getById(a);b.select(c)},onRxOrdersGridBeforeRender:function(a){app.on("patientunset",function(){a.editingPlugin.cancelEdit(),a.getStore().removeAll()})},onRxOrdersGridSelectionChange:function(a,b){this.getCloneRxOrderBtn().setDisabled(0==b.length),this.getPrintRxOrderBtn().setDisabled(0==b.length)},onRxNormOrderLiveSearchSelect:function(a,b){var c=a.up("form").getForm();c.getRecord().set({RXCUI:b[0].data.RXCUI,CODE:b[0].data.CODE,NDC:b[0].data.NDC}),c.findField("dispense").focus(!1,200)},onRxOrdersGridBeforeEdit:function(a,b){this.getRxEncounterDxCombo().getStore().load({filters:[{property:"eid",value:b.record.data.eid}]})},onNewRxOrderBtnClick:function(a){var b=a.up("grid");b.editingPlugin.cancelEdit(),b.getStore().insert(0,{pid:app.patient.pid,eid:app.patient.eid,uid:app.user.id,refill:0,daw:null,date_ordered:new Date,begin_date:new Date,created_date:new Date}),b.editingPlugin.startEdit(0,0)},onCloneRxOrderBtnClick:function(){var a=this;Ext.Msg.show({title:"Wait!",msg:"Are you sure you want to clone this prescription?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(b){"yes"==b&&a.doCloneOrder()}})},doCloneOrder:function(a){var b,c,d=this,e=d.getRxOrdersGrid(),f=e.getSelectionModel(),g=e.getStore(),h=f.getSelection(),i=new Date;e.editingPlugin.cancelEdit(),f.deselectAll();for(var j=0;j<h.length;j++)c=Ext.clone(h[j].data),c.pid=app.patient.pid,c.eid=app.patient.eid,c.uid=app.user.id,c.ref_order=c.id,"string"==typeof a&&(c.ref_order+="~"+a),c.date_ordered=i,c.begin_date=i,c.created_date=i,c.id=null,b=g.insert(0,c);return e.editingPlugin.startEdit(b[0],0),b},onPrintRxOrderBtnClick:function(){var a,b,c=this,d=c.getRxOrdersGrid(),e=d.getSelectionModel().getSelection(),f="",g={};for(g.pid=app.patient.pid,g.eid=app.patient.eid,g.orderItems=[],g.docType="Rx",g.templateId=5,g.orderItems.push(["Description","Instructions","Dispense","Refill","Days Supply","Dx","Notes"]),b=0;b<e.length;b++){if(a=e[b].data,f=a.notes,""!=a.ref_order){var h=a.ref_order.split("~");f="Reference #: "+h[0]+"<br>"+f}g.orderItems.push([a.STR+" "+a.dose+" "+a.route+" "+a.form,a.directions,a.dispense,a.refill,a.days_supply,a.dxs.join?a.dxs.join(", "):a.dxs,f])}DocumentHandler.createTempDocument(g,function(a,b){window.dual?dual.onDocumentView(b.result.id,"Rx"):app.onDocumentView(b.result.id,"Rx")})},onRxOrdersGridActive:function(a){var b=a.getStore();a.editingPlugin.editing||(b.clearFilter(!0),b.filter([{property:"pid",value:app.patient.pid}]))}}),Ext.define("App.controller.patient.Social",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"SocialPanel",selector:"patientsocialpanel"},{ref:"SocialHistoryGrid",selector:"patientsocialhistorypanel"},{ref:"SocialHistoryTypeCombo",selector:"combobox[action=socialHistoryTypeCombo]"},{ref:"SocialHistoryAddBtn",selector:"button[action=socialHistoryAddBtn]"},{ref:"ObservationColumn",selector:"#socialhistorypanelobservationcolumn"},{ref:"SmokingStatusCombo",selector:"#socialsmokingstatuscombo"}],init:function(){var a=this;a.control({patientsocialpanel:{activate:a.onSocialPanelActive},patientsocialhistorypanel:{beforeedit:a.onSocialHistoryBeforeEdit},"button[action=socialHistoryAddBtn]":{click:a.onAddBtnClicked},"combobox[action=socialHistoryTypeCombo]":{select:a.onHistoryTypeComboSelectionChanged},"#socialsistoryobservationcombo":{select:a.onHistoryObservationComboSelect},"#socialsmokingstatuscombo":{select:a.onSmokingStatusComboSelect},"#reviewsmokingstatuscombo":{select:a.onSmokingStatusComboSelect}}),a.smokeStatusStore=Ext.create("App.store.patient.SmokeStatus",{pageSize:1e3,listeners:{scope:a,load:a.onSmokeStatusStoreLoad}})},onSmokeStatusStoreLoad:function(a){a.last()&&this.getSmokingStatusCombo()&&this.getSmokingStatusCombo().setValue(a.last().data.status)},onSmokingStatusComboSelect:function(a,b){var c=this;c.smokeStatusStore.add({pid:app.patient.pid,eid:app.patient.eid,status:b[0].data.option_name,status_code:b[0].data.code,status_code_type:b[0].data.code_type,create_uid:app.user.id,create_date:new Date}),c.smokeStatusStore.sync({success:function(){window.dual?dual.msg(_("sweet"),_("record_updated")):app.msg(_("sweet"),_("record_updated")),c.loadSmokeStatusStore(a.up("grid").up("panel"))},failure:function(){window.dual?dual.msg(_("oops"),_("record_error"),!0):app.msg(_("oops"),_("record_error"),!0)}})},onAddBtnClicked:function(){var a,b=this.getSocialHistoryTypeCombo().lastSelection[0],c=this.getSocialHistoryGrid().editingPlugin;this.getSocialHistoryTypeCombo().isValid()&&(c.cancelEdit(),a=this.getSocialHistoryGrid().getStore().add({pid:app.patient.pid,eid:app.patient.eid,create_uid:app.user.id,update_uid:app.user.id,create_date:new Date,update_date:new Date,category_code:b.data.code,category_code_type:b.data.code_type,category_code_text:b.data.option_name}),c.startEdit(a[0],0))},onSocialHistoryBeforeEdit:function(a,b){var c,d=this.getObservationColumn();c="229819007"==b.record.data.category_code?{xtype:"gaiaehr.combo",valueField:"option_name",itemId:"socialsistoryobservationcombo",list:106}:"160573003"==b.record.data.category_code?{xtype:"gaiaehr.combo",valueField:"option_name",itemId:"socialsistoryobservationcombo",list:105}:"256235009"==b.record.data.category_code?{xtype:"gaiaehr.combo",valueField:"option_name",itemId:"socialsistoryobservationcombo",list:107}:"363908000"==b.record.data.category_code?{xtype:"gaiaehr.combo",valueField:"option_name",itemId:"socialsistoryobservationcombo",list:108}:{xtype:"textfield"},c._marginWidth=2,d.setEditor(c),a.editor.onColumnResize(d)},onHistoryObservationComboSelect:function(a,b){var c=a.up("form").getForm().getRecord();c.set({observation_code:b[0].data.code,observation_code_type:b[0].data.code_type})},onHistoryTypeComboSelectionChanged:function(){this.getSocialHistoryAddBtn().enable()},loadSmokeStore:function(){this.smokeStatusStore.clearFilter(!0),this.smokeStatusStore.filter([{property:"pid",value:app.patient.pid}])},loadSmokeStatusStore:function(a){var b=a.query("#PatientSmokingStatusGrid");if(b.length>0){var c=b[0].getStore();c.clearFilter(!0),c.filter([{property:"pid",value:app.patient.pid}])}},loadSocialHistoryStore:function(a){var b=a.query("#PatientSocialHistoryGrid");if(b.length>0){var c=b[0].getStore();c.clearFilter(!0),c.filter([{property:"pid",value:app.patient.pid}])}},onSocialPanelActive:function(a){this.loadSmokeStatusStore(a),this.loadSocialHistoryStore(a),this.loadSmokeStore(),this.getSmokingStatusCombo().reset()}}),Ext.define("App.controller.patient.Summary",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"PatientSummaryPanel",selector:"PatientSummaryPanel"},{ref:"PatientDocumentPanel",selector:"patientdocumentspanel"},{ref:"PatientCcdPanel",selector:"patientccdpanel"},{ref:"ReferralPanelGrid",selector:"patientreferralspanel"},{ref:"AddReferralBtn",selector:"button[action=addReferralBtn]"},{ref:"PrintReferralBtn",selector:"#printReferralBtn"}],init:function(){var a=this;a.control({"#PatientSummaryPanel":{activate:a.onPatientSummaryPanel},"#PatientSummaryEncountersPanel":{itemdblclick:a.onPatientSummaryEncounterDblClick},"#PatientSummaryDisclosuresPanel":{show:a.reloadGrid},"#PatientSummeryNotesPanel":{show:a.reloadGrid},"#PatientSummaryRemindersPanel":{show:a.reloadGrid},"#PatientSummaryVitalsPanel":{show:a.reloadGrid},"#PatientEncounterHistoryPanel":{show:a.reloadGrid},"#PatientSummaryDocumentsPanel":{show:a.reloadGrid},"#PatientSummaryPreventiveCareAlertsPanel":{show:a.reloadGrid}}),a.nav=a.getController("Navigation")},onPatientSummaryPanel:function(a){var b=this.nav.getExtraParams();b&&(b.document?a.down("tabpanel").setActiveTab(this.getPatientDocumentPanel()):b.ccd&&a.down("tabpanel").setActiveTab(this.getPatientCcdPanel()))},onPatientSummaryEncounterDblClick:function(a,b){app.openEncounter(b.data.eid)},reloadGrid:function(a){var b;b="PatientSummaryVitalsPanel"==a.itemId?a.down("vitalsdataview").getStore():a.getStore(),b.clearFilter(!0),b.load({params:{pid:app.patient.pid},filters:[[{property:"pid",value:app.patient.pid}]]})}}),Ext.define("App.controller.patient.Vitals",{extend:"Ext.app.Controller",refs:[{ref:"VitalsPanel",selector:"vitalspanel"},{ref:"VitalsBlocksPanel",selector:"vitalspanel #vitalsBlocks"},{ref:"VitalsBlocksPanel",selector:"vitalspanel #vitalsBlocks"},{ref:"VitalsHistoryGrid",selector:"vitalspanel #historyGrid"},{ref:"VitalsAddBtn",selector:"vitalspanel #vitalAddBtn"},{ref:"VitalSignBtn",selector:"vitalspanel #vitalSignBtn"},{ref:"VitalTempFField",selector:"#vitalTempFField"},{ref:"VitalTempCField",selector:"#vitalTempCField"},{ref:"VitalHeightInField",selector:"#vitalHeightInField"},{ref:"VitalHeightCmField",selector:"#vitalHeightCmField"},{ref:"VitalWeightKgField",selector:"#vitalWeightKgField"},{ref:"VitalWeightLbsField",selector:"#vitalWeightLbsField"},{ref:"BpBlock",selector:"vitalspanel #bpBlock"},{ref:"TempBlock",selector:"vitalspanel #tempBlock"},{ref:"WeighBlock",selector:"vitalspanel #weighBlock"},{ref:"HeightBlock",selector:"vitalspanel #heightBlock"},{ref:"BmiBlock",selector:"vitalspanel #bmiBlock"},{ref:"NotesBlock",selector:"vitalspanel #notesBlock"}],init:function(){var a=this;a.control({viewport:{beforeencounterload:a.onAppBeforeEncounterLoad},"vitalspanel #historyGrid":{selectionchange:a.onHistoryGridSelectionChange,beforeselect:a.onHistoryGridBeforeSelect,beforeedit:a.onHistoryGridBeforeEdit,validateedit:a.onHistoryGridValidEdit,edit:a.onHistoryGridEdit},"vitalspanel #vitalAddBtn":{click:a.onVitalAddBtnClick},"vitalspanel #vitalSignBtn":{click:a.onVitalSignBtnClick},"#vitalTempFField":{keyup:a.onVitalTempFFieldKeyUp},"#vitalTempCField":{keyup:a.onVitalTempCFieldKeyUp},"#vitalHeightInField":{keyup:a.onVitalHeightInFieldKeyUp},"#vitalHeightCmField":{keyup:a.onVitalHeightCmFieldKeyUp},"#vitalWeightLbsField":{keyup:a.onVitalWeightLbsFieldKeyUp},"#vitalWeightKgField":{keyup:a.onVitalWeightKgFieldKeyUp}})},onAppBeforeEncounterLoad:function(a){this.getVitalsHistoryGrid()&&this.doReconfigureGrid(a.vitalsStore?a.vitalsStore:Ext.getStore("ext-empty-store"))},onHistoryGridSelectionChange:function(a,b){var c=this,d=c.getVitalSignBtn();this.doUpdateBlocks(b),0==b.length||b[0].data.auth_uid>0?d.disable():d.enable()},onHistoryGridBeforeSelect:function(a,b){var c=a.getSelection().length;return c>0&&b.data.auth_uid>0?(say("entre false"),app.msg(_("oops"),_("multi_select_signed_records_not_authorized"),!0),!1):void 0},onHistoryGridValidEdit:function(a,b){var c=this,d=a.editor.getForm(),e=c.isMetric()?d.findField("weight_kg").getValue():d.findField("weight_lbs").getValue(),f=c.isMetric()?d.findField("height_cm").getValue():d.findField("height_in").getValue(),g=c.bmi(e,f),h=c.bmiStatus(g);b.record.set({bmi:g,bmi_status:h})},onHistoryGridEdit:function(a,b){this.doUpdateBlocks([b.record])},onHistoryGridBeforeEdit:function(a,b){return 0!=b.record.data.auth_uid?(app.msg(_("oops"),_("this_record_can_not_be_modified_because_it_has_been_signed_by")+" "+b.record.data.authorized_by,!0),!1):!0},onVitalAddBtnClick:function(a){var b,c=a.up("grid"),d=c.getStore();c.editingPlugin.cancelEdit(),b=d.add({pid:app.patient.pid,eid:app.patient.eid,uid:app.user.id,date:new Date}),c.editingPlugin.startEdit(b[0],1)},onVitalSignBtnClick:function(){var a=this,b=a.getVitalsHistoryGrid(),c=b.getSelectionModel(),d=c.getSelection();app.fireEvent("beforevitalssigned",d),app.passwordVerificationWin(function(b,c){"ok"==b&&User.verifyUserPass(c,function(b,c){if(c.result){for(var e=0;e<d.length;e++)d[e].set({auth_uid:app.user.id});d[0].store.sync({callback:function(){app.msg("Sweet!",_("vitals_signed")),app.AuditLog("Patient vitals authorized"),app.fireEvent("vitalssigned",d)}})}else Ext.Msg.show({title:"Oops!",msg:_("incorrect_password"),buttons:Ext.Msg.OKCANCEL,icon:Ext.Msg.ERROR,fn:function(b){"ok"==b&&a.onVitalSignBtnClick()}})})})},doUpdateBlocks:function(a){var b=this;a.length>0?(b.getBpBlock().update(b.getBlockTemplate("bp",a[0])),b.isMetric()?(b.getTempBlock().update(b.getBlockTemplate("temp_c",a[0])),b.getWeighBlock().update(b.getBlockTemplate("weight_kg",a[0])),b.getHeightBlock().update(b.getBlockTemplate("height_cm",a[0]))):(b.getTempBlock().update(b.getBlockTemplate("temp_f",a[0])),b.getWeighBlock().update(b.getBlockTemplate("weight_lbs",a[0])),b.getHeightBlock().update(b.getBlockTemplate("height_in",a[0]))),b.getBmiBlock().update(b.getBlockTemplate("bmi",a[0])),b.getNotesBlock().update(b.getBlockTemplate("other_notes",a[0]))):(b.getBpBlock().update(b.getBlockTemplate("bp",!1)),b.isMetric()?(b.getTempBlock().update(b.getBlockTemplate("temp_c",!1)),b.getWeighBlock().update(b.getBlockTemplate("weight_kg",!1)),b.getHeightBlock().update(b.getBlockTemplate("height_cm",!1))):(b.getTempBlock().update(b.getBlockTemplate("temp_f",!1)),b.getWeighBlock().update(b.getBlockTemplate("weight_lbs",!1)),b.getHeightBlock().update(b.getBlockTemplate("height_in",!1))),b.getBmiBlock().update(b.getBlockTemplate("bmi",!1)),b.getNotesBlock().update(b.getBlockTemplate("other_notes",!1)))},getBlockTemplate:function(a,b){var c="",d="",e="",f="",g="center";return b!==!1?"bp"==a?(c=_(a),d=b.data.bp_systolic+"/"+b.data.bp_diastolic,d="null/null"==d||"/"==d?"--/--":d,e=_("systolic")+"/"+_("diastolic")):"temp_c"==a||"temp_f"==a?(c=_("temp"),f="temp_c"==a?"&deg;C":"&deg;F",d=null==b.data[a]||""==b.data[a]?"--":b.data[a]+f,e=""==b.data.temp_location?"--":b.data.temp_location):"weight_lbs"==a||"weight_kg"==a?(c=_("weight"),d=null==b.data[a]||""==b.data[a]?"--":b.data[a]+f,e="weight_lbs"==a?"lbs/oz":"Kg"):"height_in"==a||"height_cm"==a?(c=_("height"),f="height_in"==a?" in":" cm",d=null==b.data[a]||""==b.data[a]?"--":b.data[a]+f):"bmi"==a?(c=_(a),d=null==b.data[a]||""==b.data[a]?"--":b.data[a],e=""==b.data.bmi_status?"--":b.data.bmi_status):"other_notes"==a&&(c=_("notes"),d=null==b.data[a]||""==b.data[a]?"--":b.data[a],g="left"):("temp_c"==a||"temp_f"==a?c=_("temp"):"weight_lbs"==a||"weight_kg"==a?c=_("weight"):"height_in"==a||"height_cm"==a?c=_("height"):"other_notes"==a?(c=_("notes"),g="left"):c=_(a),d="bp"==a?"--/--":"--",e="--"),'<p class="title">'+c+'</p><p class="value" style="text-align: '+g+'">'+d+'</p><p class="extra">'+e+"</p>"},doReconfigureGrid:function(a){var b=this;a.sort([{property:"date",direction:"DESC"}]),a.on("write",b.onVitalStoreWrite,b),b.getVitalsHistoryGrid().reconfigure(a),b.getVitalsHistoryGrid().getSelectionModel().select(0)},onVitalStoreWrite:function(a,b,c){app.fireEvent("vitalwrite",a,b,c)},onVitalTempFFieldKeyUp:function(a){a.up("form").getForm().getRecord().set({temp_c:this.fc(a.getValue())})},onVitalTempCFieldKeyUp:function(a){a.up("form").getForm().getRecord().set({temp_f:this.cf(a.getValue())})},onVitalHeightInFieldKeyUp:function(a){a.up("form").getForm().getRecord().set({height_cm:this.incm(a.getValue())})},onVitalHeightCmFieldKeyUp:function(a){a.up("form").getForm().getRecord().set({height_in:this.cmin(a.getValue())})},onVitalWeightLbsFieldKeyUp:function(a){a.up("form").getForm().getRecord().set({weight_kg:this.lbskg(a.getValue())})},onVitalWeightKgFieldKeyUp:function(a){a.up("form").getForm().getRecord().set({weight_lbs:this.kglbs(a.getValue())})},cf:function(a){return Ext.util.Format.round(9*a/5+32,1)},fc:function(a){return Ext.util.Format.round(5*(a-32)/9,1)},lbskg:function(a){var b=a[0]||0,c=a[1]||0,d=0;return b>0&&(d+=b/2.2046),c>0&&(d+=c/35.274),Ext.util.Format.round(d,1)},kglbs:function(a){return Ext.util.Format.round(2.2046*a,1)},incm:function(a){return Math.floor(2.54*a)},cmin:function(a){return Ext.util.Format.round(a/2.54,0)},bmi:function(weight,height){var bmi="",foo=weight.split("/");return foo.length>1&&(weight=eval(foo[0])+foo[1]/16),weight>0&&height>0&&(bmi=this.isMetric()?weight/(height/100*(height/100)):weight/(height*height)*703),bmi.toFixed?bmi.toFixed(1):bmi},bmiStatus:function(a){var b="";return""==a?"":(15>a?b=_("very_severely_underweight"):a>=15&&16>a?b=_("severely_underweight"):a>=16&&18.5>a?b=_("underweight"):a>=18.5&&25>a?b=_("normal"):a>=25&&30>a?b=_("overweight"):a>=30&&35>a?b=_("obese_class_1"):a>=35&&40>a?b=_("obese_class_2"):a>=40&&(b=_("obese_class_3")),b)},isMetric:function(){return"metric"==g("units_of_measurement")}}),Ext.define("App.controller.patient.encounter.EncounterSign",{extend:"Ext.app.Controller",requires:[],refs:[{ref:"EncounterSignWindow",selector:"#EncounterSignWindow"},{ref:"EncounterCoSignSupervisorCombo",selector:"#EncounterCoSignSupervisorCombo"},{ref:"EncounterCoSignSupervisorBtn",selector:"#EncounterCoSignSupervisorBtn"},{ref:"EncounterCancelSignBtn",selector:"#EncounterCancelSignBtn"},{ref:"EncounterSignBtn",selector:"#EncounterSignBtn"},{ref:"EncounterSignDocumentGrid",selector:"#EncounterSignDocumentGrid"},{ref:"EncounterSignAlertGrid",selector:"#EncounterSignAlertGrid"},{ref:"EncounterSignSuperBillGrid",selector:"#EncounterSignSuperBillGrid"},{ref:"EncounterSignSuperBillServiceAddBtn",selector:"#EncounterSignSuperBillServiceAddBtn"}],init:function(){var a=this;this.control({"#EncounterSignWindow":{show:a.onEncounterSignWindowShow},"#EncounterCoSignSupervisorCombo":{beforerender:a.onEncounterCoSignSupervisorComboBeforeRender},"#EncounterCoSignSupervisorBtn":{click:a.onEncounterCoSignSupervisorBtnClick},"#EncounterSignBtn":{click:a.onEncounterSignBtnClick},"#EncounterCancelSignBtn":{click:a.onEncounterCancelSignBtnClick},"#EncounterSignSuperBillServiceAddBtn":{click:a.onEncounterSignSuperBillServiceAddBtnClick},"#EncounterSignSuperCptSearchCmb":{select:a.onEncounterSignSuperCptSearchCmbSelect}})},onEncounterSignSuperBillServiceAddBtnClick:function(){var a=this,b=a.getEncounterSignSuperBillGrid(),c=b.getStore();b.editingPlugin.cancelEdit();var d=c.add({pid:a.encounter.data.pid,eid:a.encounter.data.eid,units:1,create_uid:app.user.id,date_create:new Date});b.editingPlugin.startEdit(d[0],0)},onEncounterSignSuperCptSearchCmbSelect:function(a,b){var c=a.up("form").getForm().getValue().getRecord();say(b[0].data),c.set({code:"",code_text:"",code_type:""})},onEncounterCoSignSupervisorBtnClick:function(){this.coSignEncounter()},onEncounterSignBtnClick:function(){this.signEncounter()},onEncounterCancelSignBtnClick:function(){this.cancelCheckout()},coSignEncounter:function(){this.getEncounterSignWindow().enc.doSignEncounter(!0)},signEncounter:function(){a("require_enc_supervisor")?this.getEncounterCoSignSupervisorCombo().isValid()&&this.getEncounterSignWindow().enc.doSignEncounter(!1):this.getEncounterSignWindow().enc.doSignEncounter(!1)},cancelCheckout:function(){this.getEncounterSignWindow().close(),this.getEncounterSignWindow().down("form").getForm().reset()},onEncounterCoSignSupervisorComboBeforeRender:function(a){a.getStore().load()},onEncounterSignWindowShow:function(){var b=this,c=b.getEncounterSignWindow(),d=b.getEncounterCoSignSupervisorCombo(),e=b.getEncounterCoSignSupervisorBtn(),f=b.getEncounterSignBtn();b.encounter=c.enc.encounter,b.pid=c.enc.pid,b.eid=c.enc.eid,a("access_encounter_checkout")&&(b.getEncounterSignSuperBillGrid().getStore().load({filters:[{property:"eid",value:b.eid}]}),b.getEncounterSignAlertGrid().getStore().load({params:{eid:b.eid}})),b.getEncounterSignDocumentGrid().loadDocs(app.patient.eid);var g=null!=c.enc.encounter.data.supervisor_uid&&c.enc.encounter.data.supervisor_uid>0;g?d.setValue(c.enc.encounter.data.supervisor_uid):d.reset(),c.enc.isClose()||!a("sign_enc")?(f.disable(),e.disable(),d.setVisible(g),d.disable()):!g&&a("require_enc_supervisor")?(f.enable(),e.disable(),d.show(),d.enable()):g&&a("sign_enc_supervisor")?(f.disable(),e.enable(),d.show(),d.enable()):(f.enable(),e.disable(),d.hide(),d.disable())},alertIconRenderer:function(a){return 1==a?'<img src="resources/images/icons/icoLessImportant.png" />':2==a?'<img src="resources/images/icons/icoImportant.png" />':a},onRemoveService:function(){}}),Ext.define("App.model.patient.FamilyHistory",{extend:"Ext.data.Model",table:{name:"patient_family_history"},fields:[{name:"id",type:"int"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"auth_uid",type:"int"},{name:"create_uid",type:"int"},{name:"update_uid",type:"int"},{name:"create_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"update_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"tuberculosis",type:"string",len:60},{name:"emphysema",type:"string",len:60},{name:"asthma",type:"string",len:60},{name:"hypertension",type:"string",len:60},{name:"heart_murmur",type:"string",len:60},{name:"rheumatic_fever",type:"string",len:60},{name:"heart_attak",type:"string",len:60},{name:"angina",type:"string",len:60},{name:"stroke",type:"string",len:60},{name:"high_cholesterol",type:"string",len:60},{name:"vascular_graft",type:"string",len:60},{name:"mitral_valve_prolapse",type:"string",len:60},{name:"hepatitis_a",type:"string",len:60},{name:"hepatitis_b",type:"string",len:60},{name:"hepatitis_c",type:"string",len:60},{name:"kidney",type:"string",len:60},{name:"std",type:"string",len:60},{name:"ulcers",type:"string",len:60},{name:"diabetes",type:"string",len:60},{name:"thyroid",type:"string",len:60},{name:"hemophilia",type:"string",len:60},{name:"anemia",type:"string",len:60},{name:"cancer",type:"string",len:60},{name:"hiv_aids",type:"string",len:60},{name:"osteoarthritis",type:"string",len:60},{name:"rheumatoid_arthritis",type:"string",len:60},{name:"seizures",type:"string",len:60},{name:"dementia",type:"string",len:60},{name:"anxiety",type:"string",len:60},{name:"depression",type:"string",len:60},{name:"eating_disorder",type:"string",len:60}],proxy:{type:"direct",api:{read:"FamilyHistory.getFamilyHistory",create:"FamilyHistory.addFamilyHistory",update:"FamilyHistory.updateFamilyHistory"}},belongsTo:{model:"App.model.patient.Encounter",foreignKey:"eid"}}),Ext.define("App.controller.patient.encounter.SOAP",{extend:"Ext.app.Controller",recognition:null,speechAction:null,recognizing:!1,isError:!1,final_transcript:"",interim_transcript:"",field:{name:"subjective"},refs:[{ref:"Viewport",selector:"viewport"},{ref:"SoapPanel",selector:"#soapPanel"},{ref:"SoapForm",selector:"#soapPanel #soapForm"},{ref:"SoapProcedureWindow",selector:"#soapProcedureWindow"},{ref:"SoapProcedureForm",selector:"#soapProcedureWindow > form"},{ref:"SnippetsTreePanel",selector:"#soapPanel #SnippetsTreePanel"},{ref:"SpeechBtn",selector:"#soapPanel button[action=speechBtn]"},{ref:"EncounterProgressNotesPanel",selector:"#EncounterProgressNotesPanel"},{ref:"SoapDxCodesField",selector:"#SoapDxCodesField"},{ref:"SoapTemplateSpecialtiesCombo",selector:"#SoapTemplateSpecialtiesCombo"}],init:function(){var a=this;a.control({viewport:{beforeencounterload:a.onOpenEncounter,encounterbeforesync:a.onEncounterBeforeSync},"#soapPanel":{beforerender:a.onPanelBeforeRender,activate:a.onPanelActive,deactivate:a.onPanelDeActive},"#soapPanel #soapForm":{render:a.onPanelFormRender},"#soapPanel button[action=speechBtn]":{toggle:a.onSpeechBtnToggle},"#soapForm > fieldset > textarea":{focus:a.onSoapTextFieldFocus},"#soapProcedureWindow > form > textarea":{focus:a.onProcedureTextFieldFocus},"#SoapTemplateSpecialtiesCombo":{select:a.onSoapTemplateSpecialtiesComboChange,change:a.onSoapTemplateSpecialtiesComboChange}})},onSoapTemplateSpecialtiesComboChange:function(){this.loadSnippets()},onOpenEncounter:function(a){this.getSoapTemplateSpecialtiesCombo().setValue(a.data.specialty_id)},onEncounterBeforeSync:function(a,b,c){"soapForm"==c.owner.itemId&&this.getSoapDxCodesField().sync()},onPanelActive:function(){var a=this;Ext.Function.defer(function(){a.getEncounterProgressNotesPanel().expand()},200)},onPanelDeActive:function(){var a=this;Ext.Function.defer(function(){a.getEncounterProgressNotesPanel().collapse()},200)},onSoapTextFieldFocus:function(a){this.field=a,this.loadSnippets(),Ext.isWebKit&&(this.final_transcript=a.getValue(),this.interim_transcript="")},onProcedureTextFieldFocus:function(a){this.field=a,this.loadSnippets(),Ext.isWebKit&&(this.final_transcript=a.getValue(),this.interim_transcript="")},loadSnippets:function(){var a=this;if(a.getSnippetsTreePanel().collapsed===!1){var b=a.getSnippetsTreePanel(),c=a.getSoapTemplateSpecialtiesCombo().getValue(),d=a.field.name+"-"+c;b.action!=d&&(b.setTitle(_(a.field.name)+" "+_("templates")),b.action=a.field.name+"-"+c,b.getSelectionModel().deselectAll(),b.getStore().load({filters:[{property:"category",value:a.field.name},{property:"specialty_id",value:a.getSoapTemplateSpecialtiesCombo().getValue()},{property:"parentId",value:"root"}]}))}},onPanelBeforeRender:function(a){if(Ext.isWebKit){var b=[{xtype:"button",action:"speechBtn",iconCls:"speech-icon-inactive",enableToggle:!0,minWidth:null},{xtype:"tbfill"}];a.down("form").getDockedItems('toolbar[dock="bottom"]')[0].insert(0,b)}},onPanelFormRender:function(a){Ext.widget("careplangoalsnewwindow",{constrainTo:a.el.dom})},onSpeechBtnToggle:function(a,b){b?this.initSpeech():this.stopSpeech()},stopSpeech:function(){this.recognition.stop(),this.final_transcript="",this.interim_transcript="",delete this.recognition},initSpeech:function(){var a=this;a.recognition&&a.stopSpeech(),a.final_transcript=a.field.getValue(),a.recognition=new webkitSpeechRecognition,a.recognition.continuous=!0,a.recognition.interimResults=!0,a.recognition.lang=app.user.localization,a.recognition.onstart=function(){say("onstart"),a.recognizing=!0,a.setRecordButton(!0)},a.recognition.onerror=function(){a.isError=!0,a.setRecordButton(!1)},a.recognition.onend=function(){a.setRecordButton(!1)},a.recognition.onresult=function(b){a.interim_transcript="";for(var c=b.resultIndex;c<b.results.length;++c)b.results[c].isFinal?a.final_transcript+=b.results[c][0].transcript:a.interim_transcript+=b.results[c][0].transcript;a.field.setValue(a.final_transcript)},a.recognition.start()},setRecordButton:function(a){this.getSpeechBtn().setIconCls(a?"speech-icon-active":"speech-icon-inactive")}}),Ext.define("App.model.patient.EncounterDx",{extend:"Ext.data.Model",table:{name:"encounter_dx",comment:"Encounter Diagnosis"},fields:[{name:"id",type:"int"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"uid",type:"int",index:!0},{name:"dx_group",type:"int",index:!0},{name:"dx_order",type:"int",index:!0},{name:"code",type:"string",len:25},{name:"code_type",type:"string",len:25},{name:"code_text",type:"string",store:!1,convert:function(a,b){return""==a?b.data.long_desc:a}},{name:"long_desc",type:"string",store:!1}],proxy:{type:"direct",api:{read:"Encounter.getEncounterDxs",create:"Encounter.createEncounterDx",update:"Encounter.updateEncounterDx",destroy:"Encounter.destroyEncounterDx"}},belongsTo:{model:"App.model.patient.SOAP",foreignKey:"eid"}}),Ext.define("App.view.patient.Immunizations",{extend:"Ext.panel.Panel",requires:["App.ux.combo.CVXManufacturersForCvx","App.ux.LiveImmunizationSearch","App.ux.grid.RowFormEditing","App.store.patient.CVXCodes","App.ux.form.fields.DateTime"],xtype:"patientimmunizationspanel",title:_("immunizations"),layout:"border",border:!1,items:[{xtype:"grid",region:"center",itemId:"patientImmunizationsGrid",selModel:Ext.create("Ext.selection.CheckboxModel"),columnLines:!0,store:this.store=Ext.create("App.store.patient.PatientImmunization",{groupField:"vaccine_name",sorters:["vaccine_name","administered_date"],remoteFilter:!0,autoSync:!1}),features:Ext.create("Ext.grid.feature.Grouping",{groupHeaderTpl:_("immunization")+': {name} ({rows.length} Item{[values.rows.length > 1 ? "s" : ""]})'}),columns:[{text:_("code"),dataIndex:"code",width:50,renderer:function(a,b,c){return say(c.data),c.data.is_error?'<span class="is_error_data">'+a+"</span>":a}},{text:_("immunization_name"),dataIndex:"vaccine_name",flex:1,renderer:function(a,b,c){return c.data.is_error?'<span class="is_error_data">'+a+"</span>":a
}},{text:_("lot_number"),dataIndex:"lot_number",width:100,renderer:function(a,b,c){return c.data.is_error?'<span class="is_error_data">'+a+"</span>":a}},{text:_("amount"),dataIndex:"administer_amount",width:100,renderer:function(a,b,c){return c.data.is_error?'<span class="is_error_data">'+a+"</span>":a}},{text:_("units"),dataIndex:"administer_units",width:100,renderer:function(a,b,c){return c.data.is_error?'<span class="is_error_data">'+a+"</span>":a}},{text:_("notes"),dataIndex:"note",flex:1,renderer:function(a,b,c){return c.data.is_error?'<span class="is_error_data">'+a+"</span>":a}},{text:_("administered_by"),dataIndex:"administered_by",width:150,renderer:function(a,b,c){return c.data.is_error?'<span class="is_error_data">'+a+"</span>":a}},{xtype:"datecolumn",text:_("date"),format:"Y-m-d",width:100,dataIndex:"administered_date",renderer:function(a,b,c){return c.data.is_error?'<span class="is_error_data">'+a+"</span>":a}}],plugins:Ext.create("App.ux.grid.RowFormEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:2,items:[{xtype:"container",layout:"hbox",items:[{xtype:"container",layout:"vbox",items:[{xtype:"fieldcontainer",layout:"hbox",itemId:"line1",defaults:{margin:"0 10 0 0",xtype:"textfield"},items:[{xtype:"immunizationlivesearch",itemId:"immunizationsearch",fieldLabel:_("name"),name:"vaccine_name",valueField:"name",hideLabel:!1,allowBlank:!1,enableKeyEvents:!0,width:625}]},{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 0 0",xtype:"textfield"},items:[{xtype:"numberfield",fieldLabel:_("amount"),name:"administer_amount",width:160},{xtype:"textfield",fieldLabel:_("units"),name:"administer_units",labelWidth:50,width:125},{fieldLabel:_("administration_site"),width:320,labelWidth:130,xtype:"gaiaehr.combo",list:119,queryMode:"local",loadStore:!0,name:"administration_site"}]},{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 0 0",xtype:"textfield"},items:[{fieldLabel:_("route"),xtype:"gaiaehr.combo",list:6,queryMode:"local",loadStore:!0,width:295,name:"route"},{fieldLabel:_("date_administered"),width:320,labelWidth:115,xtype:"mitos.datetime",dateTimeFormat:"Y-m-d",name:"administered_date"}]},{fieldLabel:_("administered_by"),xtype:"textfield",name:"administered_by",margin:"0 10 5 0",width:625},{fieldLabel:_("notes"),xtype:"textfield",name:"note",width:625}]},{xtype:"container",items:[{xtype:"fieldset",title:_("substance_data"),defaults:{margin:"0 0 5 0",width:250},items:[{fieldLabel:_("lot_number"),xtype:"textfield",name:"lot_number"},{fieldLabel:_("exp_date"),xtype:"datefield",format:"Y-m-d",name:"exp_date"},{xtype:"cvxmanufacturersforcvxcombo",fieldLabel:_("manufacturer"),margin:"0 0 8 0",name:"manufacturer"}]},{xtype:"checkboxfield",boxLabel:_("entered_in_error"),name:"is_error"}]}]}]}),tbar:["->",{text:_("add_new"),action:"encounterRecordAdd",itemId:"addImmunizationBtn",iconCls:"icoAdd"}],bbar:["-",{xtype:"button",text:_("submit_hl7_vxu"),disabled:!0,itemId:"submitVxuBtn"},"-","->",{text:_("review"),itemId:"reviewImmunizationsBtn",action:"encounterRecordAdd"}]},{xtype:"grid",title:_("immunization_list"),itemId:"cvxGrid",collapseMode:"mini",region:"east",collapsible:!0,collapsed:!0,width:300,split:!0,store:Ext.create("App.store.patient.CVXCodes"),columns:[{text:_("code"),dataIndex:"cvx_code",width:50},{text:_("immunization_name"),dataIndex:"name",flex:1}]}]}),Ext.define("App.view.patient.Medications",{extend:"Ext.panel.Panel",requires:["App.store.patient.Medications","App.store.administration.Medications","Ext.form.field.Trigger","Ext.grid.plugin.RowEditing","App.ux.LiveRXNORMSearch","App.ux.combo.PrescriptionHowTo","App.ux.combo.PrescriptionTypes","App.ux.LiveSigsSearch"],xtype:"patientmedicationspanel",title:_("medications"),layout:"border",border:!1,columnLines:!0,items:[{xtype:"grid",region:"center",action:"patientMedicationsListGrid",itemId:"patientMedicationsGrid",columnLines:!0,store:Ext.create("App.store.patient.Medications",{remoteFilter:!0,autoSync:!1}),columns:[{xtype:"actioncolumn",width:25,items:[{icon:"resources/images/icons/blueInfo.png",tooltip:"Get Info",handler:function(a,b,c,d,e,f){App.app.getController("InfoButton").doGetInfo(f.data.RXCUI,"RXCUI",f.data.STR)}}]},{header:_("medication"),flex:1,minWidth:200,dataIndex:"STR",editor:{xtype:"rxnormlivetsearch",itemId:"patientMedicationLiveSearch",displayField:"STR",valueField:"STR",action:"medication"}},{xtype:"datecolumn",format:"Y-m-d",header:_("begin_date"),width:100,dataIndex:"begin_date",sortable:!1,hideable:!1},{xtype:"datecolumn",format:"Y-m-d",header:_("end_date"),width:100,dataIndex:"end_date",sortable:!1,hideable:!1,editor:{xtype:"datefield",format:"Y-m-d"}},{header:_("active?"),width:60,dataIndex:"active",renderer:function(a){return app.boolRenderer(a)}}],plugins:Ext.create("Ext.grid.plugin.RowEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:2}),bbar:["->",{text:_("review"),itemId:"review_medications",action:"encounterRecordAdd"}]},{xtype:"grid",title:_("medication_list"),itemId:"medicationsListGrid",collapseMode:"mini",region:"east",width:400,collapsible:!0,collapsed:!0,split:!0,loadMask:!0,selModel:{pruneRemoved:!1},viewConfig:{trackOver:!1},verticalScroller:{variableRowHeight:!0},store:Ext.create("App.store.administration.Medications"),tbar:[{xtype:"triggerfield",triggerCls:Ext.baseCSSPrefix+"form-search-trigger",fieldLabel:_("search"),flex:1,labelWidth:43}],columns:[{xtype:"rownumberer",width:50,sortable:!1},{text:_("medication"),dataIndex:"STR",flex:1}]}],tbar:["->",{text:_("add_new"),itemId:"addPatientMedicationBtn",action:"encounterRecordAdd",iconCls:"icoAdd"}]}),Ext.define("App.view.patient.LabOrders",{extend:"Ext.grid.Panel",requires:["Ext.grid.plugin.RowEditing","Ext.grid.feature.Grouping","Ext.selection.CheckboxModel","App.ux.LiveLabsSearch","App.ux.combo.Combo"],xtype:"patientlaborderspanel",title:_("lab_orders"),itemId:"LabOrders",columnLines:!0,store:Ext.create("App.store.patient.PatientsOrders",{groupField:"date_ordered",remoteFilter:!0,pageSize:200,sorters:[{property:"date_ordered",direction:"DESC"}]}),selModel:Ext.create("Ext.selection.CheckboxModel",{showHeaderCheckbox:!1}),features:[{ftype:"grouping"}],plugins:[{ptype:"rowediting",clicksToEdit:2}],columns:[{xtype:"actioncolumn",width:20,items:[{icon:"resources/images/icons/cross.png",tooltip:_("remove")}]},{header:_("order#"),width:60,dataIndex:"id"},{header:_("status"),width:75,dataIndex:"status",editor:{xtype:"gaiaehr.combo",list:40},renderer:function(a){return app.getController("patient.LabOrders").labOrdersGridStatusColumnRenderer(a)}},{xtype:"datecolumn",header:_("date_ordered"),width:100,dataIndex:"date_ordered",format:"Y-m-d",editor:{xtype:"datefield"}},{header:_("code"),width:100,dataIndex:"code"},{header:_("description"),flex:1,dataIndex:"description",editor:{xtype:"labslivetsearch",itemId:"rxLabOrderLabsLiveSearch"}},{header:_("notes"),flex:1,dataIndex:"note",editor:{xtype:"textfield"}},{header:_("priority"),width:100,dataIndex:"priority",editor:{xtype:"gaiaehr.combo",list:98}},{xtype:"datecolumn",header:_("date_collected"),width:100,dataIndex:"date_collected",format:"Y-m-d",editor:{xtype:"datefield"}}],tbar:[{text:_("eLab"),iconCls:"icoSend",itemId:"electronicLabOrderBtn"},"-","->","-",{text:_("new_order"),iconCls:"icoAdd",action:"encounterRecordAdd",itemId:"newLabOrderBtn"},"-",{text:_("print"),iconCls:"icoPrint",disabled:!0,margin:"0 5 0 0",itemId:"printLabOrderBtn"}]}),Ext.define("App.view.patient.RadOrders",{extend:"Ext.grid.Panel",requires:["Ext.grid.plugin.RowEditing","Ext.grid.feature.Grouping","Ext.selection.CheckboxModel","App.ux.combo.Combo","App.ux.LiveRadiologySearch"],xtype:"patientradorderspanel",title:_("xray_ct_orders"),columnLines:!0,itemId:"RadOrders",store:Ext.create("App.store.patient.PatientsOrders",{groupField:"date_ordered",remoteFilter:!0,pageSize:200,sorters:[{property:"date_ordered",direction:"DESC"}]}),selModel:Ext.create("Ext.selection.CheckboxModel",{showHeaderCheckbox:!1}),features:[{ftype:"grouping"}],plugins:[{ptype:"rowediting",clicksToEdit:2}],columns:[{xtype:"actioncolumn",width:20,items:[{icon:"resources/images/icons/cross.png",tooltip:_("remove")}]},{header:_("order#"),width:60,dataIndex:"id"},{header:_("status"),width:75,dataIndex:"status",editor:{xtype:"gaiaehr.combo",list:40},renderer:function(a){return app.getController("patient.RadOrders").radOrdersGridStatusColumnRenderer(a)}},{xtype:"datecolumn",header:_("date_ordered"),width:100,dataIndex:"date_ordered",format:"Y-m-d",editor:{xtype:"datefield"}},{header:_("code"),width:100,dataIndex:"code"},{header:_("description"),flex:1,dataIndex:"description",editor:{xtype:"radiologylivetsearch",itemId:"radOrderliveSearch"}},{header:_("notes"),flex:1,dataIndex:"note",editor:{xtype:"textfield"}},{header:_("priority"),width:100,dataIndex:"priority",editor:{xtype:"gaiaehr.combo",list:98}},{xtype:"datecolumn",header:_("date_collected"),width:100,dataIndex:"date_collected",format:"Y-m-d",editor:{xtype:"datefield"}}],tbar:[{text:_("eRad"),iconCls:"icoSend",itemId:"electronicRadOrderBtn"},"-","->","-",{xtype:"button",text:_("new_order"),iconCls:"icoAdd",action:"encounterRecordAdd",itemId:"newRadOrderBtn"},"-",{text:_("print"),iconCls:"icoPrint",disabled:!0,margin:"0 5 0 0",itemId:"printRadOrderBtn"}]}),Ext.define("App.view.patient.RxOrders",{extend:"Ext.grid.Panel",requires:["App.ux.grid.RowFormEditing","Ext.grid.feature.Grouping","Ext.selection.CheckboxModel","App.ux.combo.PrescriptionHowTo","App.ux.combo.PrescriptionTypes","App.ux.combo.EncounterICDS","App.ux.LiveSigsSearch","App.ux.LiveRXNORMSearch"],xtype:"patientrxorderspanel",title:_("rx_orders"),columnLines:!0,itemId:"RxOrderGrid",store:Ext.create("App.store.patient.Medications",{groupField:"date_ordered",remoteFilter:!0,pageSize:200,sorters:[{property:"date_ordered",direction:"DESC"}]}),selModel:Ext.create("Ext.selection.CheckboxModel",{showHeaderCheckbox:!1}),features:[{ftype:"grouping"}],plugins:[{ptype:"rowformediting",clicksToEdit:2,items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},itemId:"RxOrderGridFormContainer",items:[{xtype:"container",layout:"anchor",itemId:"RxOrderGridFormContainerOne",items:[{xtype:"datefield",fieldLabel:_("order_date"),format:"Y-m-d",name:"date_ordered",allowBlank:!1,margin:"0 0 5 0"},{xtype:"rxnormlivetsearch",itemId:"RxNormOrderLiveSearch",hideLabel:!1,fieldLabel:_("medication"),width:700,name:"STR",maxLength:105,displayField:"STR",valueField:"STR",allowBlank:!1},{xtype:"container",margin:"5 0",layout:{type:"hbox"},items:[{xtype:"numberfield",width:170,fieldLabel:_("dispense"),minValue:.001,maxValue:99999,name:"dispense",decimalPrecision:3,maxLength:10,allowBlank:!1,fixPrecision:function(a){var b=this,c=isNaN(a),d=b.decimalPrecision;if(c||!a)return c?"":a;(!b.allowDecimals||0>=d)&&(d=0);var e=String(a);if(-1!==e.indexOf(".")){var f=e.split(".");return Number(1==f.length?e:f[0]+"."+f[1].charAt(0)+f[1].charAt(1)+f[1].charAt(2))}return Number(e)}},{xtype:"numberfield",width:130,fieldLabel:_("days_supply"),labelAlign:"right",labelWidth:75,minValue:1,maxValue:630,allowDecimals:!1,name:"days_supply"},{xtype:"numberfield",width:100,fieldLabel:_("refill"),labelAlign:"right",labelWidth:40,maxValue:99,minValue:0,name:"refill",vtype:"numeric",allowBlank:!1},{xtype:"encountericdscombo",itemId:"RxEncounterDxCombo",fieldLabel:_("dx"),labelAlign:"right",labelWidth:30,width:295,name:"dxs"}]},{xtype:"livesigssearch",width:700,fieldLabel:"Instructions",name:"directions",maxLength:140,validateOnBlur:!0,vtype:"spaceString",allowBlank:!1},{xtype:"textfield",width:700,fieldLabel:_("notes_to_Pharmacist"),itemId:"RxOrderGridFormNotesField",name:"notes",maxLength:210}]},{xtype:"container",layout:"anchor",itemId:"RxOrderGridFormContainerTwo",padding:"25 0 0 0",items:[{xtype:"container",layout:"hbox",items:[{xtype:"checkboxfield",fieldLabel:_("daw"),tooltip:_("dispensed_as_written"),width:90,labelWidth:70,labelAlign:"right",name:"daw",margin:"0 0 5 0"},{xtype:"checkboxfield",fieldLabel:_("is_comp"),tooltip:_("is_compound"),width:85,labelWidth:65,labelAlign:"right",name:"is_compound",itemId:"RxOrderCompCheckBox",margin:"0 0 5 0"},{xtype:"checkboxfield",fieldLabel:_("is_sply"),tooltip:_("is_supply"),width:85,labelWidth:65,labelAlign:"right",name:"is_supply",itemId:"RxOrderSplyCheckBox",margin:"0 0 5 0"}]},{xtype:"datefield",fieldLabel:_("begin_date"),labelWidth:70,labelAlign:"right",width:258,format:"Y-m-d",name:"begin_date",margin:"0 0 5 0",allowBlank:!1},{xtype:"datefield",fieldLabel:_("end_date"),labelWidth:70,labelAlign:"right",format:"Y-m-d",width:258,name:"end_date"}]},{xtype:"fieldset",title:_("active_drug_allergies"),html:_("none"),margin:"25 0 5 10",flex:1}]}]}],columns:[{xtype:"actioncolumn",width:20,items:[{icon:"resources/images/icons/cross.png",tooltip:_("remove")}]},{xtype:"datecolumn",header:_("date_ordered"),dataIndex:"date_ordered",format:"Y-m-d"},{header:_("medication"),flex:1,dataIndex:"STR"},{header:_("daw"),width:40,dataIndex:"daw",tooltip:_("dispensed_as_written"),renderer:function(a){return app.boolRenderer(a)}},{header:_("dispense"),width:60,dataIndex:"dispense"},{header:_("refill"),width:50,dataIndex:"refill"},{header:_("instructions"),flex:1,dataIndex:"directions"},{header:_("related_dx"),width:200,dataIndex:"dxs",renderer:function(a){return 0==a||"false"==a||0==a[0]?"":a}},{xtype:"datecolumn",format:"Y-m-d",header:_("begin_date"),width:75,dataIndex:"begin_date"},{xtype:"datecolumn",header:_("end_date"),width:75,format:"Y-m-d",dataIndex:"end_date"}],tbar:["->","-",{text:_("new_order"),iconCls:"icoAdd",action:"encounterRecordAdd",itemId:"newRxOrderBtn"},"-",{text:_("clone_order"),iconCls:"icoAdd",disabled:!0,margin:"0 5 0 0",action:"encounterRecordAdd",itemId:"cloneRxOrderBtn"},"-",{text:_("print"),iconCls:"icoPrint",disabled:!0,margin:"0 5 0 0",itemId:"printRxOrderBtn"}]}),Ext.define("App.view.dashboard.panel.Portlet",{extend:"Ext.panel.Panel",alias:"widget.portlet",layout:"fit",anchor:"100%",frame:!0,closable:!0,collapsible:!0,animCollapse:!0,draggable:{moveOnDrag:!1},cls:"x-portlet",doClose:function(){this.closing||(this.closing=!0,this.el.animate({opacity:0,callback:function(){this.fireEvent("close",this),this[this.closeAction]()},scope:this}))}}),Ext.define("App.ux.combo.EncounterSupervisors",{extend:"Ext.form.ComboBox",alias:"widget.encountersupervisorscombo",initComponent:function(){var a=this;Ext.define("EncounterSupervisorsComboModel",{extend:"Ext.data.Model",fields:[{name:"option_name",type:"string"},{name:"option_value",type:"int"}],proxy:{type:"direct",api:{read:"CombosData.getEncounterSupervisors"}}}),a.store=Ext.create("Ext.data.Store",{model:"EncounterSupervisorsComboModel",autoLoad:!1}),Ext.apply(this,{editable:!1,queryMode:"local",displayField:"option_name",valueField:"option_value",emptyText:_("select"),store:a.store}),a.callParent(arguments)}}),Ext.define("App.ux.grid.AreasViewDropZone",{extend:"Ext.grid.ViewDropZone",handleNodeDrop:function(a,b,c){var d,e,f,g,h=this.view,i=h.getStore();if(!a.patient)if(a.copy)for(e=a.records,a.records=[],f=0,g=e.length;g>f;f++)a.records.push(e[f].copy());else a.view.store.remove(a.records,a.view===h);b&&c?(d=i.indexOf(b),"before"!==c&&d++,i.insert(d,a.records)):i.add(a.records)},notifyEnter:function(a,b,c){Ext.get(c.ddel.id).update(_("drop_patient_to_new_area")),this.callParent(arguments)},notifyOut:function(a,b,c){Ext.get(c.ddel.id).update(_("drag_patient_to_new_area")),this.callParent(arguments)}}),Ext.define("App.ux.grid.AreasDragDrop",{extend:"Ext.grid.plugin.DragDrop",alias:"plugin.areasgridviewdragdrop",onViewRender:function(a){var b,c=this;c.enableDrag&&(c.containerScroll&&(b=a.getEl()),c.dragZone=new Ext.view.DragZone({view:a,ddGroup:c.dragGroup||c.ddGroup,dragText:c.dragText,containerScroll:c.containerScroll,scrollEl:b})),c.enableDrop&&(c.dropZone=new App.ux.grid.AreasViewDropZone({view:a,ddGroup:c.dropGroup||c.ddGroup}))}}),Ext.define("App.ux.AddTabButton",{alias:"plugin.AddTabButton",extend:"Ext.AbstractPlugin",toolTip:"Add Tab",iconCls:null,btnText:"+",forceText:!1,panelConfig:{xtype:"panel",title:"New Tab",closable:!0,hidden:!1},constructor:function(a){this.panelConfig=Ext.apply(this.panelConfig,a.tabConfig||{}),this.callParent(arguments)},init:function(a){var b=this;b.tabPanel=a,a instanceof Ext.TabPanel&&(b.btn=b.tabPanel.getTabBar().add({xtype:"tab",minWidth:25,text:b.iconCls&&!b.forceText?"":b.btnText,iconCls:b.iconCls,tooltip:b.toolTip,handler:b.onAddTabClick,closable:!1,scope:b}),b.btn.on("render",function(){if(b.iconCls&&!b.forceText){var a;"top"==b.tabPanel.tabPosition?a="margin: 0 0 3px 0; padding: 0":"bottom"==b.tabPanel.tabPosition&&(a="margin: 3px 0 0 0; padding: 0"),b.btn.btnWrap.applyStyles(a)}}))},onAddTabClick:function(){var a=this.tabPanel.add(this.panelConfig);this.tabPanel.setActiveTab(a)},setDisabled:function(a){this.btn.setDisabled(a)},setVisible:function(a){this.btn.setVisible(a)}}),Ext.define("App.view.patient.encounter.CarePlanGoals",{extend:"Ext.grid.Panel",requires:["App.store.patient.CarePlanGoals"],xtype:"careplangoalsgrid",store:Ext.create("App.store.patient.CarePlanGoals"),frame:!0,columns:[{text:_("goal"),dataIndex:"goal",width:200},{text:_("instructions"),dataIndex:"instructions",flex:1}],tbar:[_("care_plan_goals"),"->",{text:_("new_goal"),iconCls:"icoAdd",itemId:"NewCarePlanGoalBtn"}]}),Ext.define("App.view.patient.DecisionSupportWarningPanel",{extend:"Ext.panel.Panel",xtype:"decisionsupportwarningpanel",cls:"decisionSupportWarning",header:!1,collapsible:!0,collapsed:!0,hidden:!0,margin:0}),Ext.define("Ext.ux.IFrame",{extend:"Ext.Component",alias:"widget.uxiframe",loadMask:"Loading...",src:"about:blank",renderTpl:['<iframe src="{src}" name="{frameName}" width="100%" height="100%" frameborder="0"></iframe>'],initComponent:function(){this.callParent(),this.frameName=this.frameName||this.id+"-frame",this.addEvents("beforeload","load"),Ext.apply(this.renderSelectors,{iframeEl:"iframe"})},initEvents:function(){var a=this;a.callParent(),a.iframeEl.on("load",a.onLoad,a)},initRenderData:function(){return Ext.apply(this.callParent(),{src:this.src,frameName:this.frameName})},getBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){try{return this.getWin().document}catch(a){return null}},getWin:function(){var a=this,b=a.frameName,c=Ext.isIE?a.iframeEl.dom.contentWindow:window.frames[b];return c},getFrame:function(){var a=this;return a.iframeEl.dom},beforeDestroy:function(){this.cleanupListeners(!0),this.callParent()},cleanupListeners:function(a){var b,c;if(this.rendered)try{if(b=this.getDoc(),b&&(Ext.EventManager.removeAll(b),a))for(c in b)b.hasOwnProperty&&b.hasOwnProperty(c)&&delete b[c]}catch(d){}},onLoad:function(){var a=this,b=a.getDoc(),c=a.onRelayedEvent;if(b){try{Ext.EventManager.removeAll(b),Ext.EventManager.on(b,{mousedown:c,mousemove:c,mouseup:c,click:c,dblclick:c,scope:a})}catch(d){}Ext.EventManager.on(this.getWin(),"beforeunload",a.cleanupListeners,a),this.el.unmask(),this.fireEvent("load",this)}else a.src&&""!=a.src&&(this.el.unmask(),this.fireEvent("error",this))},onRelayedEvent:function(a){var b=this.iframeEl,c=Ext.Element.getTrueXY(b),d=a.getXY(),e=Ext.EventManager.getPageXY(a.browserEvent);a.xy=[c[0]+e[0],c[1]+e[1]],a.injectEvent(b),a.xy=d},load:function(a){var b=this,c=b.loadMask,d=b.getFrame();b.fireEvent("beforeload",b,a)!==!1&&(c&&b.el&&b.el.mask(c),d.src=b.src=a||b.src)}}),Ext.define("App.view.patient.Documents",{extend:"Ext.panel.Panel",requires:["App.ux.combo.Templates","Ext.grid.plugin.RowEditing","App.store.patient.PatientDocuments","App.ux.ManagedIframe","Ext.grid.feature.Grouping","Ext.form.ComboBox"],xtype:"patientdocumentspanel",title:_("documents"),layout:"border",items:[{xtype:"grid",region:"west",split:!0,flex:1,columnLines:!0,selType:"checkboxmodel",features:[{ftype:"grouping",groupHeaderTpl:Ext.create("Ext.XTemplate","Group: {name:this.getGroupName}",{getGroupName:function(a){return app.getController("patient.Documents").getGroupName(a)}})}],itemId:"patientDocumentGrid",store:this.patientDocumentsStore=Ext.create("App.store.patient.PatientDocuments",{autoLoad:!1,remoteFilter:!0,remoteSort:!1,autoSync:!1,pageSize:200,groupField:"groupDate"}),columns:[{xtype:"actioncolumn",width:23,icon:"resources/images/icons/icoLessImportant.png",tooltip:_("validate_file_integrity_hash"),handler:function(a,b){App.app.getController("patient.Documents").onDocumentHashCheckBtnClick(a,b)},getClass:function(){return"x-grid-icon-padding"}},{xtype:"actioncolumn",width:23,icon:"resources/images/icons/delete.png",tooltip:_("delete"),hidden:!eval(a("delete_patient_documents")),handler:function(){alert("hello")},getClass:function(){return"x-grid-icon-padding"}},{header:_("type"),dataIndex:"docType"},{xtype:"datecolumn",header:_("date"),dataIndex:"date",format:"Y-m-d"},{header:_("title"),dataIndex:"title",flex:1,editor:{xtype:"textfield",action:"title"}},{header:_("encrypted"),dataIndex:"encrypted",width:70,renderer:function(a){return app.boolRenderer(a)}}],plugins:Ext.create("Ext.grid.plugin.RowEditing",{autoCancel:!0,errorSummary:!1,clicksToEdit:2}),tbar:[_("group_by")+":",{xtype:"button",text:_("date"),enableToggle:!0,action:"groupDate",pressed:!0,toggleGroup:"documentgridgroup"},{xtype:"button",text:_("type"),enableToggle:!0,action:"docType",toggleGroup:"documentgridgroup"},"->","-",{text:_("upload_document"),itemId:"documentUploadBtn"}],bbar:Ext.create("Ext.PagingToolbar",{pageSize:10,store:this.patientDocumentsStore,displayInfo:!0,plugins:Ext.create("Ext.ux.SlidingPager",{})})},{xtype:"panel",region:"center",flex:2,layout:"fit",frame:!0,itemId:"patientDocumentViewerPanel",style:"background-color:white",items:[{xtype:"miframe",style:"background-color:white",autoMask:!1,itemId:"patientDocumentViewerFrame"}]}]}),say("delete_patient_documents"),say(eval(a("delete_patient_documents"))),Ext.define("App.view.patient.CCD",{extend:"Ext.panel.Panel",requires:["Ext.ux.IFrame","App.ux.ManagedIframe"],xtype:"patientccdpanel",title:_("ccd"),columnLines:!0,itemId:"CcdPanel",layout:"fit",items:[{xtype:"miframe",style:"background-color:white",autoMask:!0,itemId:"patientDocumentViewerFrame"}],tbar:[{xtype:"button",text:_("view_ccr"),margin:"0 0 5 0",itemId:"viewCcdBtn"},"-",{text:_("export_ccr"),margin:"0 0 5 0",itemId:"exportCcdBtn"},"-",{xtype:"container",layout:"vbox",items:[{xtype:"patientEncounterCombo",name:"filterEncounter",margin:5,fieldLabel:_("filter_encounter"),hideLabel:!1}]},"-",{text:"Print",iconCls:"icon-print",handler:function(){}}]}),Ext.define("App.view.administration.CPT",{extend:"Ext.grid.Panel",requires:["Ext.grid.plugin.RowEditing","App.store.administration.CPT"],xtype:"cptadmingrid",title:_("cpt4"),columns:[{width:60,header:_("code"),dataIndex:"code"},{header:_("short_name"),dataIndex:"code_text_short",width:100,flex:1,editor:{xtype:"textfield"}},{header:_("long_name"),dataIndex:"code_text",flex:2,editor:{xtype:"textfield"}},{header:_("radiology"),dataIndex:"isRadiology",editor:{xtype:"checkbox"},renderer:function(a){return this.boolRenderer(a)}},{width:60,header:_("active"),dataIndex:"active",editor:{xtype:"checkbox"},renderer:function(a){return this.boolRenderer(a)}}],plugins:[{ptype:"rowediting",errorSummary:!1,clicksToEdit:1}],initComponent:function(){var a=this;a.store=Ext.create("App.store.administration.CPT",{remoteSort:!0}),a.tbar=Ext.create("Ext.PagingToolbar",{store:a.store,displayInfo:!0,emptyMsg:_("no_office_notes_to_display"),plugins:Ext.create("Ext.ux.SlidingPager"),items:["-",{xtype:"textfield",emptyText:_("search"),width:200,enableKeyEvents:!0,itemId:"adminCpt4CodeSearchField"},"-",{xtype:"button",text:_("only_active"),enableToggle:!0,itemId:"adminCpt4CodeOnlyActiveBtn"},"-"]}),a.callParent()}}),Ext.define("App.ux.grid.Button",{extend:"Ext.grid.column.Column",alias:["widget.gridbutton"],header:"&#160;",sortable:!1,context:{},applicationProperties:{iconStore:""},constructor:function(a){var b,c,d,e=this;b=Ext.apply({},a),c=b.items||[e],e.callParent(arguments),e.items=c,e.context=b.scope,e.renderer=function(a,b,f){return Ext.Array.each(c,function(b){var c;d=b,c=Ext.id(),Ext.Function.defer(e.addButton,100,e,[c,f,d,e.context]),a?a+='<div id="'+c+'">&#160;</div>':a='<div id="'+c+'">&#160;</div>'}),a}},noHandler:function(){Ext.Msg.alert("Oops","No Handler set up")},addButton:function(a,b,c,d){var e,f,g,h,i,j=this,k=Ext.get(a);k&&(c.menu?(f=[],Ext.Array.each(c.menu,function(a){g=a.handler?Ext.bind(a.handler,j,[b,d]):j.noHandler,i=a.icon?j.applicationProperties.iconStore+a.icon:void 0;var c={text:a.text,handler:g,icon:i};f.push(c)}),h={text:c.text,icon:c.icon?j.applicationProperties.iconStore+c.icon:"",menu:f,renderTo:k.parent()}):(g=c.handler?Ext.bind(c.handler,j,[b,d]):j.noHandler,h={text:c.text,tooltip:c.tooltip,icon:c.icon?j.applicationProperties.iconStore+c.icon:"",handler:g,cls:c.cls||null,listeners:c.listeners||null,record:b,width:c.width||50,margin:c.margin||0,renderTo:k.parent()}),e=Ext.create("Ext.button.Button",h),Ext.get(a).remove())},destroy:function(){delete this.items,delete this.renderer,this.callParent(arguments)},cascade:function(a,b){a.call(b||this,this)},getRefItems:function(){return[]}}),Ext.define("App.ux.combo.ActiveSpecialties",{extend:"Ext.form.ComboBox",alias:"widget.activespecialtiescombo",displayField:"text_details",valueField:"id",editable:!1,emptyText:_("select"),queryMode:"local",store:Ext.create("App.store.administration.Specialties",{filters:[{property:"active",value:!0}],pageSize:500,autoLoad:!0})}),Ext.define("App.ux.form.fields.plugin.PasswordStrength",{extend:"Ext.AbstractPlugin",alias:"plugin.passwordstrength",colors:["ffcccc","ffcc99","ffff99","99ccff","99ff99"],init:function(a){var b=this;a.on("change",b.onFieldChange,b)},onFieldChange:function(a,b){if(""===b)return a.inputEl.setStyle({"background-color":null,"background-image":null}),void(a.score=0);var c=this,d=c.scorePassword(b);a.score=d,c.processValue(a,d)},processValue:function(a,b){var c,d=this,e=d.colors;c=16>b?e[0]:b>15&&25>b?e[1]:b>24&&35>b?e[2]:b>34&&45>b?e[3]:e[4],a.inputEl.setStyle({"background-color":"#"+c,"background-image":"none"})},scorePassword:function(a){var b=0;return a.length<5?b+=3:a.length>4&&a.length<8?b+=6:a.length>7&&a.length<13?b+=12:a.length>12&&(b+=18),a.match(/[a-z]/)&&(b+=1),a.match(/[A-Z]/)&&(b+=5),a.match(/\d+/)&&(b+=5),a.match(/(.*[0-9].*[0-9].*[0-9])/)&&(b+=5),a.match(/.[!,@,#,$,%,^,&,*,?,_,~]/)&&(b+=7),a.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)&&(b+=7),a.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(b+=3),a.match(/([a-zA-Z])/)&&a.match(/([0-9])/)&&(b+=3),a.match(/([a-zA-Z0-9].*[!,@,#,$,%,^,&,*,?,_,~])|([!,@,#,$,%,^,&,*,?,_,~].*[a-zA-Z0-9])/)&&(b+=3),b}}),Ext.define("App.view.patient.windows.ArchiveDocument",{extend:"Ext.window.Window",xtype:"patientarchivedocumentwindow",draggable:!1,modal:!0,autoShow:!0,title:_("archive_document"),items:[{xtype:"form",bodyPadding:10,width:400,defaults:{xtype:"textfield",anchor:"100%",labelWidth:70},items:[{name:"id",hidden:!0},{fieldLabel:_("title"),name:"title"},{xtype:"gaiaehr.combo",fieldLabel:_("type"),list:102,name:"docType",allowBlank:!1},{xtype:"checkbox",name:"encrypted",fieldLabel:_("encrypted")},{xtype:"textareafield",name:"note",fieldLabel:_("notes")}]}],buttons:[{text:_("cancel"),handler:function(a){a.up("window").close()}},{text:_("archive"),itemId:"archiveBtn"}]}),Ext.define("App.view.notifications.Grid",{extend:"Ext.grid.Panel",xtype:"notificationsgrid",width:400,header:!1,hideHeaders:!0,columns:[{text:_("description"),dataIndex:"description",flex:1}]}),Ext.define("App.view.patient.windows.UploadDocument",{extend:"Ext.window.Window",xtype:"patientuploaddocumentwindow",draggable:!1,modal:!0,autoShow:!0,title:_("new_document"),items:[{xtype:"form",bodyPadding:10,width:400,defaults:{xtype:"textfield",anchor:"100%",labelWidth:70},items:[{fieldLabel:_("title"),name:"title"},{xtype:"gaiaehr.combo",fieldLabel:_("type"),list:102,name:"docType",allowBlank:!1},{xtype:"fileuploadfield",name:"document",buttonText:_("select_a_file")+"...",fieldLabel:_("file"),allowBlank:!1},{xtype:"checkbox",name:"encrypted",fieldLabel:_("encrypted")},{xtype:"textareafield",name:"note",fieldLabel:_("notes")}]}],buttons:[{text:_("cancel"),handler:function(a){a.up("window").close()}},{text:_("upload"),itemId:"uploadBtn"}]}),Ext.define("App.view.administration.HL7MessageViewer",{xtype:"hl7messageviewer",extend:"Ext.window.Window",layout:{type:"vbox",align:"stretch"},title:_("hl7_viewer"),width:800,height:450,bodyPadding:10,maximizable:!0,bodyStyle:"background-color:white",defaults:{xtype:"textareafield",labelAlign:"top"},items:[{fieldLabel:_("message"),action:"message",flex:1},{fieldLabel:_("acknowledge"),action:"acknowledge",flex:1}]}),Ext.define("App.view.patient.encounter.Snippets",{extend:"Ext.window.Window",xtype:"snippetswindow",requires:[],itemId:"SnippetWindow",title:_("snippet"),closable:!1,items:[{xtype:"form",itemId:"SnippetForm",fieldDefaults:{labelAlign:"top",width:600,margin:5},items:[{xtype:"textfield",fieldLabel:_("title"),name:"title"},{xtype:"textareafield",fieldLabel:_("snippet"),allowBlank:!1,itemId:"SnippetFormTextField",name:"text"}]}],buttons:[{text:_("cancel"),itemId:"SnippetCancelBtn"},{text:_("save"),itemId:"SnippetSaveBtn"}]}),Ext.define("App.ux.combo.ReferringProviders",{extend:"Ext.form.ComboBox",alias:"widget.referringproviderscombo",displayField:"fullname",valueField:"id",initComponent:function(){var a=this;Ext.define("ReferringProvidersModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"title",type:"string"},{name:"fname",type:"string"},{name:"mname",type:"string"},{name:"lname",type:"string"},{name:"fullname",type:"string",convert:function(a,b){return b.data.title+" "+b.data.lname+", "+b.data.fname+" "+b.data.mname}}],proxy:{type:"direct",api:{read:"ReferringProviders.getReferringProviders"}}}),a.store=Ext.create("Ext.data.Store",{model:"ReferringProvidersModel",autoLoad:!1}),Ext.apply(this,{emptyText:_("select"),store:a.store}),a.callParent(arguments)}}),Ext.define("App.view.patient.SmokingStatus",{extend:"Ext.grid.Panel",requires:["Ext.grid.plugin.RowEditing","App.store.patient.SmokeStatus","App.ux.combo.SmokingStatus"],xtype:"patientsmokingstatusgrid",itemId:"PatientSmokingStatusGrid",columnLines:!0,store:Ext.create("App.store.patient.SmokeStatus",{remoteFilter:!0}),plugins:[{ptype:"rowediting"}],columns:[{xtype:"datecolumn",text:_("date"),dataIndex:"create_date",format:"Y-m-d",width:120},{text:_("status"),dataIndex:"status",width:250},{text:_("counseling_given"),dataIndex:"counseling",width:120,editor:{xtype:"checkbox"},renderer:function(a){return app.boolRenderer(a)}},{text:_("note"),dataIndex:"note",width:120,flex:1,editor:{xtype:"textfield"}}],tbar:[{xtype:"tbtext",text:_("smoking_status"),width:100},{xtype:"mitos.smokingstatuscombo",itemId:"socialsmokingstatuscombo",width:250}]}),Ext.define("App.ux.LiveSnomedProblemSearch",{extend:"Ext.form.ComboBox",alias:"widget.snomedliveproblemsearch",hideLabel:!0,displayField:"FullySpecifiedName",valueField:"ConceptId",initComponent:function(){var a=this;Ext.define("liveSnomedProblemSearchModel",{extend:"Ext.data.Model",fields:[{name:"ConceptId",type:"string"},{name:"FullySpecifiedName",type:"string"},{name:"CodeType",type:"string",defaultValue:"SNOMEDCT"},{name:"OCCURRENCE",type:"int"}],proxy:{type:"direct",api:{read:"SnomedCodes.liveProblemCodeSearch",update:"SnomedCodes.updateLiveProblemCodeSearch"},reader:{totalProperty:"totals",root:"data"}}}),a.store=Ext.create("Ext.data.Store",{model:"liveSnomedProblemSearchModel",pageSize:25,autoLoad:!1}),Ext.apply(this,{store:a.store,emptyText:_("search")+"...",typeAhead:!1,hideTrigger:!0,minChars:3,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item"><h3>{FullySpecifiedName}<span style="font-weight: normal"> ({ConceptId}) </span></h3></div>'
}},pageSize:25}),a.callParent(),a.on("select",function(a,b){b[0].set({OCCURRENCE:b[0].data.OCCURRENCE+1}),b[0].save()})}}),Ext.define("App.ux.LiveSnomedSearch",{extend:"Ext.form.ComboBox",alias:"widget.snomedlivesearch",hideLabel:!0,displayField:"FullySpecifiedName",valueField:"ConceptId",initComponent:function(){var a=this;Ext.define("liveSnomedSearchModel",{extend:"Ext.data.Model",fields:[{name:"ConceptId",type:"string"},{name:"FullySpecifiedName",type:"string"},{name:"CodeType",type:"string",defaultValue:"SNOMED"}],proxy:{type:"direct",api:{read:"SnomedCodes.liveCodeSearch"},reader:{totalProperty:"totals",root:"data"}}}),a.store=Ext.create("Ext.data.Store",{model:"liveSnomedSearchModel",pageSize:25,autoLoad:!1}),Ext.apply(this,{store:a.store,emptyText:_("search")+"...",typeAhead:!1,hideTrigger:!0,minChars:3,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item"><h3>{FullySpecifiedName}<span style="font-weight: normal"> ({ConceptId}) </span></h3></div>'}},pageSize:25}),a.callParent()}}),Ext.define("App.ux.combo.ComboResettable",{extend:"Ext.form.ComboBox",triggerTip:_("click_to_clear_selection"),spObj:"",spForm:"",spExtraParam:"",qtip:_("clearable_combo_box"),trigger1Class:"x-form-select-trigger",trigger2Class:"x-form-clear-trigger",onRender:function(){this.callParent(arguments);var a=this.getId();this.triggerConfig={tag:"div",cls:"x-form-twin-triggers",style:"display:block;",cn:[{tag:"img",style:Ext.isIE?"margin-left:0;height:21px":"",src:Ext.BLANK_IMAGE_URL,id:"trigger2"+a,name:"trigger2"+a,cls:"x-form-trigger "+this.trigger2Class}]},this.triggerEl.replaceWith(this.triggerConfig),this.triggerEl.on("mouseup",function(b){b.target.name=="trigger2"+a&&(this.reset(),this.oldValue=null,""!==this.spObj&&""!==this.spExtraParam&&(Ext.getCmp(this.spObj).store.setExtraParam(this.spExtraParam,""),Ext.getCmp(this.spObj).store.load()),""!==this.spForm&&Ext.getCmp(this.spForm).getForm().reset(),this.fireEvent("fieldreset",this))},this);var b=Ext.get("trigger2"+a);b.addClsOnOver("x-form-trigger-over")}}),Ext.define("App.ux.LiveSnomedProcedureSearch",{extend:"Ext.form.ComboBox",alias:"widget.snomedliveproceduresearch",hideLabel:!0,displayField:"FullySpecifiedName",valueField:"ConceptId",initComponent:function(){var a=this;Ext.define("liveSnomedProcedureSearchModel",{extend:"Ext.data.Model",fields:[{name:"ConceptId",type:"string"},{name:"FullySpecifiedName",type:"string"},{name:"CodeType",type:"string",defaultValue:"SNOMED-CT"},{name:"Occurrence",type:"int"}],idProperty:"ConceptId",proxy:{type:"direct",api:{read:"SnomedCodes.liveProcedureCodeSearch",update:"SnomedCodes.updateLiveProcedureCodeSearch"},reader:{totalProperty:"totals",root:"data"}}}),a.store=Ext.create("Ext.data.Store",{model:"liveSnomedProcedureSearchModel",pageSize:25,autoLoad:!1}),Ext.apply(this,{store:a.store,emptyText:_("search")+"...",typeAhead:!1,hideTrigger:!0,minChars:3,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item"><h3>{FullySpecifiedName}<span style="font-weight: normal"> ({ConceptId}) </span></h3></div>'}},pageSize:25}),a.callParent(),a.on("select",function(a,b){b[0].set({Occurrence:b[0].data.Occurrence+1}),b[0].save()})}}),Ext.define("App.model.administration.Allergies",{extend:"Ext.data.Model",table:{name:"allergies",comment:"Allergies"},fields:[{name:"id",type:"int"},{name:"allergy",type:"string",len:500,comment:"Allergy Name"},{name:"allergy_term",type:"string"},{name:"allergy_code",type:"string",len:20},{name:"allergy_code_type",type:"string",len:15},{name:"allergy_type",type:"string",len:5,comment:"PT = Preferred Term, SN = Systematic Name, SY = Synonym, CD = Code, TR = Trade"}],proxy:{type:"direct",api:{read:"Allergies.searchAllergiesData"},reader:{root:"data"}}}),Ext.define("App.ux.form.fields.CheckBoxWithText",{extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.field.Field"},xtype:"checkboxwithtext",layout:"hbox",boxLabel:"boxLabel",emptyText:"",readOnly:!1,msgTarget:"under",width:400,inputValue:"1",uncheckedValue:"0",initComponent:function(){var a=this;a.items=a.items||[],a.items=[{xtype:"checkbox",boxLabel:a.boxLabel,submitValue:!1,inputValue:a.inputValue,width:130,margin:"0 10 0 0"}],a.textField=a.textField||{xtype:"textfield"},Ext.apply(a.textField,{submitValue:!1,flex:1,hidden:!0,emptyText:a.emptyText}),a.items.push(a.textField),"vbox"==a.layout&&(a.height=44),a.callParent(),a.chekboxField=a.items.items[0],a.textField=a.items.items[1],a.chekboxField.on("change",a.setTextField,a),a.initField()},setTextField:function(a,b){0==b||"off"==b||0==b?(this.textField.reset(),this.textField.hide()):this.textField.show()},getValue:function(){var a="",b=this.chekboxField.getSubmitValue(),c=this.textField.getSubmitValue()||"";return b&&(a=b+"~"+c),a},getSubmitValue:function(){return this.getValue()},setValue:function(a){if(a&&a.split){var b=a.split("~");return this.chekboxField.setValue(b[0]||0),void this.textField.setValue(b[1]||"")}this.chekboxField.setValue(0),this.textField.setValue("")},getSubmitData:function(){var a=this,b=null;return a.disabled||!a.submitValue||a.isFileUpload()||(b={},b[a.getName()]=""+a.getSubmitValue()),b},setReadOnly:function(a){this.chekboxField.setReadOnly(a),this.textField.setReadOnly(a)}}),Ext.define("App.model.patient.Encounter",{extend:"Ext.data.Model",requires:["App.model.patient.FamilyHistory"],table:{name:"encounters",comment:"Encounter Data"},fields:[{name:"eid",type:"int",comment:"Encounter ID"},{name:"pid",type:"int",index:!0},{name:"rid",type:"string",len:80,comment:"reference ID"},{name:"open_uid",type:"int",index:!0},{name:"provider_uid",type:"int",index:!0},{name:"supervisor_uid",type:"int",index:!0},{name:"requires_supervisor",type:"bool",index:!0,defaultValue:!1},{name:"specialty_id",type:"string",len:11,index:!0},{name:"service_date",type:"date",dateFormat:"Y-m-d H:i:s",index:!0},{name:"close_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"onset_date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"priority",type:"string",len:60},{name:"brief_description",type:"string",len:600,comment:"chief complaint"},{name:"visit_category",type:"string",len:80},{name:"facility",type:"int",len:1,index:!0},{name:"billing_facility",type:"int",len:1,index:!0},{name:"billing_stage",type:"int",len:1,index:!0},{name:"followup_time",type:"string",len:25},{name:"followup_facility",type:"string",len:80},{name:"review_immunizations",type:"bool"},{name:"review_allergies",type:"bool"},{name:"review_active_problems",type:"bool"},{name:"review_alcohol",type:"string",len:40},{name:"review_smoke",type:"string",len:40},{name:"review_pregnant",type:"string",len:40},{name:"review_surgery",type:"bool"},{name:"review_dental",type:"bool"},{name:"review_medications",type:"bool"},{name:"message",type:"string",dataType:"text"}],idProperty:"eid",proxy:{type:"direct",api:{read:"Encounter.getEncounters",create:"Encounter.createEncounter",update:"Encounter.updateEncounter"},reader:{root:"encounter"}},hasMany:[{model:"App.model.patient.Vitals",name:"vitals",primaryKey:"eid",foreignKey:"eid"},{model:"App.model.patient.ReviewOfSystems",name:"reviewofsystems",primaryKey:"eid",foreignKey:"eid"},{model:"App.model.patient.FamilyHistory",name:"familyhistory",primaryKey:"eid",foreignKey:"eid"},{model:"App.model.patient.ReviewOfSystemsCheck",name:"reviewofsystemschecks",primaryKey:"eid",foreignKey:"eid"},{model:"App.model.patient.SOAP",name:"soap",primaryKey:"eid",foreignKey:"eid"},{model:"App.model.patient.SpeechDictation",name:"speechdictation",primaryKey:"eid",foreignKey:"eid"},{model:"App.model.patient.HCFAOptions",name:"hcfaoptions",primaryKey:"eid",foreignKey:"eid"}],isClose:function(){return"undefined"!=typeof this.data.close_date&&null!=this.data.close_date},isSigned:function(){return"undefined"!=typeof this.data.provider_uid&&null!=this.data.provider_uid&&0!=this.data.provider_uid},isCoSigned:function(){return"undefined"!=typeof this.data.supervisor_uid&&null!=this.data.supervisor_uid&&0!=this.data.supervisor_uid}}),Ext.define("App.model.patient.SOAP",{extend:"Ext.data.Model",requires:["App.model.patient.Encounter","App.model.patient.EncounterDx","App.model.patient.encounter.Procedures"],table:{name:"encounter_soap",comment:"SOAP Data"},fields:[{name:"id",type:"int"},{name:"pid",type:"int",index:!0},{name:"eid",type:"int",index:!0},{name:"uid",type:"int"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"subjective",type:"string",dataType:"longtext"},{name:"objective",type:"string",dataType:"longtext"},{name:"assessment",type:"string",dataType:"longtext"},{name:"plan",type:"string",dataType:"longtext"}],proxy:{type:"direct",api:{update:"Encounter.updateSoap"}},hasMany:[{model:"App.model.patient.EncounterDx",name:"dxCodes",primaryKey:"eid",foreignKey:"eid"},{model:"App.model.patient.encounter.Procedures",name:"procedures",primaryKey:"eid",foreignKey:"eid"}],belongsTo:{model:"App.model.patient.Encounter",foreignKey:"eid"}}),Ext.define("App.view.patient.windows.Charts",{extend:"Ext.window.Window",requires:["App.store.patient.Vitals"],title:_("vector_charts"),layout:"card",closeAction:"hide",modal:!0,width:window.innerWidth-200,height:window.innerHeight-200,maximizable:!0,initComponent:function(){var a=this;a.vitalsStore=Ext.create("App.store.patient.Vitals"),a.graphStore=Ext.create("App.store.patient.VectorGraph"),a.WeightForAgeInfStore=Ext.create("App.store.patient.charts.WeightForAgeInf"),a.LengthForAgeInfStore=Ext.create("App.store.patient.charts.LengthForAgeInf"),a.WeightForRecumbentInfStore=Ext.create("App.store.patient.charts.WeightForRecumbentInf"),a.HeadCircumferenceInfStore=Ext.create("App.store.patient.charts.HeadCircumferenceInf"),a.WeightForStatureStore=Ext.create("App.store.patient.charts.WeightForStature"),a.WeightForAgeStore=Ext.create("App.store.patient.charts.WeightForAge"),a.StatureForAgeStore=Ext.create("App.store.patient.charts.StatureForAge"),a.BMIForAgeStore=Ext.create("App.store.patient.charts.BMIForAge"),a.tbar=["->",{text:_("bp_pulse_temp"),action:"bpPulseTemp",pressed:!0,enableToggle:!0,toggleGroup:"charts",scope:a,handler:a.onChartSwitch},"-",{text:_("weight_for_age"),action:"WeightForAgeInf",enableToggle:!0,toggleGroup:"charts",scope:a,handler:a.onChartSwitch},"-",{text:_("length_for_age"),action:"LengthForAgeInf",enableToggle:!0,toggleGroup:"charts",scope:a,handler:a.onChartSwitch},"-",{text:_("weight_for_recumbent"),action:"WeightForRecumbentInf",enableToggle:!0,toggleGroup:"charts",scope:a,handler:a.onChartSwitch},"-",{text:_("head_circumference"),action:"HeadCircumferenceInf",enableToggle:!0,toggleGroup:"charts",scope:a,handler:a.onChartSwitch},"-",{text:_("weight_for_stature"),action:"WeightForStature",enableToggle:!0,toggleGroup:"charts",scope:a,handler:a.onChartSwitch},"-",{text:_("weight_for_age"),action:"WeightForAge",enableToggle:!0,toggleGroup:"charts",scope:a,handler:a.onChartSwitch},"-",{text:_("stature_for_age"),action:"StatureForAge",enableToggle:!0,toggleGroup:"charts",scope:a,handler:a.onChartSwitch},"-",{text:_("bmi_for_age"),action:"BMIForAge",enableToggle:!0,toggleGroup:"charts",scope:a,handler:a.onChartSwitch},"-"],a.tools=[{type:"print",tooltip:_("print_chart"),handler:function(){console.log(this.up("window").down("chart"))}}],a.items=[Ext.create("App.view.patient.charts.BPPulseTemp",{store:a.vitalsStore}),a.WeightForAgeInf=Ext.create("App.view.patient.charts.HeadCircumference",{title:_("weight_for_age_0_3_mos"),xTitle:_("weight_kg"),yTitle:_("age_months"),xMinimum:1,xMaximum:19,yMinimum:0,yMaximum:36,store:a.WeightForAgeInfStore}),a.LengthForAgeInf=Ext.create("App.view.patient.charts.HeadCircumference",{title:_("length_for_age_0_3_mos"),xTitle:_("length_cm"),yTitle:_("age_months"),xMinimum:40,xMaximum:110,yMinimum:0,yMaximum:36,store:a.LengthForAgeInfStore}),a.WeightForRecumbentInf=Ext.create("App.view.patient.charts.HeadCircumference",{title:_("weight_for_recumbent_0_3_mos"),xTitle:_("weight_kg"),yTitle:_("length_cm"),xMinimum:1,xMaximum:20,yMinimum:45,yMaximum:103.5,store:a.WeightForRecumbentInfStore}),a.HeadCircumferenceInf=Ext.create("App.view.patient.charts.HeadCircumference",{title:_("head_circumference_0_3_mos"),xTitle:_("circumference_cm"),yTitle:_("age_months"),xMinimum:30,xMaximum:55,yMinimum:0,yMaximum:36,store:a.HeadCircumferenceInfStore}),a.WeightForStature=Ext.create("App.view.patient.charts.HeightForStature",{store:a.WeightForStatureStore}),a.WeightForAge=Ext.create("App.view.patient.charts.HeadCircumference",{title:_("weight_for_age_2_20_years"),xTitle:_("weight_kg"),yTitle:_("age_years"),xMinimum:10,xMaximum:110,yMinimum:2,yMaximum:20,store:a.WeightForAgeStore}),a.StatureForAge=Ext.create("App.view.patient.charts.HeadCircumference",{title:_("stature_for_age_2_20_years"),xTitle:_("stature_cm"),yTitle:_("age_years"),xMinimum:60,xMaximum:200,yMinimum:2,yMaximum:20,store:a.StatureForAgeStore}),a.BMIForAge=Ext.create("App.view.patient.charts.HeadCircumference",{title:_("bmi_for_age_2_20_years"),xTitle:_("bmi"),yTitle:_("age_years"),xMinimum:10,xMaximum:35,yMinimum:2,yMaximum:20,store:a.BMIForAgeStore})],a.listeners={scope:a,show:a.onWinShow},a.callParent(arguments)},onWinShow:function(){var a,b=this,c=b.getLayout(),d=b.down("toolbar").items.items;c.setActiveItem(0),b.vitalsStore.load({params:{pid:app.patient.pid}});for(var e=0;e<d.length;e++)a=d[e],"button"!=a.type||"WeightForAgeInf"!=a.action&&"LengthForAgeInf"!=a.action&&"WeightForRecumbentInf"!=a.action&&"HeadCircumferenceInf"!=a.action?"button"==a.type&&(a.setVisible(app.patient.age.DMY.years>=2),d[e+1].setVisible(app.patient.age.DMY.years>=2)):(a.setVisible(app.patient.age.DMY.years<2),d[e+1].setVisible(app.patient.age.DMY.years<2))},onChartSwitch:function(a){var b=this,c=b.getLayout();"bpPulseTemp"==a.action?c.setActiveItem(0):"WeightForAgeInf"==a.action?(c.setActiveItem(1),b.WeightForAgeInfStore.load({params:{pid:app.patient.pid}})):"LengthForAgeInf"==a.action?(c.setActiveItem(2),b.LengthForAgeInfStore.load({params:{pid:app.patient.pid}})):"WeightForRecumbentInf"==a.action?(c.setActiveItem(3),b.WeightForRecumbentInfStore.load({params:{pid:app.patient.pid}})):"HeadCircumferenceInf"==a.action?(c.setActiveItem(4),b.HeadCircumferenceInfStore.load({params:{pid:app.patient.pid}})):"WeightForStature"==a.action?(c.setActiveItem(5),b.WeightForStatureStore.load({params:{pid:app.patient.pid}})):"WeightForAge"==a.action?(c.setActiveItem(6),b.WeightForAgeStore.load({params:{pid:app.patient.pid}})):"StatureForAge"==a.action?(c.setActiveItem(7),b.StatureForAgeStore.load({params:{pid:app.patient.pid}})):"BMIForAge"==a.action&&(c.setActiveItem(8),b.BMIForAgeStore.load({params:{pid:app.patient.pid}}))}}),Ext.define("App.view.patient.windows.Orders",{extend:"App.ux.window.Window",requires:["App.view.patient.LabOrders","App.view.patient.RadOrders","App.view.patient.RxOrders","App.view.patient.DoctorsNotes"],title:_("order_window"),closeAction:"hide",bodyStyle:"background-color:#fff",modal:!0,buttons:[{text:_("close"),handler:function(a){a.up("window").close()}}],initComponent:function(){var a=this;a.items=[a.tabPanel=Ext.create("Ext.tab.Panel",{margin:5,height:Ext.getBody().getHeight()<700?Ext.getBody().getHeight()-100:600,width:Ext.getBody().getWidth()<1550?Ext.getBody().getWidth()-50:1500,plain:!0,items:[{xtype:"patientlaborderspanel"},{xtype:"patientradorderspanel"},{xtype:"patientrxorderspanel"},{xtype:"patientdoctorsnotepanel"}]})],a.buttons=[{text:_("close"),scope:a,handler:function(){a.close()}}],a.listeners={scope:a,show:a.onWinShow,hide:a.onWinHide},a.callParent(arguments)},cardSwitch:function(a){var b=this,c=b.tabPanel,d=c.getActiveTab(),e=c.query("#"+a)[0];d==e?d.fireEvent("activate",d):(c.setActiveTab(e),b.setWindowTitle(e.title))},setWindowTitle:function(a){this.setTitle(app.patient.name+" ("+a+") "+(app.patient.readOnly?'-  <span style="color:red">[Read Mode]</span>':""))},onWinShow:function(){var a=this,b=a.down("tabpanel"),c=Ext.getBody().getWidth()<1550?Ext.getBody().getWidth()-50:1500,d=Ext.getBody().getHeight()<700?Ext.getBody().getHeight()-100:600;b.setSize(c,d),a.alignTo(Ext.getBody(),"c-c"),a.fireEvent("orderswindowshow",a),a.setTitle(app.patient.name+" - "+_("orders")+(app.patient.readOnly?' - <span style="color:red">['+_("read_mode")+"]</span>":"")),a.setReadOnly(app.patient.readOnly)},onWinHide:function(){var a=this;a.fireEvent("orderswindowhide",a),"App.view.patient.Summary"==app.getActivePanel().$className&&app.getActivePanel().loadStores()}}),Ext.define("App.view.dashboard.panel.PortalColumn",{extend:"Ext.container.Container",alias:"widget.portalcolumn",requires:["Ext.layout.container.Anchor","App.view.dashboard.panel.Portlet"],layout:"anchor",defaultType:"portlet",cls:"x-portal-column"}),Ext.define("App.view.dashboard.panel.PortalPanel",{extend:"Ext.panel.Panel",alias:"widget.portalpanel",requires:["Ext.layout.container.Column","App.view.dashboard.panel.PortalDropZone","App.view.dashboard.panel.PortalColumn"],cls:"x-portal",bodyCls:"x-portal-body",defaultType:"portalcolumn",componentLayout:"body",autoScroll:!0,manageHeight:!1,initComponent:function(){this.layout={type:"column"},this.callParent(),this.addEvents({validatedrop:!0,beforedragover:!0,dragover:!0,beforedrop:!0,drop:!0})},beforeLayout:function(){var a,b,c,d=this.layout.getLayoutItems(),e=d.length,f=["x-portal-column-first","x-portal-column-last"];for(a=0;e>a;a++)b=d[a],b.columnWidth=1/e,c=a==e-1,a?c?(b.addCls("x-portal-column-last"),b.removeCls("x-portal-column-first")):b.removeCls(f):c?b.addCls(f):(b.addCls("x-portal-column-first"),b.removeCls("x-portal-column-last"));return this.callParent(arguments)},initEvents:function(){this.callParent(),this.dd=Ext.create("App.view.dashboard.panel.PortalDropZone",this,this.dropConfig)},beforeDestroy:function(){this.dd&&this.dd.unreg(),this.callParent()}}),Ext.define("App.view.patient.windows.EncounterCheckOut",{extend:"App.ux.window.Window",requires:["Ext.grid.plugin.RowEditing","App.ux.combo.EncounterSupervisors","App.ux.LiveCPTSearch"],title:_("checkout_and_signing"),itemId:"EncounterSignWindow",closeAction:"hide",modal:!0,layout:"border",width:1200,height:660,bodyPadding:5,pid:null,eid:null,items:[{xtype:"grid",title:_("super_bill"),rootVisible:!1,region:"center",itemId:"EncounterSignSuperBillGrid",store:Ext.create("App.store.patient.EncounterServices"),flex:2,columnLines:!0,plugins:[{ptype:"rowediting",errorSummary:!1}],columns:[{xtype:"actioncolumn",width:20,items:[{icon:"resources/images/icons/delete.png",tooltip:_("remove"),handler:function(){return App.app.getController("patient.encounter.EncounterSign").onRemoveService(v)}}]},{text:_("service"),dataIndex:"code_text",flex:1,editor:{xtype:"livecptsearch",itemId:"EncounterSignSuperCptSearchCmb",allowBlank:!1}},{header:_("units"),dataIndex:"units",width:50,editor:{xtype:"numberfield",minValue:1,allowBlank:!1}},{header:_("modifiers"),dataIndex:"units",width:100,editor:{xtype:"textfield"}},{header:_("diagnosis"),dataIndex:"diagnosis",width:200,editor:{xtype:"textfield",allowBlank:!1}}],dockedItems:[{xtype:"toolbar",dock:"top",items:["->",{text:_("service"),iconCls:"icoAdd",itemId:"EncounterSignSuperBillServiceAddBtn"}]}]},{xtype:"documentsimplegrid",title:_("documents"),region:"east",itemId:"EncounterSignDocumentGrid",width:200},{xtype:"form",title:_("additional_info"),region:"south",split:!0,height:245,layout:"column",defaults:{xtype:"fieldset",padding:8},items:[{xtype:"container",columnWidth:.5,defaults:{xtype:"fieldset",padding:8,margin:"5 1 5 5"},padding:0,layout:{type:"vbox",align:"stretch"},items:[{title:_("messages_notes_and_reminders"),defaults:{anchor:"100%"},items:[{xtype:"textfield",name:"message",fieldLabel:_("message")},{xtype:"textfield",name:"reminder",fieldLabel:_("reminder")},{xtype:"textfield",grow:!0,name:"note",fieldLabel:_("note"),margin:0}]},{title:"Follow Up",flex:1,defaults:{anchor:"100%"},items:[{xtype:"mitos.followupcombo",fieldLabel:_("time_interval"),name:"followup_time"},{fieldLabel:_("facility"),xtype:"activefacilitiescombo",name:"followup_facility",margin:0}]}]},{xtype:"fieldset",margin:5,padding:8,columnWidth:.5,layout:"fit",height:208,title:_("warnings_alerts"),items:[{xtype:"grid",hideHeaders:!0,store:Ext.create("App.store.patient.CheckoutAlertArea"),itemId:"EncounterSignAlertGrid",border:!1,rowLines:!1,header:!1,viewConfig:{stripeRows:!1,disableSelection:!0},columns:[{dataIndex:"alertType",width:30,renderer:function(a){return App.app.getController("patient.encounter.EncounterSign").alertIconRenderer(a)}},{dataIndex:"alert",flex:1}]}]}]}],buttons:[{xtype:"encountersupervisorscombo",itemId:"EncounterCoSignSupervisorCombo",allowBlank:!1},{text:_("co_sign")+" ("+_("supervisor")+")",itemId:"EncounterCoSignSupervisorBtn"},{text:_("sign"),itemId:"EncounterSignBtn"},{text:_("cancel"),itemId:"EncounterCancelSignBtn"}]}),Ext.define("App.view.areas.PatientPoolDropZone",{id:"panelPoolArea",extend:"App.ux.RenderPanel",requires:["App.ux.grid.AreasDragDrop"],pageTitle:_("patient_pool_areas"),initComponent:function(){var a=this;a.pageBody=Ext.create("Ext.container.Container",{defaults:{flex:1,margin:5,frame:!1},layout:{type:"hbox",align:"stretch"}}),a.listeners={beforerender:a.getPoolAreas},a.callParent(arguments)},onPatientDrop:function(a,b){var c,d=b.records[0].data?b.records[0].data.name:b.records[0].name,e=b.records[0].data?b.records[0].data.pid:b.records[0].pid;app.msg("Sweet!",d+" "+_("sent_to")+" "+this.panel.title),c={pid:e,sendTo:this.panel.action},PoolArea.sendPatientToPoolArea(c,function(){app.unsetPatient(null,!0),Ext.getCmp("panelPoolArea").reloadStores(),app.getPatientsInPoolArea()})},reRenderPoolAreas:function(){var a=this,b=a.getPageBody().down("container");b.removeAll(),a.getPoolAreas()},getPoolAreas:function(){var a,b=this,c=b.getPageBody().down("container");b.stores=[],PoolArea.getFacilityActivePoolAreas(function(d,e){a=e.result;for(var f=0;f<a.length;f++){var g=Ext.create("App.store.areas.PoolDropAreas",{proxy:{type:"direct",api:{read:"PoolArea.getPoolAreaPatients"},extraParams:{area_id:a[f].id}}});b.stores.push(g),c.add({xtype:"grid",title:a[f].title,action:a[f].id,store:g,floorPlanId:a[f].floor_plan_id,columns:[{header:_("record")+" #",width:100,dataIndex:"pid"},{header:_("patient_name"),flex:1,dataIndex:"name"}],viewConfig:{loadMask:!1,plugins:{ptype:"areasgridviewdragdrop",dragGroup:"patientPoolAreas",dropGroup:"patientPoolAreas"},listeners:{drop:b.onPatientDrop}},listeners:{scope:b,itemdblclick:b.onPatientDblClick}})}b.reloadStores()})},onPatientDblClick:function(a,b){var c=b.data;app.setPatient(c.pid,c.name,function(){app.openPatientSummary()})},reloadStores:function(){if(this.stores)for(var a=0;a<this.stores.length;a++)this.stores[a].load()},onActive:function(a){"function"==typeof a&&a(!0)}}),Ext.define("App.view.patient.Patient",{extend:"Ext.panel.Panel",requires:["App.ux.AddTabButton"],layout:{type:"vbox",align:"stretch"},xtype:"patientdeomgraphics",itemId:"PatientDemographicsPanel",newPatient:!0,pid:null,defaultPatientImage:"data:image/jpeg;base64,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Q3B0bmJvb2wAAAAAAENsYnJib29sAAAAAABSZ3NNYm9vbAAAAAAAQ3JuQ2Jvb2wAAAAAAENudENib29sAAAAAABMYmxzYm9vbAAAAAAATmd0dmJvb2wAAAAAAEVtbERib29sAAAAAABJbnRyYm9vbAAAAAAAQmNrZ09iamMAAAABAAAAAAAAUkdCQwAAAAMAAAAAUmQgIGRvdWJAb+AAAAAAAAAAAABHcm4gZG91YkBv4AAAAAAAAAAAAEJsICBkb3ViQG/gAAAAAAAAAAAAQnJkVFVudEYjUmx0AAAAAAAAAAAAAAAAQmxkIFVudEYjUmx0AAAAAAAAAAAAAAAAUnNsdFVudEYjUHhsQFIAk4AAAAAAAAAKdmVjdG9yRGF0YWJvb2wBAAAAAFBnUHNlbnVtAAAAAFBnUHMAAAAAUGdQQwAAAABMZWZ0VW50RiNSbHQAAAAAAAAAAAAAAABUb3AgVW50RiNSbHQAAAAAAAAAAAAAAABTY2wgVW50RiNQcmNAWQAAAAAAAAAAABBjcm9wV2hlblByaW50aW5nYm9vbAAAAAAOY3JvcFJlY3RCb3R0b21sb25nAAAAAAAAAAxjcm9wUmVjdExlZnRsb25nAAAAAAAAAA1jcm9wUmVjdFJpZ2h0bG9uZwAAAAAAAAALY3JvcFJlY3RUb3Bsb25nAAAAAAA4QklNA+0AAAAAABAASAJOAAEAAQBIAk4AAQABOEJJTQQmAAAAAAAOAAAAAAAAAAAAAD+AAAA4QklNA/IAAAAAAAoAAP///////wAAOEJJTQQNAAAAAAAEAAAAHjhCSU0EGQAAAAAABAAAAB44QklNA/MAAAAAAAkAAAAAAAAAAAEAOEJJTScQAAAAAAAKAAEAAAAAAAAAAThCSU0D9QAAAAAASAAvZmYAAQBsZmYABgAAAAAAAQAvZmYAAQChmZoABgAAAAAAAQAyAAAAAQBaAAAABgAAAAAAAQA1AAAAAQAtAAAABgAAAAAAAThCSU0D+AAAAAAAcAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAA4QklNBAAAAAAAAAIAADhCSU0EAgAA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eXBlL1Jlc291cmNlRXZlbnQjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxMi0wNC0yNFQxNjozMDoyNi0wNDowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTItMTEtMTlUMjM6MjY6NDQtMDQ6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTItMTEtMTlUMjM6MjY6NDQtMDQ6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvanBlZyIgcGhvdG9zaG9wOkxlZ2FjeUlQVENEaWdlc3Q9IjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUY0MEQzMUJDMjMyRTIxMUE1NzhERjExOTIzOEY2MTMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDczMkY4ODg3Q0FGRTExMUIxNzRGM0Y5REZEMjcyREQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowNzMyRjg4ODdDQUZFMTExQjE3NEYzRjlERkQyNzJERCI+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPnhtcC5kaWQ6MDczMkY4ODg3Q0FGRTExMUIxNzRGM0Y5REZEMjcyREQ8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowNzMyRjg4ODdDQUZFMTExQjE3NEYzRjlERkQyNzJERCIgc3RFdnQ6d2hlbj0iMjAxMi0wNC0yNFQxNjozMDoyNi0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9wbmcgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDgzMkY4ODg3Q0FGRTExMUIxNzRGM0Y5REZEMjcyREQiIHN0RXZ0OndoZW49IjIwMTItMDYtMDVUMjI6MDg6NDAtMDQ6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5RjQwRDMxQkMyMzJFMjExQTU3OERGMTE5MjM4RjYxMyIgc3RFdnQ6d2hlbj0iMjAxMi0xMS0xOVQyMzoyNjo0NC0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAQAA9tYA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1eX1KEdXZjh2hpamtsbW5vZnd4eXp7fH1+f3SFhoeIiYqLjI2Oj4OUlZaXmJmam5ydnp+So6SlpqeoqaqrrK2ur6/9oADAMBAAIRAxEAPwDf49+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691//0N/j37r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3X//R3+Pfuvde9+691737r3Xvfuvde9+690RDvj+Zb8K/jruCq2Z2D3dgqrflFK8FZsXY9Hld/bpoKqO/ko8vR7UospS7frEtzFkZ6RxcXFj7917oAsX/ADsPghUVcUG4N09i7GoZZFRc3urrLcRxCamCrJPLttNxVlPDzcvJCqqBdiPfuvdWRdV9x9V947TpN9dP9gbU7I2jWM0UWd2hmqLM0UdSqq0lFWGkleXHZGAMPJTVCxTx39SD37r3Qle/de697917r3v3Xuve/de697917r//0t/j37r3Xvfuvde9+691737r3WvZ/Pc/mG7t+NextsfGzpbcFVtvtXuHCVue3hu3EVJps5svrFaqbEQ0+Eq4XSoxmd3vk6aqgjrIyJqSjoqgxlJZYZY/dbAJNB1qXdV7t23smjqdxZenGUzuRqJmV6omaREWRgSXcszvNJd2YksxPPvfT3Qs1PyH23uOCXF5XB0v2s6NCS0K8Bhp+tvwD710x1w+JnzI7L+CvyCoezOqMxXz7SbK0kG+uv5a6RNvdg7LklSWuwWUpCXpRkqWnlkONr9BnoKkK6koZY5PdXILGo4dfRY627B2v2x19sjs/ZNeuU2h2DtXA7y23XgKrVOF3HjKbK495Y1Z/DUCmqlEsZN45AynkH37qnS29+691737r3Xvfuvde9+691//09/j37r3Xvfuvde9+691737r3Xz6P52O9sjvP+ZV8gYayZnpdmDYGycPEzs602PxPX+2ayeKIH9CzZjJ1cxA41ysfz796dX8k6qxMjlFjudK3sObcm/H5/PvfTnWMEqbj37r3XVQ7SBmYm4AHP8AgoX37r3W/h/Iv3tkd5/y3OmYcnUNUz7MzfY2yYZXJLjHYve+Zr8VTkm5K0eNy0UKf0jjUfj3rpjq3r37r3Xvfuvde9+691737r3X/9Tf49+691737r3Xvfuvde9+6918+z+dzs2o2d/Mv78mlVhS7xp+ut6Y92XSJYMn11tigqSl/wBSplsTUpf+qH+nv3l1cfAeqqPe+nOve/de6xTkqpP5+v8AvH+8Hn37r3W/1/Iz2bVbR/lr9HzVsfin3hlOyd5hLWb7XK9g7io8dI35PnxmMhkB/KsPeumOrdffuvde9+691737r3Xri9r8/W35t/W3v3Xuv//V3+Pfuvde9+691737r3Xvfuvdad//AApZ6aqsP3J8e+/qOhP8L3rsPM9X5qujQmKLObHzU24sQtWw4WoyWJ3hOsN/1JQPb9J9+6svxDrWkBuAf8P+R/7z7307137917rpKSsydZRYrHUs9dkMlV09BQUVNG0tTWVtZMkFLS08SAtLPUTyKiqOWYgD37r3X08/i91OnRHxy6N6cCKk/W3VWx9o5EoQyzZnD7eoKbOVQZeGNXmFnlJ5uX+p966Y6Hj37r3Xvfuvde9+691g0H7ryXOn7fRbm1/Jqv8A0vb37r3X/9bf3BBFxyLkf7EEgj/YEe/de679+691737r3XvfuvdES/mRfFHBfMX4idqdV1tEk27Mdha3fXVuRCBqnE9lbUxtdW7denc8pDm1ebFVXBJo6+Ww1aSPde6+b1TFgpVwQyEqysCpVlNipUgEEN9fe+n+pJFgx/1P19+691dL/Ig+KOD+RvzK/v8A70oY8nsr424Wg7M/h8yCWkyXYNRlUouu6StRgQ0GPrqaqywBNnmxcaMCjMDrpotUAefW+J791Xr3v3Xuve/de697917r3v3Xuv/X39lAAsP9Ux/27k/72ffuvdcvfuvde9+691737r3WKWWKGKSWeSOKGKN5JpZWVIo4kBaSSR3IRI0QEkk2A+vv3Xuvls9s0uCou2+06XatZTZHbFP2PviDbmQopFlo6/AxbnyceHraSRPTJTVePWOSNhwVYEce99P9ID37r3W2p/wmVg23Fs75aTR19A28KvdPVsdXi/LEMnFtqgxW72x2Q8BPmagqcpkqqPWAVEkViQSL66ab8P2dbS3v3Veve/de697917r3v3Xuve/de6//0N/j37r3XvfuvdJLd+/djde4uTOb+3ntTZGFiDNLl93bhxG28YgQXYvXZiro6UaR9fV7917qtDun+c58GOpI6ykwO/c33huSnSUQ4DpfbtXueCaZRaNTu/INhtjeF5OC8eRmYC5CG1j7r3Wv/wDNz+bP8t/lztzO9adc7Th+N/Smchnx+ehhzb5HsLeOEqEaCpxuf3TDBSx47DV8BInocdTwGVGaKaonhZlPutinnw6ofzeBocCTT/eLXVQYh3iUJChW/wCldTM31+pJ/wBb3vp7pO0vgabTOLxM3qINiAT9VItyPfuvdGz+N2/u8Pjt2Jhu4/jfv+XbO88XG1PLHqiejzWHmeKeu29uLFVCTY3P4XINAnlpqiPSHRJEKSxxyL49Ufy62dvj1/P725U0lBg/lx0Xu7rnOokcFZv3q6mbeWx6uQBRJX1W2amsTdeAgY3Pip5My39CPp7103T06uC6g+dfxA74FPH1h8hOtM7k6pYzFtzIZ+Hau7ryEWQ7R3YuD3LqDccUpFx9ffuvdGyVgwDKQysAQQbgg8ggj6g+/de679+691737r3X/9HZ/wDnl/OJ+PfwxP8AczBUs3dvdVZTST02xNq5WmosLt5WeWClqd87q8GRXEfczRkw0dNTVlbNHZ2SKKSOVvdbAJ4dUO9i/wA0X+YL8gRPWV3auL+O2yq0s9NtbqHHQ4LLR0ri8Qq965OTK7y+7EZGpqatpYy1yEX6D2OrUT16IlurP7MrslJn+xt77k7J3I2tp8xvDcWU3PlJpG9T+SvzVZXVchZhc3b37qnQb5XvfaOGjeDbeEpVZRZHESEiw4Nrfj3vp/oB91dw7i3EZI/MaeBiQEjOiym/4HHv3XugkmmlqHZ5XZmY3JJ1Hk3+p/xPv3XusX0synj/AH3B9+690oMLubK4SZJqKpkjKkGwc24I/F7e/de6MHtr5DVdNGlNm6KKtisFYyIjlhex+ov+PfuvdChTb96h3YgTK4mmpZZOS6oifWxJ4H4/w966Y6Ml1j3z3t1IIaj49fKDsvY8FPpem23/AHpqs5tAlDdUk2buRsxtaVb8eqkJt7917qyTo3+f3291Xn8VtD5ndX4ffG2KuaOn/wBK3VNNHt/c9ND5EWXIZPZ1VUvtrPyRISzxUc2IIXlFkI0e/dep6dbF3+zd/HL/AEAf7ND/AKVdt/6D/wC6/wDe7++3ml8P8M8/2P2n8M8X8X/j/wDFf8h/hvg+++//AMn8Xl9Hv3Xuv//Sqj/vTkKjJTZzIVkmUy9XXrlKvI5KSasqqmt+5aseaaaWYySNLM5LXP04Gn37q54HpRZbs/dWZGiqybxx20iOmDRIABYABne3HvdOt6Pn0jJslPUMTPUTSk/XWzNwR/Qm/Fvfur9RzOjHkkD/AABt/tr+/de64+ZP8f8Abe/de695V/2r/kk+/de678q3tzf/AFvfuvdd6x/j/vH/ABX37r3XtY/x/wB4/wCK+/de65rOVN1LAj6EXuB9eOffuvdOtDubLYyRXpMhUwsvIsxIv/rE2t7917p33Dv7Oblx9NjsvURVMNJP5oZDGwmD+N47NIzEadMhtYD37r3Tj/pd7C/0Z/6Hv70Zb/Rz/eL+9X92vup/4d/F/t/t/N4dejRb1aLadXqtfn37r3X/06bKf7HwR2/iHm9X6/t/FfUdH6Ob+O1/9q+nHvfTg1edepUWq/Nvof8AXt/j/j791cdZTq5/2P8Ar3/5F/vPv3XusP7n4/2P6vr/ALD37r3XY8n5/r/tXv3XupA1fjVb/C/v3XusTeXVxa3+P1/3n/D37r3XR+7/ABa3+N/+I9+6910PvLj9P1H9ffuvdTF1afVbVbn62vf8f4f8R7917qK3l1/i1/z/AL6309+691xbyafVa3NrfW1z9fxf+n+Pv3Xuu/3dP5/T/wAnaf8Aob37r3X/2Q==",defaultInsImage:"data:image/jpeg;base64,/9j/4QtvRXhpZgAATU0AKgAAAAgADAEAAAMAAAABAOYAAAEBAAMAAAABAIIAAAECAAMAAAADAAAAngEGAAMAAAABAAIAAAESAAMAAAABAAEAAAEVAAMAAAABAAMAAAEaAAUAAAABAAAApAEbAAUAAAABAAAArAEoAAMAAAABAAIAAAExAAIAAAAeAAAAtAEyAAIAAAAUAAAA0odpAAQAAAABAAAA6AAAASAACAAIAAgACvyAAAAnEAAK/IAAACcQQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykAMjAxMzowOToxNiAxMTowMTozMAAAAAAEkAAABwAAAAQwMjIxoAEAAwAAAAEAAQAAoAIABAAAAAEAAAD9oAMABAAAAAEAAACZAAAAAAAAAAYBAwADAAAAAQAGAAABGgAFAAAAAQAAAW4BGwAFAAAAAQAAAXYBKAADAAAAAQACAAACAQAEAAAAAQAAAX4CAgAEAAAAAQAACekAAAAAAAAASAAAAAEAAABIAAAAAf/Y/+0ADEFkb2JlX0NNAAH/7gAOQWRvYmUAZIAAAAAB/9sAhAAMCAgICQgMCQkMEQsKCxEVDwwMDxUYExMVExMYEQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQ0LCw0ODRAODhAUDg4OFBQODg4OFBEMDAwMDBERDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABhAKADASIAAhEBAxEB/90ABAAK/8QBPwAAAQUBAQEBAQEAAAAAAAAAAwABAgQFBgcICQoLAQABBQEBAQEBAQAAAAAAAAABAAIDBAUGBwgJCgsQAAEEAQMCBAIFBwYIBQMMMwEAAhEDBCESMQVBUWETInGBMgYUkaGxQiMkFVLBYjM0coLRQwclklPw4fFjczUWorKDJkSTVGRFwqN0NhfSVeJl8rOEw9N14/NGJ5SkhbSVxNTk9KW1xdXl9VZmdoaWprbG1ub2N0dXZ3eHl6e3x9fn9xEAAgIBAgQEAwQFBgcHBgU1AQACEQMhMRIEQVFhcSITBTKBkRShsUIjwVLR8DMkYuFygpJDUxVjczTxJQYWorKDByY1wtJEk1SjF2RFVTZ0ZeLys4TD03Xj80aUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9ic3R1dnd4eXp7fH/9oADAMBAAIRAxEAPwD1VJJQtuppbvusbWyY3PIaJPaXJKZpKt+0unf9yqf+3G/+SS/aXTv+5VP/AG43/wAkkpspKt+0unf9yqf+3G/+SR2Pa9oewhzXAFrgZBB4IKSmSSSSSlJJJJKUkkkkpSSSSSlJJJJKUkkkkpSSSSSn/9D1VZ/Vq67fsddrWvY7JaHMcAQfZby1y0FR6n/OYP8A4ab/ANRakpn+yul/9w6P+2mf+RS/ZXS/+4dH/bTP/Iq2kkpqfsrpf/cOj/tpn/kU3R/+SMH/AML1f9Q1XFT6P/yRg/8Aher/AKhqSmzdX6tL6tzq97S3eww5siNzHfmvb+as39gn/wAss7/t4f8ApNaVzrG1PdUz1LGtJZWTt3OA9rN+uzd+8s37f17/AMqmf+xLf/SSSlfsE/8Allnf9vD/ANJpfsE/+WWd/wBvD/0mn+39e/8AKpn/ALEt/wDSSX2/r3/lUz/2Jb/6SSUt+wT/AOWWd/28P/SaX7BP/llnf9vD/wBJp/t/Xv8AyqZ/7Et/9JJfb+vf+VTP/Ylv/pJJS37BP/llnf8Abw/9JpfsE/8Allnf9vD/ANJp/t/Xv/Kpn/sS3/0kl9v69/5VM/8AYlv/AKSSUt+wT/5ZZ3/bw/8ASaX7BP8A5ZZ3/bw/9Jp/t/Xv/Kpn/sS3/wBJJfb+vf8AlUz/ANiW/wDpJJS37BP/AJZZ3/bw/wDSaX7BP/llnf8Abw/9Jp/t/Xv/ACqZ/wCxLf8A0kl9v69/5VM/9iW/+kklNzCxPslJq9e3Ilxdvvdvdr+buhvtVhV8K3LtpLsvHGNZuIFYeLNOzt7WsVhJT//R9VVHqf8AOYP/AIab/wBRaryrZ2E3MrYw22UOreLGWVEBwIBb+e2xv5ySmyksz9jW/wDlnm/59f8A6QS/Y1v/AJZ5v+fX/wCkElOmqfR/+SMH/wAL1f8AUNQP2Nb/AOWeb/n1/wDpBXsahmNjVYzCSylja2l0SQ0bBu27fBJSRzmtaXOIa1okk6AAdyg/bsL/ALkVf57f70Wytltbq7Gh9bwWvY4SCDo5rmn95VP2J0b/ALgY3/bTP/IpKTfbsL/uRV/nt/vS+3YX/cir/Pb/AHoP7E6N/wBwMb/tpn/kUv2J0b/uBjf9tM/8ikpN9uwv+5FX+e3+9L7dhf8Acir/AD2/3oP7E6N/3Axv+2mf+RS/YnRv+4GN/wBtM/8AIpKTfbsL/uRV/nt/vS+3YX/cir/Pb/eg/sTo3/cDG/7aZ/5FL9idG/7gY3/bTP8AyKSk327C/wC5FX+e3+9L7dhf9yKv89v96D+xOjf9wMb/ALaZ/wCRS/YnRv8AuBjf9tM/8ikpN9uwv+5FX+e3+9L7dhf9yKv89v8Aeg/sTo3/AHAxv+2mf+RS/YnRv+4GN/20z/yKSm1XbVa3dU9tjZiWkET/AGVNCx8XGxa/TxqmUVklxZW0NEnl21kIqSn/0vVUHKyBjUOvNdlobHsqaXvMkM9tbfc76SMkkpy/2/X/ANwc7/2Gel+36/8AuDnf+wz1qJJKcv8Ab9f/AHBzv/YZ6X7fr/7g53/sM9aiSSnL/b9f/cHO/wDYZ6X7fr/7g53/ALDPWokkpy/2/X/3Bzv/AGGel+36/wDuDnf+wz1qJJKcv9v1/wDcHO/9hnpft+v/ALg53/sM9aiSSnL/AG/X/wBwc7/2Gel+36/+4Od/7DPWokkpy/2/X/3Bzv8A2Gel+36/+4Od/wCwz1qJJKcv9v1/9wc7/wBhnpft+v8A7g53/sM9aiSSmvh5Yy6jaKraQHFuy9hrdp+dsf8Amqwkkkp//9P1VBy8THzMd2Nks9Sl8bmyRO0h7dWFrvpNRkHKdlNoccRjLL9NjbHFrTqN+5zWvd9Dd+akpof81+hf9xf+nZ/6US/5r9C/7i/9Oz/0on9b6y/9xsT/ALes/wDSKXrfWX/uNif9vWf+kUlLf81+hf8AcX/p2f8ApRL/AJr9C/7i/wDTs/8ASif1vrL/ANxsT/t6z/0il631l/7jYn/b1n/pFJS3/NfoX/cX/p2f+lEv+a/Qv+4v/Ts/9KJ/W+sv/cbE/wC3rP8A0il631l/7jYn/b1n/pFJS3/NfoX/AHF/6dn/AKUS/wCa/Qv+4v8A07P/AEon9b6y/wDcbE/7es/9Ipet9Zf+42J/29Z/6RSUt/zX6F/3F/6dn/pRL/mv0L/uL/07P/Sif1vrL/3GxP8At6z/ANIpet9Zf+42J/29Z/6RSUt/zX6F/wBxf+nZ/wClEv8Amv0L/uL/ANOz/wBKJ/W+sv8A3GxP+3rP/SKXrfWX/uNif9vWf+kUlLf81+hf9xf+nZ/6US/5r9C/7i/9Oz/0on9b6y/9xsT/ALes/wDSKXrfWX/uNif9vWf+kUlLf81+hf8AcX/p2f8ApRL/AJr9C/7i/wDTs/8ASif1vrL/ANxsT/t6z/0il631l/7jYn/b1n/pFJTcwsHEwKTTiM9OsuLi2S7U8n3lysKvhOznVE5zK67dxhtTi9u3807ntr9ysJKf/9T1VJJJJSkkkklKSSSSUpJJJJSkkkklKSSSSUpJJJJSkkkklKSSSSUpJJJJT//V9VSXyqkkp+qkl8qpJKfqpJfKqSSn6qSXyqkkp+qkl8qpJKfqpJfKqSSn6qSXyqkkp+qkl8qpJKfqpJfKqSSn6qSXyqkkp//Z/+0TXFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAPHAFaAAMbJUccAgAAAgAAADhCSU0EJQAAAAAAEM3P+n2ox74JBXB2rq8Fw044QklNBDoAAAAAAOUAAAAQAAAAAQAAAAAAC3ByaW50T3V0cHV0AAAABQAAAABQc3RTYm9vbAEAAAAASW50ZWVudW0AAAAASW50ZQAAAABDbHJtAAAAD3ByaW50U2l4dGVlbkJpdGJvb2wAAAAAC3ByaW50ZXJOYW1lVEVYVAAAAAEAAAAAAA9wcmludFByb29mU2V0dXBPYmpjAAAADABQAHIAbwBvAGYAIABTAGUAdAB1AHAAAAAAAApwcm9vZlNldHVwAAAAAQAAAABCbHRuZW51bQAAAAxidWlsdGluUHJvb2YAAAAJcHJvb2ZDTVlLADhCSU0EOwAAAAACLQAAABAAAAABAAAAAAAScHJpbnRPdXRwdXRPcHRpb25zAAAAFwAAAABDcHRuYm9vbAAAAAAAQ2xicmJvb2wAAAAAAFJnc01ib29sAAAAAABDcm5DYm9vbAAAAAAAQ250Q2Jvb2wAAAAAAExibHNib29sAAAAAABOZ3R2Ym9vbAAAAAAARW1sRGJvb2wAAAAAAEludHJib29sAAAAAABCY2tnT2JqYwAAAAEAAAAAAABSR0JDAAAAAwAAAABSZCAgZG91YkBv4AAAAAAAAAAAAEdybiBkb3ViQG/gAAAAAAAAAAAAQmwgIGRvdWJAb+AAAAAAAAAAAABCcmRUVW50RiNSbHQAAAAAAAAAAAAAAABCbGQgVW50RiNSbHQAAAAAAAAAAAAAAABSc2x0VW50RiNQeGxAUgAAAAAAAAAAAAp2ZWN0b3JEYXRhYm9vbAEAAAAAUGdQc2VudW0AAAAAUGdQcwAAAABQZ1BDAAAAAExlZnRVbnRGI1JsdAAAAAAAAAAAAAAAAFRvcCBVbnRGI1JsdAAAAAAAAAAAAAAAAFNjbCBVbnRGI1ByY0BZAAAAAAAAAAAAEGNyb3BXaGVuUHJpbnRpbmdib29sAAAAAA5jcm9wUmVjdEJvdHRvbWxvbmcAAAAAAAAADGNyb3BSZWN0TGVmdGxvbmcAAAAAAAAADWNyb3BSZWN0UmlnaHRsb25nAAAAAAAAAAtjcm9wUmVjdFRvcGxvbmcAAAAAADhCSU0D7QAAAAAAEABIAAAAAQABAEgAAAABAAE4QklNBCYAAAAAAA4AAAAAAAAAAAAAP4AAADhCSU0D8gAAAAAACgAA////////AAA4QklNBA0AAAAAAAQAAAB4OEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAACQAAAAAAAAAAAQA4QklNJxAAAAAAAAoAAQAAAAAAAAABOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0EAAAAAAAAAgAIOEJJTQQCAAAAAAASAAAAAAAAAAAAAAAAAAAAAAAAOEJJTQQwAAAAAAAJAQEBAQEBAQEBADhCSU0ELQAAAAAAAgAAOEJJTQQIAAAAAAAQAAAAAQAAAkAAAAJAAAAAADhCSU0EHgAAAAAABAAAAAA4QklNBBoAAAAAA0cAAAAGAAAAAAAAAAAAAACZAAAA/QAAAAkAaQBuAHMAdQByAGEAbgBjAGUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP0AAACZAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAABudWxsAAAAAgAAAAZib3VuZHNPYmpjAAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRvbWxvbmcAAACZAAAAAFJnaHRsb25nAAAA/QAAAAZzbGljZXNWbExzAAAAAU9iamMAAAABAAAAAAAFc2xpY2UAAAASAAAAB3NsaWNlSURsb25nAAAAAAAAAAdncm91cElEbG9uZwAAAAAAAAAGb3JpZ2luZW51bQAAAAxFU2xpY2VPcmlnaW4AAAANYXV0b0dlbmVyYXRlZAAAAABUeXBlZW51bQAAAApFU2xpY2VUeXBlAAAAAEltZyAAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAAAABUb3AgbG9uZwAAAAAAAAAATGVmdGxvbmcAAAAAAAAAAEJ0b21sb25nAAAAmQAAAABSZ2h0bG9uZwAAAP0AAAADdXJsVEVYVAAAAAEAAAAAAABudWxsVEVYVAAAAAEAAAAAAABNc2dlVEVYVAAAAAEAAAAAAAZhbHRUYWdURVhUAAAAAQAAAAAADmNlbGxUZXh0SXNIVE1MYm9vbAEAAAAIY2VsbFRleHRURVhUAAAAAQAAAAAACWhvcnpBbGlnbmVudW0AAAAPRVNsaWNlSG9yekFsaWduAAAAB2RlZmF1bHQAAAAJdmVydEFsaWduZW51bQAAAA9FU2xpY2VWZXJ0QWxpZ24AAAAHZGVmYXVsdAAAAAtiZ0NvbG9yVHlwZWVudW0AAAARRVNsaWNlQkdDb2xvclR5cGUAAAAATm9uZQAAAAl0b3BPdXRzZXRsb25nAAAAAAAAAApsZWZ0T3V0c2V0bG9uZwAAAAAAAAAMYm90dG9tT3V0c2V0bG9uZwAAAAAAAAALcmlnaHRPdXRzZXRsb25nAAAAAAA4QklNBCgAAAAAAAwAAAACP/AAAAAAAAA4QklNBBQAAAAAAAQAAAAOOEJJTQQMAAAAAAoFAAAAAQAAAKAAAABhAAAB4AAAteAAAAnpABgAAf/Y/+0ADEFkb2JlX0NNAAH/7gAOQWRvYmUAZIAAAAAB/9sAhAAMCAgICQgMCQkMEQsKCxEVDwwMDxUYExMVExMYEQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQ0LCw0ODRAODhAUDg4OFBQODg4OFBEMDAwMDBERDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABhAKADASIAAhEBAxEB/90ABAAK/8QBPwAAAQUBAQEBAQEAAAAAAAAAAwABAgQFBgcICQoLAQABBQEBAQEBAQAAAAAAAAABAAIDBAUGBwgJCgsQAAEEAQMCBAIFBwYIBQMMMwEAAhEDBCESMQVBUWETInGBMgYUkaGxQiMkFVLBYjM0coLRQwclklPw4fFjczUWorKDJkSTVGRFwqN0NhfSVeJl8rOEw9N14/NGJ5SkhbSVxNTk9KW1xdXl9VZmdoaWprbG1ub2N0dXZ3eHl6e3x9fn9xEAAgIBAgQEAwQFBgcHBgU1AQACEQMhMRIEQVFhcSITBTKBkRShsUIjwVLR8DMkYuFygpJDUxVjczTxJQYWorKDByY1wtJEk1SjF2RFVTZ0ZeLys4TD03Xj80aUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9ic3R1dnd4eXp7fH/9oADAMBAAIRAxEAPwD1VJJQtuppbvusbWyY3PIaJPaXJKZpKt+0unf9yqf+3G/+SS/aXTv+5VP/AG43/wAkkpspKt+0unf9yqf+3G/+SR2Pa9oewhzXAFrgZBB4IKSmSSSSSlJJJJKUkkkkpSSSSSlJJJJKUkkkkpSSSSSn/9D1VZ/Vq67fsddrWvY7JaHMcAQfZby1y0FR6n/OYP8A4ab/ANRakpn+yul/9w6P+2mf+RS/ZXS/+4dH/bTP/Iq2kkpqfsrpf/cOj/tpn/kU3R/+SMH/AML1f9Q1XFT6P/yRg/8Aher/AKhqSmzdX6tL6tzq97S3eww5siNzHfmvb+as39gn/wAss7/t4f8ApNaVzrG1PdUz1LGtJZWTt3OA9rN+uzd+8s37f17/AMqmf+xLf/SSSlfsE/8Allnf9vD/ANJpfsE/+WWd/wBvD/0mn+39e/8AKpn/ALEt/wDSSX2/r3/lUz/2Jb/6SSUt+wT/AOWWd/28P/SaX7BP/llnf9vD/wBJp/t/Xv8AyqZ/7Et/9JJfb+vf+VTP/Ylv/pJJS37BP/llnf8Abw/9JpfsE/8Allnf9vD/ANJp/t/Xv/Kpn/sS3/0kl9v69/5VM/8AYlv/AKSSUt+wT/5ZZ3/bw/8ASaX7BP8A5ZZ3/bw/9Jp/t/Xv/Kpn/sS3/wBJJfb+vf8AlUz/ANiW/wDpJJS37BP/AJZZ3/bw/wDSaX7BP/llnf8Abw/9Jp/t/Xv/ACqZ/wCxLf8A0kl9v69/5VM/9iW/+kklNzCxPslJq9e3Ilxdvvdvdr+buhvtVhV8K3LtpLsvHGNZuIFYeLNOzt7WsVhJT//R9VVHqf8AOYP/AIab/wBRaryrZ2E3MrYw22UOreLGWVEBwIBb+e2xv5ySmyksz9jW/wDlnm/59f8A6QS/Y1v/AJZ5v+fX/wCkElOmqfR/+SMH/wAL1f8AUNQP2Nb/AOWeb/n1/wDpBXsahmNjVYzCSylja2l0SQ0bBu27fBJSRzmtaXOIa1okk6AAdyg/bsL/ALkVf57f70Wytltbq7Gh9bwWvY4SCDo5rmn95VP2J0b/ALgY3/bTP/IpKTfbsL/uRV/nt/vS+3YX/cir/Pb/AHoP7E6N/wBwMb/tpn/kUv2J0b/uBjf9tM/8ikpN9uwv+5FX+e3+9L7dhf8Acir/AD2/3oP7E6N/3Axv+2mf+RS/YnRv+4GN/wBtM/8AIpKTfbsL/uRV/nt/vS+3YX/cir/Pb/eg/sTo3/cDG/7aZ/5FL9idG/7gY3/bTP8AyKSk327C/wC5FX+e3+9L7dhf9yKv89v96D+xOjf9wMb/ALaZ/wCRS/YnRv8AuBjf9tM/8ikpN9uwv+5FX+e3+9L7dhf9yKv89v8Aeg/sTo3/AHAxv+2mf+RS/YnRv+4GN/20z/yKSm1XbVa3dU9tjZiWkET/AGVNCx8XGxa/TxqmUVklxZW0NEnl21kIqSn/0vVUHKyBjUOvNdlobHsqaXvMkM9tbfc76SMkkpy/2/X/ANwc7/2Gel+36/8AuDnf+wz1qJJKcv8Ab9f/AHBzv/YZ6X7fr/7g53/sM9aiSSnL/b9f/cHO/wDYZ6X7fr/7g53/ALDPWokkpy/2/X/3Bzv/AGGel+36/wDuDnf+wz1qJJKcv9v1/wDcHO/9hnpft+v/ALg53/sM9aiSSnL/AG/X/wBwc7/2Gel+36/+4Od/7DPWokkpy/2/X/3Bzv8A2Gel+36/+4Od/wCwz1qJJKcv9v1/9wc7/wBhnpft+v8A7g53/sM9aiSSmvh5Yy6jaKraQHFuy9hrdp+dsf8Amqwkkkp//9P1VBy8THzMd2Nks9Sl8bmyRO0h7dWFrvpNRkHKdlNoccRjLL9NjbHFrTqN+5zWvd9Dd+akpof81+hf9xf+nZ/6US/5r9C/7i/9Oz/0on9b6y/9xsT/ALes/wDSKXrfWX/uNif9vWf+kUlLf81+hf8AcX/p2f8ApRL/AJr9C/7i/wDTs/8ASif1vrL/ANxsT/t6z/0il631l/7jYn/b1n/pFJS3/NfoX/cX/p2f+lEv+a/Qv+4v/Ts/9KJ/W+sv/cbE/wC3rP8A0il631l/7jYn/b1n/pFJS3/NfoX/AHF/6dn/AKUS/wCa/Qv+4v8A07P/AEon9b6y/wDcbE/7es/9Ipet9Zf+42J/29Z/6RSUt/zX6F/3F/6dn/pRL/mv0L/uL/07P/Sif1vrL/3GxP8At6z/ANIpet9Zf+42J/29Z/6RSUt/zX6F/wBxf+nZ/wClEv8Amv0L/uL/ANOz/wBKJ/W+sv8A3GxP+3rP/SKXrfWX/uNif9vWf+kUlLf81+hf9xf+nZ/6US/5r9C/7i/9Oz/0on9b6y/9xsT/ALes/wDSKXrfWX/uNif9vWf+kUlLf81+hf8AcX/p2f8ApRL/AJr9C/7i/wDTs/8ASif1vrL/ANxsT/t6z/0il631l/7jYn/b1n/pFJTcwsHEwKTTiM9OsuLi2S7U8n3lysKvhOznVE5zK67dxhtTi9u3807ntr9ysJKf/9T1VJJJJSkkkklKSSSSUpJJJJSkkkklKSSSSUpJJJJSkkkklKSSSSUpJJJJT//V9VSXyqkkp+qkl8qpJKfqpJfKqSSn6qSXyqkkp+qkl8qpJKfqpJfKqSSn6qSXyqkkp+qkl8qpJKfqpJfKqSSn6qSXyqkkp//ZADhCSU0EIQAAAAAAVQAAAAEBAAAADwBBAGQAbwBiAGUAIABQAGgAbwB0AG8AcwBoAG8AcAAAABMAQQBkAG8AYgBlACAAUABoAG8AdABvAHMAaABvAHAAIABDAFMANgAAAAEAOEJJTQQGAAAAAAAHAAgAAAABAQD/4Q7caHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxMy0wNi0wNlQyMzo1OTo1NS0wNDowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxMy0wOS0xNlQxMTowMTozMC0wNDowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTMtMDktMTZUMTE6MDE6MzAtMDQ6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Rjg2RjNEOTVEQjFFRTMxMThBNTM5OTE5MTgzMjBCMEUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkE5ODgwNUMyNUNGRTIxMUEzM0FBQ0U5MEZCMDc0MTUiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGQTk4ODA1QzI1Q0ZFMjExQTMzQUFDRTkwRkIwNzQxNSIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiBwaG90b3Nob3A6TGVnYWN5SVBUQ0RpZ2VzdD0iMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6RkE5ODgwNUMyNUNGRTIxMUEzM0FBQ0U5MEZCMDc0MTUiIHN0RXZ0OndoZW49IjIwMTMtMDYtMDZUMjM6NTk6NTUtMDQ6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpGQjk4ODA1QzI1Q0ZFMjExQTMzQUFDRTkwRkIwNzQxNSIgc3RFdnQ6d2hlbj0iMjAxMy0wNi0wNlQyMzo1OTo1NS0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOkY4NkYzRDk1REIxRUUzMTE4QTUzOTkxOTE4MzIwQjBFIiBzdEV2dDp3aGVuPSIyMDEzLTA5LTE2VDExOjAxOjMwLTA0OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/Pv/iDFhJ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ACITQVEHMmEUcQhCgSORFVKhYhYzCbEkwdFDcvAX4YI0JZJTGGNE8aKyJjUZVDZFZCcKc4OTRnTC0uLyVWV1VjeEhaOzw9Pj8ykalKS0xNTk9JWltcXV5fUoR1dmOHaGlqa2xtbm9md3h5ent8fX5/dIWGh4iJiouMjY6Pg5SVlpeYmZqbnJ2en5KjpKWmp6ipqqusra6vr/2gAMAwEAAhEDEQA/AN/j37r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvdf//Q3+Pfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691//9Hf49+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3X//0t/j37r3XvfuvdEX+d+zMP2Ltn4/bD3A1YmD3d8n+vdv5VsfOlNXLQZPa3YFLUmkqJIaiOGoEch0sUcA/g+/de6Qv/DWXxl/5Xezv/QqxX/2M+/de69/w1l8Zf8Ald7O/wDQqxX/ANjPv3Xuvf8ADWXxl/5Xezv/AEKsV/8AYz7917r3/DWXxl/5Xezv/QqxX/2M+/de6RXZX8tL46bT653/ALqxdX2O2T21srdW4MctVubGTUrV+GwVfkaMVMSbdieWnNRTLrUMpZbgEfX37r3R7fjZ/wBk69Bf+IV6s/8AeGwXv3Xuhq9+690l971W6qHZe767YuNoszvej2vn6rZ2HyUiRY7Lbqp8TVzbexuQlkyGJjjoq7LpDFKzVVMBG5JljHrHuvdV0/6U/wCad/3jZ0r/AOf3D/8A2/ffuvde/wBKf807/vGzpX/z+4f/AO377917r3+lP+ad/wB42dK/+f3D/wD2/ffuvde/0p/zTv8AvGzpX/z+4f8A+377917r3+lP+ad/3jZ0r/5/cP8A/b99+6917/Sn/NO/7xs6V/8AP7h//t++/de69/pT/mnf942dK/8An9w//wBv337r3Xv9Kf8ANO/7xs6V/wDP7h//ALfvv3Xuvf6U/wCad/3jZ0r/AOf3D/8A2/ffuvde/wBKf807/vGzpX/z+4f/AO377917r3+lP+ad/wB42dK/+f3D/wD2/ffuvde/0p/zTv8AvGzpX/z+4f8A+377917r3+lP+ad/3jZ0r/5/cP8A/b99+6917/Sn/NO/7xs6V/8AP7h//t++/de69/pT/mnf942dK/8An9w//wBv337r3Xv9Kf8ANO/7xs6V/wDP7h//ALfvv3Xuvf6U/wCad/3jZ0r/AOf3D/8A2/ffuvde/wBKf807/vGzpX/z+4f/AO377917qz737r3Xvfuvde9+691//9Pf49+691737r3RRPln/wADvit/4t31Z/7z2/ffuvdG79+691737r3Xvfuvde9+690F3eH/ADJXt/8A8Rd2B/7yeW9+690zfGz/ALJ16C/8Qr1Z/wC8NgvfuvdDV7917r3v3Xuve/de697917r3v3Xuve/de697917r3v3Xuve/de697917r3v3Xuve/de697917r3v3Xuve/de697917r3v3Xuve/de697917r3v3Xuve/de697917r3v3Xuv/1N/j37r3XvfuvdFE+Wf/AAO+K3/i3fVn/vPb99+690bv37r3Xvfuvde9+691737r3QXd4f8AMle3/wDxF3YH/vJ5b37r3TN8bP8AsnXoL/xCvVn/ALw2C9+690NXv3XukvvfPZHa2y937nw+363duX25tfP57F7VxpnGR3NkcRiavIUO38eaWiyVSK3M1NOtNF46aok8kg0xubKfde6rp/2e35Ff96++6v8Aqfvn/wC0r7917r3+z2/Ir/vX33V/1P3z/wDaV9+6917/AGe35Ff96++6v+p++f8A7Svv3Xuvf7Pb8iv+9ffdX/U/fP8A9pX37r3Xv9nt+RX/AHr77q/6n75/+0r7917r3+z2/Ir/AL1991f9T98//aV9+6917/Z7fkV/3r77q/6n75/+0r7917r3+z2/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Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvdf//R3+Pfuvde9+690GHc2+9x9Z9bbk3vtPr7N9p7gwn8H/h+w9utXLmM7/Es9i8RVfZtjcLuKtH8Loq+Ssk0Uc37VO19C3dfde6Ih/s9vyK/71991f8AU/fP/wBpX37r3Xv9nt+RX/evvur/AKn75/8AtK+/de69/s9vyK/71991f9T98/8A2lffuvde/wBnt+RX/evvur/qfvn/AO0r7917r3+z2/Ir/vX33V/1P3z/APaV9+6917/Z7fkV/wB6++6v+p++f/tK+/de69/s9vyK/wC9ffdX/U/fP/2lffuvde/2e35Ff96++6v+p++f/tK+/de69/s9vyK/71991f8AU/fP/wBpX37r3Xv9nt+RX/evvur/AKn75/8AtK+/de69/s9vyK/71991f9T98/8A2lffuvde/wBnt+RX/evvur/qfvn/AO0r7917r3+z2/Ir/vX33V/1P3z/APaV9+6917/Z7fkV/wB6++6v+p++f/tK+/de69/s9vyK/wC9ffdX/U/fP/2lffuvde/2e35Ff96++6v+p++f/tK+/de69/s9vyK/71991f8AU/fP/wBpX37r3Xv9nt+RX/evvur/AKn75/8AtK+/de69/s9vyK/71991f9T98/8A2lffuvde/wBnt+RX/evvur/qfvn/AO0r7917r3+z2/Ir/vX33V/1P3z/APaV9+6917/Z7fkV/wB6++6v+p++f/tK+/de69/s9vyK/wC9ffdX/U/fP/2lffuvde/2e35Ff96++6v+p++f/tK+/de69/s9vyK/71991f8AU/fP/wBpX37r3Xv9nt+RX/evvur/AKn75/8AtK+/de6s+9+691737r3Xvfuvdf/S3+Pfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691//9Pf49+691737r3QYdzds7c6N623J2luyizeR2/tf+D/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9B/7EDtH/wCzb37r3Xv+G7/h3/z6D/2IHaP/ANm3v3Xuvf8ADd/w7/59B/7EDtH/AOzb37r3Xv8Ahu/4d/8APoP/AGIHaP8A9m3v3Xuvf8N3/Dv/AJ9B/wCxA7R/+zb37r3Xv+G7/h3/AM+g/wDYgdo//Zt7917r3/Dd/wAO/wDn0H/sQO0f/s29+6917/hu/wCHf/PoP/Ygdo//AGbe/de69/w3f8O/+fQf+xA7R/8As29+6917/hu/4d/8+g/9iB2j/wDZt7917r3/AA3f8O/+fQf+xA7R/wDs29+6917/AIbv+Hf/AD6D/wBiB2j/APZt7917o6nv3Xuve/de697917r/19/j37r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvdf//Q3+Pfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691//9Hf49+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3X//0t/j37r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvdf//Z",defaultQRCodeImage:"data:image/jpeg;base64,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",initComponent:function(){var me=this;
me.store=Ext.create("App.store.patient.Patient"),me.patientAlertsStore=Ext.create("App.store.patient.MeaningfulUseAlert"),me.compactDemographics=eval(g("compact_demographics")),me.insPanel=Ext.widget("tabpanel",{itemId:"PatientInsurancesPanel",flex:1,defaults:{autoScroll:!0,padding:10},plugins:[{ptype:"AddTabButton",iconCls:"icoAdd",toolTip:_("new_insurance"),btnText:_("add_insurance"),forceText:!0,tabConfig:{xtype:"form",border:!1,bodyBorder:!1}}],listeners:{scope:me,beforeadd:me.insurancePanelAdd}});var configs={items:[me.demoForm=Ext.widget("form",{action:"demoFormPanel",itemId:"PatientDemographicForm",type:"anchor",border:!1,autoScroll:!0,padding:me.compactDemographics?0:10,fieldDefaults:{labelAlign:"right",msgTarget:"side"}})]};me.compactDemographics&&configs.items.push(me.insPanel),configs.bbar=[{xtype:"button",action:"readOnly",text:_("possible_duplicates"),minWidth:75,itemId:"PatientPossibleDuplicatesBtn"},"-","->","-",{xtype:"button",action:"readOnly",text:_("save"),itemId:"PatientDemographicSaveBtn",minWidth:75,scope:me,handler:me.formSave},"-",{xtype:"button",text:_("cancel"),action:"readOnly",itemId:"PatientDemographicCancelBtn",minWidth:75,scope:me,handler:me.formCancel}],configs.listeners={scope:me,beforerender:me.beforePanelRender},Ext.apply(me,configs),me.callParent(arguments),me.compactDemographics||Ext.Function.defer(function(){me.insPanel.title=_("insurance"),me.insPanel.addDocked({xtype:"toolbar",dock:"bottom",items:["->","-",{xtype:"button",action:"readOnly",text:_("save"),minWidth:75,scope:me,handler:me.formSave},"-",{xtype:"button",text:_("cancel"),action:"readOnly",minWidth:75,scope:me,handler:me.formCancel}]}),me.up("tabpanel").insert(1,me.insPanel)},300)},beforePanelRender:function(){var a,b=this;b.getFormItems(b.demoForm,1,function(c){var d=b.demoForm.getForm(),e=d.findField("fname"),f=d.findField("mname"),h=d.findField("lname"),i=d.findField("address"),j=d.findField("address_cont"),k=d.findField("city"),l=d.findField("sex"),m=d.findField("DOB"),n=d.findField("zipcode"),o=d.findField("home_phone"),p=d.findField("mobile_phone"),q=d.findField("emer_phone"),r=d.findField("work_phone"),s=d.findField("work_phone_ext"),t=d.findField("email"),u=new RegExp(g("phone_validation_format")),v=new RegExp(g("zipcode_validation_format"));if(e&&(e.vtype="nonspecialcharacters"),f&&(f.vtype="nonspecialcharacters"),h&&(h.vtype="nonspecialcharacters"),i&&(i.vtype="nonspecialcharacters"),j&&(j.vtype="nonspecialcharacters"),k&&(k.vtype="nonspecialcharacters"),t&&(t.vtype="email"),n&&(n.regex=v),o&&(o.regex=u),p&&(p.regex=u),q&&(q.regex=u),r&&(r.regex=u),s&&(s.regex=new RegExp("^[0-9]*$")),m&&m.setMaxValue(new Date),b.newPatient){var w=App.app.getController("patient.Patient");e.on("blur",w.checkForPossibleDuplicates,w),h.on("blur",w.checkForPossibleDuplicates,w),l.on("blur",w.checkForPossibleDuplicates,w),m.dateField.on("blur",w.checkForPossibleDuplicates,w)}else a=c.query("[action=DemographicWhoFieldSet]")[0],a.insert(0,b.patientImages=Ext.create("Ext.panel.Panel",{action:"patientImage",layout:"hbox",style:"float:right",bodyPadding:5,height:160,width:255,items:[{xtype:"image",width:119,height:119,itemId:"image",margin:"0 5 0 0",src:b.defaultPatientImage},{xtype:"textareafield",name:"image",hidden:!0},{xtype:"image",itemId:"qrcode",width:119,height:119,margin:0,src:b.defaultQRCodeImage}],bbar:["-",{text:_("take_picture"),action:"onWebCam"},"-","->","-",{text:_("print_qrcode"),scope:b,handler:function(){window.printQRCode(app.patient.pid)}},"-"]}))}),b.getFormItems(null,11,function(a,c){c.unshift({xtype:"panel",style:"float:right",height:182,width:255,itemId:"insContainer",items:[{xtype:"image",action:"insImage",width:253,height:153,src:b.defaultInsImage},{xtype:"textareafield",action:"insImage",name:"image",hidden:!0}],bbar:["->","-",{text:_("upload"),action:"onWebCam"},"-"]}),b.insuranceFormItmes=c})},insurancePanelAdd:function(a,b){var c=this,d=b.insurance||Ext.create("App.model.patient.Insurance",{pid:c.pid});b.title=_("insurance")+" ("+(d.data.insurance_type?d.data.insurance_type:_("new"))+")",b.add(c.insuranceFormItmes),c.insuranceFormLoadRecord(b,d),""!=d.data.image&&b.down("image").setSrc(d.data.image)},getValidInsurances:function(){for(var a,b,c=this,d=c.insPanel.items.items,e=[],f=0;f<d.length;f++){if(a=d[f].getForm(),!a.isValid())return c.insPanel.setActiveTab(d[f]),!1;b=a.getRecord(),app.fireEvent("beforepatientinsuranceset",a,b),b.set(a.getValues()),app.fireEvent("afterpatientinsuranceset",a,b),e.push(b)}return e},getPatientImages:function(a){var b=this;b.patientImages&&b.patientImages.getComponent("image").setSrc(""!=a.data.image?a.data.image:b.defaultPatientImage),b.patientImages&&b.patientImages.getComponent("qrcode").setSrc(""!=a.data.qrcode?a.data.qrcode:b.defaultQRCodeImage)},verifyPatientRequiredInfo:function(){var a,b=this;b.patientAlertsStore.load({scope:b,params:{pid:b.pid},callback:function(c){for(var d=0;d<c.length;d++)a=b.demoForm.getForm().findField(c[d].data.name),c[d].data.val?a&&a.removeCls("x-field-yellow"):a&&a.addCls("x-field-yellow")}})},readOnlyFields:function(){},copyData:function(a){var b,c,d=this.demoForm.getForm();"self"==a.value&&(b=d.getValues(),c={primary_subscriber_title:b.title,primary_subscriber_fname:b.fname,primary_subscriber_mname:b.mname,primary_subscriber_lname:b.lname,primary_subscriber_street:b.address,primary_subscriber_city:b.city,primary_subscriber_state:b.state,primary_subscriber_country:b.country,primary_subscriber_zip_code:b.zipcode,primary_subscriber_phone:b.home_phone,primary_subscriber_employer:b.employer_name,primary_subscriber_employer_street:b.employer_address,primary_subscriber_employer_city:b.employer_city,primary_subscriber_employer_state:b.employer_state,primary_subscriber_employer_country:b.employer_country,primary_subscriber_employer_zip_code:b.employer_postal_code},d.setValues(c))},insuranceFormLoadRecord:function(a,b){a.getForm().loadRecord(b),app.fireEvent("insurancerecordload",a,b)},formSave:function(){var a=this,b=a.demoForm.getForm(),c=b.getRecord(),d=b.getValues(),e=a.getValidInsurances();b.isValid()&&e!==!1?(c.set(d),app.fireEvent("beforedemographicssave",c,a),c.save({scope:a,callback:function(c){app.setPatient(c.data.pid,null),a.newPatient||(a.getPatientImages(c),a.verifyPatientRequiredInfo(),a.readOnlyFields(b.getFields()));for(var d=c.insurance(),f=0;f<e.length;f++)0==e[f].data.id&&d.add(e[f]);app.fireEvent("afterdemographicssave",c,a),d.sync(),a.msg("Sweet!",_("record_saved")),app.AuditLog("Patient new record "+(a.newPatient?"created":"updated"))}})):a.msg(_("oops"),_("missing_required_data"),!0)},formCancel:function(a){var b=a.up("form").getForm(),c=b.getRecord();b.loadRecord(c)},loadNew:function(){var a=Ext.create("App.model.patient.Patient",{create_uid:app.user.id,update_uid:app.user.id,create_date:new Date,update_date:new Date,DOB:"0000-00-00 00:00:00"});app.AuditLog("Patient new record created"),this.demoForm.getForm().loadRecord(a)},loadPatient:function(a){var b=this,c=b.demoForm.getForm();b.pid=a,b.store.load({filters:[{property:"pid",value:b.pid}],callback:function(a){c.reset(),c.loadRecord(a[0]),b.setReadOnly(app.patient.readOnly),b.setButtonsDisabled(b.query('button[action="readOnly"]')),b.getPatientImages(a[0]),b.verifyPatientRequiredInfo(),app.AuditLog("Patient record viewed"),a[0].insurance().load({filters:[{property:"pid",value:b.pid}],callback:function(a){b.insPanel.removeAll(!0);for(var c=0;c<a.length;c++)b.insPanel.add({xtype:"form",border:!1,bodyBorder:!1,insurance:a[c]});0!=b.insPanel.items.length&&b.insPanel.setActiveTab(0)}})}})}}),Ext.define("App.view.patient.Summary",{extend:"App.ux.RenderPanel",pageTitle:_("patient_summary"),pageLayout:"border",requires:["Ext.XTemplate","Ext.ux.IFrame","App.view.patient.Documents","App.view.patient.CCD","App.ux.ManagedIframe","App.view.patient.Patient"],itemId:"PatientSummaryPanel",showRating:!0,pid:null,demographicsData:null,initComponent:function(){var b=this;b.stores=[],app.on("patientset",function(a){b.hidden||b.updateTitle(a.name+" #"+a.pid+" - "+a.age.str+" - ("+_("patient_summary")+")",app.patient.readOnly,null)},b),b.pageBody=[b.tabPanel=Ext.widget("tabpanel",{flex:1,margin:"3 0 0 0",bodyPadding:0,frame:!1,border:!1,plain:!0,region:"center",layout:"fit",itemId:"PatientSummaryTabPanel"})],b.sidePanelItems=[],a("access_patient_visits")&&(b.stores.push(b.patientEncountersStore=Ext.create("App.store.patient.Encounters",{autoLoad:!1})),Ext.Array.push(b.sidePanelItems,{xtype:"grid",title:_("encounters"),itemId:"PatientSummaryEncountersPanel",hideHeaders:!0,store:b.patientEncountersStore,columns:[{xtype:"datecolumn",width:80,dataIndex:"service_date",format:g("date_display_format")},{dataIndex:"brief_description",flex:1}]})),a("access_patient_medications")&&(b.stores.push(b.patientMedicationsStore=Ext.create("App.store.patient.Medications",{autoLoad:!1})),Ext.Array.push(b.sidePanelItems,{xtype:"grid",title:_("active_medications"),itemId:"PatientSummaryMedicationsPanel",hideHeaders:!0,store:b.patientMedicationsStore,tools:[{xtype:"button",text:_("details"),action:"medications",scope:b,handler:b.medicalWin}],columns:[{header:_("name"),dataIndex:"STR",flex:1},{text:_("alert"),width:55,dataIndex:"alert",renderer:b.boolRenderer}]})),a("access_patient_immunizations")&&(b.stores.push(b.immuCheckListStore=Ext.create("App.store.patient.ImmunizationCheck",{autoLoad:!1})),Ext.Array.push(b.sidePanelItems,{xtype:"grid",title:_("immunizations"),itemId:"PatientSummaryImmunizationPanel",hideHeaders:!0,store:b.immuCheckListStore,region:"center",tools:[{xtype:"button",text:_("details"),action:"immunization",scope:b,handler:b.medicalWin}],columns:[{header:_("name"),dataIndex:"vaccine_name",flex:1},{text:_("alert"),width:55,dataIndex:"alert",renderer:b.alertRenderer}]})),a("access_patient_allergies")&&(b.stores.push(b.patientAllergiesListStore=Ext.create("App.store.patient.Allergies",{autoLoad:!1})),Ext.Array.push(b.sidePanelItems,{xtype:"grid",title:_("allergies"),itemId:"PatientSummaryAllergiesPanel",hideHeaders:!0,store:b.patientAllergiesListStore,region:"center",tools:[{xtype:"button",text:_("details"),action:"allergies",scope:b,handler:b.medicalWin}],columns:[{header:_("name"),dataIndex:"allergy",flex:1},{text:_("alert"),width:55,dataIndex:"alert",renderer:b.boolRenderer}]})),a("access_active_problems")&&(b.stores.push(b.patientActiveProblemsStore=Ext.create("App.store.patient.PatientActiveProblems",{autoLoad:!1})),Ext.Array.push(b.sidePanelItems,{xtype:"grid",title:_("active_problems"),itemId:"PatientSummaryActiveProblemsPanel",hideHeaders:!0,store:b.patientActiveProblemsStore,tools:[{xtype:"button",text:_("details"),action:"issues",scope:b,handler:b.medicalWin}],columns:[{header:_("name"),dataIndex:"code",flex:1},{text:_("alert"),width:55,dataIndex:"alert",renderer:b.boolRenderer}]})),a("access_patient_calendar_events")&&(b.stores.push(b.patientCalendarEventsStore=Ext.create("App.store.patient.PatientCalendarEvents",{autoLoad:!1})),Ext.Array.push(b.sidePanelItems,{xtype:"grid",title:_("appointments"),itemId:"AppointmentsPanel",hideHeaders:!0,disableSelection:!0,store:b.patientCalendarEventsStore,columns:[{xtype:"datecolumn",format:"F j, Y, g:i a",dataIndex:"start",flex:1}]})),b.sidePanelItems.length>0&&(b.sidePanel=Ext.widget("panel",{width:250,bodyPadding:0,frame:!1,border:!1,bodyBorder:!0,region:"east",split:!0,layout:{type:"vbox",align:"stretch"},defaults:{margin:"5 5 0 5"},items:b.sidePanelItems}),Ext.Array.push(b.pageBody,b.sidePanel)),a("access_demographics")&&(b.demographics=b.tabPanel.add({xtype:"patientdeomgraphics",newPatient:!1,autoScroll:!0,title:_("demographics")})),a("access_patient_disclosures")&&b.tabPanel.add({xtype:"grid",title:_("disclosures"),itemId:"PatientSummaryDisclosuresPanel",bodyPadding:0,store:Ext.create("App.store.patient.Disclosures",{autoSync:!1,autoLoad:!1}),plugins:Ext.create("Ext.grid.plugin.RowEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:2}),columns:[{xtype:"datecolumn",format:"Y-m-d",text:_("date"),dataIndex:"date"},{header:_("type"),dataIndex:"type",editor:{xtype:"textfield"}},{text:_("description"),dataIndex:"description",flex:1,editor:{xtype:"textfield"}}],tbar:[{text:_("disclosure"),iconCls:"icoAdd",action:"disclosure",handler:b.onAddNew}]}),a("access_patient_notes")&&b.tabPanel.add({title:_("notes"),itemId:"PatientSummeryNotesPanel",xtype:"grid",bodyPadding:0,store:Ext.create("App.store.patient.Notes",{autoSync:!1,autoLoad:!1}),plugins:Ext.create("Ext.grid.plugin.RowEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:2}),columns:[{xtype:"datecolumn",text:_("date"),format:"Y-m-d",dataIndex:"date"},{header:_("type"),dataIndex:"type",editor:{xtype:"textfield"}},{text:_("note"),dataIndex:"body",flex:1,editor:{xtype:"textfield"}},{text:_("user"),width:225,dataIndex:"user_name"}],tbar:[{text:_("add_note"),iconCls:"icoAdd",action:"note",handler:b.onAddNew}]}),a("access_patient_reminders")&&b.tabPanel.add({title:_("reminders"),itemId:"PatientSummaryRemindersPanel",xtype:"grid",bodyPadding:0,store:Ext.create("App.store.patient.Reminders",{autoLoad:!1,autoSync:!1}),plugins:Ext.create("Ext.grid.plugin.RowEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:2}),columns:[{xtype:"datecolumn",text:_("date"),format:"Y-m-d",dataIndex:"date"},{header:_("type"),dataIndex:"type",editor:{xtype:"textfield"}},{text:_("note"),dataIndex:"body",flex:1,editor:{xtype:"textfield"}},{text:_("user"),width:225,dataIndex:"user_name"}],tbar:[{text:_("add_reminder"),iconCls:"icoAdd",action:"reminder",handler:b.onAddNew}]}),a("access_patient_history")&&b.tabPanel.add({title:_("history"),xtype:"grid",itemId:"PatientEncounterHistoryPanel",store:Ext.create("App.store.patient.Encounters",{autoLoad:!1}),columns:[{header:_("date"),dataIndex:"service_date"},{header:_("event"),dataIndex:"brief_description",flex:!0},{header:_("visit_category"),dataIndex:"visit_category"}]}),a("access_patient_documents")&&b.tabPanel.add({xtype:"patientdocumentspanel",border:!1}),a("access_patient_preventive_care_alerts")&&b.tabPanel.add({title:_("dismissed_preventive_care_alerts"),xtype:"grid",itemId:"PatientSummaryPreventiveCareAlertsPanel",store:Ext.create("App.store.patient.DismissedAlerts",{}),columns:[{header:_("description"),dataIndex:"description"},{xtype:"datecolumn",header:_("date"),dataIndex:"date",format:"Y-m-d"},{header:_("reason"),dataIndex:"reason",flex:!0},{header:_("observation"),dataIndex:"observation",flex:!0},{header:_("dismissed"),dataIndex:"dismiss",width:60,renderer:b.boolRenderer}],plugins:Ext.create("App.ux.grid.RowFormEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:1,items:[{title:"general",xtype:"container",padding:10,layout:"vbox",items:[{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 5 0"},items:[{xtype:"textfield",name:"reason",fieldLabel:_("reason"),width:585,labelWidth:70,action:"reason"}]},{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 5 0"},items:[{xtype:"textfield",fieldLabel:_("observation"),name:"observation",width:250,labelWidth:70,action:"observation"},{fieldLabel:_("date"),xtype:"datefield",action:"date",width:200,labelWidth:40,format:globals.date_display_format,name:"date"},{xtype:"checkboxfield",name:"dismiss",fieldLabel:_("dismiss_alert")}]}]}]})}),a("access_patient_ccd")&&(b.reportPanel=b.tabPanel.add({xtype:"patientccdpanel"})),b.callParent()},onAddNew:function(a){var b,c=a.up("grid"),d=c.store;"disclosure"==a.action?b={date:new Date,pid:app.patient.pid,active:1}:("note"==a.action||"reminder"==a.action)&&(b={date:new Date,pid:app.patient.pid,uid:app.user.id,eid:app.patient.eid}),c.plugins[0].cancelEdit(),d.insert(0,b),c.plugins[0].startEdit(0,0)},medicalWin:function(a){app.onMedicalWin(a.action)},verifyPatientRequiredInfo:function(){var a,b=this,c=b.query('[action="demoFormPanel"]')[0];b.patientAlertsStore.load({scope:b,params:{pid:b.pid},callback:function(b){for(var d=0;d<b.length;d++)a=c.getForm().findField(b[d].data.name),b[d].data.val?a&&a.removeCls("x-field-yellow"):a&&a.addCls("x-field-yellow")}})},loadStores:function(){for(var a=this,b=0;b<a.stores.length;b++)a.stores[b].clearFilter(!0),a.stores[b].load({params:{pid:a.pid},filters:[{property:"pid",value:a.pid}]})},loadPatient:function(){var b=this;b.el.mask(_("loading...")),b.pid=app.patient.pid;var c=app.patient;b.updateTitle(c.name+" #"+c.pid+" - "+c.age.str+" - ("+_("patient_summary")+")",app.patient.readOnly,null),b.setReadOnly(app.patient.readOnly),b.setButtonsDisabled(b.query('button[action="readOnly"]')),a("access_demographics")&&b.demographics.loadPatient(b.pid),b.tabPanel.setActiveTab(0),b.loadStores(),b.el.unmask()},onActive:function(a){var b=this;b.checkIfCurrPatient()?(b.loadPatient(),"function"==typeof a&&a(!0)):(a(!1),b.pid=null,b.currPatientError())}}),Ext.define("App.view.administration.practice.Practice",{extend:"App.ux.RenderPanel",xtype:"practicepanel",pageTitle:_("practice_settings"),requires:["App.view.administration.practice.Facilities","App.view.administration.practice.FacilityConfig","App.view.administration.practice.Laboratories","App.view.administration.practice.Pharmacies","App.view.administration.practice.ProviderNumbers","App.view.administration.practice.ReferringProviders"],pageBody:[{xtype:"tabpanel",activeTab:0,items:[{xtype:"pharmaciespanel"},{xtype:"laboratoriespanel"},{xtype:"insurancecompaniespanel"},{xtype:"providersnumberspanel"},{xtype:"referringproviderspanel"},{xtype:"facilitiespanel"},{xtype:"facilityconfigpanel"}]}]}),Ext.define("App.view.administration.DataManager",{extend:"App.ux.RenderPanel",pageTitle:"Data Manager",requires:["App.view.administration.CPT","App.ux.combo.CodesTypes","App.ux.combo.Titles"],initComponent:function(){function a(a){return"1"==a?"CPT4":"3"==a?"HCPCS":"100"==a?"CVX":a}var b=this;b.active=1,b.dataQuery="",b.code_type="LOINC",b.store=Ext.create("App.store.administration.Services"),b.activeProblemsStore=Ext.create("App.store.administration.ActiveProblems"),b.medicationsStore=Ext.create("App.store.administration.Medications"),b.ImmuRelationStore=Ext.create("App.store.administration.ImmunizationRelations"),b.labObservationsStore=Ext.create("App.store.administration.LabObservations"),b.cptContainer=Ext.create("Ext.container.Container",{layout:"column",action:"CPT4",items:[{xtype:"fieldcontainer",msgTarget:"under",defaults:{action:"field"},items:[{fieldLabel:"Type",xtype:"mitos.codestypescombo",name:"code_type"},{fieldLabel:"Code",xtype:"textfield",name:"code"}]},{xtype:"fieldcontainer",margin:"0 0 0 10",defaults:{action:"field"},items:[{fieldLabel:_("description"),xtype:"textfield",name:"code_text",width:500}]},{xtype:"fieldcontainer",margin:"0 0 0 20",defaults:{action:"field"},items:[{boxLabel:_("radiology"),xtype:"checkboxfield",name:"isRadiology"},{boxLabel:_("active"),labelWidth:75,xtype:"checkboxfield",name:"active"}]}]}),b.hpccsContainer=Ext.create("Ext.container.Container",{layout:"column",action:"HCPCS",items:[{xtype:"fieldcontainer",msgTarget:"under",defaults:{action:"field"},items:[{fieldLabel:_("type"),xtype:"mitos.codestypescombo",name:"code_type"},{fieldLabel:_("code"),xtype:"textfield",name:"code"},{fieldLabel:_("modifier"),xtype:"textfield",name:"mod"}]},{xtype:"fieldcontainer",margin:"0 0 0 10",defaults:{action:"field"},items:[{fieldLabel:_("description"),xtype:"textfield",name:"code_text"},{fieldLabel:_("category"),xtype:"mitos.titlescombo",name:"title"}]},{xtype:"fieldcontainer",margin:"0 0 0 20",defaults:{action:"field"},items:[{boxLabel:_("reportable"),xtype:"checkboxfield",name:"reportable"},{boxLabel:_("active"),labelWidth:75,xtype:"checkboxfield",name:"active"}]}]}),b.cvxCintainer=Ext.create("Ext.container.Container",{action:_("immunizations"),layout:"fit",items:[{}]}),b.labContainer=Ext.create("Ext.container.Container",{action:_("laboratories"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 5 0",action:"field"},items:[{xtype:"textfield",fieldLabel:_("short_name_alias"),name:"code_text_short",labelWidth:130,width:500},{xtype:"checkbox",fieldLabel:_("active"),name:"active",anchor:"100%",labelWidth:50}]},{xtype:"grid",frame:!0,title:_("children"),store:b.labObservationsStore,plugins:Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:2}),columns:[{header:_("label_alias"),dataIndex:"code_text_short",width:150,editor:{xtype:"textfield"}},{header:_("loinc_name"),dataIndex:"loinc_name",flex:1},{header:_("loinc_number"),dataIndex:"loinc_number",width:100},{header:_("default_unit"),dataIndex:"default_unit",width:100,editor:{xtype:"mitos.unitscombo"}},{header:_("req_opt"),dataIndex:"required_in_panel",width:75},{header:_("range_start"),dataIndex:"range_start",width:100,editor:{xtype:"numberfield"}},{header:_("range_end"),dataIndex:"range_end",width:100,editor:{xtype:"numberfield"}},{header:_("description"),dataIndex:"description",flex:1,editor:{xtype:"textfield"}},{width:60,header:_("active"),dataIndex:"active",renderer:b.boolRenderer,editor:{xtype:"checkbox"}}]}]}),b.dataManagerGrid=Ext.create("Ext.grid.Panel",{title:"Codes",region:"center",store:b.store,viewConfig:{loadMask:!0},columns:[{width:50,sortable:!1,dataIndex:"code_type",renderer:a},{width:60,header:_("code"),sortable:!0,dataIndex:"code"},{header:_("short_name"),dataIndex:"code_text_short",width:100,flex:1},{header:_("long_name"),sortable:!0,dataIndex:"code_text",flex:2},{width:60,header:_("active"),sortable:!0,dataIndex:"active",renderer:b.boolRenderer}],plugins:Ext.create("App.ux.grid.RowFormEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:1,listeners:{scope:b,beforeedit:b.beforeServiceEdit}}),tbar:this.bar=Ext.create("Ext.PagingToolbar",{store:b.store,displayInfo:!0,emptyMsg:_("no_office_notes_to_display"),plugins:Ext.create("Ext.ux.SlidingPager"),items:["-",{xtype:"mitos.codestypescombo",width:150,listeners:{scope:b,select:b.onCodeTypeSelect}},"-",{text:_("add"),iconCls:"icoAddRecord",scope:b,handler:b.onAddData},"-",{xtype:"textfield",emptyText:_("search"),width:200,enableKeyEvents:!0,listeners:{scope:b,keyup:b.onSearch,buffer:500}},"-",{xtype:"button",text:_("show_inactive_codes_only"),enableToggle:!0,listeners:{scope:b,toggle:b.onActivePressed}}]})}),b.tabPanel=Ext.widget("tabpanel",{items:[{xtype:"cptadmingrid"},b.dataManagerGrid]}),b.pageBody=[b.tabPanel],b.callParent()},onAddData:function(){var a=this;"Laboratories"==a.code_type?Ext.Msg.alert("Opps!",_("ops_laboratories")):(a.dataManagerGrid.plugins[0].cancelEdit(),a.store.add({code_type:a.code_type}),a.dataManagerGrid.plugins[0].startEdit(0,0))},beforeServiceEdit:function(a,b){var c,d,e=this,f=a.editor,g=b.record.data.code_type;if("CPT4"==g?d=e.cptContainer:"HCPCS"==g?d=e.hpccsContainer:"CVX"==g?d=e.cvxCintainer:"LOINC"==g&&(e.labContainer.down("grid").setTitle(_(b.record.data.has_children?"observations":"observation")),e.labContainer.down("grid").setVisible("RAD"!=b.record.data.class),d=e.labContainer),f.items.length?this.currForm!=d&&(f.remove(0,!1),f.add(d),f.setFields()):(f.add(d),f.setFields()),d){c=d.query("grid");for(var h=0;h<c.length;h++)c[h].getStore().load({params:{selectedId:e.getSelectId()}});this.currForm=d}},onSearch:function(a){var b=this,c=b.store;b.dataQuery=a.getValue(),c.proxy.extraParams={active:b.active,code_type:b.code_type,query:b.dataQuery},b.store.loadPage(1)},onCodeTypeSelect:function(a,b){var c=this,d=c.store;c.code_type=b[0].data.option_value,d.proxy.extraParams={active:c.active,code_type:c.code_type,query:c.dataQuery},c.store.loadPage(1)},onActivePressed:function(a,b){var c=this,d=c.store;c.active=!b,d.proxy.extraParams={active:c.active,code_type:c.code_type,query:c.dataQuery},c.store.load()},getSelectId:function(){var a=this.dataManagerGrid.getSelectionModel().getLastSelected();return a.data.id},onActive:function(a){this.bar.query("combobox")[0].setValue("CPT4"),this.store.proxy.extraParams={active:this.active,code_type:this.code_type,query:this.dataQuery},this.store.load(),a(!0)}}),Ext.define("App.view.administration.Documents",{extend:"App.ux.RenderPanel",id:"panelDocuments",pageTitle:_("document_template_editor"),pageLayout:"border",requires:["App.ux.grid.Button","Ext.grid.Panel"],initComponent:function(){var a=this;a.templatesDocumentsStore=Ext.create("App.store.administration.DocumentsTemplates"),a.defaultsDocumentsStore=Ext.create("App.store.administration.DefaultDocuments"),a.tokenStore=Ext.create("App.store.administration.DocumentToken"),a.DocumentsDefaultsGrid=Ext.create("Ext.grid.Panel",{title:_("documents_defaults"),region:"north",width:250,border:!0,split:!0,store:a.defaultsDocumentsStore,hideHeaders:!0,columns:[{flex:1,sortable:!0,dataIndex:"title",editor:{xtype:"textfield",allowBlank:!1}},{icon:"resources/images/icons/delete.png",tooltip:_("remove"),scope:a,handler:a.onRemoveDocument}],listeners:{scope:a,itemclick:a.onDocumentsGridItemClick},tbar:["->",{text:_("new"),scope:a,handler:a.newDefaultTemplates}],plugins:[a.rowEditor3=Ext.create("Ext.grid.plugin.RowEditing",{clicksToEdit:2})]}),a.DocumentsGrid=Ext.create("Ext.grid.Panel",{title:_("document_templates"),region:"center",width:250,border:!0,split:!0,store:a.templatesDocumentsStore,hideHeaders:!0,columns:[{flex:1,sortable:!0,dataIndex:"title",editor:{xtype:"textfield",allowBlank:!1}},{icon:"resources/images/icons/delete.png",tooltip:_("remove"),scope:a,handler:a.onRemoveDocument}],listeners:{scope:a,itemclick:a.onDocumentsGridItemClick},tbar:["->",{text:_("new"),scope:a,handler:a.newDocumentTemplate}],plugins:[a.rowEditor=Ext.create("Ext.grid.plugin.RowEditing",{clicksToEdit:2})]}),a.LeftCol=Ext.create("Ext.container.Container",{region:"west",layout:"border",width:250,border:!1,split:!0,items:[a.DocumentsDefaultsGrid,a.DocumentsGrid]}),a.TeamplateEditor=Ext.create("Ext.form.Panel",{title:_("document_editor"),region:"center",layout:"fit",autoScroll:!1,border:!0,split:!0,hideHeaders:!0,items:{xtype:"htmleditor",enableFontSize:!1,name:"body",margin:5},buttons:[{text:_("save"),scope:a,handler:a.onSaveEditor},{text:_("cancel"),scope:a,handler:a.onCancelEditor}]}),a.TokensGrid=Ext.create("Ext.grid.Panel",{title:_("available_tokens"),region:"east",width:250,border:!0,split:!0,hideHeaders:!0,store:a.tokenStore,disableSelection:!0,viewConfig:{stripeRows:!1},columns:[{flex:1,sortable:!1,dataIndex:"token"},{xtype:"actioncolumn",width:50,items:[{icon:"resources/images/icons/copy.png",tooltip:_("copy"),margin:"0 5 0 0",handler:function(){}}]}]}),a.pageBody=[a.LeftCol,a.TeamplateEditor,a.TokensGrid],a.callParent()},onDelete:function(){},onTokensGridItemClick:function(){},onSaveEditor:function(){var a=this,b=a.down("form").getForm(),c=b.getRecord(),d=b.getValues();c.set(d),app.msg(_("sweet"),_("record_saved"))},onCancelEditor:function(){var a=this,b=a.down("form").getForm(),c=a.DocumentsGrid;b.reset(),c.getSelectionModel().deselectAll()},onDocumentsGridItemClick:function(a,b){var c=this,d=c.down("form").getForm();d.loadRecord(b)},newDocumentTemplate:function(){var a=this,b=a.templatesDocumentsStore;a.rowEditor.cancelEdit(),b.insert(0,{title:_("new_document"),template_type:"documenttemplate",date:new Date,type:1}),a.rowEditor.startEdit(0,0)},newDefaultTemplates:function(){var a=this,b=a.defaultsDocumentsStore;a.rowEditor3.cancelEdit(),b.insert(0,{title:_("new_defaults"),template_type:"defaulttemplate",date:new Date,type:1}),a.rowEditor3.startEdit(0,0)},copyToClipBoard:function(a,b){{var c=a.getStore().getAt(b);c.get("token")}},onRemoveDocument:function(){},onActive:function(a){var b=this;b.templatesDocumentsStore.load(),b.defaultsDocumentsStore.load(),a(!0)}}),Ext.define("App.view.administration.Users",{extend:"App.ux.RenderPanel",requires:["App.ux.form.fields.plugin.PasswordStrength","App.ux.combo.ActiveSpecialties"],pageTitle:_("users"),initComponent:function(){var a=this;a.userStore=Ext.create("App.store.administration.User",{autoSync:!1}),a.userGrid=Ext.create("Ext.grid.Panel",{itemId:"AdminUserGridPanel",store:a.userStore,columns:[{text:"id",sortable:!1,dataIndex:"id",width:25},{width:100,text:_("username"),sortable:!0,dataIndex:"username"},{width:200,text:_("name"),sortable:!0,dataIndex:"fullname"},{flex:1,text:_("aditional_info"),sortable:!0,dataIndex:"notes"},{text:_("active"),sortable:!0,dataIndex:"active",renderer:a.boolRenderer},{text:_("authorized"),sortable:!0,dataIndex:"authorized",renderer:a.boolRenderer},{text:_("calendar_q"),sortable:!0,dataIndex:"calendar",renderer:a.boolRenderer}],plugins:[a.formEditing=Ext.create("App.ux.grid.RowFormEditing",{clicksToEdit:1,items:[{xtype:"container",itemId:"UserGridEditFormContainer",layout:"hbox",items:[{xtype:"container",itemId:"UserGridEditFormContainerLeft",items:[{xtype:"fieldcontainer",layout:{type:"hbox"},fieldDefaults:{labelAlign:"right"},items:[{width:280,xtype:"textfield",fieldLabel:_("username"),name:"username",allowBlank:!1,validateOnBlur:!0,vtype:"usernameField"},{width:275,xtype:"textfield",fieldLabel:_("password"),name:"password",inputType:"password",vtype:"strength",strength:24,plugins:{ptype:"passwordstrength"}}]},{xtype:"fieldcontainer",layout:{type:"hbox"},fieldDefaults:{labelAlign:"right"},fieldLabel:_("name"),items:[{width:50,xtype:"mitos.titlescombo",name:"title"},{width:145,xtype:"textfield",name:"fname",allowBlank:!1},{width:100,xtype:"textfield",name:"mname"},{width:150,xtype:"textfield",name:"lname"}]},{xtype:"fieldcontainer",layout:{type:"hbox"},fieldDefaults:{labelAlign:"right"},items:[{width:100,xtype:"checkbox",fieldLabel:_("active"),name:"active"},{width:100,xtype:"checkbox",fieldLabel:_("authorized"),name:"authorized"},{width:75,xtype:"checkbox",fieldLabel:_("calendar_q"),name:"calendar"},{width:275,xtype:"gaiaehr.combo",fieldLabel:_("type"),name:"doctor_type",list:121,loadStore:!0}]},{xtype:"fieldcontainer",layout:{type:"hbox"},fieldDefaults:{labelAlign:"right"},items:[{width:280,xtype:"mitos.facilitiescombo",fieldLabel:_("default_facility"),name:"facility_id"},{width:275,xtype:"mitos.authorizationscombo",fieldLabel:_("authorizations"),name:"see_auth"}]},{xtype:"fieldcontainer",layout:{type:"hbox"},fieldDefaults:{labelAlign:"right"},items:[{width:555,xtype:"mitos.rolescombo",fieldLabel:_("access_control"),name:"role_id",allowBlank:!1}]}]},{xtype:"container",itemId:"UserGridEditFormContainerRight",items:[{xtype:"fieldcontainer",layout:{type:"hbox"},fieldDefaults:{labelAlign:"right"},items:[{width:280,xtype:"textfield",fieldLabel:_("federal_tax_id"),name:"fedtaxid"},{width:275,xtype:"textfield",fieldLabel:_("fed_drug_id"),name:"feddrugid"}]},{xtype:"fieldcontainer",layout:{type:"hbox"},fieldDefaults:{labelAlign:"right"},items:[{width:280,xtype:"textfield",fieldLabel:_("upin"),name:"pin"},{width:275,xtype:"textfield",fieldLabel:_("npi"),name:"npi",maxLength:10,vtype:"npi"}]},{width:558,xtype:"activespecialtiescombo",fieldLabel:_("specialties"),name:"specialty",margin:"5 0",labelAlign:"right",multiSelect:!0},{width:558,xtype:"textfield",fieldLabel:_("additional_info"),name:"notes",labelAlign:"right"}]}]}]})],dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",text:_("add_new_user"),iconCls:"save",scope:a,handler:a.onNewUser}]}]}),a.pageBody=[a.userGrid],a.callParent(arguments)},onNewUser:function(){var a=this;a.formEditing.cancelEdit(),a.userStore.insert(0,{create_date:new Date,update_date:new Date,create_uid:app.user.id,update_uid:app.user.id,active:1,authorized:0,calendar:0}),a.formEditing.startEdit(0,0)},onActive:function(a){this.userStore.load(),a(!0)}}),Ext.define("App.view.miscellaneous.AddressBook",{extend:"App.ux.RenderPanel",requires:["App.store.miscellaneous.AddressBook","Ext.toolbar.Paging","Ext.ux.SlidingPager"],pageTitle:_("address_book"),initComponent:function(){var a=this;
a.grid=Ext.create("Ext.grid.Panel",{store:a.store=Ext.create("App.store.miscellaneous.AddressBook"),columns:[{header:_("name"),width:200,dataIndex:"fullname"},{header:_("primary_phone"),dataIndex:"phone",width:120},{header:_("cell_phone"),dataIndex:"mobile",width:120},{header:_("fax"),dataIndex:"fax",width:120},{header:_("email"),dataIndex:"email",width:120},{header:_("direct_address"),dataIndex:"direct_address",width:120},{header:_("notes"),dataIndex:"notes",flex:1}],plugins:[{ptype:"rowformediting",items:[{xtype:"container",layout:"column",defaults:{xtype:"container",layout:"anchor",margin:5},items:[{width:500,defaults:{labelWidth:80,anchor:"100%"},items:[{xtype:"fieldcontainer",fieldLabel:_("name"),layout:"hbox",defaults:{margin:"0 5 0 0"},items:[{xtype:"textfield",emptyText:_("first_name"),name:"fname",width:130},{xtype:"textfield",emptyText:_("middle_name"),name:"mname",width:50},{xtype:"textfield",emptyText:_("last_name"),name:"lname",flex:1,margin:0}]},{xtype:"fieldcontainer",fieldLabel:_("address"),layout:"anchor",defaults:{anchor:"100%",margin:"0 0 5 0"},items:[{xtype:"textfield",emptyText:_("street"),name:"street"},{xtype:"textfield",name:"street_cont"},{xtype:"container",layout:"hbox",defaults:{margin:"0 5 0 0"},items:[{xtype:"textfield",emptyText:_("city"),name:"city",flex:1},{xtype:"textfield",emptyText:_("state"),name:"state",width:120},{xtype:"textfield",emptyText:_("zip"),name:"zip",width:100,margin:0}]},{xtype:"textfield",emptyText:_("country"),name:"country",margin:"5 0 0 0"}]},{xtype:"textfield",fieldLabel:_("notes"),name:"notes",margin:"5 0 5 0"}]},{width:300,layout:"anchor",defaults:{anchor:"100%",labelWidth:80,margin:"0 0 5 0"},items:[{xtype:"textfield",fieldLabel:_("phone")+" (1)",name:"phone"},{xtype:"textfield",fieldLabel:_("phone")+" (2)",name:"phone2"},{xtype:"textfield",fieldLabel:_("cell_phone"),name:"mobile"},{xtype:"textfield",fieldLabel:_("fax"),name:"fax"},{xtype:"textfield",fieldLabel:_("email"),name:"email",margin:"5 0 5 0",vtype:"email"},{xtype:"textfield",fieldLabel:_("url"),name:"url"}]},{width:300,layout:"anchor",defaults:{anchor:"100%",labelWidth:100,margin:"0 0 5 0"},items:[{xtype:"textfield",fieldLabel:_("direct_address"),name:"direct_address"}]}]}]}],tbar:[{text:_("add_contact"),iconCls:"icoAdd",scope:a,handler:a.onAddContact}],bbar:Ext.create("Ext.PagingToolbar",{store:a.store,displayInfo:!0,plugins:Ext.create("Ext.ux.SlidingPager",{})})}),a.pageBody=[a.grid],a.callParent(arguments)},onAddContact:function(){var a,b=this,c=b.grid,d=c.getStore(),e=c.editingPlugin;e.cancelEdit(),a=d.add({})[0],e.startEdit(a,0)},onActive:function(a){this.grid.getStore().load(),a(!0)}}),Ext.define("App.view.miscellaneous.MyAccount",{extend:"App.ux.RenderPanel",pageTitle:_("my_account"),requires:["App.ux.combo.Titles","App.ux.window.Window","App.ux.combo.Facilities","App.ux.form.fields.plugin.PasswordStrength"],initComponent:function(){var a=this;a.store=Ext.create("App.store.miscellaneous.Users"),a.myAccountForm=Ext.create("App.ux.form.Panel",{cls:"form-white-bg",frame:!0,hideLabels:!0,defaults:{labelWidth:89,layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}}},items:[{xtype:"textfield",hidden:!0,name:"id"},{xtype:"fieldset",title:_("personal_info"),defaultType:"textfield",layout:"anchor",defaults:{labelWidth:89,anchor:"100%",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}}},items:[{xtype:"fieldcontainer",defaults:{hideLabel:!0},msgTarget:"under",items:[{width:110,xtype:"displayfield",value:"First, Middle, Last: "},{width:55,xtype:"mitos.titlescombo",name:"title"},{width:105,xtype:"textfield",name:"fname"},{width:100,xtype:"textfield",name:"mname"},{width:175,xtype:"textfield",name:"lname"}]}]},{xtype:"fieldset",title:_("login_info"),defaultType:"textfield",layout:"anchor",defaults:{labelWidth:89,anchor:"100%",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}}},items:[{xtype:"fieldcontainer",defaults:{hideLabel:!0},msgTarget:"under",items:[{width:110,xtype:"displayfield",value:"Username: "},{width:170,xtype:"textfield",name:"username"},{width:100,xtype:"displayfield",value:"Password: "},{width:175,xtype:"textfield",name:"password",inputType:"password",disabled:!0}]}]},{xtype:"fieldset",title:_("other_info"),defaultType:"textfield",layout:"anchor",defaults:{labelWidth:89,anchor:"100%",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}}},items:[{xtype:"fieldcontainer",defaults:{hideLabel:!0},msgTarget:"under",items:[{width:110,xtype:"displayfield",value:"Default Facility: "},{xtype:"mitos.facilitiescombo",width:170,name:"facility_id"},{width:100,xtype:"displayfield",value:"Taxonomy: "},{width:175,xtype:"textfield",name:"taxonomy"}]},{xtype:"fieldcontainer",defaults:{hideLabel:!0},items:[{width:110,xtype:"displayfield",value:"Federal Tax ID: "},{width:170,xtype:"textfield",name:"fedtaxid"},{width:100,xtype:"displayfield",value:"Fed Drug ID: "},{width:175,xtype:"textfield",name:"feddrugid"}]},{xtype:"fieldcontainer",defaults:{hideLabel:!0},items:[{width:110,xtype:"displayfield",value:"User PIN#: "},{width:170,xtype:"textfield",name:"pin"},{width:100,xtype:"displayfield",value:"NPI: "},{width:175,xtype:"textfield",name:"npi"}]},{xtype:"fieldcontainer",defaults:{hideLabel:!0},items:[{width:110,xtype:"displayfield",value:"Job Description: "},{width:455,xtype:"textfield",name:"specialty"}]}]}],tbar:[{text:_("change_password"),iconCls:"save",scope:a,handler:a.onPasswordChange}],buttons:[{text:_("save"),iconCls:"save",scope:a,handler:a.onSaveClick}]}),a.win=Ext.create("App.ux.window.Window",{width:420,title:_("change_you_password"),items:[{xtype:"form",bodyPadding:15,defaultType:"textfield",defaults:{labelWidth:130,width:380,inputType:"password"},items:[{name:"id",hidden:!0},{fieldLabel:_("old_password"),name:"oPassword",allowBlank:!1},{fieldLabel:_("new_password"),name:"nPassword",allowBlank:!1,id:"myAccountPage_nPassword",vtype:"strength",strength:24,plugins:{ptype:"passwordstrength"}},{fieldLabel:_("re_type_password"),name:"vPassword",allowBlank:!1,vtype:"password",initialPassField:"myAccountPage_nPassword",validateOnChange:!0}]}],buttons:[{text:_("save"),scope:a,handler:a.onPasswordSave},{text:_("cancel"),scope:a,handler:a.onCancel}],listeners:{scope:a,close:a.onClose}}),a.pageBody=[a.myAccountForm],a.callParent(arguments)},onPasswordSave:function(){var a,b=this,c=b.win.down("form").getForm(),d=c.getValues(),e=b.myAccountForm.getForm().getRecord().data.id;return d.nPassword!=d.vPassword?void app.msg(_("oops"),_("password_does_not_match"),!0):void(c.isValid()&&(a={id:e,old_password:d.oPassword,new_password:d.nPassword},User.updatePassword(a,function(a,c){c.result.success?(app.msg(_("sweet"),_("record_updated")),b.win.close()):app.msg(_("oops"),_(c.result.message),!0)})))},onPasswordChange:function(){this.win.show()},onCancel:function(){this.win.close()},onClose:function(){this.win.down("form").getForm().reset()},onSaveClick:function(){var a=this,b=a.myAccountForm.getForm(),c=b.getRecord(),d=b.getValues();c.set(d),c.save({callback:function(){app.msg(_("sweet"),_("record_update"))}})},onActive:function(a){var b=this,c=b.myAccountForm.getForm();this.store.load({callback:function(a){c.loadRecord(a[0])}}),a(!0)}}),Ext.define("App.store.patient.Encounters",{extend:"Ext.data.Store",requires:["App.model.patient.Encounter"],model:"App.model.patient.Encounter",remoteSort:!0}),Ext.define("App.controller.DocumentViewer",{extend:"Ext.app.Controller",requires:["App.view.patient.windows.ArchiveDocument"],refs:[{ref:"DocumentViewerWindow",selector:"documentviewerwindow"},{ref:"DocumentViewerWindow",selector:"documentviewerwindow > form"},{ref:"ArchiveDocumentBtn",selector:"documentviewerwindow #archiveDocumentBtn"},{ref:"ArchiveWindow",selector:"patientarchivedocumentwindow"},{ref:"ArchiveForm",selector:"patientarchivedocumentwindow > form"}],init:function(){var a=this;a.control({documentviewerwindow:{close:a.onViewerDocumentsWinClose},"documentviewerwindow #archiveDocumentBtn":{click:a.onArchiveDocumentBtnClick},"patientarchivedocumentwindow #archiveBtn":{click:a.onArchiveBtnClick}})},onArchiveBtnClick:function(a){var b=a.up("window"),c=b.down("form").getForm(),d=c.getValues();c.isValid()&&(d.pid=app.patient.pid,d.eid=app.patient.eid,d.uid=app.user.id,DocumentHandler.transferTempDocument(d,function(a,c){c.result.success?(dual?dual.msg(_("sweet"),"document_transferred"):app.msg(_("sweet"),"document_transferred"),b.documentWindow.close(),b.close()):dual?dual.msg(_("oops"),"document_transfer_failed",!0):app.msg(_("oops"),"document_transfer_failed",!0)}))},onArchiveDocumentBtnClick:function(a){var b=a.up("window"),c={id:b.documentId,docType:b.documentType,title:b.documentType+" "+_("order")},d=Ext.widget("patientarchivedocumentwindow",{documentWindow:b});d.down("form").getForm().setValues(c)},onViewerDocumentsWinClose:function(a){DocumentHandler.destroyTempDocument({id:a.documentId})}}),Ext.define("App.controller.Notification",{extend:"Ext.app.Controller",requires:["App.view.notifications.Grid"],refs:[{ref:"UserSplitButton",selector:"#userSplitButton"},{ref:"NotificationsGrid",selector:"notificationsgrid"}],init:function(){var a=this;a.control({viewport:{beforerender:a.onViewportBeforeRender},"#userSplitButton":{badgeclick:a.onUserSplitButtonBadgeClick},notificationsgrid:{itemclick:a.onNotificationsGridItemClick},"notificationsgrid > header":{click:a.onNotificationsGridHeaderClick}}),a.store=Ext.create("Ext.data.Store",{fields:[{name:"id",type:"string"},{name:"description",type:"string"},{name:"data",type:"auto"},{name:"controller",type:"string"},{name:"method",type:"string"}]}),a.store.on("add",a.onNotificationAdd,a),a.store.on("remove",a.onNotificationRemove,a)},onNotificationAdd:function(a){this.setBadgeText(a.count())},onNotificationRemove:function(a){this.setBadgeText(a.count())},onNotificationsGridItemClick:function(a,b){var c=this,d=App.app.getController(b.data.controller),e=b.data.method,f=b.data.data;"object"==typeof d&&"function"==typeof d[e]?f?d[e](f,function(a){a&&c.store.remove(b),c.doHideNotifications()}):d[e](function(a){a&&c.store.remove(b),c.doHideNotifications()}):(c.store.remove(b),c.doHideNotifications(),app.msg(_("oops"),_("notification_handler_error"),!0))},onNotificationsGridHeaderClick:function(){this.doHideNotifications()},onUserSplitButtonBadgeClick:function(){this.doShowNotifications()},onViewportBeforeRender:function(a){var b=this;b.grid=a.add(Ext.widget("notificationsgrid",{floatable:!0,floating:!0,store:b.store}))},setBadgeText:function(a){this.getUserSplitButton().setBadgeText(a)},getBadgeText:function(){this.getUserSplitButton().getBadgeText()},doHideNotifications:function(){this.getNotificationsGrid().collapse(Ext.Component.DIRECTION_TOP,!0),this.getNotificationsGrid().hide(),Ext.getBody().un("click",this.doHideNotifications,this)},doShowNotifications:function(){this.grid.showBy(this.getUserSplitButton(),"tr-br",[-1,4]),this.grid.expand(!0),this.grid.toFront(),Ext.getBody().on("click",this.doHideNotifications,this)},add:function(a,b,c,d,e){var f;return this.store.getById(a)?(f=this.store.getById(a),f.set({description:b,data:c,controller:d,method:e}),f.commit(),f):(f=this.store.add({id:a,description:b,data:c,controller:d,method:e})[0],app.msg(_("new_notification"),b,"yellow"),f)},remove:function(a){this.store.getById(a)&&this.store.remove(this.store.getById(a))},testNotification:function(a,b){say("Hello Word!"),say(a),"function"==typeof b&&b(!0)}}),Ext.define("App.controller.patient.Documents",{extend:"Ext.app.Controller",requires:["App.view.patient.windows.UploadDocument"],refs:[{ref:"PatientDocumentPanel",selector:"patientdocumentspanel"},{ref:"PatientDocumentGrid",selector:"patientdocumentspanel #patientDocumentGrid"},{ref:"PatientDocumentViewerFrame",selector:"patientdocumentspanel #patientDocumentViewerFrame"},{ref:"PatientDocumentUploadWindow",selector:"#patientDocumentUploadWindow"},{ref:"DocumentHashCheckBtn",selector:"#documentHashCheckBtn"},{ref:"AddDocumentBtn",selector:"patientdocumentspanel #addDocumentBtn"},{ref:"DocumentUploadBtn",selector:"patientdocumentspanel #documentUploadBtn"}],init:function(){var a=this;a.control({patientdocumentspanel:{activate:a.onPatientDocumentPanelActive},"patientdocumentspanel #patientDocumentGrid":{selectionchange:a.onPatientDocumentGridSelectionChange},"patientdocumentspanel [toggleGroup=documentgridgroup]":{toggle:a.onDocumentGroupBtnToggle},"patientdocumentspanel #documentGroupBtn":{toggle:a.onDocumentGroupBtnToggle},"patientdocumentspanel #documentUploadBtn":{click:a.onDocumentUploadBtnClick},"#patientDocumentUploadWindow #uploadBtn":{click:a.onDocumentUploadSaveBtnClick}}),a.nav=this.getController("Navigation"),this.initDocumentDnD()},onPatientDocumentGridSelectionChange:function(a,b){var c=a.view.panel.up("panel").query("#patientDocumentViewerFrame")[0];c.setSrc(b.length>0?"dataProvider/DocumentViewer.php?site="+site+"&token="+app.user.token+"&id="+b[0].data.id:"dataProvider/DocumentViewer.php?site="+site+"&token="+app.user.token)},onPatientDocumentPanelActive:function(a){var b=this,c=a.down("grid"),d=c.getStore();d.load({filters:[{property:"pid",value:app.patient.pid}],callback:function(){var a=b.nav.getExtraParams();if(a&&a.document){var e=d.getById(a.document);e?c.getSelectionModel().select(e):app.msg(_("oops"),_("unable_to_fild_docuent"),!0)}}})},onDocumentGroupBtnToggle:function(a,b){var c=a.up("grid");b?(c.view.features[0].enable(),c.getStore().group(a.action)):c.view.features[0].disable()},onDocumentUploadBtnClick:function(){this.setDocumentUploadWindow("click")},setDocumentUploadWindow:function(a){var b=this.getNewPatientDocumentRecord(),c=this.getUploadWindow(a);return c.down("form").getForm().loadRecord(b),c},getNewPatientDocumentRecord:function(){return Ext.create("App.model.patient.PatientDocuments",{pid:app.patient.pid,eid:app.patient.eid,uid:app.user.id,date:new Date})},getGroupName:function(a){return Ext.String.capitalize(a)},onDocumentHashCheckBtnClick:function(a,b){var c,d,e=a.getStore().getAt(b);DocumentHandler.checkDocHash(e.data,function(a,b){c=b.result.success,d=_(c?"hash_validation_passed":"hash_validation_failed")+"<br>"+b.result.msg,window.dual?dual.msg(_(c?"sweet":"oops"),d,!c):app.msg(_(c?"sweet":"oops"),d,!c)})},getUploadWindow:function(a){return Ext.widget("patientuploaddocumentwindow",{action:a,itemId:"patientDocumentUploadWindow"})},onDocumentUploadSaveBtnClick:function(){var a=this,b=a.getPatientDocumentUploadWindow(),c=b.down("form").getForm(),d=c.getRecord(),e=c.getValues(),f=new FileReader,g=c.findField("document");c.isValid()&&(d.set(e),"click"==b.action?(d.set({name:g.getValue()}),f.onload=function(b){d.set({document:b.target.result}),a.doNewDocumentRecordSave(d)},f.readAsDataURL(g.extractFileInput().files[0])):a.doNewDocumentRecordSave(d))},doNewDocumentRecordSave:function(a){var b=this,c=b.getPatientDocumentGrid().getStore(),d=c.indexOf(a);-1==d&&c.add(a),c.sync({success:function(){app.msg(_("sweet"),_("document_added")),b.getPatientDocumentUploadWindow().close(),b.getPatientDocumentGrid().getSelectionModel().select(a)},failure:function(){c.rejectChanges(),window.dual?dual.msg(_("oops"),_("document_error"),!0):app.msg(_("oops"),_("document_error"),!0)}})},initDocumentDnD:function(){var a=this;a.dnding=!1,document.ondragenter=function(b){return b.preventDefault(),a.dnding||a.setDropMask(),!1},document.ondragover=function(a){return a.preventDefault(),!1},document.ondrop=function(b){return b.preventDefault(),a.unSetDropMask(),!a.dropMask||b.target!=a.dropMask.maskEl.dom&&b.target!=a.dropMask.msgEl.dom||a.dropHandler(b.dataTransfer.files),!1},document.ondragleave=function(b){return"body"==b.target.localName&&a.unSetDropMask(),b.preventDefault(),!1}},setDropMask:function(){var a=this,b=a.getPatientDocumentViewerFrame();a.dnding=!0,b&&b.rendered&&(a.dropMask?a.dropMask.show():(a.dropMask=new Ext.LoadMask(a.getPatientDocumentViewerFrame(),{msg:_("drop_here"),cls:"uploadmask",maskCls:"x-mask uploadmask",shadow:!1}),a.dropMask.show(),a.dropMask.maskEl.dom.addEventListener("dragenter",function(a){return a.preventDefault(),a.target.classList.add("validdrop"),!1}),a.dropMask.maskEl.dom.addEventListener("dragleave",function(a){return a.preventDefault(),a.target.classList.remove("validdrop"),!1})))},unSetDropMask:function(){this.dnding=!1,this.dropMask&&this.dropMask.hide()},dropHandler:function(a){var b=this,c=b.setDocumentUploadWindow("drop"),d=c.down("form").getForm(),e=d.getRecord(),f=new FileReader,g=d.findField("document");g.hide(),g.disable(),f.onload=function(b){e.set({document:b.target.result,name:a[0].name})},f.readAsDataURL(a[0])}}),Ext.define("App.controller.patient.LabOrders",{extend:"Ext.app.Controller",requires:["App.view.patient.windows.UploadDocument"],refs:[{ref:"LabOrdersGrid",selector:"patientlaborderspanel"},{ref:"ElectronicLabOrderBtn",selector:"patientlaborderspanel #electronicLabOrderBtn"},{ref:"NewLabOrderBtn",selector:"patientlaborderspanel #newLabOrderBtn"},{ref:"PrintLabOrderBtn",selector:"patientlaborderspanel #printLabOrderBtn"}],init:function(){var a=this;a.control({patientlaborderspanel:{activate:a.onLabOrdersGridActive,selectionchange:a.onLabOrdersGridSelectionChange,beforerender:a.onLabOrdersGridBeforeRender},"#rxLabOrderLabsLiveSearch":{select:a.onLoincSearchSelect},"patientlaborderspanel #electronicLabOrderBtn":{click:a.onElectronicLabOrderBtnClick},"patientlaborderspanel #newLabOrderBtn":{click:a.onNewLabOrderBtnClick},"patientlaborderspanel #printLabOrderBtn":{click:a.onPrintLabOrderBtnClick}})},onLabOrdersGridBeforeRender:function(a){app.on("patientunset",function(){a.editingPlugin.cancelEdit(),a.getStore().removeAll()})},onLabOrdersGridSelectionChange:function(a,b){this.getPrintLabOrderBtn().setDisabled(0==b.length)},onLoincSearchSelect:function(a,b){var c=a.up("form").getForm();c.getRecord().set({code:b[0].data.loinc_number}),c.findField("code")&&c.findField("code").setValue(b[0].data.loinc_number),c.findField("note")&&c.findField("note").focus(!1,200)},onElectronicLabOrderBtnClick:function(){say("TODO!")},onNewLabOrderBtnClick:function(){var a=this,b=a.getLabOrdersGrid(),c=b.getStore();b.editingPlugin.cancelEdit(),c.insert(0,{pid:app.patient.pid,eid:app.patient.eid,uid:app.user.id,date_ordered:new Date,order_type:"lab",status:"Pending",priority:"Normal"}),b.editingPlugin.startEdit(0,0)},onPrintLabOrderBtnClick:function(){var a,b,c=this,d=c.getLabOrdersGrid(),e=d.getSelectionModel().getSelection(),f={};for(f.pid=app.patient.pid,f.eid=app.patient.eid,f.orderItems=[],f.docType="Lab",f.templateId=4,f.orderItems.push(["Description","Notes"]),b=0;b<e.length;b++)a=e[b].data,f.orderItems.push([a.description+" ["+a.code_type+":"+a.code+"]",a.note]);DocumentHandler.createTempDocument(f,function(a,b){window.dual?dual.onDocumentView(b.result.id,"Lab"):app.onDocumentView(b.result.id,"Lab")})},onLabOrdersGridActive:function(a){var b=a.getStore();a.editingPlugin.editing||(b.clearFilter(!0),b.filter([{property:"pid",value:app.patient.pid},{property:"order_type",value:"lab"}]))},labOrdersGridStatusColumnRenderer:function(a){var b="black";return"Canceled"==a?b="red":"Pending"==a?b="orange":"Routed"==a?b="blue":"Complete"==a&&(b="green"),'<div style="color:'+b+'">'+a+"</div>"}}),Ext.define("App.controller.patient.Results",{extend:"Ext.app.Controller",requires:["App.view.administration.HL7MessageViewer"],refs:[{ref:"resultsPanel",selector:"patientresultspanel"},{ref:"resultForm",selector:"patientresultspanel > form"},{ref:"observationsGrid",selector:"patientresultspanel > form > grid[action=observations]"},{ref:"ordersGrid",selector:"patientresultspanel > grid[action=orders]"},{ref:"uploadField",selector:"filefield[action=orderresultuploadfield]"},{ref:"messageField",selector:"hl7messageviewer > textareafield[action=message]"},{ref:"acknowledgeField",selector:"hl7messageviewer > textareafield[action=acknowledge]"}],init:function(){var a=this;a.control({patientresultspanel:{activate:a.onResultPanelActive},"patientresultspanel > grid[action=orders]":{selectionchange:a.onOrderSelectionChange,edit:a.onOrderSelectionEdit},"filefield[action=orderresultuploadfield]":{change:a.onOrderDocumentChange},"button[action=orderResultResetBtn]":{click:a.onResetOrderResultClicked},"button[action=orderResultSaveBtn]":{click:a.onSaveOrderResultClicked},"button[action=orderDocumentViewBtn]":{click:a.onOrderDocumentViewBtnClicked},"#OrderResultNewOrderBtn":{click:a.onOrderResultNewOrderBtnClick}})},onOrderSelectionEdit:function(a,b){say(b.record),this.getOrderResult(b.record)},onOrderResultNewOrderBtnClick:function(a){var b,c=a.up("grid"),d=c.getStore();c.editingPlugin.cancelEdit(),b=d.add({pid:app.patient.pid,uid:app.user.id,order_type:"lab",status:"Pending"}),c.editingPlugin.startEdit(b[0],0)},onResultPanelActive:function(){this.setResultPanel()},setResultPanel:function(){var a=this,b=a.getOrdersGrid().getStore();app.patient?(b.clearFilter(!0),b.filter([{property:"pid",value:app.patient.pid}])):(b.clearFilter(!0),b.load())},onOrderSelectionChange:function(a,b){b.length>0?this.getOrderResult(b[0]):this.resetOrderResultForm()},getOrderResult:function(a){var b,c=this,d=c.getResultForm().getForm(),e=a.results(),f=c.getObservationsGrid();f.editingPlugin.cancelEdit(),e.load({callback:function(c){if(c.length>0)d.loadRecord(c[0]),b=c[0].observations(),f.reconfigure(b),b.load();else{var g=e.add({});d.loadRecord(g[0]),b=g[0].observations(),f.reconfigure(b),b.load({params:{loinc:a.data.code}})}}})},onResetOrderResultClicked:function(){this.resetOrderResultForm()},resetOrderResultForm:function(){var a=this,b=a.getResultForm().getForm(),c=a.getObservationsGrid(),d=Ext.create("App.store.patient.PatientsOrderObservations");b.reset(),c.editingPlugin.cancelEdit(),c.reconfigure(d)},onSaveOrderResultClicked:function(){var a=this,b=a.getResultForm().getForm(),c=b.getValues(),d=a.getUploadField().getEl().down("input[type=file]").dom.files,e=new FileReader;return b.isValid()?void(d.length>0?(e.onload=function(){return function(d){say(c);var e=a.getOrdersGrid().getSelectionModel(),f=e.getSelection(),g={pid:f[0].data.pid,eid:f[0].data.eid,uid:app.user.id,docType:"lab",title:"Lab #"+c.lab_order_id+" Result",document:d.target.result};File.savePatientBase64Document(g,function(d,e){e.result.success?(c.documentId="doc|"+e.result.id,a.saveOrderResult(b,c)):app.msg(_("oops"),e.result.error)})}}(d[0]),e.readAsDataURL(d[0])):a.saveOrderResult(b,c)):void app.msg(_("oops"),_("required_fields_missing"),!0)},saveOrderResult:function(a,b){var c=this,d=a.getRecord(),e=c.getOrdersGrid().getSelectionModel(),f=e.getSelection(),g=d.observations(),h=g.data.items;d.set(b),d.save({success:function(a){for(var b=0;b<h.length;b++)h[b].set({result_id:a.data.id});g.sync(),f[0].set({status:"Received"}),f[0].save(),app.msg(_("sweet"),_("record_saved"))}})},onOrderDocumentViewBtnClicked:function(){var a,b=this,c=b.getResultForm().getForm(),d=c.getRecord(),e=d.data.documentId.split("|"),f=null,g=null;e[0]&&(f=e[0]),e[1]&&(g=e[1]),f&&g?"hl7"==f?(a=Ext.widget("hl7messageviewer").show(),a.body.mask(_("loading...")),HL7Messages.getMessageById(g,function(c,d){b.getMessageField().setValue(d.result.message),b.getAcknowledgeField().setValue(d.result.response),a.body.unmask()})):"doc"==f&&app.onDocumentView(g):app.msg(_("oops"),_("no_document_found"),!0)},onLaboratoryPreviewRender:function(a){var b=this;a.dockedItems.items[0].add({xtype:"button",text:_("upload"),disabled:!0,action:"uploadBtn",scope:b,handler:b.onLabUploadWind})},onLabUploadWind:function(){var a=this,b=a.query('[action="labPreviewPanel"]')[0];a.uploadWin.show(),a.uploadWin.alignTo(b.el.dom,"tr-tr",[-5,35])},onLabUpload:function(a){var b=this,c=b.uploadWin.down("form"),d=c.getForm(),e=a.up("window");d.isValid()&&(c.el.mask(_("uploading_laboratory")+"..."),d.submit({params:{pid:app.patient.pid,docType:"laboratory",eid:app.patient.eid},success:function(a,d){c.el.unmask(),e.close(),b.getLabDocument(d.result.doc.url),b.addNewLabResults(d.result.doc.id)},failure:function(){c.el.unmask(),e.close()}}))},onLabResultClick:function(a,b){var c=this,d=c.query('[action="patientLabs"]')[0].down("form").getForm();c.currDocUrl!=b.data.document_url&&(d.reset(),b.data.data.id=b.data.id,d.setValues(b.data.data),c.getLabDocument(b.data.document_url),c.currDocUrl=b.data.document_url)},onLabResultsSign:function(){var a=this,b=a.query('[action="patientLabs"]')[0].down("form").getForm(),c=a.query('[action="lalboratoryresultsdataview"]')[0],d=c.store,e=b.getValues(),f=c.getSelectionModel().getLastSelected();b.isValid()&&(e.id?a.passwordVerificationWin(function(b,c){"ok"==b&&User.verifyUserPass(c,function(b,c){c.result?Medical.signPatientLabsResultById(f.data.id,function(){d.load({params:{parent_id:a.currLabPanelId}})}):Ext.Msg.show({title:"Oops!",msg:_("incorrect_password"),buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR,fn:function(a){}})})}):Ext.Msg.show({title:"Oops!",msg:_("nothing_to_sign"),buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR,fn:function(a){}}))},onLabResultsSave:function(a){var b=this,c=a.up("form").getForm(),d=b.query('[action="lalboratoryresultsdataview"]')[0],e=d.store,f=c.getValues(),g=d.getSelectionModel().getLastSelected();c.isValid()&&Medical.updatePatientLabsResult(f,function(){e.load({params:{parent_id:g.data.parent_id}}),c.reset()})},addNewLabResults:function(a){var b=this,c=b.query('[action="lalboratoryresultsdataview"]')[0],d=c.store,e={parent_id:b.currLabPanelId,document_id:a};Medical.addPatientLabsResult(e,function(){d.load({params:{parent_id:b.currLabPanelId}})})},getLabDocument:function(a){var b=this.query('[action="labPreviewPanel"]')[0];b.remove(this.doc),b.add(this.doc=Ext.create("App.ux.ManagedIframe",{src:a}))},onOrderDocumentChange:function(){}}),Ext.define("App.controller.patient.encounter.Encounter",{extend:"Ext.app.Controller",requires:["App.ux.combo.ActiveSpecialties"],refs:[{ref:"EncounterDetailWindow",selector:"#EncounterDetailWindow"},{ref:"EncounterProviderCmb",selector:"#EncounterProviderCmb"},{ref:"EncounterSpecialtyCmb",selector:"#EncounterSpecialtyCmb"},{ref:"EncounterDetailForm",selector:"#EncounterDetailForm"}],init:function(){var a=this;this.control({"#EncounterDetailWindow":{show:a.onEncounterDetailWindowShow},"#EncounterProviderCmb":{beforerender:a.onEncounterProviderCmbBeforeRender,select:a.onEncounterProviderCmbSelect}})},onEncounterProviderCmbBeforeRender:function(a){var b=a.up("container");b.setFieldLabel(""),b.insert(b.items.indexOf(a)+1,{xtype:"activespecialtiescombo",itemId:"EncounterSpecialtyCmb",fieldLabel:_("specialty"),labelWidth:a.labelWidth,width:a.width,name:"specialty_id",allowBlank:!1})},onEncounterProviderCmbSelect:function(a,b){var c=this;User.getUser(b[0].data.option_value,function(a){c.setSpecialtyCombo(a)})},onEncounterDetailWindowShow:function(){var a=this,b=a.getEncounterDetailForm().getForm().getRecord();0==b.data.provider_uid?a.getEncounterSpecialtyCmb()&&a.getEncounterSpecialtyCmb().setVisible(!1):User.getUser(b.data.provider_uid,function(b){a.setSpecialtyCombo(b)})},setSpecialtyCombo:function(a){var b=this;b.getEncounterSpecialtyCmb().setVisible(b.reloadSpecialityCmbBySpecialty(a.specialty))},reloadSpecialityCmbBySpecialty:function(a){var b=this,c=!1;if(Ext.isNumeric(a))b.getEncounterSpecialtyCmb().setValue(a);else if(Ext.isArray(a)&&1==a.length)b.getEncounterSpecialtyCmb().setValue(a[0]);else if(Ext.isArray(a)){c=!0;for(var d=this.getEncounterSpecialtyCmb().getStore(),e=[],f=0;f<a.length;f++)Ext.Array.push(e,a[f]);d.clearFilter(!0),d.filter([{property:"active",value:!0},{property:"id",value:new RegExp(e.join("|"))}])}return c}}),Ext.define("App.controller.patient.encounter.Snippets",{extend:"Ext.app.Controller",requires:["App.view.patient.encounter.Snippets"],refs:[{ref:"SnippetsTreePanel",selector:"#SnippetsTreePanel"},{ref:"SnippetWindow",selector:"#SnippetWindow"},{ref:"SnippetForm",selector:"#SnippetForm"},{ref:"SnippetFormTextField",selector:"#SnippetFormTextField"},{ref:"SnippetCancelBtn",selector:"#SnippetCancelBtn"},{ref:"SnippetSaveBtn",selector:"#SnippetSaveBtn"},{ref:"SoapTemplateSpecialtiesCombo",selector:"#SoapTemplateSpecialtiesCombo"}],init:function(){var a=this;this.control({"#SnippetSaveBtn":{click:a.onSnippetSaveBtnClick},"#SnippetCancelBtn":{click:a.onSnippetCancelBtnClick},"#SnippetCategoryAddBtn":{click:a.onSnippetCategoryAddBtnClick}})},onSnippetAddBtnClick:function(a,b,c,d,e,f){var g=this,h=g.getSnippetEditWindow(),i=g.getSnippetForm(),j=Ext.create("App.model.patient.encounter.snippetTree",{parentId:f.data.id,specialty_id:g.getSoapTemplateSpecialtiesCombo.getValue(),leaf:!0});h.parentRecord=f,i.getForm().loadRecord(j)},onSnippetSaveBtnClick:function(){var a=this,b=a.getSnippetWindow(),c=a.getSnippetsTreePanel().getStore(),d=a.getSnippetForm().getForm(),e=d.getValues(),f=d.getRecord(),g=""==f.data.id;f.set(e),d.isValid()&&(g&&b.parentRecord.appendChild(f),c.sync({success:function(){app.msg(_("sweet"),_("record_saved"))},failure:function(){app.msg(_("oops"),_("record_error"),!0)}}),a.getSnippetWindow().close())},onSnippetCancelBtnClick:function(){var a=this.getSnippetForm().getForm().getRecord();""==a.data.id&&a.destroy(),this.getSnippetWindow().close()},getSnippetEditWindow:function(){var a=this;return a.getSnippetWindow()?a.getSnippetWindow().show():Ext.widget("snippetswindow").show()},onSnippetCategoryAddBtnClick:function(){var a,b,c=this,d=c.getSnippetEditWindow(),e=c.getSnippetsTreePanel(),f=e.getStore(),g=e.getSelectionModel().getSelection();c.getSnippetFormTextField().hide(),c.getSnippetFormTextField().disable(),b=0==g.length?f.getRootNode():g[0].data.leaf?g[0].parentNode:g[0],a=Ext.create("App.model.patient.encounter.snippetTree",{parentId:b.data.id,category:e.action,specialty_id:c.getSoapTemplateSpecialtiesCombo.getValue(),leaf:!1}),d.parentRecord=b,c.getSnippetForm().getForm().loadRecord(a)},onSnippetBtnEdit:function(a,b,c,d,e,f){this.getSnippetEditWindow(),this.getSnippetForm().getForm().loadRecord(f)}}),Ext.define("App.view.patient.Referrals",{extend:"Ext.grid.Panel",requires:["App.ux.LiveCPTSearch","App.ux.LiveICDXSearch","App.ux.combo.ActiveProviders","Ext.selection.CheckboxModel","App.ux.grid.RowFormEditing","App.ux.combo.ReferringProviders"],xtype:"patientreferralspanel",title:_("referrals"),action:"referralsGrid",itemId:"patientReferralsGrid",columnLines:!0,allowDeselect:!0,store:Ext.create("App.store.patient.Referrals",{remoteFilter:!0}),plugins:[{ptype:"rowformediting",clicksToEdit:2,items:[{xtype:"container",defaults:{layout:"anchor"},layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",flex:1,defaults:{labelAlign:"right",margin:"0 0 5 0"},items:[{xtype:"datefield",fieldLabel:_("referral_date"),name:"referral_date",format:"Y-m-d",validateBlank:!0},{xtype:"livecptsearch",fieldLabel:_("requested_service"),name:"service_text",displayField:"code_text",valueField:"code_text",hideLabel:!1,itemId:"referralServiceSearch",anchor:"100%"},{xtype:"textareafield",fieldLabel:_("reason"),name:"referal_reason",anchor:"100%",height:60},{xtype:"liveicdxsearch",margin:"0 0 10",fieldLabel:_("diagnosis"),name:"diagnosis_text",hideLabel:!1,displayField:"code_text",valueField:"code_text",itemId:"referralDiagnosisSearch",anchor:"100%"}]},{xtype:"container",flex:1,defaults:{labelAlign:"right",margin:"0 0 5 0"},items:[{xtype:"activeproviderscombo",fieldLabel:_("refer_by"),name:"refer_by_text",width:300,displayField:"option_name",valueField:"option_name",itemId:"ReferralProviderCombo"},{xtype:"container",layout:"hbox",items:[{xtype:"activeproviderscombo",fieldLabel:_("refer_to"),name:"refer_to_text",labelAlign:"right",margin:"0 5 5 0",width:300,displayField:"fullname",valueField:"fullname",itemId:"ReferralLocalProviderCombo"},{xtype:"referringproviderscombo",fieldLabel:_("refer_to"),name:"refer_to_text",labelAlign:"right",margin:"0 5 5 0",width:300,disabled:!0,hidden:!0,displayField:"fullname",valueField:"fullname",itemId:"ReferralExternalProviderCombo"},{xtype:"checkboxfield",boxLabel:_("external_referral"),itemId:"ReferralExternalReferralCheckbox",name:"is_external_referral"}]},{xtype:"gaiaehr.combo",fieldLabel:_("risk_level"),name:"risk_level",list:17,width:300},{xtype:"checkboxfield",fieldLabel:_("send_record"),name:"send_record",width:300}]}]}]}],selModel:Ext.create("Ext.selection.CheckboxModel"),columns:[{xtype:"datecolumn",text:_("date"),dataIndex:"referral_date",format:"Y-m-d",menuDisabled:!0,resizable:!1},{text:_("refer_by"),dataIndex:"refer_by_text",menuDisabled:!0,resizable:!1,width:200},{text:_("refer_to"),dataIndex:"refer_to_text",menuDisabled:!0,resizable:!1,width:200},{text:_("request"),dataIndex:"referal_reason",menuDisabled:!0,resizable:!1,flex:1}],tbar:["->",{text:_("referral"),iconCls:"icoAdd",itemId:"encounterRecordAdd",action:"addReferralBtn"},"-",{text:_("print"),iconCls:"icoPrint",disabled:!0,itemId:"printReferralBtn"}]}),Ext.define("App.view.patient.SocialPanel",{extend:"Ext.panel.Panel",requires:["App.view.patient.SmokingStatus","App.view.patient.SocialHistory"],xtype:"patientsocialpanel",title:_("social"),border:!1,bodyBorder:!1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"patientsmokingstatusgrid",margin:"0 0 5 0",flex:1},{xtype:"patientsocialhistorypanel",flex:2}]}),Ext.define("App.view.patient.ActiveProblems",{extend:"Ext.grid.Panel",requires:["App.ux.grid.RowFormEditing","App.ux.LiveSnomedProblemSearch","App.ux.combo.CodesTypes","App.ux.combo.Occurrence","App.ux.combo.Outcome2"],xtype:"patientactiveproblemspanel",title:_("active_problems"),columnLines:!0,store:Ext.create("App.store.patient.PatientActiveProblems",{remoteFilter:!0,autoSync:!1}),columns:[{xtype:"actioncolumn",width:25,items:[{icon:"resources/images/icons/blueInfo.png",tooltip:"Get Info",handler:function(a,b,c,d,e,f){App.app.getController("InfoButton").doGetInfo(f.data.code,f.data.code_type,f.data.code_text)
}}]},{header:_("problem"),flex:1,dataIndex:"code_text"},{header:_("occurrence"),width:200,dataIndex:"occurrence"},{xtype:"datecolumn",header:_("begin_date"),width:100,format:"Y-m-d",dataIndex:"begin_date"},{xtype:"datecolumn",header:_("end_date"),width:100,format:"Y-m-d",dataIndex:"end_date"},{header:_("status"),width:80,dataIndex:"status"}],plugins:Ext.create("App.ux.grid.RowFormEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:2,items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",padding:10,layout:"vbox",items:[{xtype:"snomedliveproblemsearch",fieldLabel:_("problem"),name:"code_text",hideLabel:!1,itemId:"activeProblemLiveSearch",enableKeyEvents:!0,displayField:"FullySpecifiedName",valueField:"FullySpecifiedName",width:720,labelWidth:70,margin:"0 10 5 0"},{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 0 0"},items:[{fieldLabel:_("occurrence"),width:250,labelWidth:70,xtype:"mitos.occurrencecombo",name:"occurrence"},{xtype:"textfield",width:460,labelWidth:70,fieldLabel:_("referred_by"),name:"referred_by"}]},{fieldLabel:_("note"),xtype:"textfield",width:720,labelWidth:70,name:"note"}]},{xtype:"container",padding:10,layout:"vbox",defaults:{labelWidth:70,margin:"0 0 5 0",width:200},items:[{fieldLabel:_("status"),xtype:"gaiaehr.combo",list:112,itemId:"ActiveProblemStatusCombo",name:"status",allowBlank:!1},{fieldLabel:_("begin_date"),xtype:"datefield",format:"Y-m-d",name:"begin_date"},{fieldLabel:_("end_date"),xtype:"datefield",format:"Y-m-d",name:"end_date"}]}]}]}),tbar:["->",{text:_("add_new"),action:"encounterRecordAdd",itemId:"addActiveProblemBtn",iconCls:"icoAdd"}],bbar:["->",{text:_("review"),itemId:"review_active_problems",action:"encounterRecordAdd"}]}),Ext.define("App.view.patient.CognitiveAndFunctionalStatus",{extend:"Ext.grid.Panel",requires:["App.ux.grid.RowFormEditing","App.ux.LiveSnomedSearch","App.store.patient.CognitiveAndFunctionalStatus"],xtype:"patientcognitiveandfunctionalstatuspanel",title:_("cognitive_and_functional_status"),columnLines:!0,store:Ext.create("App.store.patient.CognitiveAndFunctionalStatus",{remoteFilter:!0}),plugins:[{ptype:"rowediting"}],columns:[{xtype:"actioncolumn",width:20,items:[{icon:"resources/images/icons/cross.png",tooltip:_("remove")}]},{header:_("category"),width:150,dataIndex:"category",editor:{xtype:"gaiaehr.combo",list:117,itemId:"functionalStatusCategoryCombo",allowBlank:!1}},{header:_("description"),flex:1,dataIndex:"code_text",editor:{xtype:"snomedlivesearch",itemId:"functionalStatusCodeCombo",displayField:"FullySpecifiedName",valueField:"FullySpecifiedName",allowBlank:!1}},{header:_("note"),flex:2,dataIndex:"note",editor:{xtype:"textfield"}},{xtype:"datecolumn",header:_("begin_date"),dataIndex:"begin_date",format:"Y-m-d",editor:{xtype:"datefield",format:"Y-m-d"}},{xtype:"datecolumn",header:_("end_date"),dataIndex:"end_date",format:"Y-m-d",editor:{xtype:"datefield",format:"Y-m-d"}},{header:_("status"),dataIndex:"status",editor:{xtype:"gaiaehr.combo",list:118,itemId:"functionalStatusSatausCombo",allowBlank:!1}}],tbar:["->","-",{text:_("add_new"),iconCls:"icoAdd",action:"encounterRecordAdd",itemId:"newFunctionalStatusBtn"}]}),Ext.define("App.ux.combo.Specialties",{extend:"App.ux.combo.ComboResettable",alias:"widget.specialtiescombo",displayField:"text_details",valueField:"id",editable:!1,emptyText:_("select"),queryMode:"local",store:Ext.create("App.store.administration.Specialties",{pageSize:500,autoLoad:!0})}),Ext.define("App.view.patient.encounter.CarePlanGoalsNewWindow",{extend:"Ext.window.Window",requires:["App.ux.LiveSnomedProcedureSearch"],xtype:"careplangoalsnewwindow",title:_("new_goal"),closable:!1,constrain:!0,closeAction:"hide",layout:"fit",items:[{xtype:"form",itemId:"CarePlanGoalsNewForm",layout:{type:"vbox",align:"stretch"},bodyPadding:10,items:[{xtype:"fieldcontainer",layout:"hbox",itemId:"CarePlanGoalPlanDateContainer",fieldLabel:_("plan_date"),labelAlign:"top",defaults:{margin:"0 5 0 0"},items:[{xtype:"datefield",itemId:"CarePlanGoalPlanDateField",allowBlank:!1,format:"Y-m-d",name:"plan_date"},{xtype:"button",text:"+1 Day",action:"1D"},{xtype:"button",text:"+1 Week",action:"1W"},{xtype:"button",text:"+2 Week",action:"2W"},{xtype:"button",text:"+1 Month",action:"1M"},{xtype:"button",text:"+3 Month",action:"3M"},{xtype:"button",text:"+6 Month",action:"6M"},{xtype:"button",text:"+1 Year",action:"1Y"}]},{xtype:"snomedliveproceduresearch",itemId:"CarePlanGoalSearchField",fieldLabel:_("goal"),displayField:"FullySpecifiedName",valueField:"FullySpecifiedName",labelAlign:"top",allowBlank:!1,hideLabel:!1,name:"goal"},{xtype:"textareafield",fieldLabel:_("instructions"),labelAlign:"top",name:"instructions",flex:1}]}],buttons:[{text:_("cancel"),itemId:"CarePlanGoalsNewFormCancelBtn"},{text:_("save"),itemId:"CarePlanGoalsNewFormSaveBtn"}]}),Ext.define("App.view.patient.encounter.SOAP",{extend:"Ext.panel.Panel",requires:["App.ux.combo.Specialties","App.ux.grid.RowFormEditing","App.view.patient.encounter.CarePlanGoals","App.view.patient.encounter.CarePlanGoalsNewWindow"],action:"patient.encounter.soap",itemId:"soapPanel",title:_("soap"),layout:"border",frame:!0,pid:null,eid:null,initComponent:function(){var me=this;me.snippetStore=Ext.create("App.store.patient.encounter.snippetTree",{autoLoad:!1}),me.procedureStore=Ext.create("App.store.patient.encounter.Procedures");var snippetCtrl=App.app.getController("patient.encounter.Snippets");me.snippets=Ext.create("Ext.tree.Panel",{title:_("snippets"),itemId:"SnippetsTreePanel",region:"west",width:300,split:!0,animate:!1,hideHeaders:!0,useArrows:!0,rootVisible:!1,singleExpand:!0,collapsed:!eval(g("enable_encounter_soap_templates")),collapsible:!0,collapseMode:"mini",hideCollapseTool:!0,store:me.snippetStore,tools:[{xtype:"button",text:_("category"),iconCls:"icoAdd",itemId:"SnippetCategoryAddBtn"}],columns:[{xtype:"treecolumn",text:"Template",flex:1,dataIndex:"title",renderer:function(a,b,c){var d=c.data.text?' data-qtip="'+c.data.text+'" ':"";return"<span "+d+">"+(""!=a?a:c.data.text)+"</span>"}},{text:_("add"),width:25,menuDisabled:!0,xtype:"actioncolumn",tooltip:_("add_snippet"),align:"center",icon:"resources/images/icons/add.gif",scope:me,handler:function(a,b,c,d,e,f){snippetCtrl.onSnippetAddBtnClick(a,b,c,d,e,f)},getClass:function(a,b,c){return c.data.leaf?"x-hide-display":"x-grid-center-icon"}},{text:_("edit"),width:25,menuDisabled:!0,xtype:"actioncolumn",tooltip:"Edit task",align:"center",icon:"resources/images/icons/edit.png",handler:function(a,b,c,d,e,f){snippetCtrl.onSnippetBtnEdit(a,b,c,d,e,f)}}],bbar:[{xtype:"specialtiescombo",itemId:"SoapTemplateSpecialtiesCombo",flex:1}],viewConfig:{plugins:{ptype:"treeviewdragdrop",expandDelay:500,dragText:_("drag_and_drop_reorganize")},listeners:{scope:me,drop:me.onSnippetDrop}},listeners:{scope:me,itemclick:me.onSnippetClick,itemdblclick:me.onSnippetDblClick}}),me.form=Ext.create("Ext.form.Panel",{autoScroll:!0,action:"encounter",bodyStyle:"background-color:white",region:"center",itemId:"soapForm",fieldDefaults:{msgTarget:"side"},plugins:{ptype:"advanceform",autoSync:globals.autosave,syncAcl:acl.edit_encounters},items:[me.pWin=Ext.widget("window",{title:_("procedure"),maximized:!0,closable:!1,constrain:!0,closeAction:"hide",itemId:"soapProcedureWindow",layout:"fit",items:[me.pForm=Ext.widget("form",{bodyPadding:10,layout:{type:"vbox",align:"stretch"},items:[{xtype:"livecptsearch",name:"code",displayField:"code",valueField:"code",listeners:{scope:me,select:me.onProcedureSelect}},{xtype:"textfield",name:"code_text"},{xtype:"textareafield",name:"observation",flex:1}]})],buttons:[{text:_("cancel"),scope:me,handler:me.onProcedureCancel},{text:_("save"),scope:me,itemId:"encounterRecordAdd",handler:me.onProcedureSave}]}),{xtype:"fieldset",title:_("subjective"),margin:5,items:[me.sField=Ext.widget("textarea",{name:"subjective",anchor:"100%",enableKeyEvents:!0,margin:"5 0 10 0"})]},{xtype:"fieldset",title:_("objective"),margin:5,items:[me.oField=Ext.widget("textarea",{name:"objective",anchor:"100%"}),me.pGrid=Ext.widget("grid",{frame:!0,name:"procedures",emptyText:_("no_procedures"),margin:"5 0 10 0",store:me.procedureStore,columns:[{text:_("code"),dataIndex:"code"},{text:_("description"),dataIndex:"code_text",flex:1}],listeners:{scope:me,itemdblclick:me.procedureEdit},dockedItems:[{xtype:"toolbar",items:[{xtype:"tbtext",text:_("procedures")},"->",{text:_("new_procedure"),scope:me,handler:me.onProcedureAdd,iconCls:"icoAdd"}]}]})]},{xtype:"fieldset",title:_("assessment"),margin:5,items:[me.aField=Ext.widget("textarea",{name:"assessment",anchor:"100%"}),me.dxField=Ext.widget("icdsfieldset",{name:"dxCodes",margin:"5 0 10 0",itemId:"SoapDxCodesField"})]},{xtype:"fieldset",title:_("plan"),margin:5,items:[me.pField=Ext.widget("textarea",{name:"plan",anchor:"100%"}),{xtype:"careplangoalsgrid",margin:"0 0 10 0"}]}],buttons:[{text:_("save"),iconCls:"save",action:"soapSave",scope:me,itemId:"encounterRecordAdd",handler:me.onSoapSave}],listeners:{scope:me,recordloaded:me.formRecordLoaded}}),me.phWindow=Ext.widget("window",{title:_("complete_snippet"),closeAction:"hide",bodyPadding:0,bodyBorder:!1,border:!1,items:[{xtype:"textarea",border:!1,width:500,height:150,margin:0,grow:!0,enableKeyEvents:!0,listeners:{scope:me,specialkey:me.onPhTextAreaKey}}],buttons:[{xtype:"tbtext",text:_("shift_enter_submit")},"->",{text:_("cancel"),handler:me.onPhWindowCancel},{text:_("submit"),scope:me,handler:me.onPhWindowSubmit}]}),Ext.apply(me,{items:[me.snippets,me.form]}),me.callParent(arguments)},onProcedureSelect:function(a,b){var c=this,d=c.pForm.getForm(),e=d.getRecord();e.set({code:b[0].data.code,code_type:b[0].data.code_type,code_text:b[0].data.code_text}),d.findField("code_text").setValue(b[0].data.code_text)},onProcedureAdd:function(){var a,b=this;a=Ext.create("App.model.patient.encounter.Procedures",{pid:b.pid,eid:b.eid,create_uid:app.user.id,update_uid:app.user.id,create_date:new Date,update_date:new Date}),b.procedureStore.add(a),b.procedureEdit(null,a)},onProcedureCancel:function(){this.procedureStore.rejectChanges(),this.pWin.close(),this.query("button[action=soapSave]")[0].enable(),this.pWin.setTitle(_("procedure"))},onProcedureSave:function(){var a=this,b=a.pForm.getForm(),c=b.getRecord(),d=b.getValues();c.set(d),this.procedureStore.sync(),this.pWin.close(),this.query("button[action=soapSave]")[0].enable(),this.pWin.setTitle(_("procedure"))},onShow:function(){var a=this;a.callParent(),a.sField.focus(),a.eid!=app.patient.eid&&(a.pid=app.patient.pid,a.eid=app.patient.eid,a.procedureStore.load({filters:[{property:"eid",value:a.eid}]}))},procedureEdit:function(a,b){this.pWin.setTitle(""!=b.data.code_text||""!=b.data.code?b.data.code_text+" ["+b.data.code+"]":_("new_procedure")),this.pForm.getForm().loadRecord(b),this.pWin.show(this.pGrid.el),this.query("button[action=soapSave]")[0].disable()},onSoapSave:function(a){this.enc.onEncounterUpdate(a)},formRecordLoaded:function(a,b){var c=b.dxCodes();c.on("write",function(){b.store.fireEvent("write")}),this.dxField.loadIcds(b.dxCodes())},onSnippetClick:function(a,b){b.data.leaf||b.expand()},onSnippetDblClick:function(a,b){if(b.data.leaf){var c=this,d=c.form.getForm(),e=a.panel.action.split("-"),f=d.findField(e[0]),g=b.data.text,h=f.getValue(),i=g.indexOf("??"),j=c.phWindow.down("textarea");-1==i?f.setValue(h+c.closeSentence(g)):(c.phWindow.show(),j.setValue(g),Ext.Function.defer(function(){j.selectText(i,i+2)},300))}else b.expand()},onPhWindowSubmit:function(){var a=this,b=a.phWindow.down("textarea"),c=a.form.getForm(),d=a.snippets.action.split("-"),e=c.findField(d[0]),f=e.getValue(),g=b.getValue();e.setValue(a.closeSentence(f)+" "+a.closeSentence(g)),a.phWindow.close(),b.reset()},onPhWindowCancel:function(a){a.up("window").close()},onPhTextAreaKey:function(a,b){b.getKey()==b.ENTER&&this.onPhWindowSubmit()},closeSentence:function(a){var b=Ext.String.trim(a),c=b.charAt(b.length-1);return""==b?b:"."==c||"!"==c||"?"==c?b:b+". "},onSnippetDrop:function(a,b,c){for(var d=this,e=10,f=0;f<c.parentNode.childNodes.length;f++)c.parentNode.childNodes[f].set({pos:e}),e+=10;d.snippetStore.sync()}}),Ext.define("App.ux.LiveAllergiesSearch",{extend:"Ext.form.ComboBox",alias:"widget.allergieslivesearch",requires:["App.model.administration.Allergies"],hideLabel:!0,displayField:"allergy",valueField:"allergy",initComponent:function(){var a=this;a.store=Ext.create("Ext.data.Store",{model:"App.model.administration.Allergies",pageSize:25,autoLoad:!1}),Ext.apply(this,{store:a.store,emptyText:_("search")+"...",typeAhead:!1,hideTrigger:!0,minChars:3,listConfig:{loadingText:_("searching")+"...",getInnerTpl:function(){return'<div class="search-item"><h3>{allergy}<span style="font-weight: normal"> ({allergy_code}) </span></h3></div>'}},pageSize:25}),a.callParent()}}),Ext.define("App.view.patient.Allergies",{extend:"Ext.grid.Panel",requires:["App.store.patient.Allergies","App.ux.grid.RowFormEditing","App.ux.LiveRXNORMAllergySearch","App.ux.LiveAllergiesSearch","App.ux.combo.Allergies","App.ux.combo.AllergiesAbdominal","App.ux.combo.AllergiesTypes","App.ux.combo.AllergiesLocation","App.ux.combo.AllergiesSeverity"],xtype:"patientallergiespanel",title:_("allergies"),columnLines:!0,store:Ext.create("App.store.patient.Allergies",{remoteFilter:!0,autoSync:!1}),columns:[{header:_("type"),width:100,dataIndex:"allergy_type"},{header:_("name"),flex:1,dataIndex:"allergy",renderer:function(a,b,c){return a+(""==c.data.allergy_code?"":" ("+c.data.allergy_code+")")}},{header:_("location"),width:220,dataIndex:"location"},{header:_("reaction"),width:220,dataIndex:"reaction"},{header:_("severity"),width:220,dataIndex:"severity"},{text:_("status"),width:55,dataIndex:"status"}],plugins:Ext.create("App.ux.grid.RowFormEditing",{autoCancel:!1,errorSummary:!1,clicksToEdit:1,items:[{title:_("general"),xtype:"container",padding:"0 10",layout:"vbox",items:[{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 0 0"},items:[{xtype:"gaiaehr.combo",fieldLabel:_("type"),itemId:"allergyTypeCombo",name:"allergy_type",allowBlank:!1,labelWidth:70,width:700,list:85,enableKeyEvents:!0},{xtype:"gaiaehr.combo",fieldLabel:_("status"),name:"status",list:113,itemId:"allergyStatusCombo",labelWidth:80,allowBlank:!1}]},{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 0 0"},items:[{xtype:"allergieslivesearch",fieldLabel:_("allergy"),itemId:"allergySearchCombo",name:"allergy",hideLabel:!1,enableKeyEvents:!0,width:700,labelWidth:70,allowBlank:!1},{xtype:"rxnormallergylivetsearch",fieldLabel:_("allergy"),itemId:"allergyMedicationCombo",name:"allergy",hideLabel:!1,hidden:!0,disabled:!0,enableKeyEvents:!0,width:700,labelWidth:70,allowBlank:!1},{fieldLabel:_("begin_date"),xtype:"datefield",format:"Y-m-d",name:"begin_date",labelWidth:80}]},{xtype:"fieldcontainer",layout:"hbox",defaults:{margin:"0 10 0 0"},items:[{xtype:"gaiaehr.combo",fieldLabel:_("location"),name:"location",action:"location",itemId:"allergyLocationCombo",width:225,list:79,labelWidth:70},{xtype:"gaiaehr.combo",fieldLabel:_("reaction"),itemId:"allergyReactionCombo",name:"reaction",width:230,list:82,labelWidth:70,allowBlank:!1},{xtype:"gaiaehr.combo",fieldLabel:_("severity"),name:"severity",itemId:"allergySeverityCombo",width:225,list:84,labelWidth:70,allowBlank:!1},{fieldLabel:_("end_date"),xtype:"datefield",format:"Y-m-d",name:"end_date",labelWidth:80}]}]}]}),tbar:["->",{text:_("add_new"),itemId:"addAllergyBtn",action:"encounterRecordAdd",iconCls:"icoAdd"}],bbar:[{text:_("only_active"),enableToggle:!0,itemId:"activeAllergyBtn"},"->",{text:_("review"),action:"encounterRecordAdd",itemId:"reviewAllergiesBtn"}]}),Ext.define("App.view.patient.windows.Medical",{extend:"App.ux.window.Window",title:_("medical_window"),itemId:"MedicalWindow",closeAction:"hide",bodyStyle:"background-color:#fff",modal:!0,requires:["App.view.patient.Results","App.view.patient.Referrals","App.view.patient.Immunizations","App.view.patient.Medications","App.view.patient.ActiveProblems","App.view.patient.SocialPanel","App.view.patient.Allergies","App.view.patient.CognitiveAndFunctionalStatus"],initComponent:function(){var a=this;a.items=[{xtype:"tabpanel",border:!1,bodyBorder:!1,plain:!0,margin:5,height:Ext.getBody().getHeight()<700?Ext.getBody().getHeight()-100:600,width:Ext.getBody().getWidth()<1550?Ext.getBody().getWidth()-50:1500,items:[{xtype:"patientimmunizationspanel",itemId:"immunization"},{xtype:"patientallergiespanel",itemId:"allergies"},{xtype:"patientactiveproblemspanel",itemId:"activeproblems"},{xtype:"patientmedicationspanel",itemId:"medications"},{xtype:"patientresultspanel",itemId:"laboratories"},{xtype:"patientsocialpanel",itemId:"social"},{xtype:"patientcognitiveandfunctionalstatuspanel",itemId:"functionalstatus"},{xtype:"patientreferralspanel",itemId:"referrals"}]}],a.buttons=[{text:_("close"),scope:a,handler:function(){a.close()}}],a.listeners={scope:a,close:a.onMedicalWinClose,show:a.onMedicalWinShow},a.callParent(arguments)},cardSwitch:function(a){var b=this,c=b.down("tabpanel"),d=c.getActiveTab(),e=c.query("#"+a)[0];d==e?d.fireEvent("activate",d):(c.setActiveTab(e),b.setWindowTitle(e.title))},setWindowTitle:function(a){this.setTitle(app.patient.name+" ("+a+") "+(app.patient.readOnly?'-  <span style="color:red">[Read Mode]</span>':""))},onMedicalWinShow:function(){var a=this.down("tabpanel"),b=Ext.getBody().getWidth()<1550?Ext.getBody().getWidth()-50:1500,c=Ext.getBody().getHeight()<700?Ext.getBody().getHeight()-100:600;a.setSize(b,c),this.alignTo(Ext.getBody(),"c-c")},onMedicalWinClose:function(){"App.view.patient.Summary"==app.getActivePanel().$className&&app.getActivePanel().loadStores()}}),Ext.define("App.ux.form.fields.CheckBoxWithFamilyRelation",{extend:"App.ux.form.fields.CheckBoxWithText",alias:"widget.checkboxwithfamilyhistory",textField:{xtype:"gaiaehr.combo",fieldLabel:_("relation"),labelAlign:"right",labelWidth:80,list:109,allowBlank:!1,loadStore:!0},initComponent:function(){this.inputValue=this.code||"1",this.callParent()},getValue:function(){var a,b="",c=this.chekboxField.getSubmitValue();if("0"!=c){var d=this.textField.getStore(),e=d.getById(this.textField.getSubmitValue());a=e?e.data.code_type+":"+e.data.code:"0"}else a="0";return c&&(b=c+"~"+a),b},setValue:function(a){if(a&&a.split){var b=a.split("~");if(this.chekboxField.setValue(b[0]||0),"0"!=b[1]&&b[1].split){var c=b[1].split(":");this.textField.select(c[1]||c[0]||"")}else this.textField.setValue("")}else this.chekboxField.setValue(0),this.textField.setValue("")}}),Ext.define("App.view.patient.encounter.FamilyHistory",{extend:"Ext.form.Panel",xtype:"familyhistorypanel",requires:["App.ux.form.fields.CheckBoxWithFamilyRelation"],itemId:"familyHistoryPanel",title:_("family_history"),autoScroll:!0,frame:!0,bodyPadding:10,bodyStyle:"background-color:white",plugins:{ptype:"advanceform",autoSync:g("autosave"),syncAcl:acl.edit_family_history},buttons:[{text:_("save"),iconCls:"save",action:"encounterRecordAdd",itemId:"familyHistorySaveBtn"}],initComponent:function(){var a=this;a.callParent(),a.getFormItems(a,12)}}),Ext.define("App.view.patient.Encounter",{extend:"App.ux.RenderPanel",pageTitle:_("encounter"),pageLayout:"border",itemId:"encounterPanel",requires:["App.store.patient.Encounters","App.store.patient.Vitals","App.store.administration.AuditLog","App.view.patient.encounter.SOAP","App.view.patient.encounter.HealthCareFinancingAdministrationOptions","App.view.patient.encounter.CurrentProceduralTerminology","App.view.patient.encounter.FamilyHistory","App.view.patient.ProgressNote","App.ux.combo.EncounterPriority","App.ux.combo.ActiveProviders","App.view.patient.DecisionSupportWarningPanel"],enableCPT:eval(g("enable_encounter_cpt")),enableHCFA:eval(g("enable_encounter_hcfa")),enableSOAP:eval(g("enable_encounter_soap")),enableVitals:eval(g("enable_encounter_vitals")),enableEncHistory:eval(g("enable_encounter_history")),enableFamilyHistory:eval(g("enable_encounter_family_history")),enableItemsToReview:eval(g("enable_encounter_items_to_review")),enableReviewOfSystem:eval(g("enable_encounter_review_of_systems")),enableReviewOfSystemChecks:eval(g("enable_encounter_review_of_systems_cks")),enableClinicalDecisionSupport:eval(g("enable_clinical_decision_support")),showRating:!0,conversionMethod:"english",pid:null,eid:null,encounter:null,currEncounterStartDate:null,initComponent:function(){var b=this;b.renderAdministrative=acl.access_enc_hcfa||acl.access_enc_cpt||acl.access_enc_history,b.timerTask={scope:b,run:function(){b.encounterTimer()},interval:1e3},b.encounterStore=Ext.create("App.store.patient.Encounters",{listeners:{scope:b,datachanged:b.getProgressNote}}),b.encounterEventHistoryStore=Ext.create("App.store.administration.AuditLog"),b.centerPanel=b.renderAdministrative?Ext.create("Ext.tab.Panel",{region:"center",margin:"1 0 0 0",activeTab:0,bodyPadding:5,listeners:{render:function(){this.items.each(function(a){a.tab.on("click",function(){b.onTapPanelChange(this)})})}}}):Ext.create("Ext.panel.Panel",{region:"center",margin:"1 0 0 0",layout:"fit",bodyPadding:5}),b.encounterTabPanel=b.centerPanel.add(Ext.create("Ext.tab.Panel",{title:b.renderAdministrative?_("encounter"):!1,itemId:"encounter",plain:!0,activeItem:0,border:!1,action:"encounterTabPanel",defaults:{bodyStyle:"padding:15px",bodyBorder:!0,layout:"fit"}})),b.enableClinicalDecisionSupport&&a("access_clinical_decision_support")&&b.encounterTabPanel.addDocked({xtype:"decisionsupportwarningpanel",itemId:"DecisionSupportWarningPanel",dock:"top"}),b.enableVitals&&acl.access_patient_vitals&&(b.vitalsPanel=b.encounterTabPanel.add(Ext.create("App.view.patient.Vitals"))),b.enableReviewOfSystem&&acl.access_review_of_systems&&(b.reviewSysPanel=b.encounterTabPanel.add(Ext.create("Ext.form.Panel",{autoScroll:!0,action:"encounter",title:_("review_of_systems"),frame:!0,bodyPadding:5,bodyStyle:"background-color:white",fieldDefaults:{msgTarget:"side"},plugins:{ptype:"advanceform",autoSync:g("autosave"),syncAcl:acl.edit_encounters},buttons:[{text:_("save"),iconCls:"save",action:"reviewOfSystems",scope:b,itemId:"encounterRecordAdd",handler:b.onEncounterUpdate}]}))),b.enableReviewOfSystemChecks&&acl.access_review_of_systems_checks&&(b.reviewSysCkPanel=b.encounterTabPanel.add(Ext.create("Ext.form.Panel",{autoScroll:!0,action:"encounter",title:_("review_of_systems_checks"),frame:!0,bodyPadding:5,bodyStyle:"background-color:white",fieldDefaults:{msgTarget:"side"},plugins:{ptype:"advanceform",autoSync:g("autosave"),syncAcl:acl.edit_encounters},buttons:[{text:_("save"),iconCls:"save",action:"reviewOfSystemsChecks",scope:b,itemId:"encounterRecordAdd",handler:b.onEncounterUpdate}]}))),b.enableFamilyHistory&&acl.access_family_history&&(b.familyHistoryPanel=b.encounterTabPanel.add(Ext.create("App.view.patient.encounter.FamilyHistory"))),b.enableItemsToReview&&acl.access_itmes_to_review&&(b.itemsToReview=b.encounterTabPanel.add(Ext.create("App.view.patient.ItemsToReview",{title:_("items_to_review"),bodyPadding:"7 5 2 5"}))),b.enableSOAP&&acl.access_soap&&(b.soapPanel=b.encounterTabPanel.add(Ext.create("App.view.patient.encounter.SOAP",{bodyStyle:"padding:0",enc:b}))),(b.enableHCFA&&acl.access_enc_hcfa||b.enableCPT&&acl.access_enc_cpt||b.enableEncHistory&&acl.access_enc_history)&&(b.administrativeTabPanel=b.centerPanel.add(Ext.create("Ext.tab.Panel",{title:_("administrative"),itemId:"administrative",plain:!0,activeItem:0,defaults:{bodyStyle:"padding:15px",bodyBorder:!0,layout:"fit"}}))),b.enableHCFA&&acl.access_enc_hcfa&&(b.MiscBillingOptionsPanel=b.administrativeTabPanel.add(Ext.create("App.view.patient.encounter.HealthCareFinancingAdministrationOptions",{autoScroll:!0,title:_("misc_billing_options_HCFA_1500"),frame:!0,bodyPadding:5,bodyStyle:"background-color:white",fieldDefaults:{msgTarget:"side"},plugins:{ptype:"advanceform",autoSync:g("autosave"),syncAcl:acl.edit_enc_hcfa},buttons:[{text:_("save"),iconCls:"save",action:"soap",scope:b,handler:b.onEncounterUpdate}]}))),b.enableCPT&&acl.access_enc_cpt&&(b.CurrentProceduralTerminology=b.administrativeTabPanel.add(Ext.create("App.view.patient.encounter.CurrentProceduralTerminology",{title:_("current_procedural_terminology")}))),b.enableEncHistory&&acl.access_enc_history&&(b.EncounterEventHistory=b.administrativeTabPanel.add(Ext.create("App.ux.grid.EventHistory",{bodyStyle:0,title:_("encounter_history"),store:b.encounterEventHistoryStore}))),b.rightPanel=Ext.create("Ext.tab.Panel",{title:_("encounter_progress_note"),width:500,region:"east",split:!0,collapsible:!0,animCollapse:!0,collapsed:!0,itemId:"EncounterProgressNotesPanel",listeners:{scope:this,collapse:b.progressNoteCollapseExpand,expand:b.progressNoteCollapseExpand},items:[b.progressNote=Ext.create("App.view.patient.ProgressNote",{title:_("progress_note"),autoScroll:!0,tbar:["->",{xtype:"tool",type:"print",tooltip:_("print_progress_note"),scope:b,handler:function(){var a=window.open("print.html","win","left=20,top=20,width=700,height=700,toolbar=0,resizable=1,location=1,scrollbars=1,menubar=0,directories=0"),c=b.progressNote.body.dom,d=document.createElement("div"),e=d.appendChild(c.cloneNode(!0));a.document.write(e.innerHTML),Ext.defer(function(){a.print()},1e3)}}]}),b.progressHistory=Ext.create("Ext.panel.Panel",{title:_("progress_history"),bodyPadding:5,autoScroll:!0,items:[{}]})]}),b.panelToolBar=Ext.create("Ext.toolbar.Toolbar",{dock:"top",defaults:{scope:b,handler:b.onToolbarBtnHandler},items:["-",{text:_("immunizations")+" ",action:"immunization"},"-",{text:_("allergies")+" ",action:"allergies"},"-",{text:_("active_problems")+" ",action:"activeproblems"},"-",{text:_("medications")+" ",action:"medications"},"-",{text:_("results")+" ",action:"laboratories"},"-",{text:_("social")+" ",action:"social"},"-",{text:_("functional_status")+" ",action:"functionalstatus"},"-",{text:_("referrals")+" ",action:"referrals"},"-",{text:_("lab_orders"),action:"LabOrders",scope:b,handler:b.newDoc},"-",{text:_("xray_ct_orders"),action:"RadOrders",scope:b,handler:b.newDoc},"-",{text:_("rx_orders"),action:"RxOrderGrid",scope:b,handler:b.newDoc},"-",{text:_("new_doctors_note"),action:"DoctorsNotes",scope:b,handler:b.newDoc},"-","->","-",{xtype:"button",action:"encounter",text:_("encounter_details")},"-",b.priorityCombo=Ext.create("App.ux.combo.EncounterPriority",{listeners:{scope:b,select:b.prioritySelect}}),"-"]}),acl.access_encounter_checkout&&b.panelToolBar.add({text:_("sign"),icon:"resources/images/icons/edit.png",handler:b.onSignEncounter},"-"),b.pageBody=[b.centerPanel,b.rightPanel],b.listeners={beforerender:b.beforePanelRender},b.callParent(),b.down("panel").addDocked(b.panelToolBar)},newDoc:function(a){app.onNewDocumentsWin(a.action)},onToolbarBtnHandler:function(a){"encounter"==a.action?app.updateEncounter(this.encounter):app.onMedicalWin(a.action)},onChartWindowShow:function(){app.onChartsWin()},prioritySelect:function(a,b){this.changeEncounterPriority(b[0].data.option_value)},changeEncounterPriority:function(a){var b=this,c={pid:b.pid,eid:b.eid,priority:a};Encounter.updateEncounterPriority(c,function(){app.patientButtonRemoveCls(),app.patientBtn.addCls(a)}),b.getProgressNote()},onEncounterUpdate:function(b){var c,d=this;if(c="encounter"==b.action?d.newEncounterWindow.down("form").getForm():b.up("form").getForm(),c.isValid()){var e,f,g,h=c.getValues();if("encounter"==b.action)a("add_encounters")?(f=c.getRecord(),f.set(h),f.save({callback:function(a){var c=a.data;app.patientButtonRemoveCls(),app.patientBtn.addCls(c.priority),d.openEncounter(c.eid),b.up("window").hide(),app.AuditLog("Patient encounter created")}})):(b.up("window").close(),app.accessDenied());else if("vitals"==b.action){for(var i=c.getFields().items,j=i.length,k=0,l=0;l<i.length;l++)"mitos.datetime"!=i[l].xtype&&""==i[l].value&&k++;j-3>k?a("add_vitals")?(e=d.encounter.vitals(),f=c.getRecord(),h=d.addDefaultData(h),g=e.indexOf(f),-1==g?e.insert(0,h):f.set(h),e.sync({scope:d,success:function(){d.msg("Sweet!",_("vitals_saved")),d.getProgressNote(),d.vitalsPanel.down("vitalsdataview").refresh(),d.resetVitalsForm()}})):app.accessDenied():d.msg("Oops!",_("vitals_form_is_epmty"),!0)}else a("edit_encounters")?(f=c.getRecord(),e=f.store,h=d.addDefaultData(h),f.set(h),app.fireEvent("encounterbeforesync",d,e,c),e.sync({callback:function(){app.fireEvent("encountersync",d,e,c),d.msg("Sweet!",_("encounter_updated")),app.AuditLog("Patient encounter updated")}}),d.encounterEventHistoryStore.load({filters:[{property:"eid",value:d.eid}]})):app.accessDenied()}},onVitalsSign:function(){var a=this,b=a.vitalsPanel.down("form").getForm(),c=a.encounter.vitals(),d=b.getRecord();b.isValid()&&a.passwordVerificationWin(function(e,f){"ok"==e&&User.verifyUserPass(f,function(e,f){f.result?(d.set({auth_uid:user.id}),c.sync({callback:function(){b.reset(),a.msg("Sweet!",_("vitals_signed")),a.getProgressNote(),a.resetVitalsForm(),a.vitalsPanel.down("vitalsdataview").refresh(),app.AuditLog("Patient vitals signed")}})):Ext.Msg.show({title:"Oops!",msg:_("incorrect_password"),buttons:Ext.Msg.OKCANCEL,icon:Ext.Msg.ERROR,fn:function(b){"ok"==b&&a.onVitalsSign()}})})})},addDefaultData:function(a){return a.pid=this.pid,a.eid=this.eid,a.uid=user.id,a.date=Ext.Date.format(new Date,"Y-m-d H:i:s"),a},openEncounter:function(a){var b,c=this;c.el.mask(_("loading...")+" "+_("encounter")+" - "+a),c.resetTabs(),app.AuditLog("Patient encounter viewed"),c.encounter&&delete c.encounter,App.model.patient.Encounter.load(a,{scope:c,callback:function(a){c.encounter=a;var d=c.encounter.data;if(c.pid=d.pid,c.eid=d.eid,c.currEncounterStartDate=d.service_date,app.fireEvent("beforeencounterload",c.encounter),c.getProgressNote(),d.close_date){if(c.stopTimer()){var e=c.timer(d.service_date,d.close_date),f=app.patient;c.updateTitle(f.name+" #"+f.pid+" - "+f.age.str+" - "+Ext.Date.format(c.currEncounterStartDate,"F j, Y, g:i:s a")+" ("+_("closed_encounter")+")",app.patient.readOnly,e),c.setButtonsDisabled(c.getButtonsToDisable(),!0)}}else c.startTimer(),c.setButtonsDisabled(c.getButtonsToDisable());c.reviewSysPanel&&(b=c.encounter.reviewofsystems(),b.on("write",c.getProgressNote,c),c.reviewSysPanel.getForm().loadRecord(b.getAt(0))),c.familyHistoryPanel&&(b=c.encounter.familyhistory(),b.on("write",c.getProgressNote,c),b.last()||b.add({pid:d.pid,eid:d.eid,create_uid:app.user.id,create_date:new Date}),c.familyHistoryPanel.getForm().loadRecord(b.last())),c.reviewSysCkPanel&&(b=c.encounter.reviewofsystemschecks(),b.on("write",c.getProgressNote,c),c.reviewSysCkPanel.getForm().loadRecord(b.getAt(0))),c.soapPanel&&(b=c.encounter.soap(),b.on("write",c.getProgressNote,c),c.soapPanel.down("form").getForm().loadRecord(b.getAt(0))),c.MiscBillingOptionsPanel&&(b=c.encounter.hcfaoptions(),c.MiscBillingOptionsPanel.getForm().loadRecord(b.getAt(0))),c.priorityCombo.setValue(d.priority),c.encounterEventHistoryStore.load({filters:[{property:"eid",value:c.eid}]}),c.CurrentProceduralTerminology&&c.CurrentProceduralTerminology.encounterCptStoreLoad(c.pid,c.eid,function(){c.CurrentProceduralTerminology.setDefaultQRCptCodes()}),c.progressHistory&&c.getProgressNotesHistory(),app.setEncounterClose(a.isClose()),app.fireEvent("encounterload",c.encounter),c.el.unmask()}})},doSignEncounter:function(a){var b,c,d=this;d.passwordVerificationWin(function(e,f){"ok"==e&&(b=app.checkoutWindow.down("form").getForm(),c=b.getValues(),c.eid=d.eid,c.signature=f,c.isSupervisor=a,acl.require_enc_supervisor||a?(c.requires_supervisor=!0,c.supervisor_uid=app.checkoutWindow.coSignCombo.getValue()):a||acl.require_enc_supervisor||(c.requires_supervisor=!1),Encounter.signEncounter(c,function(b,e){if(e.result.success){if(d.stopTimer()){var f={pid:d.pid,eid:d.eid,uid:app.user.id,type:"checkout",date:new Date};
f.body=c.note,""!==f.body&&Ext.create("App.model.patient.Notes",f).save(),f.body=c.reminder,""!==f.body&&Ext.create("App.model.patient.Reminders",f).save(),app.patient.eid=null,app.openPatientVisits(),app.AuditLog("Patient encounter "+(a?"co-signed":"signed")),d.msg("Sweet!",_("encounter_closed")),app.checkoutWindow.close()}}else Ext.Msg.show({title:"Oops!",msg:_(e.result.error),buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}))})},onSignEncounter:function(){var a=app.patient.name+" #"+app.patient.pid+" - "+Ext.Date.format(this.currEncounterStartDate,"F j, Y, g:i:s a")+" ("+_("checkout")+")";app.checkoutWindow.enc=this,app.checkoutWindow.setTitle(a),app.checkoutWindow.show()},isClose:function(){return"undefined"!=typeof this.encounter.data.close_date&&null!=this.encounter.data.close_date},isSigned:function(){return"undefined"!=typeof this.encounter.data.provider_uid&&null!=this.encounter.data.provider_uid&&0!=this.encounter.data.provider_uid},progressNoteCollapseExpand:function(){this.centerPanel.doLayout()},getProgressNote:function(){var a=this;Encounter.getProgressNoteByEid(a.eid,function(b,c){a.progressNote.tpl.overwrite(a.progressNote.body,c.result)})},getProgressNotesHistory:function(){var a,b=this;say(b),b.progressHistory.removeAll(),Encounter.getSoapHistory({pid:b.encounter.data.pid,eid:b.encounter.data.eid},function(c,d){a=d.result;for(var e=0;e<a.length;e++)b.progressHistory.add(Ext.create("Ext.form.FieldSet",{styleHtmlContent:!0,title:'<span style="font-weight: bold; font-size: 14px;">'+a[e].service_date+"</span>",html:"<strong>"+_("subjective")+":</strong> "+(a[e].subjective?a[e].subjective:"none")+"<br><strong>"+_("objective")+":</strong> "+(a[e].objective?a[e].objective:"none")+"<br><strong>"+_("assessment")+":</strong> "+(a[e].assessment?a[e].assessment:"none")+"<br><strong>"+_("plan")+":</strong> "+(a[e].plan?a[e].plan:"none")}))})},onTapPanelChange:function(a){this.setEncounterProgressCollapsed("encounter"==a.card.itemId?!1:!0)},setEncounterProgressCollapsed:function(a){a?this.rightPanel.collapse():this.rightPanel.expand()},startTimer:function(){return Ext.TaskManager.start(this.timerTask),!0},stopTimer:function(){return Ext.TaskManager.stop(this.timerTask),!0},encounterTimer:function(){var a=this,b=a.timer(a.currEncounterStartDate,new Date);null!=app.patient.pid?a.updateTitle(app.patient.name+" #"+app.patient.pid+" - "+app.patient.age.str+" - "+Ext.Date.format(a.currEncounterStartDate,"F j, Y, g:i:s a")+" ("+_("open_encounter")+")",app.patient.readOnly,b):a.stopTimer()},timer:function(a,b){function c(a){return a>=10?a:"0"+a}var d,e=Ext.Date.getElapsed(a,b),f=Math.floor(e/1e3),g=Math.floor(f/60);f%=60,d=c(f);var h=Math.floor(g/60);g%=60,d=c(g)+":"+d;var i=Math.floor(h/24);return h%=24,d=c(h)+":"+d,d=0==i?'<span class="time">'+d+"</span>":'<span class="day">'+i+" "+_("day_s")+'</span><span class="time">'+d+"</span>"},beforePanelRender:function(){var a=this,b=function(){return[{name:"id",type:"int"},{name:"pid",type:"int"},{name:"eid",type:"int"},{name:"uid",type:"int"}]};a.reviewSysPanel&&a.getFormItems(a.reviewSysPanel,8,function(){}),a.reviewSysCkPanel&&a.getFormItems(a.reviewSysCkPanel,9,function(){for(var c=a.reviewSysCkPanel.getForm().getFields(),d=new b,e=0;e<c.items.length;e++)d.push({name:c.items[e].name,type:"auto"});Ext.define("App.model.patient.ReviewOfSystemsCheck",{extend:"Ext.data.Model",fields:d,proxy:{type:"direct",api:{update:"Encounter.updateReviewOfSystemsChecks"}},belongsTo:{model:"App.model.patient.Encounter",foreignKey:"eid"}})})},getButtonsToDisable:function(){var a=this,b=[];return null==a.ButtonsToDisable&&(a.vitalsPanel&&b.concat(b,a.vitalsPanel.query("button")),a.reviewSysPanel&&b.concat(b,a.reviewSysPanel.query("button")),a.reviewSysCkPanel&&b.concat(b,a.reviewSysCkPanel.query("button")),a.soapPanel&&b.concat(b,a.soapPanel.down("form").query("button")),a.MiscBillingOptionsPanel&&b.concat(b,a.MiscBillingOptionsPanel.query("button")),a.CurrentProceduralTerminology&&b.concat(b,a.CurrentProceduralTerminology.query("button")),a.EncounterEventHistory&&b.concat(b,a.EncounterEventHistory.query("button")),a.newEncounterWindow&&b.concat(b,a.newEncounterWindow.query("button")),app.checkoutWindow&&b.concat(b,app.checkoutWindow.query("button")),a.ButtonsToDisable=b),a.ButtonsToDisable},resetTabs:function(){var a=this;a.renderAdministrative&&a.centerPanel.setActiveTab(0),a.encounterTabPanel&&a.encounterTabPanel.setActiveTab(0),a.administrativeTabPanel&&a.administrativeTabPanel.setActiveTab(0),a.rightPanel&&a.rightPanel.setActiveTab(0)},onDocumentView:function(a,b){var c=a.getStore().getAt(b),d=c.data.url;app.onDocumentView(d)},onActive:function(a){var b=this,c=app.patient;if(c.pid&&c.eid)b.updateTitle(c.name+" ("+_("visits")+")",c.readOnly,null),b.setReadOnly(c.readOnly),a(!0);else{a(!1);var d=null===c.eid?"Please create a new encounter or select one from the patient encounter history":null;b.currPatientError(d)}}}),Ext.define("App.ux.form.fields.UploadBase64",{extend:"Ext.window.Window",requires:["Ext.form.field.File"],xtype:"uploadbase64field",bodyPadding:10,base64:"",ready:!1,title:_("upload"),items:[{xtype:"fileuploadfield",width:300}],buttons:[{text:_("cancel")},{text:_("upload")}],allowExtensions:null,initComponent:function(){var a=this;a.callParent(),a.uValue="",a.uField=a.getComponent(0),a.uDock=a.getDockedItems('toolbar[dock="bottom"]')[0],a.uCancel=a.uDock.getComponent(0),a.uUpload=a.uDock.getComponent(1),a.uCancel.on("click",a.onCancel,a),a.uUpload.on("click",a.onUpload,a)},doUpload:function(){var a=this,b=new FileReader;if(a.uValue=a.uField.getValue(),a.allowExtensions){var c;if(c=new RegExp(Ext.isArray(a.allowExtensions)?a.allowExtensions.join("|"):a.allowExtensions+"$"),!c.exec(a.uValue))return void app.msg(_("oops"),Ext.String.format(_("only_extensions_{0}_allowed"),a.allowExtensions.join?a.allowExtensions.join(", "):a.allowExtensions),!0)}a.setReady(!1),b.onload=function(b){a.base64=b.target.result,a.setReady(!0),a.fireEvent("uploadready",a,a.base64),a.close()},b.readAsDataURL(a.uField.extractFileInput().files[0])},onCancel:function(){return this.close()},onUpload:function(){this.doUpload()},isReady:function(){return this.ready},setReady:function(a){return this.ready=a},getValue:function(){return this.uValue}}),Ext.define("App.view.Viewport",{extend:"Ext.Viewport",user:window.user,version:window.version,minWidthToFullMode:1700,currency:g("gbl_currency_symbol"),patientImage:"data:image/jpeg;base64,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Q3B0bmJvb2wAAAAAAENsYnJib29sAAAAAABSZ3NNYm9vbAAAAAAAQ3JuQ2Jvb2wAAAAAAENudENib29sAAAAAABMYmxzYm9vbAAAAAAATmd0dmJvb2wAAAAAAEVtbERib29sAAAAAABJbnRyYm9vbAAAAAAAQmNrZ09iamMAAAABAAAAAAAAUkdCQwAAAAMAAAAAUmQgIGRvdWJAb+AAAAAAAAAAAABHcm4gZG91YkBv4AAAAAAAAAAAAEJsICBkb3ViQG/gAAAAAAAAAAAAQnJkVFVudEYjUmx0AAAAAAAAAAAAAAAAQmxkIFVudEYjUmx0AAAAAAAAAAAAAAAAUnNsdFVudEYjUHhsQFIAk4AAAAAAAAAKdmVjdG9yRGF0YWJvb2wBAAAAAFBnUHNlbnVtAAAAAFBnUHMAAAAAUGdQQwAAAABMZWZ0VW50RiNSbHQAAAAAAAAAAAAAAABUb3AgVW50RiNSbHQAAAAAAAAAAAAAAABTY2wgVW50RiNQcmNAWQAAAAAAAAAAABBjcm9wV2hlblByaW50aW5nYm9vbAAAAAAOY3JvcFJlY3RCb3R0b21sb25nAAAAAAAAAAxjcm9wUmVjdExlZnRsb25nAAAAAAAAAA1jcm9wUmVjdFJpZ2h0bG9uZwAAAAAAAAALY3JvcFJlY3RUb3Bsb25nAAAAAAA4QklNA+0AAAAAABAASAJOAAEAAQBIAk4AAQABOEJJTQQmAAAAAAAOAAAAAAAAAAAAAD+AAAA4QklNA/IAAAAAAAoAAP///////wAAOEJJTQQNAAAAAAAEAAAAHjhCSU0EGQAAAAAABAAAAB44QklNA/MAAAAAAAkAAAAAAAAAAAEAOEJJTScQAAAAAAAKAAEAAAAAAAAAAThCSU0D9QAAAAAASAAvZmYAAQBsZmYABgAAAAAAAQAvZmYAAQChmZoABgAAAAAAAQAyAAAAAQBaAAAABgAAAAAAAQA1AAAAAQAtAAAABgAAAAAAAThCSU0D+AAAAAAAcAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAA4QklNBAAAAAAAAAIAADhCSU0EAgAA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eXBlL1Jlc291cmNlRXZlbnQjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxMi0wNC0yNFQxNjozMDoyNi0wNDowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTItMTEtMTlUMjM6MjY6NDQtMDQ6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTItMTEtMTlUMjM6MjY6NDQtMDQ6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvanBlZyIgcGhvdG9zaG9wOkxlZ2FjeUlQVENEaWdlc3Q9IjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUY0MEQzMUJDMjMyRTIxMUE1NzhERjExOTIzOEY2MTMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDczMkY4ODg3Q0FGRTExMUIxNzRGM0Y5REZEMjcyREQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowNzMyRjg4ODdDQUZFMTExQjE3NEYzRjlERkQyNzJERCI+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPnhtcC5kaWQ6MDczMkY4ODg3Q0FGRTExMUIxNzRGM0Y5REZEMjcyREQ8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowNzMyRjg4ODdDQUZFMTExQjE3NEYzRjlERkQyNzJERCIgc3RFdnQ6d2hlbj0iMjAxMi0wNC0yNFQxNjozMDoyNi0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9wbmcgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDgzMkY4ODg3Q0FGRTExMUIxNzRGM0Y5REZEMjcyREQiIHN0RXZ0OndoZW49IjIwMTItMDYtMDVUMjI6MDg6NDAtMDQ6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5RjQwRDMxQkMyMzJFMjExQTU3OERGMTE5MjM4RjYxMyIgc3RFdnQ6d2hlbj0iMjAxMi0xMS0xOVQyMzoyNjo0NC0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAQAA9tYA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1eX1KEdXZjh2hpamtsbW5vZnd4eXp7fH1+f3SFhoeIiYqLjI2Oj4OUlZaXmJmam5ydnp+So6SlpqeoqaqrrK2ur6/9oADAMBAAIRAxEAPwDf49+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691//0N/j37r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3Xvfuvde9+691737r3X//R3+Pfuvde9+691737r3Xvfuvde9+690RDvj+Zb8K/jruCq2Z2D3dgqrflFK8FZsXY9Hld/bpoKqO/ko8vR7UospS7frEtzFkZ6RxcXFj7917oAsX/ADsPghUVcUG4N09i7GoZZFRc3urrLcRxCamCrJPLttNxVlPDzcvJCqqBdiPfuvdWRdV9x9V947TpN9dP9gbU7I2jWM0UWd2hmqLM0UdSqq0lFWGkleXHZGAMPJTVCxTx39SD37r3Qle/de697917r3v3Xuve/de697917r//0t/j37r3Xvfuvde9+691737r3WvZ/Pc/mG7t+NextsfGzpbcFVtvtXuHCVue3hu3EVJps5svrFaqbEQ0+Eq4XSoxmd3vk6aqgjrIyJqSjoqgxlJZYZY/dbAJNB1qXdV7t23smjqdxZenGUzuRqJmV6omaREWRgSXcszvNJd2YksxPPvfT3Qs1PyH23uOCXF5XB0v2s6NCS0K8Bhp+tvwD710x1w+JnzI7L+CvyCoezOqMxXz7SbK0kG+uv5a6RNvdg7LklSWuwWUpCXpRkqWnlkONr9BnoKkK6koZY5PdXILGo4dfRY627B2v2x19sjs/ZNeuU2h2DtXA7y23XgKrVOF3HjKbK495Y1Z/DUCmqlEsZN45AynkH37qnS29+691737r3Xvfuvde9+691//09/j37r3Xvfuvde9+691737r3Xz6P52O9sjvP+ZV8gYayZnpdmDYGycPEzs602PxPX+2ayeKIH9CzZjJ1cxA41ysfz796dX8k6qxMjlFjudK3sObcm/H5/PvfTnWMEqbj37r3XVQ7SBmYm4AHP8AgoX37r3W/h/Iv3tkd5/y3OmYcnUNUz7MzfY2yYZXJLjHYve+Zr8VTkm5K0eNy0UKf0jjUfj3rpjq3r37r3Xvfuvde9+691737r3X/9Tf49+691737r3Xvfuvde9+6918+z+dzs2o2d/Mv78mlVhS7xp+ut6Y92XSJYMn11tigqSl/wBSplsTUpf+qH+nv3l1cfAeqqPe+nOve/de6xTkqpP5+v8AvH+8Hn37r3W/1/Iz2bVbR/lr9HzVsfin3hlOyd5hLWb7XK9g7io8dI35PnxmMhkB/KsPeumOrdffuvde9+691737r3Xri9r8/W35t/W3v3Xuv//V3+Pfuvde9+691737r3Xvfuvdad//AApZ6aqsP3J8e+/qOhP8L3rsPM9X5qujQmKLObHzU24sQtWw4WoyWJ3hOsN/1JQPb9J9+6svxDrWkBuAf8P+R/7z7307137917rpKSsydZRYrHUs9dkMlV09BQUVNG0tTWVtZMkFLS08SAtLPUTyKiqOWYgD37r3X08/i91OnRHxy6N6cCKk/W3VWx9o5EoQyzZnD7eoKbOVQZeGNXmFnlJ5uX+p966Y6Hj37r3Xvfuvde9+691g0H7ryXOn7fRbm1/Jqv8A0vb37r3X/9bf3BBFxyLkf7EEgj/YEe/de679+691737r3XvfuvdES/mRfFHBfMX4idqdV1tEk27Mdha3fXVuRCBqnE9lbUxtdW7denc8pDm1ebFVXBJo6+Ww1aSPde6+b1TFgpVwQyEqysCpVlNipUgEEN9fe+n+pJFgx/1P19+691dL/Ig+KOD+RvzK/v8A70oY8nsr424Wg7M/h8yCWkyXYNRlUouu6StRgQ0GPrqaqywBNnmxcaMCjMDrpotUAefW+J791Xr3v3Xuve/de697917r3v3Xuv/X39lAAsP9Ux/27k/72ffuvdcvfuvde9+691737r3WKWWKGKSWeSOKGKN5JpZWVIo4kBaSSR3IRI0QEkk2A+vv3Xuvls9s0uCou2+06XatZTZHbFP2PviDbmQopFlo6/AxbnyceHraSRPTJTVePWOSNhwVYEce99P9ID37r3W2p/wmVg23Fs75aTR19A28KvdPVsdXi/LEMnFtqgxW72x2Q8BPmagqcpkqqPWAVEkViQSL66ab8P2dbS3v3Veve/de697917r3v3Xuve/de6//0N/j37r3XvfuvdJLd+/djde4uTOb+3ntTZGFiDNLl93bhxG28YgQXYvXZiro6UaR9fV7917qtDun+c58GOpI6ykwO/c33huSnSUQ4DpfbtXueCaZRaNTu/INhtjeF5OC8eRmYC5CG1j7r3Wv/wDNz+bP8t/lztzO9adc7Th+N/Smchnx+ehhzb5HsLeOEqEaCpxuf3TDBSx47DV8BInocdTwGVGaKaonhZlPutinnw6ofzeBocCTT/eLXVQYh3iUJChW/wCldTM31+pJ/wBb3vp7pO0vgabTOLxM3qINiAT9VItyPfuvdGz+N2/u8Pjt2Jhu4/jfv+XbO88XG1PLHqiejzWHmeKeu29uLFVCTY3P4XINAnlpqiPSHRJEKSxxyL49Ufy62dvj1/P725U0lBg/lx0Xu7rnOokcFZv3q6mbeWx6uQBRJX1W2amsTdeAgY3Pip5My39CPp7103T06uC6g+dfxA74FPH1h8hOtM7k6pYzFtzIZ+Hau7ryEWQ7R3YuD3LqDccUpFx9ffuvdGyVgwDKQysAQQbgg8ggj6g+/de679+691737r3X/9HZ/wDnl/OJ+PfwxP8AczBUs3dvdVZTST02xNq5WmosLt5WeWClqd87q8GRXEfczRkw0dNTVlbNHZ2SKKSOVvdbAJ4dUO9i/wA0X+YL8gRPWV3auL+O2yq0s9NtbqHHQ4LLR0ri8Qq965OTK7y+7EZGpqatpYy1yEX6D2OrUT16IlurP7MrslJn+xt77k7J3I2tp8xvDcWU3PlJpG9T+SvzVZXVchZhc3b37qnQb5XvfaOGjeDbeEpVZRZHESEiw4Nrfj3vp/oB91dw7i3EZI/MaeBiQEjOiym/4HHv3XugkmmlqHZ5XZmY3JJ1Hk3+p/xPv3XusX0synj/AH3B9+690oMLubK4SZJqKpkjKkGwc24I/F7e/de6MHtr5DVdNGlNm6KKtisFYyIjlhex+ov+PfuvdChTb96h3YgTK4mmpZZOS6oifWxJ4H4/w966Y6Ml1j3z3t1IIaj49fKDsvY8FPpem23/AHpqs5tAlDdUk2buRsxtaVb8eqkJt7917qyTo3+f3291Xn8VtD5ndX4ffG2KuaOn/wBK3VNNHt/c9ND5EWXIZPZ1VUvtrPyRISzxUc2IIXlFkI0e/dep6dbF3+zd/HL/AEAf7ND/AKVdt/6D/wC6/wDe7++3ml8P8M8/2P2n8M8X8X/j/wDFf8h/hvg+++//AMn8Xl9Hv3Xuv//Sqj/vTkKjJTZzIVkmUy9XXrlKvI5KSasqqmt+5aseaaaWYySNLM5LXP04Gn37q54HpRZbs/dWZGiqybxx20iOmDRIABYABne3HvdOt6Pn0jJslPUMTPUTSk/XWzNwR/Qm/Fvfur9RzOjHkkD/AABt/tr+/de64+ZP8f8Abe/de695V/2r/kk+/de678q3tzf/AFvfuvdd6x/j/vH/ABX37r3XtY/x/wB4/wCK+/de65rOVN1LAj6EXuB9eOffuvdOtDubLYyRXpMhUwsvIsxIv/rE2t7917p33Dv7Oblx9NjsvURVMNJP5oZDGwmD+N47NIzEadMhtYD37r3Tj/pd7C/0Z/6Hv70Zb/Rz/eL+9X92vup/4d/F/t/t/N4dejRb1aLadXqtfn37r3X/06bKf7HwR2/iHm9X6/t/FfUdH6Ob+O1/9q+nHvfTg1edepUWq/Nvof8AXt/j/j791cdZTq5/2P8Ar3/5F/vPv3XusP7n4/2P6vr/ALD37r3XY8n5/r/tXv3XupA1fjVb/C/v3XusTeXVxa3+P1/3n/D37r3XR+7/ABa3+N/+I9+6910PvLj9P1H9ffuvdTF1afVbVbn62vf8f4f8R7917qK3l1/i1/z/AL6309+691xbyafVa3NrfW1z9fxf+n+Pv3Xuu/3dP5/T/wAnaf8Aob37r3X/2Q==",enablePoolAreaFadeInOut:eval(g("enable_poolarea_fade_in_out")),initComponent:function(){Ext.tip.QuickTipManager.init();
var me=this;me.nav=me.getController("Navigation"),me.cron=me.getController("Cron"),me.log=me.getController("LogOut"),me.dual=me.getController("DualScreen"),me.notification=me.getController("Notification"),me.logged=!0,eval(g("enable_dual_monitor"))&&me.dual.startDual(),me.lastCardNode=null,me.prevNode=null,me.fullMode=window.innerWidth>=me.minWidthToFullMode,me.patient={name:null,pid:null,pic:null,sex:null,dob:null,age:null,eid:null,readOnly:!1},me.patientPoolStore=Ext.create("App.store.areas.PatientAreas"),"$"==me.currency?me.icoMoney="icoDollar":""==me.currency?me.icoMoney="icoEuro":""==me.currency?me.icoMoney="icoLibra":""==me.currency&&(me.icoMoney="icoYen"),me.Header=Ext.create("Ext.container.Container",{region:"north",height:44,split:!1,collapsible:!1,collapsed:!1,frame:!1,border:!1,cls:"appHeader",bodyStyle:"background: transparent",margins:"0 0 0 0",layout:"hbox"}),me.HeaderLeft=Ext.widget("container",{margin:0,flex:1,layout:"hbox",itemId:"AppHeaderLeft"}),me.HeaderRight=Ext.widget("container",{margin:0,layout:"hbox",itemId:"AppHeaderRight"}),me.HeaderLeft.add({xtype:"button",scale:"large",margin:"0 3 0 0",cls:"headerLargeBtn",padding:0,iconCls:"icoHome",scope:me,handler:me.openDashboard,tooltip:_("patient_visits_history")}),me.HeaderLeft.add({xtype:"button",scale:"large",margin:"0 3 0 0",cls:"headerLargeBtn",padding:0,iconCls:"icoCalendar2",scope:me,handler:me.openCalendar,tooltip:_("patient_visits_history")}),me.HeaderLeft.add({xtype:"tbseparator"}),me.patientBtn=me.HeaderLeft.add({xtype:"button",scale:"large",margin:"0 3 0 0",style:"height: 42px",tooltip:_("patient_btn_drag"),listeners:{scope:me,afterrender:me.patientBtnRender},tpl:me.patientBtnTpl()}),me.HeaderLeft.add({xtype:"tbseparator"}),me.patientSummaryBtn=me.HeaderLeft.add({xtype:"button",scale:"large",margin:"0 3 0 0",cls:"headerLargeBtn",padding:0,iconCls:"icoPatientInfo",scope:me,handler:me.openPatientSummary,tooltip:_("patient_summary")}),a("access_patient_visits")&&(me.patientOpenVisitsBtn=me.HeaderLeft.add({xtype:"button",scale:"large",margin:"0 3 0 0",cls:"headerLargeBtn",padding:0,iconCls:"icoBackClock",scope:me,handler:me.openPatientVisits,tooltip:_("patient_visits_history")})),a("add_encounters")&&(me.patientCreateEncounterBtn=me.HeaderLeft.add({xtype:"button",scale:"large",margin:"0 3 0 0",cls:"headerLargeBtn",padding:0,iconCls:"icoClock",scope:me,handler:me.createNewEncounter,tooltip:_("new_encounter")})),me.patientCloseCurrEncounterBtn=me.HeaderLeft.add({xtype:"button",scale:"large",margin:"0 3 0 0",cls:"headerLargeBtn",padding:0,iconCls:"icoArrowDown",scope:me,handler:me.stowPatientRecord,tooltip:_("stow_patient_record")}),a("access_patient_search")&&me.HeaderLeft.add({xtype:"panel",bodyPadding:"8 11 5 11",margin:"0 3 0 0",items:[{xtype:"patienlivetsearch",emptyText:_("patient_live_search")+"...",width:me.fullMode?300:300,listeners:{scope:me,select:me.liveSearchSelect,blur:function(a){a.reset()}}}]}),a("add_patient")&&me.HeaderLeft.add({xtype:"button",scale:"large",margin:"0 3 0 0",padding:4,itemId:"patientNewReset",iconCls:"icoAddPatient",scope:me,handler:me.newPatient,tooltip:_("create_a_new_patient")}),a("create_emergency_encounter")&&me.HeaderLeft.add({xtype:"button",scale:"large",margin:"0 3 0 0",cls:"headerLargeBtn emerBtn",overCls:"emerBtnOver",padding:0,itemId:"createEmergency",iconCls:"icoEmer",scope:me,handler:me.createEmergency,tooltip:_("create_new_emergency")}),a("access_floor_plan_panel")&&me.HeaderRight.add({xtype:"button",scale:"large",margin:"0 3 0 0",cls:"headerLargeBtn",padding:0,itemId:"floorPlans",iconCls:"icoZoneAreasBig",scope:me,handler:me.goToFloorPlans,tooltip:_("floor_plans")}),a("access_pool_areas_panel")&&me.HeaderRight.add({xtype:"button",scale:"large",margin:"0 3 0 0",cls:"headerLargeBtn",padding:0,itemId:"patientPoolArea",iconCls:"icoPoolArea",scope:me,handler:me.goToPoolAreas,tooltip:_("pool_areas")}),a("access_poolcheckin")&&me.HeaderRight.add({xtype:"button",scale:"large",margin:"0 3 0 0",cls:"headerLargeBtn",padding:0,itemId:"patientCheckIn",iconCls:"icoCheckIn",scope:me,handler:me.onPatientLog,tooltip:_("arrival_log")}),me.userSplitBtn=me.HeaderRight.add({xtype:"button",text:me.user.title+" "+me.user.lname,scale:"large",iconCls:isEmerAccess?"icoUnlocked32":"icoDoctor",iconAlign:"left",style:"height: 42px",plugins:[{ptype:"badgetext",defaultText:0}],itemId:"userSplitButton",cls:"drButton",margin:0,menu:[{text:_("my_account"),iconCls:"icoUser",handler:function(){me.nav.navigateTo("App.view.miscellaneous.MyAccount")}},{text:_("logout"),iconCls:"icoLogout",action:"logout"}]}),a("emergency_access")&&me.userSplitBtn.menu.insert(0,{text:_("emergency_access"),cls:"emergency",iconCls:"icoUnlocked",scope:me,handler:me.onEmergencyAccessClick}),me.Header.add([me.HeaderLeft,me.HeaderRight]),me.navColumn=Ext.create("Ext.panel.Panel",{title:_("navigation"),action:"mainNavPanel",layout:"border",region:globals.main_navigation_menu_left,width:parseFloat(globals.gbl_nav_area_width),split:!0,collapsible:!0,collapsed:!1,items:[{xtype:"treepanel",region:"center",action:"mainNav",cls:"nav_tree",hideHeaders:!0,rootVisible:!1,border:!1,width:parseFloat(globals.gbl_nav_area_width),store:Ext.create("App.store.navigation.Navigation",{autoLoad:!0})},me.patientPoolArea=Ext.create("Ext.Panel",{title:_("patient_pool_areas"),region:"south",action:"patientPoolArea",bodyPadding:5,height:25,cls:"patient-pool",split:!0,collapsible:!0,border:!1,overflowY:"auto",items:[{xtype:"dataview",loadMask:!1,cls:"patient-pool-view",tpl:new Ext.XTemplate('<tpl for="."><div class="patient-pool-btn x-btn x-btn-default-large {priority}"><div class="patient_btn_img"><img src="{[this.getPatientImage(values.patient)]}" width="50" height="50"></div><div class="patient_btn_info"><div class="patient-name">{shortName}</div><div class="patient-name">#{pid} ({poolArea})</div></div></div></tpl>',{getPatientImage:function(a){return a.image?a.image:me.patientImage}}),itemSelector:"div.patient-pool-btn",overItemCls:"patient-over",selectedItemClass:"patient-selected",singleSelect:!0,store:me.patientPoolStore,listeners:{scope:me,render:me.onEncounterDragZoneRender}}]})],dockedItems:[{xtype:"toolbar",dock:"bottom",border:!0,margin:"3 0 0 0",padding:5,layout:{type:"hbox",pack:"center"},items:["-",{xtype:"button",frame:!0,text:"GaiaEHR Support",iconCls:"icoHelp",action:"supportBtn",src:"http://gaiaehr.org/forums/"},"-"]}]}),me.MainPanel=Ext.create("Ext.container.Container",{region:"center",layout:"card",border:!0,itemId:"MainPanel",defaults:{layout:"fit",xtype:"container"},listeners:{scope:me,afterrender:me.initializeOpenEncounterDropZone}}),me.nav.App_view_dashboard_Dashboard=me.MainPanel.add(Ext.create("App.view.dashboard.Dashboard")),me.nav.App_view_areas_FloorPlan=me.MainPanel.add(Ext.create("App.view.areas.FloorPlan")),me.nav.App_view_areas_PatientPoolDropZone=me.MainPanel.add(Ext.create("App.view.areas.PatientPoolDropZone")),me.Footer=Ext.create("Ext.container.Container",{height:me.fullMode?30:60,split:!1,padding:"3 0",region:"south",action:"appFooter",items:[{xtype:"dataview",margin:"0 0 3 0",hidden:!0,hideMode:"offsets",cls:"patient-pool-view-footer x-toolbar x-toolbar-default x-box-layout-ct",tpl:'<div class="x-toolbar-separator x-toolbar-item x-toolbar-separator-horizontal" style="float:left; margin-top:5px;" role="presentation" tabindex="-1"></div><tpl for="."><div class="patient-pool-btn-small x-btn x-btn-default-small {priority}" style="float:left"><div class="patient_btn_info"><div class="patient-name">{name} ({pid})</div></div></div><div class="x-toolbar-separator x-toolbar-item x-toolbar-separator-horizontal" style="float:left; margin-top:5px; margin-left:3px;" role="presentation" tabindex="-1"></div></tpl>',itemSelector:"div.patient-pool-btn-small",overItemCls:"patient-over",selectedItemClass:"patient-selected",singleSelect:!0,loadMask:!1,store:me.patientPoolStore,listeners:{scope:me,render:me.onEncounterDragZoneRender}},{xtype:"toolbar",dock:"bottom",items:[{xtype:"activefacilitiescombo",emptyText:"Facilities",width:parseFloat(globals.gbl_nav_area_width)-4,hidden:!eval(a("access_to_other_facilities")),listeners:{scope:me,select:me.onFacilitySelect}},"-",{text:"Copyright (C) 2011 GaiaEHR (Electronic Health Records) |:|  Open Source Software operating under GPLv3 |:| v"+me.version,iconCls:"icoGreen",disabled:!0},"->",{text:_("news"),action:"supportBtn",src:"http://GaiaEHR.org/projects/GaiaEHR001/news"},"-",{text:_("wiki"),action:"supportBtn",src:"http://gaiaehr.org/"},"-",{text:_("issues"),action:"supportBtn",src:"http://gaiaehr.org:8181/issues/?jql="},"-",{text:_("forums"),action:"supportBtn",src:"http://gaiaehr.org/forums/"},"-",{text:'<span style="color: red">'+_("FACTORY RESET")+"</span>",scope:me,hidden:"localhost"!=window.location.hostname,handler:me.resetApp}]}]}),me.FacilityCmb=me.Footer.query("activefacilitiescombo")[0],me.FacilityCmb.getStore().on("load",me.onFacilityComboLoad,me),me.MedicalWindow=Ext.create("App.view.patient.windows.Medical"),me.ChartsWindow=Ext.create("App.view.patient.windows.Charts"),me.PaymentEntryWindow=Ext.create("App.view.fees.PaymentEntryWindow"),me.PatientOrdersWindow=Ext.create("App.view.patient.windows.Orders"),me.newEncounterWindow=Ext.create("App.view.patient.windows.NewEncounter"),a("access_encounter_checkout")&&(me.checkoutWindow=Ext.create("App.view.patient.windows.EncounterCheckOut")),me.layout={type:"border",padding:3},me.defaults={split:!0},me.items=[me.Header,me.navColumn,me.MainPanel,me.Footer],me.listeners={scope:me,render:me.appRender,beforerender:me.beforeAppRender},me.callParent(arguments),me.signature=Ext.create("App.view.signature.SignatureWindow")},getController:function(a){return App.Current.getController(a)},onFacilitySelect:function(a,b){var c=this;Facilities.setFacility(b[0].data.option_value,function(a,d){b[0].data.option_value==d.result&&(app.user.facility=b[0].data.option_value,c.msg(_("sweet"),_("facility")+" "+b[0].data.option_name),c.setWindowTitle(b[0].data.option_name),c.nav.App_view_areas_PatientPoolDropZone.reRenderPoolAreas(),c.nav.App_view_areas_FloorPlan.renderZones(),c.getPatientsInPoolArea())})},onFacilityComboLoad:function(a){var b=a.findRecord("option_value",this.user.facility);this.FacilityCmb.setValue(b),this.setWindowTitle(b.data.option_name)},setWindowTitle:function(a){window.document.title="GaiaEHR :: "+a},AuditLog:function(a){var b=Ext.create("App.model.administration.AuditLog",{eid:this.patient.eid,patient_id:this.patient.pid,event:a}).save({callback:function(){delete b}})},onMedicalWin:function(a){this.MedicalWindow.show(),this.MedicalWindow.cardSwitch(a)},onChartsWin:function(){this.ChartsWindow.show()},onNewDocumentsWin:function(a){this.PatientOrdersWindow.eid=this.patient.eid,this.PatientOrdersWindow.pid=this.patient.pid,this.PatientOrdersWindow.show(),this.PatientOrdersWindow.cardSwitch(a)},onWebCamComplete:function(){var a=this.getActivePanel();"panelSummary"==a.id&&a.demographics.completePhotoId(),this.msg("Sweet!",_("patient_image_saved"))},onPatientLog:function(){this.patientArrivalLog?this.patientArrivalLog.show():this.patientArrivalLog=Ext.create("App.view.patient.windows.ArrivalLog").show()},onPaymentEntryWindow:function(){this.PaymentEntryWindow.show()},newPatient:function(){this.nav.navigateTo("App.view.patient.NewPatient")},createEmergency:function(){var a,b=this;Ext.Msg.show({title:_("wait")+"!!!",msg:_("are_you_sure_you_want_to_create_a_new")+' <span style="color: red">"'+_("emergency")+'"</span>?',buttons:Ext.Msg.YESNO,icon:Ext.Msg.WARNING,fn:function(c){"yes"==c&&Emergency.createNewEmergency(function(c,d){a=d.result.emergency,d.result.success&&(b.setPatient(a.pid,a.eid,function(){b.openEncounter(a.eid)}),b.msg("Sweet!",a.name+" "+_("created")))})}})},onEmergencyAccessClick:function(){var a=this;Ext.Msg.show({title:_("wait"),msg:_("emergency_access_question")+"<br>"+_("emergency_access_disclaimer"),buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(b){"yes"==b&&a.doEmergencyAccess()}})},doEmergencyAccess:function(){ACL.emergencyAccess(app.user.id,function(a){return a?void(window.location="./"):void Ext.Msg.alert(_("oops"),_("emergency_access_error"))})},createNewEncounter:function(){var b=this;a("access_encounters")&&a("add_encounters")?b.newEncounterWindow.show():b.accessDenied()},updateEncounter:function(b){var c=this;a("access_encounters")&&a("edit_encounters")?(c.newEncounterWindow.loadRecord(b),c.newEncounterWindow.show()):c.accessDenied()},openPatientSummary:function(){var a=this,b=a.nav.getNavRefByClass("App.view.patient.Summary"),c=a.nav[b];c&&c==a.nav.activePanel&&c.loadPatient(),a.nav.navigateTo("App.view.patient.Summary")},openDashboard:function(){var a=this,b=a.nav.getNavRefByClass("App.view.dashboard.Dashboard"),c=a.nav[b];c&&c==a.nav.activePanel&&c.loadPatient(),a.nav.navigateTo("App.view.dashboard.Dashboard")},openCalendar:function(){var a=this,b=a.nav.getNavRefByClass("App.view.calendar.Calendar"),c=a.nav[b];c&&c==a.nav.activePanel&&c.loadPatient(),a.nav.navigateTo("App.view.calendar.Calendar")},stowPatientRecord:function(){this.unsetPatient(null,!0),this.nav.navigateTo("App.view.dashboard.Dashboard")},openEncounter:function(b){var c=this;a("access_encounters")?(app.patient.eid=b,c.nav.navigateTo("App.view.patient.Encounter",function(a){a&&Ext.Function.defer(function(){c.nav.getPanelByCls("App.view.patient.Encounter").openEncounter(b)},100)})):c.accessDenied()},checkOutPatient:function(){var a=this;this.nav.navigateTo("App.view.patient.VisitCheckout",function(b){b&&Ext.Function.defer(function(){a.nav.getPanelByCls("App.view.patient.VisitCheckout").setVisitPanel()},100)})},openPatientVisits:function(){this.nav.navigateTo("App.view.patient.Visits")},goToPoolAreas:function(){this.nav.navigateTo("App.view.areas.PatientPoolDropZone")},goToFloorPlans:function(){this.nav.navigateTo("App.view.areas.FloorPlan")},getActivePanel:function(){return this.MainPanel.getLayout().getActiveItem()},liveSearchSelect:function(a,b){var c=this,d=b[0];d&&c.setPatient(d.get("pid"),null,function(){a.reset(),c.openPatientSummary()})},setEncounterClose:function(a){this.patient.encounterIsClose=a;for(var b=Ext.ComponentQuery.query("#encounterRecordAdd, button[action=encounterRecordAdd]"),c=0;c<b.length;c++)b[c].setDisabled(a||null==app.patient.eid)},setPatient:function(a,b,c){var d=this;d.unsetPatient(null,!0),Patient.getPatientSetDataByPid({pid:a,prevPid:d.patient.pid},function(a,e){function f(a){d.patient={pid:i.patient.pid,name:i.patient.name,pic:i.patient.pic,sex:i.patient.sex,dob:Ext.Date.parse(i.patient.dob,"Y-m-d H:i:s"),age:i.patient.age,eid:b,priority:i.patient.priority,readOnly:a,rating:i.patient.rating},d.fireEvent("patientset",d.patient);for(var e=d.MainPanel.items.items,f=0;f<e.length;f++)e[f].pageRankingDiv&&e[f].pageRankingDiv.setValue(d.patient.rating);d.patientButtonSet(d.patient),d.patientSummaryBtn&&d.patientSummaryBtn.enable(),d.patientOpenVisitsBtn&&d.patientOpenVisitsBtn.enable(),d.patientCreateEncounterBtn&&d.patientCreateEncounterBtn.enable(),d.patientCloseCurrEncounterBtn&&d.patientCloseCurrEncounterBtn.enable(),d.patientCheckOutBtn&&d.patientCheckOutBtn.enable(),"function"==typeof c&&c(d.patient)}var g,h,i=e.result;i.readOnly?(g=i.user+" "+_("is_currently_working_with")+' "'+i.patient.name+'" '+_("in")+' "'+i.area+'" '+_("area")+".<br>"+_("override_read_mode_will_remove_the_patient_from_previous_user")+".<br>"+_("do_you_would_like_to_override_read_mode"),h=i.user+" "+_("is_currently_working_with")+' "'+i.patient.name+'" '+_("in")+' "'+i.area+'" '+_("area")+".<br>",Ext.Msg.show({title:_("wait")+"!!!",msg:i.overrideReadOnly?g:h,buttons:i.overrideReadOnly?Ext.Msg.YESNO:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,fn:function(a){f("yes"!=a)}})):f(!1)})},unsetPatient:function(a,b){var c=this;if(b&&Patient.unsetPatient(c.patient.pid),c.currEncounterId=null,c.patient={pid:null,name:null,pic:null,sex:null,dob:null,age:null,eid:null,priority:null,readOnly:!1,rating:null},c.patientButtonRemoveCls(),"function"==typeof a)a(!0);else{c.fireEvent("patientunset");for(var d=c.MainPanel.items.items,e=0;e<d.length;e++)d[e].pageRankingDiv&&d[e].pageRankingDiv.setValue(0);c.patientCreateEncounterBtn&&c.patientCreateEncounterBtn.disable(),c.patientSummaryBtn&&c.patientSummaryBtn.disable(),c.patientOpenVisitsBtn&&c.patientOpenVisitsBtn.disable(),c.patientCloseCurrEncounterBtn&&c.patientCloseCurrEncounterBtn.disable(),c.patientChargeBtn&&c.patientChargeBtn.disable(),c.patientCheckOutBtn&&c.patientCheckOutBtn.disable(),c.patientButtonSet()}},patientButtonSet:function(a){var b=this,c=a||{};b.patientBtn.update({pid:c.pid||"record number",pic:c.pic||b.patientImage,name:c.name||_("no_patient_selected")}),b.patientButtonRemoveCls(),c.priority&&b.patientBtn.addCls(a.priority),b.patientBtn.setDisabled(!c.pid)},patientButtonRemoveCls:function(){var a=this;a.patientBtn.removeCls("Minimal"),a.patientBtn.removeCls("Delayed"),a.patientBtn.removeCls("Immediate"),a.patientBtn.removeCls("Expectant"),a.patientBtn.removeCls("Deceased")},patientBtnTpl:function(){return Ext.create("Ext.XTemplate",'<div class="patient_btn  {priority}">','   <div class="patient_btn_img">       <img src="{pic}" width="50" height="50">   </div>','   <div class="patient_btn_info">','       <div class="patient_btn_name">{name}</div>','       <div class="patient_btn_record">( {pid} )</div>',"   </div>","</div>")},patientBtnRender:function(a){this.patientButtonSet(),this.initializePatientPoolDragZone(a)},getPatientsInPoolArea:function(){var a=this,b=a.patientPoolArea,c=35;this.patientPoolStore.load({extraPrams:{uid:a.user.id},callback:function(d){if(d.length>=1)for(var e=0;e<d.length;e++)c+=45;else c=25;a.navColumn.collapsed!==!1||a.navColumn.isCollapsingOrExpanding||(c=c>300?300:c,b.down("dataview").refresh(),b.setHeight(c))}}),a.nav.App_view_areas_PatientPoolDropZone.isVisible()&&a.nav.App_view_areas_PatientPoolDropZone.reloadStores()},initializePatientPoolDragZone:function(a){a.dragZone=Ext.create("Ext.dd.DragZone",a.getEl(),{ddGroup:"patientPoolAreas",getDragData:function(){if(app.patient.pid){var b,c=a.getEl().dom;if(c)return b=document.createElement("div"),b.id=Ext.id(),b.innerHTML=_("drag_patient_to_new_area"),a.dragData={copy:!0,sourceEl:c,repairXY:Ext.fly(c).getXY(),ddel:b,records:[a.data],patient:!0}}},getRepairXY:function(){return this.dragData.repairXY},onBeforeDrag:function(){return app.nav.navigateTo("App.view.areas.PatientPoolDropZone"),!0}})},onEncounterDragZoneRender:function(a){this.initializeOpenEncounterDragZone(a),this.enablePoolAreaFadeInOut&&(a.el.setStyle({opacity:.1}),a.el.on("mouseenter",function(a,b){Ext.create("Ext.fx.Animator",{target:b,duration:200,keyframes:{0:{opacity:.1},100:{opacity:1}}})}),a.el.on("mouseleave",function(a,b){Ext.create("Ext.fx.Animator",{target:b,duration:200,keyframes:{0:{opacity:1},100:{opacity:.1}}})}))},initializeOpenEncounterDragZone:function(a){a.dragZone=Ext.create("Ext.dd.DragZone",a.getEl(),{ddGroup:"patient",newGroupReset:!0,b4MouseDown:function(b){if(this.newGroupReset){var c=b.getTarget(a.itemSelector,10),d=a.getRecord(c).data;this.removeFromGroup(this.ddGroup),0!=d.floorPlanId&&0==d.patientZoneId?(app.nav.navigateTo("App.view.areas.FloorPlan"),this.ddGroup="patientPoolAreas"):(this.ddGroup="patient",app.MainPanel.el.mask(_("drop_here_to_open")+' <strong>"'+a.getRecord(c).data.name+'"</strong> '+_("current_encounter"))),this.addToGroup(this.ddGroup),this.newGroupReset=!1}this.autoOffset(b.getPageX(),b.getPageY())},endDrag:function(){this.newGroupReset=!0},getDragData:function(b){var c,d=b.getTarget(a.itemSelector,10),e=a.getRecord(d).data;return d?(c=d.cloneNode(!0),c.id=Ext.id(),a.dragData={sourceEl:d,repairXY:Ext.fly(d).getXY(),ddel:c,patientData:e}):!1},getRepairXY:function(){return app.MainPanel.el.unmask(),this.newGroupReset=!0,this.dragData.repairXY}})},onDocumentView:function(a,b){var c,d=Ext.ComponentQuery.query("documentviewerwindow"),e="dataProvider/DocumentViewer.php?site="+site+"&id="+a+"&token="+app.user.token;if("undefined"!=typeof b&&(e+="&temp="+b),c=Ext.create("App.view.patient.windows.DocumentViewer",{documentType:b,documentId:a,items:[{xtype:"miframe",autoMask:!1,src:e}]}),d.length>0){for(var f=d[d.length-1],g=0;g<d.length;g++)d[g].toFront();c.showAt(f.x+25,f.y+5)}else c.show()},initializeOpenEncounterDropZone:function(b){var c=this;b.dropZone=Ext.create("Ext.dd.DropZone",b.getEl(),{ddGroup:"patient",notifyOver:function(){return Ext.dd.DropZone.prototype.dropAllowed},notifyDrop:function(b,d,e){app.MainPanel.el.unmask(),e.patientData.eid&&"Check Out"==e.patientData.poolArea||e.patientData.eid&&a("access_encounters")||null==e.patientData.floorPlanId||0==e.patientData.floorPlanId,c.setPatient(e.patientData.pid,e.patientData.eid,function(){e.patientData.eid&&"Checkout"==e.patientData.poolArea?c.checkOutPatient(e.patientData.eid):e.patientData.eid&&a("access_encounters")?c.openEncounter(e.patientData.eid):c.openPatientSummary()})}})},appRender:function(){this.loadModules()},loadModules:function(){Modules.getEnabledModules(function(a,b){for(var c=b.result,d=0;d<c.length;d++)try{App.app.getController("Modules."+c[d].dir+".Main")}catch(e){app.msg(_("oops"),_("unable_to_load_module")+" "+c[d].title+"<br>Error: "+e,!0)}app.doLayout()})},removeAppMask:function(){Ext.get("mainapp-loading")&&Ext.get("mainapp-loading").remove(),Ext.get("mainapp-loading-mask")&&Ext.get("mainapp-loading-mask").fadeOut({remove:!0})},beforeAppRender:function(){var a=this,b=a.nav.getUrlParams();b[1]?a.setPatient(b[1],null,function(){Ext.Function.defer(function(){a.nav.navigateTo("App.view.patient.Summary")},500)}):a.unsetPatient(null,!1)},getCurrPatient:function(){return this.patient.pid},getApp:function(){return this},accessDenied:function(){Ext.Msg.show({title:"Oops!",msg:_("access_denied"),buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},msg:function(a,b,c,d){var e=c===!0?"msg-red":"msg-green";"string"==typeof c&&(e="msg-"+c),this.msgCt=Ext.get("msg-div"),this.msgCt||(this.msgCt=Ext.fly("msg-div"));var f=Ext.String.format.apply(String,Array.prototype.slice.call(arguments,1)),g=Ext.core.DomHelper.append(this.msgCt,{html:'<div class="flyMsg '+e+'"><h3>'+(a||"")+"</h3><p>"+f+"</p></div>"},!0);return this.msgCt.alignTo(document,"t-t"),d===!0?g:(g.addCls("fadeded"),Ext.create("Ext.fx.Animator",{target:g,duration:c===!0?8e3:3e3,keyframes:{0:{opacity:0},10:{opacity:1},80:{opacity:1},100:{opacity:0,height:0}},listeners:{afteranimate:function(a){a.target.target.destroy()}}}),g.on("click",function(){g.applyStyles("visibility:hidden; display:none")}),!0)},alert:function(a,b){b="error"==b?Ext.Msg.ERROR:"warning"==b?Ext.Msg.WARNING:"question"==b?Ext.Msg.QUESTION:Ext.Msg.INFO,Ext.Msg.show({msg:a,buttons:Ext.Msg.OK,icon:b,maxWidth:1200,modal:!1})},resetApp:function(){Ext.Msg.show({title:"WAIT!!! FOR DEBUG ONLY",msg:"This will erase all patients and related data. Do you want to continue?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(a){"yes"==a&&Ext.Ajax.request({url:"sql/factoryReset.php",success:function(a){alert(a.responseText)}})}})}});